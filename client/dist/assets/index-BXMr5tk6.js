function Ox(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function Ax(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hf={exports:{}},Bl={},qf={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=Symbol.for("react.element"),$x=Symbol.for("react.portal"),Ix=Symbol.for("react.fragment"),Bx=Symbol.for("react.strict_mode"),Fx=Symbol.for("react.profiler"),Ux=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Vx=Symbol.for("react.forward_ref"),Wx=Symbol.for("react.suspense"),Hx=Symbol.for("react.memo"),qx=Symbol.for("react.lazy"),iu=Symbol.iterator;function Kx(t){return t===null||typeof t!="object"?null:(t=iu&&t[iu]||t["@@iterator"],typeof t=="function"?t:null)}var Kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xf=Object.assign,Yf={};function Un(t,e,s){this.props=t,this.context=e,this.refs=Yf,this.updater=s||Kf}Un.prototype.isReactComponent={};Un.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Un.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qf(){}Qf.prototype=Un.prototype;function Mc(t,e,s){this.props=t,this.context=e,this.refs=Yf,this.updater=s||Kf}var zc=Mc.prototype=new Qf;zc.constructor=Mc;Xf(zc,Un.prototype);zc.isPureReactComponent=!0;var lu=Array.isArray,Jf=Object.prototype.hasOwnProperty,Rc={current:null},Gf={key:!0,ref:!0,__self:!0,__source:!0};function Zf(t,e,s){var n,i={},l=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(l=""+e.key),e)Jf.call(e,n)&&!Gf.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Zr,type:t,key:l,ref:a,props:i,_owner:Rc.current}}function Xx(t,e){return{$$typeof:Zr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Oc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zr}function Yx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var au=/\/+/g;function pa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yx(""+t.key):e.toString(36)}function Ui(t,e,s,n,i){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zr:case $x:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+pa(a,0):n,lu(i)?(s="",t!=null&&(s=t.replace(au,"$&/")+"/"),Ui(i,e,s,"",function(d){return d})):i!=null&&(Oc(i)&&(i=Xx(i,s+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(au,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",lu(t))for(var o=0;o<t.length;o++){l=t[o];var c=n+pa(l,o);a+=Ui(l,e,s,c,i)}else if(c=Kx(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=n+pa(l,o++),a+=Ui(l,e,s,c,i);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ui(t,e,s){if(t==null)return t;var n=[],i=0;return Ui(t,n,"","",function(l){return e.call(s,l,i++)}),n}function Qx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Di={transition:null},Jx={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Di,ReactCurrentOwner:Rc};function em(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:ui,forEach:function(t,e,s){ui(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return ui(t,function(){e++}),e},toArray:function(t){return ui(t,function(e){return e})||[]},only:function(t){if(!Oc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=Un;J.Fragment=Ix;J.Profiler=Fx;J.PureComponent=Mc;J.StrictMode=Bx;J.Suspense=Wx;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;J.act=em;J.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Xf({},t.props),i=t.key,l=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,a=Rc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Jf.call(e,c)&&!Gf.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Zr,type:t.type,key:i,ref:l,props:n,_owner:a}};J.createContext=function(t){return t={$$typeof:Dx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ux,_context:t},t.Consumer=t};J.createElement=Zf;J.createFactory=function(t){var e=Zf.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:Vx,render:t}};J.isValidElement=Oc;J.lazy=function(t){return{$$typeof:qx,_payload:{_status:-1,_result:t},_init:Qx}};J.memo=function(t,e){return{$$typeof:Hx,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Di.transition;Di.transition={};try{t()}finally{Di.transition=e}};J.unstable_act=em;J.useCallback=function(t,e){return De.current.useCallback(t,e)};J.useContext=function(t){return De.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return De.current.useDeferredValue(t)};J.useEffect=function(t,e){return De.current.useEffect(t,e)};J.useId=function(){return De.current.useId()};J.useImperativeHandle=function(t,e,s){return De.current.useImperativeHandle(t,e,s)};J.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return De.current.useMemo(t,e)};J.useReducer=function(t,e,s){return De.current.useReducer(t,e,s)};J.useRef=function(t){return De.current.useRef(t)};J.useState=function(t){return De.current.useState(t)};J.useSyncExternalStore=function(t,e,s){return De.current.useSyncExternalStore(t,e,s)};J.useTransition=function(){return De.current.useTransition()};J.version="18.3.1";qf.exports=J;var N=qf.exports;const tm=Ax(N),Gx=Ox({__proto__:null,default:tm},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=N,eg=Symbol.for("react.element"),tg=Symbol.for("react.fragment"),sg=Object.prototype.hasOwnProperty,ng=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rg={key:!0,ref:!0,__self:!0,__source:!0};function sm(t,e,s){var n,i={},l=null,a=null;s!==void 0&&(l=""+s),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)sg.call(e,n)&&!rg.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:eg,type:t,key:l,ref:a,props:i,_owner:ng.current}}Bl.Fragment=tg;Bl.jsx=sm;Bl.jsxs=sm;Hf.exports=Bl;var r=Hf.exports,xo={},nm={exports:{}},rt={},rm={exports:{}},im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,V){var L=B.length;B.push(V);e:for(;0<L;){var F=L-1>>>1,H=B[F];if(0<i(H,V))B[F]=V,B[L]=H,L=F;else break e}}function s(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var V=B[0],L=B.pop();if(L!==V){B[0]=L;e:for(var F=0,H=B.length,Q=H>>>1;F<Q;){var W=2*(F+1)-1,K=B[W],Ce=W+1,Ge=B[Ce];if(0>i(K,L))Ce<H&&0>i(Ge,K)?(B[F]=Ge,B[Ce]=L,F=Ce):(B[F]=K,B[W]=L,F=W);else if(Ce<H&&0>i(Ge,L))B[F]=Ge,B[Ce]=L,F=Ce;else break e}}return V}function i(B,V){var L=B.sortIndex-V.sortIndex;return L!==0?L:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],d=[],u=1,h=null,f=3,y=!1,m=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var V=s(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=B)n(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=s(d)}}function j(B){if(x=!1,v(B),!m)if(s(c)!==null)m=!0,U(k);else{var V=s(d);V!==null&&ae(j,V.startTime-B)}}function k(B,V){m=!1,x&&(x=!1,p(C),C=-1),y=!0;var L=f;try{for(v(V),h=s(c);h!==null&&(!(h.expirationTime>V)||B&&!R());){var F=h.callback;if(typeof F=="function"){h.callback=null,f=h.priorityLevel;var H=F(h.expirationTime<=V);V=t.unstable_now(),typeof H=="function"?h.callback=H:h===s(c)&&n(c),v(V)}else n(c);h=s(c)}if(h!==null)var Q=!0;else{var W=s(d);W!==null&&ae(j,W.startTime-V),Q=!1}return Q}finally{h=null,f=L,y=!1}}var S=!1,w=null,C=-1,T=5,M=-1;function R(){return!(t.unstable_now()-M<T)}function E(){if(w!==null){var B=t.unstable_now();M=B;var V=!0;try{V=w(!0,B)}finally{V?_():(S=!1,w=null)}}else S=!1}var _;if(typeof g=="function")_=function(){g(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,I=O.port2;O.port1.onmessage=E,_=function(){I.postMessage(null)}}else _=function(){b(E,0)};function U(B){w=B,S||(S=!0,_())}function ae(B,V){C=b(function(){B(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){m||y||(m=!0,U(k))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var L=f;f=V;try{return B()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=f;f=B;try{return V()}finally{f=L}},t.unstable_scheduleCallback=function(B,V,L){var F=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?F+L:F):L=F,B){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=L+H,B={id:u++,callback:V,priorityLevel:B,startTime:L,expirationTime:H,sortIndex:-1},L>F?(B.sortIndex=L,e(d,B),s(c)===null&&B===s(d)&&(x?(p(C),C=-1):x=!0,ae(j,L-F))):(B.sortIndex=H,e(c,B),m||y||(m=!0,U(k))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var V=f;return function(){var L=f;f=V;try{return B.apply(this,arguments)}finally{f=L}}}})(im);rm.exports=im;var ig=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg=N,nt=ig;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lm=new Set,Sr={};function Zs(t,e){Tn(t,e),Tn(t+"Capture",e)}function Tn(t,e){for(Sr[t]=e,t=0;t<e.length;t++)lm.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),go=Object.prototype.hasOwnProperty,ag=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ou={},cu={};function og(t){return go.call(cu,t)?!0:go.call(ou,t)?!1:ag.test(t)?cu[t]=!0:(ou[t]=!0,!1)}function cg(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dg(t,e,s,n){if(e===null||typeof e>"u"||cg(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,s,n,i,l,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=a}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ac=/[\-:]([a-z])/g;function $c(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ac,$c);Le[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ac,$c);Le[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ac,$c);Le[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ic(t,e,s,n){var i=Le.hasOwnProperty(e)?Le[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dg(e,s,i,n)&&(s=null),n||i===null?og(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Xt=lg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hi=Symbol.for("react.element"),cn=Symbol.for("react.portal"),dn=Symbol.for("react.fragment"),Bc=Symbol.for("react.strict_mode"),yo=Symbol.for("react.profiler"),am=Symbol.for("react.provider"),om=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),vo=Symbol.for("react.suspense"),bo=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),cm=Symbol.for("react.offscreen"),du=Symbol.iterator;function Qn(t){return t===null||typeof t!="object"?null:(t=du&&t[du]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,xa;function ar(t){if(xa===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);xa=e&&e[1]||""}return`
`+xa+t}var ga=!1;function ya(t,e){if(!t||ga)return"";ga=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),l=n.stack.split(`
`),a=i.length-1,o=l.length-1;1<=a&&0<=o&&i[a]!==l[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==l[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==l[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{ga=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?ar(t):""}function ug(t){switch(t.tag){case 5:return ar(t.type);case 16:return ar("Lazy");case 13:return ar("Suspense");case 19:return ar("SuspenseList");case 0:case 2:case 15:return t=ya(t.type,!1),t;case 11:return t=ya(t.type.render,!1),t;case 1:return t=ya(t.type,!0),t;default:return""}}function No(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dn:return"Fragment";case cn:return"Portal";case yo:return"Profiler";case Bc:return"StrictMode";case vo:return"Suspense";case bo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case om:return(t.displayName||"Context")+".Consumer";case am:return(t._context.displayName||"Context")+".Provider";case Fc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uc:return e=t.displayName||null,e!==null?e:No(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return No(t(e))}catch{}}return null}function hg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return No(e);case 8:return e===Bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fg(t){var e=dm(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,l=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,l.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fi(t){t._valueTracker||(t._valueTracker=fg(t))}function um(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=dm(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wo(t,e){var s=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function uu(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=vs(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hm(t,e){e=e.checked,e!=null&&Ic(t,"checked",e,!1)}function jo(t,e){hm(t,e);var s=vs(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ko(t,e.type,s):e.hasOwnProperty("defaultValue")&&ko(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hu(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function ko(t,e,s){(e!=="number"||al(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var or=Array.isArray;function jn(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+vs(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function So(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fu(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error($(92));if(or(s)){if(1<s.length)throw Error($(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:vs(s)}}function fm(t,e){var s=vs(e.value),n=vs(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function mu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mi,pm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mi=mi||document.createElement("div"),mi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cr(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mg=["Webkit","ms","Moz","O"];Object.keys(hr).forEach(function(t){mg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hr[e]=hr[t]})});function xm(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||hr.hasOwnProperty(t)&&hr[t]?(""+e).trim():e+"px"}function gm(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=xm(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var pg=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eo(t,e){if(e){if(pg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function _o(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Po=null;function Dc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var To=null,kn=null,Sn=null;function pu(t){if(t=si(t)){if(typeof To!="function")throw Error($(280));var e=t.stateNode;e&&(e=Wl(e),To(t.stateNode,t.type,e))}}function ym(t){kn?Sn?Sn.push(t):Sn=[t]:kn=t}function vm(){if(kn){var t=kn,e=Sn;if(Sn=kn=null,pu(t),e)for(t=0;t<e.length;t++)pu(e[t])}}function bm(t,e){return t(e)}function Nm(){}var va=!1;function wm(t,e,s){if(va)return t(e,s);va=!0;try{return bm(t,e,s)}finally{va=!1,(kn!==null||Sn!==null)&&(Nm(),vm())}}function Er(t,e){var s=t.stateNode;if(s===null)return null;var n=Wl(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error($(231,e,typeof s));return s}var Lo=!1;if(Wt)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{Lo=!1}function xg(t,e,s,n,i,l,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var fr=!1,ol=null,cl=!1,Mo=null,gg={onError:function(t){fr=!0,ol=t}};function yg(t,e,s,n,i,l,a,o,c){fr=!1,ol=null,xg.apply(gg,arguments)}function vg(t,e,s,n,i,l,a,o,c){if(yg.apply(this,arguments),fr){if(fr){var d=ol;fr=!1,ol=null}else throw Error($(198));cl||(cl=!0,Mo=d)}}function en(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function jm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xu(t){if(en(t)!==t)throw Error($(188))}function bg(t){var e=t.alternate;if(!e){if(e=en(t),e===null)throw Error($(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===s)return xu(i),t;if(l===n)return xu(i),e;l=l.sibling}throw Error($(188))}if(s.return!==n.return)s=i,n=l;else{for(var a=!1,o=i.child;o;){if(o===s){a=!0,s=i,n=l;break}if(o===n){a=!0,n=i,s=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===s){a=!0,s=l,n=i;break}if(o===n){a=!0,n=l,s=i;break}o=o.sibling}if(!a)throw Error($(189))}}if(s.alternate!==n)throw Error($(190))}if(s.tag!==3)throw Error($(188));return s.stateNode.current===s?t:e}function km(t){return t=bg(t),t!==null?Sm(t):null}function Sm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sm(t);if(e!==null)return e;t=t.sibling}return null}var Cm=nt.unstable_scheduleCallback,gu=nt.unstable_cancelCallback,Ng=nt.unstable_shouldYield,wg=nt.unstable_requestPaint,pe=nt.unstable_now,jg=nt.unstable_getCurrentPriorityLevel,Vc=nt.unstable_ImmediatePriority,Em=nt.unstable_UserBlockingPriority,dl=nt.unstable_NormalPriority,kg=nt.unstable_LowPriority,_m=nt.unstable_IdlePriority,Fl=null,Mt=null;function Sg(t){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Fl,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:_g,Cg=Math.log,Eg=Math.LN2;function _g(t){return t>>>=0,t===0?32:31-(Cg(t)/Eg|0)|0}var pi=64,xi=4194304;function cr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ul(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,l=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~i;o!==0?n=cr(o):(l&=a,l!==0&&(n=cr(l)))}else a=s&~i,a!==0?n=cr(a):l!==0&&(n=cr(l));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,l=e&-e,i>=l||i===16&&(l&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-vt(e),i=1<<s,n|=t[s],e&=~i;return n}function Pg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tg(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,l=t.pendingLanes;0<l;){var a=31-vt(l),o=1<<a,c=i[a];c===-1?(!(o&s)||o&n)&&(i[a]=Pg(o,e)):c<=e&&(t.expiredLanes|=o),l&=~o}}function zo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pm(){var t=pi;return pi<<=1,!(pi&4194240)&&(pi=64),t}function ba(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function ei(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=s}function Lg(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-vt(s),l=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~l}}function Wc(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-vt(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var ee=0;function Tm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lm,Hc,Mm,zm,Rm,Ro=!1,gi=[],os=null,cs=null,ds=null,_r=new Map,Pr=new Map,ss=[],Mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":_r.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(e.pointerId)}}function Gn(t,e,s,n,i,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[i]},e!==null&&(e=si(e),e!==null&&Hc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zg(t,e,s,n,i){switch(e){case"focusin":return os=Gn(os,t,e,s,n,i),!0;case"dragenter":return cs=Gn(cs,t,e,s,n,i),!0;case"mouseover":return ds=Gn(ds,t,e,s,n,i),!0;case"pointerover":var l=i.pointerId;return _r.set(l,Gn(_r.get(l)||null,t,e,s,n,i)),!0;case"gotpointercapture":return l=i.pointerId,Pr.set(l,Gn(Pr.get(l)||null,t,e,s,n,i)),!0}return!1}function Om(t){var e=Ms(t.target);if(e!==null){var s=en(e);if(s!==null){if(e=s.tag,e===13){if(e=jm(s),e!==null){t.blockedOn=e,Rm(t.priority,function(){Mm(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Oo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Po=n,s.target.dispatchEvent(n),Po=null}else return e=si(s),e!==null&&Hc(e),t.blockedOn=s,!1;e.shift()}return!0}function vu(t,e,s){Vi(t)&&s.delete(e)}function Rg(){Ro=!1,os!==null&&Vi(os)&&(os=null),cs!==null&&Vi(cs)&&(cs=null),ds!==null&&Vi(ds)&&(ds=null),_r.forEach(vu),Pr.forEach(vu)}function Zn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ro||(Ro=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Rg)))}function Tr(t){function e(i){return Zn(i,t)}if(0<gi.length){Zn(gi[0],t);for(var s=1;s<gi.length;s++){var n=gi[s];n.blockedOn===t&&(n.blockedOn=null)}}for(os!==null&&Zn(os,t),cs!==null&&Zn(cs,t),ds!==null&&Zn(ds,t),_r.forEach(e),Pr.forEach(e),s=0;s<ss.length;s++)n=ss[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<ss.length&&(s=ss[0],s.blockedOn===null);)Om(s),s.blockedOn===null&&ss.shift()}var Cn=Xt.ReactCurrentBatchConfig,hl=!0;function Og(t,e,s,n){var i=ee,l=Cn.transition;Cn.transition=null;try{ee=1,qc(t,e,s,n)}finally{ee=i,Cn.transition=l}}function Ag(t,e,s,n){var i=ee,l=Cn.transition;Cn.transition=null;try{ee=4,qc(t,e,s,n)}finally{ee=i,Cn.transition=l}}function qc(t,e,s,n){if(hl){var i=Oo(t,e,s,n);if(i===null)Ta(t,e,n,fl,s),yu(t,n);else if(zg(i,t,e,s,n))n.stopPropagation();else if(yu(t,n),e&4&&-1<Mg.indexOf(t)){for(;i!==null;){var l=si(i);if(l!==null&&Lm(l),l=Oo(t,e,s,n),l===null&&Ta(t,e,n,fl,s),l===i)break;i=l}i!==null&&n.stopPropagation()}else Ta(t,e,n,null,s)}}var fl=null;function Oo(t,e,s,n){if(fl=null,t=Dc(n),t=Ms(t),t!==null)if(e=en(t),e===null)t=null;else if(s=e.tag,s===13){if(t=jm(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fl=t,null}function Am(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jg()){case Vc:return 1;case Em:return 4;case dl:case kg:return 16;case _m:return 536870912;default:return 16}default:return 16}}var rs=null,Kc=null,Wi=null;function $m(){if(Wi)return Wi;var t,e=Kc,s=e.length,n,i="value"in rs?rs.value:rs.textContent,l=i.length;for(t=0;t<s&&e[t]===i[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===i[l-n];n++);return Wi=i.slice(t,1<n?1-n:void 0)}function Hi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yi(){return!0}function bu(){return!1}function it(t){function e(s,n,i,l,a){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?yi:bu,this.isPropagationStopped=bu,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),e}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=it(Dn),ti=fe({},Dn,{view:0,detail:0}),$g=it(ti),Na,wa,er,Ul=fe({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==er&&(er&&t.type==="mousemove"?(Na=t.screenX-er.screenX,wa=t.screenY-er.screenY):wa=Na=0,er=t),Na)},movementY:function(t){return"movementY"in t?t.movementY:wa}}),Nu=it(Ul),Ig=fe({},Ul,{dataTransfer:0}),Bg=it(Ig),Fg=fe({},ti,{relatedTarget:0}),ja=it(Fg),Ug=fe({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dg=it(Ug),Vg=fe({},Dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wg=it(Vg),Hg=fe({},Dn,{data:0}),wu=it(Hg),qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xg[t])?!!e[t]:!1}function Yc(){return Yg}var Qg=fe({},ti,{key:function(t){if(t.key){var e=qg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(t){return t.type==="keypress"?Hi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jg=it(Qg),Gg=fe({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=it(Gg),Zg=fe({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),ey=it(Zg),ty=fe({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),sy=it(ty),ny=fe({},Ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ry=it(ny),iy=[9,13,27,32],Qc=Wt&&"CompositionEvent"in window,mr=null;Wt&&"documentMode"in document&&(mr=document.documentMode);var ly=Wt&&"TextEvent"in window&&!mr,Im=Wt&&(!Qc||mr&&8<mr&&11>=mr),ku=" ",Su=!1;function Bm(t,e){switch(t){case"keyup":return iy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var un=!1;function ay(t,e){switch(t){case"compositionend":return Fm(e);case"keypress":return e.which!==32?null:(Su=!0,ku);case"textInput":return t=e.data,t===ku&&Su?null:t;default:return null}}function oy(t,e){if(un)return t==="compositionend"||!Qc&&Bm(t,e)?(t=$m(),Wi=Kc=rs=null,un=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Im&&e.locale!=="ko"?null:e.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cy[t.type]:e==="textarea"}function Um(t,e,s,n){ym(n),e=ml(e,"onChange"),0<e.length&&(s=new Xc("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var pr=null,Lr=null;function dy(t){Gm(t,0)}function Dl(t){var e=mn(t);if(um(e))return t}function uy(t,e){if(t==="change")return e}var Dm=!1;if(Wt){var ka;if(Wt){var Sa="oninput"in document;if(!Sa){var Eu=document.createElement("div");Eu.setAttribute("oninput","return;"),Sa=typeof Eu.oninput=="function"}ka=Sa}else ka=!1;Dm=ka&&(!document.documentMode||9<document.documentMode)}function _u(){pr&&(pr.detachEvent("onpropertychange",Vm),Lr=pr=null)}function Vm(t){if(t.propertyName==="value"&&Dl(Lr)){var e=[];Um(e,Lr,t,Dc(t)),wm(dy,e)}}function hy(t,e,s){t==="focusin"?(_u(),pr=e,Lr=s,pr.attachEvent("onpropertychange",Vm)):t==="focusout"&&_u()}function fy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dl(Lr)}function my(t,e){if(t==="click")return Dl(e)}function py(t,e){if(t==="input"||t==="change")return Dl(e)}function xy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nt=typeof Object.is=="function"?Object.is:xy;function Mr(t,e){if(Nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!go.call(e,i)||!Nt(t[i],e[i]))return!1}return!0}function Pu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tu(t,e){var s=Pu(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Pu(s)}}function Wm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hm(){for(var t=window,e=al();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=al(t.document)}return e}function Jc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gy(t){var e=Hm(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Wm(s.ownerDocument.documentElement,s)){if(n!==null&&Jc(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,l=Math.min(n.start,i);n=n.end===void 0?l:Math.min(n.end,i),!t.extend&&l>n&&(i=n,n=l,l=i),i=Tu(s,l);var a=Tu(s,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),l>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yy=Wt&&"documentMode"in document&&11>=document.documentMode,hn=null,Ao=null,xr=null,$o=!1;function Lu(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;$o||hn==null||hn!==al(n)||(n=hn,"selectionStart"in n&&Jc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xr&&Mr(xr,n)||(xr=n,n=ml(Ao,"onSelect"),0<n.length&&(e=new Xc("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=hn)))}function vi(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var fn={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},Ca={},qm={};Wt&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function Vl(t){if(Ca[t])return Ca[t];if(!fn[t])return t;var e=fn[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in qm)return Ca[t]=e[s];return t}var Km=Vl("animationend"),Xm=Vl("animationiteration"),Ym=Vl("animationstart"),Qm=Vl("transitionend"),Jm=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(t,e){Jm.set(t,e),Zs(e,[t])}for(var Ea=0;Ea<Mu.length;Ea++){var _a=Mu[Ea],vy=_a.toLowerCase(),by=_a[0].toUpperCase()+_a.slice(1);ws(vy,"on"+by)}ws(Km,"onAnimationEnd");ws(Xm,"onAnimationIteration");ws(Ym,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws(Qm,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(dr));function zu(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,vg(n,e,void 0,t),t.currentTarget=null}function Gm(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var l=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&i.isPropagationStopped())break e;zu(i,o,d),l=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&i.isPropagationStopped())break e;zu(i,o,d),l=c}}}if(cl)throw t=Mo,cl=!1,Mo=null,t}function re(t,e){var s=e[Do];s===void 0&&(s=e[Do]=new Set);var n=t+"__bubble";s.has(n)||(Zm(e,t,2,!1),s.add(n))}function Pa(t,e,s){var n=0;e&&(n|=4),Zm(s,t,n,e)}var bi="_reactListening"+Math.random().toString(36).slice(2);function zr(t){if(!t[bi]){t[bi]=!0,lm.forEach(function(s){s!=="selectionchange"&&(Ny.has(s)||Pa(s,!1,t),Pa(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bi]||(e[bi]=!0,Pa("selectionchange",!1,e))}}function Zm(t,e,s,n){switch(Am(e)){case 1:var i=Og;break;case 4:i=Ag;break;default:i=qc}s=i.bind(null,e,s,t),i=void 0,!Lo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Ta(t,e,s,n,i){var l=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ms(o),a===null)return;if(c=a.tag,c===5||c===6){n=l=a;continue e}o=o.parentNode}}n=n.return}wm(function(){var d=l,u=Dc(s),h=[];e:{var f=Jm.get(t);if(f!==void 0){var y=Xc,m=t;switch(t){case"keypress":if(Hi(s)===0)break e;case"keydown":case"keyup":y=Jg;break;case"focusin":m="focus",y=ja;break;case"focusout":m="blur",y=ja;break;case"beforeblur":case"afterblur":y=ja;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Bg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ey;break;case Km:case Xm:case Ym:y=Dg;break;case Qm:y=sy;break;case"scroll":y=$g;break;case"wheel":y=ry;break;case"copy":case"cut":case"paste":y=Wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ju}var x=(e&4)!==0,b=!x&&t==="scroll",p=x?f!==null?f+"Capture":null:f;x=[];for(var g=d,v;g!==null;){v=g;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,p!==null&&(j=Er(g,p),j!=null&&x.push(Rr(g,j,v)))),b)break;g=g.return}0<x.length&&(f=new y(f,m,null,s,u),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&s!==Po&&(m=s.relatedTarget||s.fromElement)&&(Ms(m)||m[Ht]))break e;if((y||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,y?(m=s.relatedTarget||s.toElement,y=d,m=m?Ms(m):null,m!==null&&(b=en(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(y=null,m=d),y!==m)){if(x=Nu,j="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=ju,j="onPointerLeave",p="onPointerEnter",g="pointer"),b=y==null?f:mn(y),v=m==null?f:mn(m),f=new x(j,g+"leave",y,s,u),f.target=b,f.relatedTarget=v,j=null,Ms(u)===d&&(x=new x(p,g+"enter",m,s,u),x.target=v,x.relatedTarget=b,j=x),b=j,y&&m)t:{for(x=y,p=m,g=0,v=x;v;v=an(v))g++;for(v=0,j=p;j;j=an(j))v++;for(;0<g-v;)x=an(x),g--;for(;0<v-g;)p=an(p),v--;for(;g--;){if(x===p||p!==null&&x===p.alternate)break t;x=an(x),p=an(p)}x=null}else x=null;y!==null&&Ru(h,f,y,x,!1),m!==null&&b!==null&&Ru(h,b,m,x,!0)}}e:{if(f=d?mn(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var k=uy;else if(Cu(f))if(Dm)k=py;else{k=fy;var S=hy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=my);if(k&&(k=k(t,d))){Um(h,k,s,u);break e}S&&S(t,f,d),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&ko(f,"number",f.value)}switch(S=d?mn(d):window,t){case"focusin":(Cu(S)||S.contentEditable==="true")&&(hn=S,Ao=d,xr=null);break;case"focusout":xr=Ao=hn=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,Lu(h,s,u);break;case"selectionchange":if(yy)break;case"keydown":case"keyup":Lu(h,s,u)}var w;if(Qc)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else un?Bm(t,s)&&(C="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(Im&&s.locale!=="ko"&&(un||C!=="onCompositionStart"?C==="onCompositionEnd"&&un&&(w=$m()):(rs=u,Kc="value"in rs?rs.value:rs.textContent,un=!0)),S=ml(d,C),0<S.length&&(C=new wu(C,t,null,s,u),h.push({event:C,listeners:S}),w?C.data=w:(w=Fm(s),w!==null&&(C.data=w)))),(w=ly?ay(t,s):oy(t,s))&&(d=ml(d,"onBeforeInput"),0<d.length&&(u=new wu("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=w))}Gm(h,e)})}function Rr(t,e,s){return{instance:t,listener:e,currentTarget:s}}function ml(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=Er(t,s),l!=null&&n.unshift(Rr(t,l,i)),l=Er(t,e),l!=null&&n.push(Rr(t,l,i))),t=t.return}return n}function an(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ru(t,e,s,n,i){for(var l=e._reactName,a=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,i?(c=Er(s,l),c!=null&&a.unshift(Rr(s,c,o))):i||(c=Er(s,l),c!=null&&a.push(Rr(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var wy=/\r\n?/g,jy=/\u0000|\uFFFD/g;function Ou(t){return(typeof t=="string"?t:""+t).replace(wy,`
`).replace(jy,"")}function Ni(t,e,s){if(e=Ou(e),Ou(t)!==e&&s)throw Error($(425))}function pl(){}var Io=null,Bo=null;function Fo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uo=typeof setTimeout=="function"?setTimeout:void 0,ky=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,Sy=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(t){return Au.resolve(null).then(t).catch(Cy)}:Uo;function Cy(t){setTimeout(function(){throw t})}function La(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Tr(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Tr(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $u(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Vn,Or="__reactProps$"+Vn,Ht="__reactContainer$"+Vn,Do="__reactEvents$"+Vn,Ey="__reactListeners$"+Vn,_y="__reactHandles$"+Vn;function Ms(t){var e=t[Tt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Ht]||s[Tt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=$u(t);t!==null;){if(s=t[Tt])return s;t=$u(t)}return e}t=s,s=t.parentNode}return null}function si(t){return t=t[Tt]||t[Ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Wl(t){return t[Or]||null}var Vo=[],pn=-1;function js(t){return{current:t}}function le(t){0>pn||(t.current=Vo[pn],Vo[pn]=null,pn--)}function se(t,e){pn++,Vo[pn]=t.current,t.current=e}var bs={},Ie=js(bs),qe=js(!1),Us=bs;function Ln(t,e){var s=t.type.contextTypes;if(!s)return bs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in s)i[l]=e[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function xl(){le(qe),le(Ie)}function Iu(t,e,s){if(Ie.current!==bs)throw Error($(168));se(Ie,e),se(qe,s)}function ep(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error($(108,hg(t)||"Unknown",i));return fe({},s,n)}function gl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,Us=Ie.current,se(Ie,t),se(qe,qe.current),!0}function Bu(t,e,s){var n=t.stateNode;if(!n)throw Error($(169));s?(t=ep(t,e,Us),n.__reactInternalMemoizedMergedChildContext=t,le(qe),le(Ie),se(Ie,t)):le(qe),se(qe,s)}var $t=null,Hl=!1,Ma=!1;function tp(t){$t===null?$t=[t]:$t.push(t)}function Py(t){Hl=!0,tp(t)}function ks(){if(!Ma&&$t!==null){Ma=!0;var t=0,e=ee;try{var s=$t;for(ee=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}$t=null,Hl=!1}catch(i){throw $t!==null&&($t=$t.slice(t+1)),Cm(Vc,ks),i}finally{ee=e,Ma=!1}}return null}var xn=[],gn=0,yl=null,vl=0,at=[],ot=0,Ds=null,It=1,Bt="";function Ps(t,e){xn[gn++]=vl,xn[gn++]=yl,yl=t,vl=e}function sp(t,e,s){at[ot++]=It,at[ot++]=Bt,at[ot++]=Ds,Ds=t;var n=It;t=Bt;var i=32-vt(n)-1;n&=~(1<<i),s+=1;var l=32-vt(e)+i;if(30<l){var a=i-i%5;l=(n&(1<<a)-1).toString(32),n>>=a,i-=a,It=1<<32-vt(e)+i|s<<i|n,Bt=l+t}else It=1<<l|s<<i|n,Bt=t}function Gc(t){t.return!==null&&(Ps(t,1),sp(t,1,0))}function Zc(t){for(;t===yl;)yl=xn[--gn],xn[gn]=null,vl=xn[--gn],xn[gn]=null;for(;t===Ds;)Ds=at[--ot],at[ot]=null,Bt=at[--ot],at[ot]=null,It=at[--ot],at[ot]=null}var st=null,tt=null,oe=!1,yt=null;function np(t,e){var s=dt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Fu(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,st=t,tt=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,st=t,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Ds!==null?{id:It,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=dt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,st=t,tt=null,!0):!1;default:return!1}}function Wo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ho(t){if(oe){var e=tt;if(e){var s=e;if(!Fu(t,e)){if(Wo(t))throw Error($(418));e=us(s.nextSibling);var n=st;e&&Fu(t,e)?np(n,s):(t.flags=t.flags&-4097|2,oe=!1,st=t)}}else{if(Wo(t))throw Error($(418));t.flags=t.flags&-4097|2,oe=!1,st=t}}}function Uu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;st=t}function wi(t){if(t!==st)return!1;if(!oe)return Uu(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fo(t.type,t.memoizedProps)),e&&(e=tt)){if(Wo(t))throw rp(),Error($(418));for(;e;)np(t,e),e=us(e.nextSibling)}if(Uu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){tt=us(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}tt=null}}else tt=st?us(t.stateNode.nextSibling):null;return!0}function rp(){for(var t=tt;t;)t=us(t.nextSibling)}function Mn(){tt=st=null,oe=!1}function ed(t){yt===null?yt=[t]:yt.push(t)}var Ty=Xt.ReactCurrentBatchConfig;function tr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error($(309));var n=s.stateNode}if(!n)throw Error($(147,t));var i=n,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(a){var o=i.refs;a===null?delete o[l]:o[l]=a},e._stringRef=l,e)}if(typeof t!="string")throw Error($(284));if(!s._owner)throw Error($(290,t))}return t}function ji(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Du(t){var e=t._init;return e(t._payload)}function ip(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function s(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=ps(p,g),p.index=0,p.sibling=null,p}function l(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,g,v,j){return g===null||g.tag!==6?(g=Ba(v,p.mode,j),g.return=p,g):(g=i(g,v),g.return=p,g)}function c(p,g,v,j){var k=v.type;return k===dn?u(p,g,v.props.children,j,v.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===es&&Du(k)===g.type)?(j=i(g,v.props),j.ref=tr(p,g,v),j.return=p,j):(j=Gi(v.type,v.key,v.props,null,p.mode,j),j.ref=tr(p,g,v),j.return=p,j)}function d(p,g,v,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Fa(v,p.mode,j),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function u(p,g,v,j,k){return g===null||g.tag!==7?(g=Is(v,p.mode,j,k),g.return=p,g):(g=i(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ba(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hi:return v=Gi(g.type,g.key,g.props,null,p.mode,v),v.ref=tr(p,null,g),v.return=p,v;case cn:return g=Fa(g,p.mode,v),g.return=p,g;case es:var j=g._init;return h(p,j(g._payload),v)}if(or(g)||Qn(g))return g=Is(g,p.mode,v,null),g.return=p,g;ji(p,g)}return null}function f(p,g,v,j){var k=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:o(p,g,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hi:return v.key===k?c(p,g,v,j):null;case cn:return v.key===k?d(p,g,v,j):null;case es:return k=v._init,f(p,g,k(v._payload),j)}if(or(v)||Qn(v))return k!==null?null:u(p,g,v,j,null);ji(p,v)}return null}function y(p,g,v,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(v)||null,o(g,p,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case hi:return p=p.get(j.key===null?v:j.key)||null,c(g,p,j,k);case cn:return p=p.get(j.key===null?v:j.key)||null,d(g,p,j,k);case es:var S=j._init;return y(p,g,v,S(j._payload),k)}if(or(j)||Qn(j))return p=p.get(v)||null,u(g,p,j,k,null);ji(g,j)}return null}function m(p,g,v,j){for(var k=null,S=null,w=g,C=g=0,T=null;w!==null&&C<v.length;C++){w.index>C?(T=w,w=null):T=w.sibling;var M=f(p,w,v[C],j);if(M===null){w===null&&(w=T);break}t&&w&&M.alternate===null&&e(p,w),g=l(M,g,C),S===null?k=M:S.sibling=M,S=M,w=T}if(C===v.length)return s(p,w),oe&&Ps(p,C),k;if(w===null){for(;C<v.length;C++)w=h(p,v[C],j),w!==null&&(g=l(w,g,C),S===null?k=w:S.sibling=w,S=w);return oe&&Ps(p,C),k}for(w=n(p,w);C<v.length;C++)T=y(w,p,C,v[C],j),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?C:T.key),g=l(T,g,C),S===null?k=T:S.sibling=T,S=T);return t&&w.forEach(function(R){return e(p,R)}),oe&&Ps(p,C),k}function x(p,g,v,j){var k=Qn(v);if(typeof k!="function")throw Error($(150));if(v=k.call(v),v==null)throw Error($(151));for(var S=k=null,w=g,C=g=0,T=null,M=v.next();w!==null&&!M.done;C++,M=v.next()){w.index>C?(T=w,w=null):T=w.sibling;var R=f(p,w,M.value,j);if(R===null){w===null&&(w=T);break}t&&w&&R.alternate===null&&e(p,w),g=l(R,g,C),S===null?k=R:S.sibling=R,S=R,w=T}if(M.done)return s(p,w),oe&&Ps(p,C),k;if(w===null){for(;!M.done;C++,M=v.next())M=h(p,M.value,j),M!==null&&(g=l(M,g,C),S===null?k=M:S.sibling=M,S=M);return oe&&Ps(p,C),k}for(w=n(p,w);!M.done;C++,M=v.next())M=y(w,p,C,M.value,j),M!==null&&(t&&M.alternate!==null&&w.delete(M.key===null?C:M.key),g=l(M,g,C),S===null?k=M:S.sibling=M,S=M);return t&&w.forEach(function(E){return e(p,E)}),oe&&Ps(p,C),k}function b(p,g,v,j){if(typeof v=="object"&&v!==null&&v.type===dn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case hi:e:{for(var k=v.key,S=g;S!==null;){if(S.key===k){if(k=v.type,k===dn){if(S.tag===7){s(p,S.sibling),g=i(S,v.props.children),g.return=p,p=g;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===es&&Du(k)===S.type){s(p,S.sibling),g=i(S,v.props),g.ref=tr(p,S,v),g.return=p,p=g;break e}s(p,S);break}else e(p,S);S=S.sibling}v.type===dn?(g=Is(v.props.children,p.mode,j,v.key),g.return=p,p=g):(j=Gi(v.type,v.key,v.props,null,p.mode,j),j.ref=tr(p,g,v),j.return=p,p=j)}return a(p);case cn:e:{for(S=v.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){s(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{s(p,g);break}else e(p,g);g=g.sibling}g=Fa(v,p.mode,j),g.return=p,p=g}return a(p);case es:return S=v._init,b(p,g,S(v._payload),j)}if(or(v))return m(p,g,v,j);if(Qn(v))return x(p,g,v,j);ji(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(s(p,g.sibling),g=i(g,v),g.return=p,p=g):(s(p,g),g=Ba(v,p.mode,j),g.return=p,p=g),a(p)):s(p,g)}return b}var zn=ip(!0),lp=ip(!1),bl=js(null),Nl=null,yn=null,td=null;function sd(){td=yn=Nl=null}function nd(t){var e=bl.current;le(bl),t._currentValue=e}function qo(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function En(t,e){Nl=t,td=yn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function ht(t){var e=t._currentValue;if(td!==t)if(t={context:t,memoizedValue:e,next:null},yn===null){if(Nl===null)throw Error($(308));yn=t,Nl.dependencies={lanes:0,firstContext:t}}else yn=yn.next=t;return e}var zs=null;function rd(t){zs===null?zs=[t]:zs.push(t)}function ap(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,rd(e)):(s.next=i.next,i.next=s),e.interleaved=s,qt(t,n)}function qt(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var ts=!1;function id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function op(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Z&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,qt(t,s)}return i=n.interleaved,i===null?(e.next=e,rd(n)):(e.next=i.next,i.next=e),n.interleaved=e,qt(t,s)}function qi(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Wc(t,s)}}function Vu(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?i=l=a:l=l.next=a,s=s.next}while(s!==null);l===null?i=l=e:l=l.next=e}else i=l=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function wl(t,e,s,n){var i=t.updateQueue;ts=!1;var l=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?l=d:a.next=d,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(l!==null){var h=i.baseState;a=0,u=d=c=null,o=l;do{var f=o.lane,y=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,x=o;switch(f=e,y=s,x.tag){case 1:if(m=x.payload,typeof m=="function"){h=m.call(y,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(y,h,f):m,f==null)break e;h=fe({},h,f);break e;case 2:ts=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else y={eventTime:y,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=y,c=h):u=u.next=y,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else l===null&&(i.shared.lanes=0);Ws|=a,t.lanes=a,t.memoizedState=h}}function Wu(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error($(191,i));i.call(n)}}}var ni={},zt=js(ni),Ar=js(ni),$r=js(ni);function Rs(t){if(t===ni)throw Error($(174));return t}function ld(t,e){switch(se($r,e),se(Ar,t),se(zt,ni),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Co(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Co(e,t)}le(zt),se(zt,e)}function Rn(){le(zt),le(Ar),le($r)}function cp(t){Rs($r.current);var e=Rs(zt.current),s=Co(e,t.type);e!==s&&(se(Ar,t),se(zt,s))}function ad(t){Ar.current===t&&(le(zt),le(Ar))}var ue=js(0);function jl(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var za=[];function od(){for(var t=0;t<za.length;t++)za[t]._workInProgressVersionPrimary=null;za.length=0}var Ki=Xt.ReactCurrentDispatcher,Ra=Xt.ReactCurrentBatchConfig,Vs=0,he=null,we=null,ke=null,kl=!1,gr=!1,Ir=0,Ly=0;function Re(){throw Error($(321))}function cd(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Nt(t[s],e[s]))return!1;return!0}function dd(t,e,s,n,i,l){if(Vs=l,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ki.current=t===null||t.memoizedState===null?Oy:Ay,t=s(n,i),gr){l=0;do{if(gr=!1,Ir=0,25<=l)throw Error($(301));l+=1,ke=we=null,e.updateQueue=null,Ki.current=$y,t=s(n,i)}while(gr)}if(Ki.current=Sl,e=we!==null&&we.next!==null,Vs=0,ke=we=he=null,kl=!1,e)throw Error($(300));return t}function ud(){var t=Ir!==0;return Ir=0,t}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?he.memoizedState=ke=t:ke=ke.next=t,ke}function ft(){if(we===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=ke===null?he.memoizedState:ke.next;if(e!==null)ke=e,we=t;else{if(t===null)throw Error($(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?he.memoizedState=ke=t:ke=ke.next=t}return ke}function Br(t,e){return typeof e=="function"?e(t):e}function Oa(t){var e=ft(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var n=we,i=n.baseQueue,l=s.pending;if(l!==null){if(i!==null){var a=i.next;i.next=l.next,l.next=a}n.baseQueue=i=l,s.pending=null}if(i!==null){l=i.next,n=n.baseState;var o=a=null,c=null,d=l;do{var u=d.lane;if((Vs&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,a=n):c=c.next=h,he.lanes|=u,Ws|=u}d=d.next}while(d!==null&&d!==l);c===null?a=n:c.next=o,Nt(n,e.memoizedState)||(He=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do l=i.lane,he.lanes|=l,Ws|=l,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Aa(t){var e=ft(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,l=e.memoizedState;if(i!==null){s.pending=null;var a=i=i.next;do l=t(l,a.action),a=a.next;while(a!==i);Nt(l,e.memoizedState)||(He=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),s.lastRenderedState=l}return[l,n]}function dp(){}function up(t,e){var s=he,n=ft(),i=e(),l=!Nt(n.memoizedState,i);if(l&&(n.memoizedState=i,He=!0),n=n.queue,hd(mp.bind(null,s,n,t),[t]),n.getSnapshot!==e||l||ke!==null&&ke.memoizedState.tag&1){if(s.flags|=2048,Fr(9,fp.bind(null,s,n,i,e),void 0,null),Se===null)throw Error($(349));Vs&30||hp(s,e,i)}return i}function hp(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function fp(t,e,s,n){e.value=s,e.getSnapshot=n,pp(e)&&xp(t)}function mp(t,e,s){return s(function(){pp(e)&&xp(t)})}function pp(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Nt(t,s)}catch{return!0}}function xp(t){var e=qt(t,1);e!==null&&bt(e,t,1,-1)}function Hu(t){var e=Pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:t},e.queue=t,t=t.dispatch=Ry.bind(null,he,t),[e.memoizedState,t]}function Fr(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function gp(){return ft().memoizedState}function Xi(t,e,s,n){var i=Pt();he.flags|=t,i.memoizedState=Fr(1|e,s,void 0,n===void 0?null:n)}function ql(t,e,s,n){var i=ft();n=n===void 0?null:n;var l=void 0;if(we!==null){var a=we.memoizedState;if(l=a.destroy,n!==null&&cd(n,a.deps)){i.memoizedState=Fr(e,s,l,n);return}}he.flags|=t,i.memoizedState=Fr(1|e,s,l,n)}function qu(t,e){return Xi(8390656,8,t,e)}function hd(t,e){return ql(2048,8,t,e)}function yp(t,e){return ql(4,2,t,e)}function vp(t,e){return ql(4,4,t,e)}function bp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Np(t,e,s){return s=s!=null?s.concat([t]):null,ql(4,4,bp.bind(null,e,t),s)}function fd(){}function wp(t,e){var s=ft();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&cd(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function jp(t,e){var s=ft();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&cd(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function kp(t,e,s){return Vs&21?(Nt(s,e)||(s=Pm(),he.lanes|=s,Ws|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=s)}function My(t,e){var s=ee;ee=s!==0&&4>s?s:4,t(!0);var n=Ra.transition;Ra.transition={};try{t(!1),e()}finally{ee=s,Ra.transition=n}}function Sp(){return ft().memoizedState}function zy(t,e,s){var n=ms(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Cp(t))Ep(e,s);else if(s=ap(t,e,s,n),s!==null){var i=Fe();bt(s,t,n,i),_p(s,e,n)}}function Ry(t,e,s){var n=ms(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Cp(t))Ep(e,i);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var a=e.lastRenderedState,o=l(a,s);if(i.hasEagerState=!0,i.eagerState=o,Nt(o,a)){var c=e.interleaved;c===null?(i.next=i,rd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=ap(t,e,i,n),s!==null&&(i=Fe(),bt(s,t,n,i),_p(s,e,n))}}function Cp(t){var e=t.alternate;return t===he||e!==null&&e===he}function Ep(t,e){gr=kl=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function _p(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Wc(t,s)}}var Sl={readContext:ht,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Oy={readContext:ht,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:ht,useEffect:qu,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Xi(4194308,4,bp.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Xi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xi(4,2,t,e)},useMemo:function(t,e){var s=Pt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Pt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=zy.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:Hu,useDebugValue:fd,useDeferredValue:function(t){return Pt().memoizedState=t},useTransition:function(){var t=Hu(!1),e=t[0];return t=My.bind(null,t[1]),Pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=he,i=Pt();if(oe){if(s===void 0)throw Error($(407));s=s()}else{if(s=e(),Se===null)throw Error($(349));Vs&30||hp(n,e,s)}i.memoizedState=s;var l={value:s,getSnapshot:e};return i.queue=l,qu(mp.bind(null,n,l,t),[t]),n.flags|=2048,Fr(9,fp.bind(null,n,l,s,e),void 0,null),s},useId:function(){var t=Pt(),e=Se.identifierPrefix;if(oe){var s=Bt,n=It;s=(n&~(1<<32-vt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Ir++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Ly++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ay={readContext:ht,useCallback:wp,useContext:ht,useEffect:hd,useImperativeHandle:Np,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:jp,useReducer:Oa,useRef:gp,useState:function(){return Oa(Br)},useDebugValue:fd,useDeferredValue:function(t){var e=ft();return kp(e,we.memoizedState,t)},useTransition:function(){var t=Oa(Br)[0],e=ft().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:up,useId:Sp,unstable_isNewReconciler:!1},$y={readContext:ht,useCallback:wp,useContext:ht,useEffect:hd,useImperativeHandle:Np,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:jp,useReducer:Aa,useRef:gp,useState:function(){return Aa(Br)},useDebugValue:fd,useDeferredValue:function(t){var e=ft();return we===null?e.memoizedState=t:kp(e,we.memoizedState,t)},useTransition:function(){var t=Aa(Br)[0],e=ft().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:up,useId:Sp,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Ko(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:fe({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Kl={isMounted:function(t){return(t=t._reactInternals)?en(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Fe(),i=ms(t),l=Dt(n,i);l.payload=e,s!=null&&(l.callback=s),e=hs(t,l,i),e!==null&&(bt(e,t,i,n),qi(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Fe(),i=ms(t),l=Dt(n,i);l.tag=1,l.payload=e,s!=null&&(l.callback=s),e=hs(t,l,i),e!==null&&(bt(e,t,i,n),qi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Fe(),n=ms(t),i=Dt(s,n);i.tag=2,e!=null&&(i.callback=e),e=hs(t,i,n),e!==null&&(bt(e,t,n,s),qi(e,t,n))}};function Ku(t,e,s,n,i,l,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,a):e.prototype&&e.prototype.isPureReactComponent?!Mr(s,n)||!Mr(i,l):!0}function Pp(t,e,s){var n=!1,i=bs,l=e.contextType;return typeof l=="object"&&l!==null?l=ht(l):(i=Ke(e)?Us:Ie.current,n=e.contextTypes,l=(n=n!=null)?Ln(t,i):bs),e=new e(s,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=l),e}function Xu(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Kl.enqueueReplaceState(e,e.state,null)}function Xo(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},id(t);var l=e.contextType;typeof l=="object"&&l!==null?i.context=ht(l):(l=Ke(e)?Us:Ie.current,i.context=Ln(t,l)),i.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Ko(t,e,l,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kl.enqueueReplaceState(i,i.state,null),wl(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function On(t,e){try{var s="",n=e;do s+=ug(n),n=n.return;while(n);var i=s}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:i,digest:null}}function $a(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Yo(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Iy=typeof WeakMap=="function"?WeakMap:Map;function Tp(t,e,s){s=Dt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){El||(El=!0,ic=n),Yo(t,e)},s}function Lp(t,e,s){s=Dt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){Yo(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Yo(t,e),typeof n!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Yu(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Iy;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=Gy.bind(null,t,e,s),e.then(t,t))}function Qu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ju(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Dt(-1,1),e.tag=2,hs(s,e,1))),s.lanes|=1),t)}var By=Xt.ReactCurrentOwner,He=!1;function Be(t,e,s,n){e.child=t===null?lp(e,null,s,n):zn(e,t.child,s,n)}function Gu(t,e,s,n,i){s=s.render;var l=e.ref;return En(e,i),n=dd(t,e,s,n,l,i),s=ud(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kt(t,e,i)):(oe&&s&&Gc(e),e.flags|=1,Be(t,e,n,i),e.child)}function Zu(t,e,s,n,i){if(t===null){var l=s.type;return typeof l=="function"&&!Nd(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=l,Mp(t,e,l,n,i)):(t=Gi(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&i)){var a=l.memoizedProps;if(s=s.compare,s=s!==null?s:Mr,s(a,n)&&t.ref===e.ref)return Kt(t,e,i)}return e.flags|=1,t=ps(l,n),t.ref=e.ref,t.return=e,e.child=t}function Mp(t,e,s,n,i){if(t!==null){var l=t.memoizedProps;if(Mr(l,n)&&t.ref===e.ref)if(He=!1,e.pendingProps=n=l,(t.lanes&i)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,Kt(t,e,i)}return Qo(t,e,s,n,i)}function zp(t,e,s){var n=e.pendingProps,i=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(bn,et),et|=s;else{if(!(s&1073741824))return t=l!==null?l.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se(bn,et),et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,se(bn,et),et|=n}else l!==null?(n=l.baseLanes|s,e.memoizedState=null):n=s,se(bn,et),et|=n;return Be(t,e,i,s),e.child}function Rp(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Qo(t,e,s,n,i){var l=Ke(s)?Us:Ie.current;return l=Ln(e,l),En(e,i),s=dd(t,e,s,n,l,i),n=ud(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kt(t,e,i)):(oe&&n&&Gc(e),e.flags|=1,Be(t,e,s,i),e.child)}function eh(t,e,s,n,i){if(Ke(s)){var l=!0;gl(e)}else l=!1;if(En(e,i),e.stateNode===null)Yi(t,e),Pp(e,s,n),Xo(e,s,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,d=s.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Ke(s)?Us:Ie.current,d=Ln(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Xu(e,a,n,d),ts=!1;var f=e.memoizedState;a.state=f,wl(e,n,a,i),c=e.memoizedState,o!==n||f!==c||qe.current||ts?(typeof u=="function"&&(Ko(e,s,u,n),c=e.memoizedState),(o=ts||Ku(e,s,o,n,f,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=d,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,op(t,e),o=e.memoizedProps,d=e.type===e.elementType?o:pt(e.type,o),a.props=d,h=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Ke(s)?Us:Ie.current,c=Ln(e,c));var y=s.getDerivedStateFromProps;(u=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Xu(e,a,n,c),ts=!1,f=e.memoizedState,a.state=f,wl(e,n,a,i);var m=e.memoizedState;o!==h||f!==m||qe.current||ts?(typeof y=="function"&&(Ko(e,s,y,n),m=e.memoizedState),(d=ts||Ku(e,s,d,n,f,m,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Jo(t,e,s,n,l,i)}function Jo(t,e,s,n,i,l){Rp(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Bu(e,s,!1),Kt(t,e,l);n=e.stateNode,By.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=zn(e,t.child,null,l),e.child=zn(e,null,o,l)):Be(t,e,o,l),e.memoizedState=n.state,i&&Bu(e,s,!0),e.child}function Op(t){var e=t.stateNode;e.pendingContext?Iu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iu(t,e.context,!1),ld(t,e.containerInfo)}function th(t,e,s,n,i){return Mn(),ed(i),e.flags|=256,Be(t,e,s,n),e.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Zo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ap(t,e,s){var n=e.pendingProps,i=ue.current,l=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),se(ue,i&1),t===null)return Ho(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,l?(n=e.mode,l=e.child,a={mode:"hidden",children:a},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Ql(a,n,0,null),t=Is(t,n,s,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Zo(s),e.memoizedState=Go,t):md(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Fy(t,e,a,n,o,i,s);if(l){l=n.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ps(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?l=ps(o,l):(l=Is(l,a,s,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,n=l,l=e.child,a=t.child.memoizedState,a=a===null?Zo(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=t.childLanes&~s,e.memoizedState=Go,n}return l=t.child,t=l.sibling,n=ps(l,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function md(t,e){return e=Ql({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ki(t,e,s,n){return n!==null&&ed(n),zn(e,t.child,null,s),t=md(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fy(t,e,s,n,i,l,a){if(s)return e.flags&256?(e.flags&=-257,n=$a(Error($(422))),ki(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=n.fallback,i=e.mode,n=Ql({mode:"visible",children:n.children},i,0,null),l=Is(l,i,a,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,e.mode&1&&zn(e,t.child,null,a),e.child.memoizedState=Zo(a),e.memoizedState=Go,l);if(!(e.mode&1))return ki(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error($(419)),n=$a(l,n,void 0),ki(t,e,a,n)}if(o=(a&t.childLanes)!==0,He||o){if(n=Se,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,qt(t,i),bt(n,t,i,-1))}return bd(),n=$a(Error($(421))),ki(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Zy.bind(null,t),i._reactRetry=e,null):(t=l.treeContext,tt=us(i.nextSibling),st=e,oe=!0,yt=null,t!==null&&(at[ot++]=It,at[ot++]=Bt,at[ot++]=Ds,It=t.id,Bt=t.overflow,Ds=e),e=md(e,n.children),e.flags|=4096,e)}function sh(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qo(t.return,e,s)}function Ia(t,e,s,n,i){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=i)}function $p(t,e,s){var n=e.pendingProps,i=n.revealOrder,l=n.tail;if(Be(t,e,n.children,s),n=ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sh(t,s,e);else if(t.tag===19)sh(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(se(ue,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&jl(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Ia(e,!1,i,s,l);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jl(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Ia(e,!0,s,null,l);break;case"together":Ia(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Ws|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,s=ps(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=ps(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Uy(t,e,s){switch(e.tag){case 3:Op(e),Mn();break;case 5:cp(e);break;case 1:Ke(e.type)&&gl(e);break;case 4:ld(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;se(bl,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(se(ue,ue.current&1),e.flags|=128,null):s&e.child.childLanes?Ap(t,e,s):(se(ue,ue.current&1),t=Kt(t,e,s),t!==null?t.sibling:null);se(ue,ue.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return $p(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(ue,ue.current),n)break;return null;case 22:case 23:return e.lanes=0,zp(t,e,s)}return Kt(t,e,s)}var Ip,ec,Bp,Fp;Ip=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ec=function(){};Bp=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Rs(zt.current);var l=null;switch(s){case"input":i=wo(t,i),n=wo(t,n),l=[];break;case"select":i=fe({},i,{value:void 0}),n=fe({},n,{value:void 0}),l=[];break;case"textarea":i=So(t,i),n=So(t,n),l=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=pl)}Eo(s,n);var a;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var o=i[d];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sr.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(o=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(l||(l=[]),l.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&re("scroll",t),l||o===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(e.updateQueue=d)&&(e.flags|=4)}};Fp=function(t,e,s,n){s!==n&&(e.flags|=4)};function sr(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Oe(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Dy(t,e,s){var n=e.pendingProps;switch(Zc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(e),null;case 1:return Ke(e.type)&&xl(),Oe(e),null;case 3:return n=e.stateNode,Rn(),le(qe),le(Ie),od(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(wi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yt!==null&&(oc(yt),yt=null))),ec(t,e),Oe(e),null;case 5:ad(e);var i=Rs($r.current);if(s=e.type,t!==null&&e.stateNode!=null)Bp(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($(166));return Oe(e),null}if(t=Rs(zt.current),wi(e)){n=e.stateNode,s=e.type;var l=e.memoizedProps;switch(n[Tt]=e,n[Or]=l,t=(e.mode&1)!==0,s){case"dialog":re("cancel",n),re("close",n);break;case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(i=0;i<dr.length;i++)re(dr[i],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"details":re("toggle",n);break;case"input":uu(n,l),re("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},re("invalid",n);break;case"textarea":fu(n,l),re("invalid",n)}Eo(s,l),i=null;for(var a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Ni(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Ni(n.textContent,o,t),i=["children",""+o]):Sr.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&re("scroll",n)}switch(s){case"input":fi(n),hu(n,l,!0);break;case"textarea":fi(n),mu(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=pl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mm(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[Tt]=e,t[Or]=n,Ip(t,e,!1,!1),e.stateNode=t;e:{switch(a=_o(s,n),s){case"dialog":re("cancel",t),re("close",t),i=n;break;case"iframe":case"object":case"embed":re("load",t),i=n;break;case"video":case"audio":for(i=0;i<dr.length;i++)re(dr[i],t);i=n;break;case"source":re("error",t),i=n;break;case"img":case"image":case"link":re("error",t),re("load",t),i=n;break;case"details":re("toggle",t),i=n;break;case"input":uu(t,n),i=wo(t,n),re("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=fe({},n,{value:void 0}),re("invalid",t);break;case"textarea":fu(t,n),i=So(t,n),re("invalid",t);break;default:i=n}Eo(s,i),o=i;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?gm(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pm(t,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Cr(t,c):typeof c=="number"&&Cr(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Sr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&re("scroll",t):c!=null&&Ic(t,l,c,a))}switch(s){case"input":fi(t),hu(t,n,!1);break;case"textarea":fi(t),mu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+vs(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?jn(t,!!n.multiple,l,!1):n.defaultValue!=null&&jn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Oe(e),null;case 6:if(t&&e.stateNode!=null)Fp(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($(166));if(s=Rs($r.current),Rs(zt.current),wi(e)){if(n=e.stateNode,s=e.memoizedProps,n[Tt]=e,(l=n.nodeValue!==s)&&(t=st,t!==null))switch(t.tag){case 3:Ni(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ni(n.nodeValue,s,(t.mode&1)!==0)}l&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Tt]=e,e.stateNode=n}return Oe(e),null;case 13:if(le(ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&tt!==null&&e.mode&1&&!(e.flags&128))rp(),Mn(),e.flags|=98560,l=!1;else if(l=wi(e),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error($(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error($(317));l[Tt]=e}else Mn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Oe(e),l=!1}else yt!==null&&(oc(yt),yt=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?je===0&&(je=3):bd())),e.updateQueue!==null&&(e.flags|=4),Oe(e),null);case 4:return Rn(),ec(t,e),t===null&&zr(e.stateNode.containerInfo),Oe(e),null;case 10:return nd(e.type._context),Oe(e),null;case 17:return Ke(e.type)&&xl(),Oe(e),null;case 19:if(le(ue),l=e.memoizedState,l===null)return Oe(e),null;if(n=(e.flags&128)!==0,a=l.rendering,a===null)if(n)sr(l,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=jl(t),a!==null){for(e.flags|=128,sr(l,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)l=s,t=n,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,t=a.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return se(ue,ue.current&1|2),e.child}t=t.sibling}l.tail!==null&&pe()>An&&(e.flags|=128,n=!0,sr(l,!1),e.lanes=4194304)}else{if(!n)if(t=jl(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),sr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!oe)return Oe(e),null}else 2*pe()-l.renderingStartTime>An&&s!==1073741824&&(e.flags|=128,n=!0,sr(l,!1),e.lanes=4194304);l.isBackwards?(a.sibling=e.child,e.child=a):(s=l.last,s!==null?s.sibling=a:e.child=a,l.last=a)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=pe(),e.sibling=null,s=ue.current,se(ue,n?s&1|2:s&1),e):(Oe(e),null);case 22:case 23:return vd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?et&1073741824&&(Oe(e),e.subtreeFlags&6&&(e.flags|=8192)):Oe(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Vy(t,e){switch(Zc(e),e.tag){case 1:return Ke(e.type)&&xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rn(),le(qe),le(Ie),od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ad(e),null;case 13:if(le(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Mn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ue),null;case 4:return Rn(),null;case 10:return nd(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var Si=!1,Ae=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,D=null;function vn(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){me(t,e,n)}else s.current=null}function tc(t,e,s){try{s()}catch(n){me(t,e,n)}}var nh=!1;function Hy(t,e){if(Io=hl,t=Hm(),Jc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var y;h!==s||i!==0&&h.nodeType!==3||(o=a+i),h!==l||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===s&&++d===i&&(o=a),f===l&&++u===n&&(c=a),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bo={focusedElem:t,selectionRange:s},hl=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,b=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?x:pt(e.type,x),b);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(j){me(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=nh,nh=!1,m}function yr(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var l=i.destroy;i.destroy=void 0,l!==void 0&&tc(e,s,l)}i=i.next}while(i!==n)}}function Xl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function sc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Up(t){var e=t.alternate;e!==null&&(t.alternate=null,Up(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tt],delete e[Or],delete e[Do],delete e[Ey],delete e[_y])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dp(t){return t.tag===5||t.tag===3||t.tag===4}function rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=pl));else if(n!==4&&(t=t.child,t!==null))for(nc(t,e,s),t=t.sibling;t!==null;)nc(t,e,s),t=t.sibling}function rc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(rc(t,e,s),t=t.sibling;t!==null;)rc(t,e,s),t=t.sibling}var Ee=null,xt=!1;function Gt(t,e,s){for(s=s.child;s!==null;)Vp(t,e,s),s=s.sibling}function Vp(t,e,s){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Fl,s)}catch{}switch(s.tag){case 5:Ae||vn(s,e);case 6:var n=Ee,i=xt;Ee=null,Gt(t,e,s),Ee=n,xt=i,Ee!==null&&(xt?(t=Ee,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Ee.removeChild(s.stateNode));break;case 18:Ee!==null&&(xt?(t=Ee,s=s.stateNode,t.nodeType===8?La(t.parentNode,s):t.nodeType===1&&La(t,s),Tr(t)):La(Ee,s.stateNode));break;case 4:n=Ee,i=xt,Ee=s.stateNode.containerInfo,xt=!0,Gt(t,e,s),Ee=n,xt=i;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var l=i,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&tc(s,e,a),i=i.next}while(i!==n)}Gt(t,e,s);break;case 1:if(!Ae&&(vn(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){me(s,e,o)}Gt(t,e,s);break;case 21:Gt(t,e,s);break;case 22:s.mode&1?(Ae=(n=Ae)||s.memoizedState!==null,Gt(t,e,s),Ae=n):Gt(t,e,s);break;default:Gt(t,e,s)}}function ih(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Wy),e.forEach(function(n){var i=ev.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function mt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var l=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,xt=!1;break e;case 3:Ee=o.stateNode.containerInfo,xt=!0;break e;case 4:Ee=o.stateNode.containerInfo,xt=!0;break e}o=o.return}if(Ee===null)throw Error($(160));Vp(l,a,i),Ee=null,xt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){me(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wp(e,t),e=e.sibling}function Wp(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mt(e,t),Ct(t),n&4){try{yr(3,t,t.return),Xl(3,t)}catch(x){me(t,t.return,x)}try{yr(5,t,t.return)}catch(x){me(t,t.return,x)}}break;case 1:mt(e,t),Ct(t),n&512&&s!==null&&vn(s,s.return);break;case 5:if(mt(e,t),Ct(t),n&512&&s!==null&&vn(s,s.return),t.flags&32){var i=t.stateNode;try{Cr(i,"")}catch(x){me(t,t.return,x)}}if(n&4&&(i=t.stateNode,i!=null)){var l=t.memoizedProps,a=s!==null?s.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&hm(i,l),_o(o,a);var d=_o(o,l);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?gm(i,h):u==="dangerouslySetInnerHTML"?pm(i,h):u==="children"?Cr(i,h):Ic(i,u,h,d)}switch(o){case"input":jo(i,l);break;case"textarea":fm(i,l);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?jn(i,!!l.multiple,y,!1):f!==!!l.multiple&&(l.defaultValue!=null?jn(i,!!l.multiple,l.defaultValue,!0):jn(i,!!l.multiple,l.multiple?[]:"",!1))}i[Or]=l}catch(x){me(t,t.return,x)}}break;case 6:if(mt(e,t),Ct(t),n&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,l=t.memoizedProps;try{i.nodeValue=l}catch(x){me(t,t.return,x)}}break;case 3:if(mt(e,t),Ct(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Tr(e.containerInfo)}catch(x){me(t,t.return,x)}break;case 4:mt(e,t),Ct(t);break;case 13:mt(e,t),Ct(t),i=t.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(gd=pe())),n&4&&ih(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Ae=(d=Ae)||u,mt(e,t),Ae=d):mt(e,t),Ct(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(D=t,u=t.child;u!==null;){for(h=D=u;D!==null;){switch(f=D,y=f.child,f.tag){case 0:case 11:case 14:case 15:yr(4,f,f.return);break;case 1:vn(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){me(n,s,x)}}break;case 5:vn(f,f.return);break;case 22:if(f.memoizedState!==null){ah(h);continue}}y!==null?(y.return=f,D=y):ah(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=xm("display",a))}catch(x){me(t,t.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){me(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mt(e,t),Ct(t),n&4&&ih(t);break;case 21:break;default:mt(e,t),Ct(t)}}function Ct(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Dp(s)){var n=s;break e}s=s.return}throw Error($(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Cr(i,""),n.flags&=-33);var l=rh(t);rc(t,l,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=rh(t);nc(t,o,a);break;default:throw Error($(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qy(t,e,s){D=t,Hp(t)}function Hp(t,e,s){for(var n=(t.mode&1)!==0;D!==null;){var i=D,l=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Si;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ae;o=Si;var d=Ae;if(Si=a,(Ae=c)&&!d)for(D=i;D!==null;)a=D,c=a.child,a.tag===22&&a.memoizedState!==null?oh(i):c!==null?(c.return=a,D=c):oh(i);for(;l!==null;)D=l,Hp(l),l=l.sibling;D=i,Si=o,Ae=d}lh(t)}else i.subtreeFlags&8772&&l!==null?(l.return=i,D=l):lh(t)}}function lh(t){for(;D!==null;){var e=D;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ae||Xl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ae)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:pt(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Wu(e,l,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Wu(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Tr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ae||e.flags&512&&sc(e)}catch(f){me(e,e.return,f)}}if(e===t){D=null;break}if(s=e.sibling,s!==null){s.return=e.return,D=s;break}D=e.return}}function ah(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var s=e.sibling;if(s!==null){s.return=e.return,D=s;break}D=e.return}}function oh(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Xl(4,e)}catch(c){me(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){me(e,i,c)}}var l=e.return;try{sc(e)}catch(c){me(e,l,c)}break;case 5:var a=e.return;try{sc(e)}catch(c){me(e,a,c)}}}catch(c){me(e,e.return,c)}if(e===t){D=null;break}var o=e.sibling;if(o!==null){o.return=e.return,D=o;break}D=e.return}}var Ky=Math.ceil,Cl=Xt.ReactCurrentDispatcher,pd=Xt.ReactCurrentOwner,ut=Xt.ReactCurrentBatchConfig,Z=0,Se=null,ye=null,Te=0,et=0,bn=js(0),je=0,Ur=null,Ws=0,Yl=0,xd=0,vr=null,We=null,gd=0,An=1/0,At=null,El=!1,ic=null,fs=null,Ci=!1,is=null,_l=0,br=0,lc=null,Qi=-1,Ji=0;function Fe(){return Z&6?pe():Qi!==-1?Qi:Qi=pe()}function ms(t){return t.mode&1?Z&2&&Te!==0?Te&-Te:Ty.transition!==null?(Ji===0&&(Ji=Pm()),Ji):(t=ee,t!==0||(t=window.event,t=t===void 0?16:Am(t.type)),t):1}function bt(t,e,s,n){if(50<br)throw br=0,lc=null,Error($(185));ei(t,s,n),(!(Z&2)||t!==Se)&&(t===Se&&(!(Z&2)&&(Yl|=s),je===4&&ns(t,Te)),Xe(t,n),s===1&&Z===0&&!(e.mode&1)&&(An=pe()+500,Hl&&ks()))}function Xe(t,e){var s=t.callbackNode;Tg(t,e);var n=ul(t,t===Se?Te:0);if(n===0)s!==null&&gu(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&gu(s),e===1)t.tag===0?Py(ch.bind(null,t)):tp(ch.bind(null,t)),Sy(function(){!(Z&6)&&ks()}),s=null;else{switch(Tm(n)){case 1:s=Vc;break;case 4:s=Em;break;case 16:s=dl;break;case 536870912:s=_m;break;default:s=dl}s=Zp(s,qp.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function qp(t,e){if(Qi=-1,Ji=0,Z&6)throw Error($(327));var s=t.callbackNode;if(_n()&&t.callbackNode!==s)return null;var n=ul(t,t===Se?Te:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Pl(t,n);else{e=n;var i=Z;Z|=2;var l=Xp();(Se!==t||Te!==e)&&(At=null,An=pe()+500,$s(t,e));do try{Qy();break}catch(o){Kp(t,o)}while(!0);sd(),Cl.current=l,Z=i,ye!==null?e=0:(Se=null,Te=0,e=je)}if(e!==0){if(e===2&&(i=zo(t),i!==0&&(n=i,e=ac(t,i))),e===1)throw s=Ur,$s(t,0),ns(t,n),Xe(t,pe()),s;if(e===6)ns(t,n);else{if(i=t.current.alternate,!(n&30)&&!Xy(i)&&(e=Pl(t,n),e===2&&(l=zo(t),l!==0&&(n=l,e=ac(t,l))),e===1))throw s=Ur,$s(t,0),ns(t,n),Xe(t,pe()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error($(345));case 2:Ts(t,We,At);break;case 3:if(ns(t,n),(n&130023424)===n&&(e=gd+500-pe(),10<e)){if(ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Fe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uo(Ts.bind(null,t,We,At),e);break}Ts(t,We,At);break;case 4:if(ns(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-vt(n);l=1<<a,a=e[a],a>i&&(i=a),n&=~l}if(n=i,n=pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ky(n/1960))-n,10<n){t.timeoutHandle=Uo(Ts.bind(null,t,We,At),n);break}Ts(t,We,At);break;case 5:Ts(t,We,At);break;default:throw Error($(329))}}}return Xe(t,pe()),t.callbackNode===s?qp.bind(null,t):null}function ac(t,e){var s=vr;return t.current.memoizedState.isDehydrated&&($s(t,e).flags|=256),t=Pl(t,e),t!==2&&(e=We,We=s,e!==null&&oc(e)),t}function oc(t){We===null?We=t:We.push.apply(We,t)}function Xy(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],l=i.getSnapshot;i=i.value;try{if(!Nt(l(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~xd,e&=~Yl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-vt(e),n=1<<s;t[s]=-1,e&=~n}}function ch(t){if(Z&6)throw Error($(327));_n();var e=ul(t,0);if(!(e&1))return Xe(t,pe()),null;var s=Pl(t,e);if(t.tag!==0&&s===2){var n=zo(t);n!==0&&(e=n,s=ac(t,n))}if(s===1)throw s=Ur,$s(t,0),ns(t,e),Xe(t,pe()),s;if(s===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,We,At),Xe(t,pe()),null}function yd(t,e){var s=Z;Z|=1;try{return t(e)}finally{Z=s,Z===0&&(An=pe()+500,Hl&&ks())}}function Hs(t){is!==null&&is.tag===0&&!(Z&6)&&_n();var e=Z;Z|=1;var s=ut.transition,n=ee;try{if(ut.transition=null,ee=1,t)return t()}finally{ee=n,ut.transition=s,Z=e,!(Z&6)&&ks()}}function vd(){et=bn.current,le(bn)}function $s(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,ky(s)),ye!==null)for(s=ye.return;s!==null;){var n=s;switch(Zc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xl();break;case 3:Rn(),le(qe),le(Ie),od();break;case 5:ad(n);break;case 4:Rn();break;case 13:le(ue);break;case 19:le(ue);break;case 10:nd(n.type._context);break;case 22:case 23:vd()}s=s.return}if(Se=t,ye=t=ps(t.current,null),Te=et=e,je=0,Ur=null,xd=Yl=Ws=0,We=vr=null,zs!==null){for(e=0;e<zs.length;e++)if(s=zs[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,l=s.pending;if(l!==null){var a=l.next;l.next=i,n.next=a}s.pending=n}zs=null}return t}function Kp(t,e){do{var s=ye;try{if(sd(),Ki.current=Sl,kl){for(var n=he.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kl=!1}if(Vs=0,ke=we=he=null,gr=!1,Ir=0,pd.current=null,s===null||s.return===null){je=1,Ur=e,ye=null;break}e:{var l=t,a=s.return,o=s,c=e;if(e=Te,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=Qu(a);if(y!==null){y.flags&=-257,Ju(y,a,o,l,e),y.mode&1&&Yu(l,d,e),e=y,c=d;var m=e.updateQueue;if(m===null){var x=new Set;x.add(c),e.updateQueue=x}else m.add(c);break e}else{if(!(e&1)){Yu(l,d,e),bd();break e}c=Error($(426))}}else if(oe&&o.mode&1){var b=Qu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ju(b,a,o,l,e),ed(On(c,o));break e}}l=c=On(c,o),je!==4&&(je=2),vr===null?vr=[l]:vr.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var p=Tp(l,c,e);Vu(l,p);break e;case 1:o=c;var g=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fs===null||!fs.has(v)))){l.flags|=65536,e&=-e,l.lanes|=e;var j=Lp(l,o,e);Vu(l,j);break e}}l=l.return}while(l!==null)}Qp(s)}catch(k){e=k,ye===s&&s!==null&&(ye=s=s.return);continue}break}while(!0)}function Xp(){var t=Cl.current;return Cl.current=Sl,t===null?Sl:t}function bd(){(je===0||je===3||je===2)&&(je=4),Se===null||!(Ws&268435455)&&!(Yl&268435455)||ns(Se,Te)}function Pl(t,e){var s=Z;Z|=2;var n=Xp();(Se!==t||Te!==e)&&(At=null,$s(t,e));do try{Yy();break}catch(i){Kp(t,i)}while(!0);if(sd(),Z=s,Cl.current=n,ye!==null)throw Error($(261));return Se=null,Te=0,je}function Yy(){for(;ye!==null;)Yp(ye)}function Qy(){for(;ye!==null&&!Ng();)Yp(ye)}function Yp(t){var e=Gp(t.alternate,t,et);t.memoizedProps=t.pendingProps,e===null?Qp(t):ye=e,pd.current=null}function Qp(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Vy(s,e),s!==null){s.flags&=32767,ye=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,ye=null;return}}else if(s=Dy(s,e,et),s!==null){ye=s;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);je===0&&(je=5)}function Ts(t,e,s){var n=ee,i=ut.transition;try{ut.transition=null,ee=1,Jy(t,e,s,n)}finally{ut.transition=i,ee=n}return null}function Jy(t,e,s,n){do _n();while(is!==null);if(Z&6)throw Error($(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(Lg(t,l),t===Se&&(ye=Se=null,Te=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ci||(Ci=!0,Zp(dl,function(){return _n(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=ut.transition,ut.transition=null;var a=ee;ee=1;var o=Z;Z|=4,pd.current=null,Hy(t,s),Wp(s,t),gy(Bo),hl=!!Io,Bo=Io=null,t.current=s,qy(s),wg(),Z=o,ee=a,ut.transition=l}else t.current=s;if(Ci&&(Ci=!1,is=t,_l=i),l=t.pendingLanes,l===0&&(fs=null),Sg(s.stateNode),Xe(t,pe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(El)throw El=!1,t=ic,ic=null,t;return _l&1&&t.tag!==0&&_n(),l=t.pendingLanes,l&1?t===lc?br++:(br=0,lc=t):br=0,ks(),null}function _n(){if(is!==null){var t=Tm(_l),e=ut.transition,s=ee;try{if(ut.transition=null,ee=16>t?16:t,is===null)var n=!1;else{if(t=is,is=null,_l=0,Z&6)throw Error($(331));var i=Z;for(Z|=4,D=t.current;D!==null;){var l=D,a=l.child;if(D.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(D=d;D!==null;){var u=D;switch(u.tag){case 0:case 11:case 15:yr(8,u,l)}var h=u.child;if(h!==null)h.return=u,D=h;else for(;D!==null;){u=D;var f=u.sibling,y=u.return;if(Up(u),u===d){D=null;break}if(f!==null){f.return=y,D=f;break}D=y}}}var m=l.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}D=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,D=a;else e:for(;D!==null;){if(l=D,l.flags&2048)switch(l.tag){case 0:case 11:case 15:yr(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,D=p;break e}D=l.return}}var g=t.current;for(D=g;D!==null;){a=D;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,D=v;else e:for(a=g;D!==null;){if(o=D,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Xl(9,o)}}catch(k){me(o,o.return,k)}if(o===a){D=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,D=j;break e}D=o.return}}if(Z=i,ks(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Fl,t)}catch{}n=!0}return n}finally{ee=s,ut.transition=e}}return!1}function dh(t,e,s){e=On(s,e),e=Tp(t,e,1),t=hs(t,e,1),e=Fe(),t!==null&&(ei(t,1,e),Xe(t,e))}function me(t,e,s){if(t.tag===3)dh(t,t,s);else for(;e!==null;){if(e.tag===3){dh(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fs===null||!fs.has(n))){t=On(s,t),t=Lp(e,t,1),e=hs(e,t,1),t=Fe(),e!==null&&(ei(e,1,t),Xe(e,t));break}}e=e.return}}function Gy(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&s,Se===t&&(Te&s)===s&&(je===4||je===3&&(Te&130023424)===Te&&500>pe()-gd?$s(t,0):xd|=s),Xe(t,e)}function Jp(t,e){e===0&&(t.mode&1?(e=xi,xi<<=1,!(xi&130023424)&&(xi=4194304)):e=1);var s=Fe();t=qt(t,e),t!==null&&(ei(t,e,s),Xe(t,s))}function Zy(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Jp(t,s)}function ev(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(e),Jp(t,s)}var Gp;Gp=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)He=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return He=!1,Uy(t,e,s);He=!!(t.flags&131072)}else He=!1,oe&&e.flags&1048576&&sp(e,vl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Yi(t,e),t=e.pendingProps;var i=Ln(e,Ie.current);En(e,s),i=dd(null,e,n,t,i,s);var l=ud();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(n)?(l=!0,gl(e)):l=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,id(e),i.updater=Kl,e.stateNode=i,i._reactInternals=e,Xo(e,n,t,s),e=Jo(null,e,n,!0,l,s)):(e.tag=0,oe&&l&&Gc(e),Be(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Yi(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=sv(n),t=pt(n,t),i){case 0:e=Qo(null,e,n,t,s);break e;case 1:e=eh(null,e,n,t,s);break e;case 11:e=Gu(null,e,n,t,s);break e;case 14:e=Zu(null,e,n,pt(n.type,t),s);break e}throw Error($(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Qo(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),eh(t,e,n,i,s);case 3:e:{if(Op(e),t===null)throw Error($(387));n=e.pendingProps,l=e.memoizedState,i=l.element,op(t,e),wl(e,n,null,s);var a=e.memoizedState;if(n=a.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){i=On(Error($(423)),e),e=th(t,e,n,s,i);break e}else if(n!==i){i=On(Error($(424)),e),e=th(t,e,n,s,i);break e}else for(tt=us(e.stateNode.containerInfo.firstChild),st=e,oe=!0,yt=null,s=lp(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Mn(),n===i){e=Kt(t,e,s);break e}Be(t,e,n,s)}e=e.child}return e;case 5:return cp(e),t===null&&Ho(e),n=e.type,i=e.pendingProps,l=t!==null?t.memoizedProps:null,a=i.children,Fo(n,i)?a=null:l!==null&&Fo(n,l)&&(e.flags|=32),Rp(t,e),Be(t,e,a,s),e.child;case 6:return t===null&&Ho(e),null;case 13:return Ap(t,e,s);case 4:return ld(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=zn(e,null,n,s):Be(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Gu(t,e,n,i,s);case 7:return Be(t,e,e.pendingProps,s),e.child;case 8:return Be(t,e,e.pendingProps.children,s),e.child;case 12:return Be(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,l=e.memoizedProps,a=i.value,se(bl,n._currentValue),n._currentValue=a,l!==null)if(Nt(l.value,a)){if(l.children===i.children&&!qe.current){e=Kt(t,e,s);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){a=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Dt(-1,s&-s),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),qo(l.return,s,e),o.lanes|=s;break}c=c.next}}else if(l.tag===10)a=l.type===e.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error($(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),qo(a,s,e),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Be(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,En(e,s),i=ht(i),n=n(i),e.flags|=1,Be(t,e,n,s),e.child;case 14:return n=e.type,i=pt(n,e.pendingProps),i=pt(n.type,i),Zu(t,e,n,i,s);case 15:return Mp(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:pt(n,i),Yi(t,e),e.tag=1,Ke(n)?(t=!0,gl(e)):t=!1,En(e,s),Pp(e,n,i),Xo(e,n,i,s),Jo(null,e,n,!0,t,s);case 19:return $p(t,e,s);case 22:return zp(t,e,s)}throw Error($(156,e.tag))};function Zp(t,e){return Cm(t,e)}function tv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,s,n){return new tv(t,e,s,n)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sv(t){if(typeof t=="function")return Nd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fc)return 11;if(t===Uc)return 14}return 2}function ps(t,e){var s=t.alternate;return s===null?(s=dt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Gi(t,e,s,n,i,l){var a=2;if(n=t,typeof t=="function")Nd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case dn:return Is(s.children,i,l,e);case Bc:a=8,i|=8;break;case yo:return t=dt(12,s,e,i|2),t.elementType=yo,t.lanes=l,t;case vo:return t=dt(13,s,e,i),t.elementType=vo,t.lanes=l,t;case bo:return t=dt(19,s,e,i),t.elementType=bo,t.lanes=l,t;case cm:return Ql(s,i,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case am:a=10;break e;case om:a=9;break e;case Fc:a=11;break e;case Uc:a=14;break e;case es:a=16,n=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=dt(a,s,e,i),e.elementType=t,e.type=n,e.lanes=l,e}function Is(t,e,s,n){return t=dt(7,t,n,e),t.lanes=s,t}function Ql(t,e,s,n){return t=dt(22,t,n,e),t.elementType=cm,t.lanes=s,t.stateNode={isHidden:!1},t}function Ba(t,e,s){return t=dt(6,t,null,e),t.lanes=s,t}function Fa(t,e,s){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nv(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ba(0),this.expirationTimes=ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wd(t,e,s,n,i,l,a,o,c){return t=new nv(t,e,s,o,c),e===1?(e=1,l===!0&&(e|=8)):e=0,l=dt(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(l),t}function rv(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function e0(t){if(!t)return bs;t=t._reactInternals;e:{if(en(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var s=t.type;if(Ke(s))return ep(t,s,e)}return e}function t0(t,e,s,n,i,l,a,o,c){return t=wd(s,n,!0,t,i,l,a,o,c),t.context=e0(null),s=t.current,n=Fe(),i=ms(s),l=Dt(n,i),l.callback=e??null,hs(s,l,i),t.current.lanes=i,ei(t,i,n),Xe(t,n),t}function Jl(t,e,s,n){var i=e.current,l=Fe(),a=ms(i);return s=e0(s),e.context===null?e.context=s:e.pendingContext=s,e=Dt(l,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=hs(i,e,a),t!==null&&(bt(t,i,a,l),qi(t,i,a)),a}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function jd(t,e){uh(t,e),(t=t.alternate)&&uh(t,e)}function iv(){return null}var s0=typeof reportError=="function"?reportError:function(t){console.error(t)};function kd(t){this._internalRoot=t}Gl.prototype.render=kd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Jl(t,e,null,null)};Gl.prototype.unmount=kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){Jl(null,t,null,null)}),e[Ht]=null}};function Gl(t){this._internalRoot=t}Gl.prototype.unstable_scheduleHydration=function(t){if(t){var e=zm();t={blockedOn:null,target:t,priority:e};for(var s=0;s<ss.length&&e!==0&&e<ss[s].priority;s++);ss.splice(s,0,t),s===0&&Om(t)}};function Sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hh(){}function lv(t,e,s,n,i){if(i){if(typeof n=="function"){var l=n;n=function(){var d=Tl(a);l.call(d)}}var a=t0(e,n,t,0,null,!1,!1,"",hh);return t._reactRootContainer=a,t[Ht]=a.current,zr(t.nodeType===8?t.parentNode:t),Hs(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var d=Tl(c);o.call(d)}}var c=wd(t,0,!1,null,null,!1,!1,"",hh);return t._reactRootContainer=c,t[Ht]=c.current,zr(t.nodeType===8?t.parentNode:t),Hs(function(){Jl(e,c,s,n)}),c}function ea(t,e,s,n,i){var l=s._reactRootContainer;if(l){var a=l;if(typeof i=="function"){var o=i;i=function(){var c=Tl(a);o.call(c)}}Jl(e,a,t,i)}else a=lv(s,e,t,i,n);return Tl(a)}Lm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=cr(e.pendingLanes);s!==0&&(Wc(e,s|1),Xe(e,pe()),!(Z&6)&&(An=pe()+500,ks()))}break;case 13:Hs(function(){var n=qt(t,1);if(n!==null){var i=Fe();bt(n,t,1,i)}}),jd(t,1)}};Hc=function(t){if(t.tag===13){var e=qt(t,134217728);if(e!==null){var s=Fe();bt(e,t,134217728,s)}jd(t,134217728)}};Mm=function(t){if(t.tag===13){var e=ms(t),s=qt(t,e);if(s!==null){var n=Fe();bt(s,t,e,n)}jd(t,e)}};zm=function(){return ee};Rm=function(t,e){var s=ee;try{return ee=t,e()}finally{ee=s}};To=function(t,e,s){switch(e){case"input":if(jo(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=Wl(n);if(!i)throw Error($(90));um(n),jo(n,i)}}}break;case"textarea":fm(t,s);break;case"select":e=s.value,e!=null&&jn(t,!!s.multiple,e,!1)}};bm=yd;Nm=Hs;var av={usingClientEntryPoint:!1,Events:[si,mn,Wl,ym,vm,yd]},nr={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ov={bundleType:nr.bundleType,version:nr.version,rendererPackageName:nr.rendererPackageName,rendererConfig:nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=km(t),t===null?null:t.stateNode},findFiberByHostInstance:nr.findFiberByHostInstance||iv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ei.isDisabled&&Ei.supportsFiber)try{Fl=Ei.inject(ov),Mt=Ei}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=av;rt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(e))throw Error($(200));return rv(t,e,null,s)};rt.createRoot=function(t,e){if(!Sd(t))throw Error($(299));var s=!1,n="",i=s0;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wd(t,1,!1,null,null,s,!1,n,i),t[Ht]=e.current,zr(t.nodeType===8?t.parentNode:t),new kd(e)};rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=km(e),t=t===null?null:t.stateNode,t};rt.flushSync=function(t){return Hs(t)};rt.hydrate=function(t,e,s){if(!Zl(e))throw Error($(200));return ea(null,t,e,!0,s)};rt.hydrateRoot=function(t,e,s){if(!Sd(t))throw Error($(405));var n=s!=null&&s.hydratedSources||null,i=!1,l="",a=s0;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=t0(e,null,t,1,s??null,i,!1,l,a),t[Ht]=e.current,zr(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new Gl(e)};rt.render=function(t,e,s){if(!Zl(e))throw Error($(200));return ea(null,t,e,!1,s)};rt.unmountComponentAtNode=function(t){if(!Zl(t))throw Error($(40));return t._reactRootContainer?(Hs(function(){ea(null,null,t,!1,function(){t._reactRootContainer=null,t[Ht]=null})}),!0):!1};rt.unstable_batchedUpdates=yd;rt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Zl(s))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ea(t,e,s,!1,n)};rt.version="18.3.1-next-f1338f8080-20240426";function n0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n0)}catch(t){console.error(t)}}n0(),nm.exports=rt;var cv=nm.exports,fh=cv;xo.createRoot=fh.createRoot,xo.hydrateRoot=fh.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dr(){return Dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Dr.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const mh="popstate";function dv(t){t===void 0&&(t={});function e(n,i){let{pathname:l,search:a,hash:o}=n.location;return cc("",{pathname:l,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Ll(i)}return hv(e,s,null,t)}function xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uv(){return Math.random().toString(36).substr(2,8)}function ph(t,e){return{usr:t.state,key:t.key,idx:e}}function cc(t,e,s,n){return s===void 0&&(s=null),Dr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wn(e):e,{state:s,key:e&&e.key||n||uv()})}function Ll(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Wn(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function hv(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:l=!1}=n,a=i.history,o=ls.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(Dr({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function h(){o=ls.Pop;let b=u(),p=b==null?null:b-d;d=b,c&&c({action:o,location:x.location,delta:p})}function f(b,p){o=ls.Push;let g=cc(x.location,b,p);d=u()+1;let v=ph(g,d),j=x.createHref(g);try{a.pushState(v,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(j)}l&&c&&c({action:o,location:x.location,delta:1})}function y(b,p){o=ls.Replace;let g=cc(x.location,b,p);d=u();let v=ph(g,d),j=x.createHref(g);a.replaceState(v,"",j),l&&c&&c({action:o,location:x.location,delta:0})}function m(b){let p=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:Ll(b);return g=g.replace(/ $/,"%20"),xe(p,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,p)}let x={get action(){return o},get location(){return t(i,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(mh,h),c=b,()=>{i.removeEventListener(mh,h),c=null}},createHref(b){return e(i,b)},createURL:m,encodeLocation(b){let p=m(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:y,go(b){return a.go(b)}};return x}var xh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xh||(xh={}));function fv(t,e,s){return s===void 0&&(s="/"),mv(t,e,s)}function mv(t,e,s,n){let i=typeof e=="string"?Wn(e):e,l=Ed(i.pathname||"/",s);if(l==null)return null;let a=r0(t);pv(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let d=Ev(l);o=kv(a[c],d)}return o}function r0(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(l,a,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(xe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=xs([n,c.relativePath]),u=s.concat(c);l.children&&l.children.length>0&&(xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),r0(l.children,e,u,d)),!(l.path==null&&!l.index)&&e.push({path:d,score:wv(d,l.index),routesMeta:u})};return t.forEach((l,a)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))i(l,a);else for(let c of i0(l.path))i(l,a,c)}),e}function i0(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let a=i0(n.join("/")),o=[];return o.push(...a.map(c=>c===""?l:[l,c].join("/"))),i&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function pv(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:jv(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const xv=/^:[\w-]+$/,gv=3,yv=2,vv=1,bv=10,Nv=-2,gh=t=>t==="*";function wv(t,e){let s=t.split("/"),n=s.length;return s.some(gh)&&(n+=Nv),e&&(n+=yv),s.filter(i=>!gh(i)).reduce((i,l)=>i+(xv.test(l)?gv:l===""?vv:bv),n)}function jv(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function kv(t,e,s){let{routesMeta:n}=t,i={},l="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=l==="/"?e:e.slice(l.length)||"/",h=Sv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:xs([l,h.pathname]),pathnameBase:Mv(xs([l,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(l=xs([l,h.pathnameBase]))}return a}function Sv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=Cv(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],a=l.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:y}=u;if(f==="*"){let x=o[h]||"";a=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const m=o[h];return y&&!m?d[f]=void 0:d[f]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:a,pattern:t}}function Cv(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Cd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Ev(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ed(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const _v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pv=t=>_v.test(t);function Tv(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Wn(t):t,l;if(s)if(Pv(s))l=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),Cd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+s))}s.startsWith("/")?l=yh(s.substring(1),"/"):l=yh(s,e)}else l=e;return{pathname:l,search:zv(n),hash:Rv(i)}}function yh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Ua(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lv(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function _d(t,e){let s=Lv(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Pd(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Wn(t):(i=Dr({},t),xe(!i.pathname||!i.pathname.includes("?"),Ua("?","pathname","search",i)),xe(!i.pathname||!i.pathname.includes("#"),Ua("#","pathname","hash",i)),xe(!i.search||!i.search.includes("#"),Ua("#","search","hash",i)));let l=t===""||i.pathname==="",a=l?"/":i.pathname,o;if(a==null)o=s;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let c=Tv(i,o),d=a&&a!=="/"&&a.endsWith("/"),u=(l||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const xs=t=>t.join("/").replace(/\/\/+/g,"/"),Mv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Rv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ov(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const l0=["post","put","patch","delete"];new Set(l0);const Av=["get",...l0];new Set(Av);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vr(){return Vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Vr.apply(this,arguments)}const Td=N.createContext(null),$v=N.createContext(null),Ss=N.createContext(null),ta=N.createContext(null),Cs=N.createContext({outlet:null,matches:[],isDataRoute:!1}),a0=N.createContext(null);function Iv(t,e){let{relative:s}=e===void 0?{}:e;Hn()||xe(!1);let{basename:n,navigator:i}=N.useContext(Ss),{hash:l,pathname:a,search:o}=c0(t,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:xs([n,a])),i.createHref({pathname:c,search:o,hash:l})}function Hn(){return N.useContext(ta)!=null}function tn(){return Hn()||xe(!1),N.useContext(ta).location}function o0(t){N.useContext(Ss).static||N.useLayoutEffect(t)}function sn(){let{isDataRoute:t}=N.useContext(Cs);return t?Jv():Bv()}function Bv(){Hn()||xe(!1);let t=N.useContext(Td),{basename:e,future:s,navigator:n}=N.useContext(Ss),{matches:i}=N.useContext(Cs),{pathname:l}=tn(),a=JSON.stringify(_d(i,s.v7_relativeSplatPath)),o=N.useRef(!1);return o0(()=>{o.current=!0}),N.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=Pd(d,JSON.parse(a),l,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xs([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,a,l,t])}function c0(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=N.useContext(Ss),{matches:i}=N.useContext(Cs),{pathname:l}=tn(),a=JSON.stringify(_d(i,n.v7_relativeSplatPath));return N.useMemo(()=>Pd(t,JSON.parse(a),l,s==="path"),[t,a,l,s])}function Fv(t,e){return Uv(t,e)}function Uv(t,e,s,n){Hn()||xe(!1);let{navigator:i}=N.useContext(Ss),{matches:l}=N.useContext(Cs),a=l[l.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=tn(),u;if(e){var h;let b=typeof e=="string"?Wn(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||xe(!1),u=b}else u=d;let f=u.pathname||"/",y=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=fv(t,{pathname:y}),x=qv(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:xs([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:xs([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,s,n);return e&&x?N.createElement(ta.Provider,{value:{location:Vr({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ls.Pop}},x):x}function Dv(){let t=Qv(),e=Ov(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:i},s):null,null)}const Vv=N.createElement(Dv,null);class Wv extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?N.createElement(Cs.Provider,{value:this.props.routeContext},N.createElement(a0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hv(t){let{routeContext:e,match:s,children:n}=t,i=N.useContext(Td);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Cs.Provider,{value:e},n)}function qv(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,o=(i=s)==null?void 0:i.errors;if(o!=null){let u=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||xe(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:y}=s,m=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||m){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let y,m=!1,x=null,b=null;s&&(y=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||Vv,c&&(d<0&&f===0?(Gv("route-fallback"),m=!0,b=null):d===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,f+1)),g=()=>{let v;return y?v=x:m?v=b:h.route.Component?v=N.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,N.createElement(Hv,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:s!=null},children:v})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(Wv,{location:s.location,revalidation:s.revalidation,component:x,error:y,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var d0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(d0||{}),u0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(u0||{});function Kv(t){let e=N.useContext(Td);return e||xe(!1),e}function Xv(t){let e=N.useContext($v);return e||xe(!1),e}function Yv(t){let e=N.useContext(Cs);return e||xe(!1),e}function h0(t){let e=Yv(),s=e.matches[e.matches.length-1];return s.route.id||xe(!1),s.route.id}function Qv(){var t;let e=N.useContext(a0),s=Xv(),n=h0();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function Jv(){let{router:t}=Kv(d0.UseNavigateStable),e=h0(u0.UseNavigateStable),s=N.useRef(!1);return o0(()=>{s.current=!0}),N.useCallback(function(i,l){l===void 0&&(l={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vr({fromRouteId:e},l)))},[t,e])}const vh={};function Gv(t,e,s){vh[t]||(vh[t]=!0)}function Zv(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function f0(t){let{to:e,replace:s,state:n,relative:i}=t;Hn()||xe(!1);let{future:l,static:a}=N.useContext(Ss),{matches:o}=N.useContext(Cs),{pathname:c}=tn(),d=sn(),u=Pd(e,_d(o,l.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return N.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:i}),[d,h,i,s,n]),null}function de(t){xe(!1)}function eb(t){let{basename:e="/",children:s=null,location:n,navigationType:i=ls.Pop,navigator:l,static:a=!1,future:o}=t;Hn()&&xe(!1);let c=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:l,static:a,future:Vr({v7_relativeSplatPath:!1},o)}),[c,o,l,a]);typeof n=="string"&&(n=Wn(n));let{pathname:u="/",search:h="",hash:f="",state:y=null,key:m="default"}=n,x=N.useMemo(()=>{let b=Ed(u,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:y,key:m},navigationType:i}},[c,u,h,f,y,m,i]);return x==null?null:N.createElement(Ss.Provider,{value:d},N.createElement(ta.Provider,{children:s,value:x}))}function m0(t){let{children:e,location:s}=t;return Fv(dc(e),s)}new Promise(()=>{});function dc(t,e){e===void 0&&(e=[]);let s=[];return N.Children.forEach(t,(n,i)=>{if(!N.isValidElement(n))return;let l=[...e,i];if(n.type===N.Fragment){s.push.apply(s,dc(n.props.children,l));return}n.type!==de&&xe(!1),!n.props.index||!n.props.children||xe(!1);let a={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=dc(n.props.children,l)),s.push(a)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},uc.apply(this,arguments)}function tb(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function sb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nb(t,e){return t.button===0&&(!e||e==="_self")&&!sb(t)}function hc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function rb(t,e){let s=hc(t);return e&&e.forEach((n,i)=>{s.has(i)||e.getAll(i).forEach(l=>{s.append(i,l)})}),s}const ib=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lb="6";try{window.__reactRouterVersion=lb}catch{}const ab="startTransition",bh=Gx[ab];function ob(t){let{basename:e,children:s,future:n,window:i}=t,l=N.useRef();l.current==null&&(l.current=dv({window:i,v5Compat:!0}));let a=l.current,[o,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},u=N.useCallback(h=>{d&&bh?bh(()=>c(h)):c(h)},[c,d]);return N.useLayoutEffect(()=>a.listen(u),[a,u]),N.useEffect(()=>Zv(n),[n]),N.createElement(eb,{basename:e,children:s,location:o.location,navigationType:o.action,navigator:a,future:n})}const cb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",db=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=N.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:l,replace:a,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=tb(e,ib),{basename:y}=N.useContext(Ss),m,x=!1;if(typeof d=="string"&&db.test(d)&&(m=d,cb))try{let v=new URL(window.location.href),j=d.startsWith("//")?new URL(v.protocol+d):new URL(d),k=Ed(j.pathname,y);j.origin===v.origin&&k!=null?d=k+j.search+j.hash:x=!0}catch{}let b=Iv(d,{relative:i}),p=ub(d,{replace:a,state:o,target:c,preventScrollReset:u,relative:i,viewTransition:h});function g(v){n&&n(v),v.defaultPrevented||p(v)}return N.createElement("a",uc({},f,{href:m||b,onClick:x||l?n:g,ref:s,target:c}))});var Nh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nh||(Nh={}));var wh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wh||(wh={}));function ub(t,e){let{target:s,replace:n,state:i,preventScrollReset:l,relative:a,viewTransition:o}=e===void 0?{}:e,c=sn(),d=tn(),u=c0(t,{relative:a});return N.useCallback(h=>{if(nb(h,s)){h.preventDefault();let f=n!==void 0?n:Ll(d)===Ll(u);c(t,{replace:f,state:i,preventScrollReset:l,relative:a,viewTransition:o})}},[d,c,u,n,i,s,t,l,a,o])}function hb(t){let e=N.useRef(hc(t)),s=N.useRef(!1),n=tn(),i=N.useMemo(()=>rb(n.search,s.current?null:e.current),[n.search]),l=sn(),a=N.useCallback((o,c)=>{const d=hc(typeof o=="function"?o(i):o);s.current=!0,l("?"+d,c)},[l,i]);return[i,a]}function p0(t,e){return function(){return t.apply(e,arguments)}}const{toString:fb}=Object.prototype,{getPrototypeOf:Ld}=Object,{iterator:sa,toStringTag:x0}=Symbol,na=(t=>e=>{const s=fb.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),jt=t=>(t=t.toLowerCase(),e=>na(e)===t),ra=t=>e=>typeof e===t,{isArray:qn}=Array,$n=ra("undefined");function ri(t){return t!==null&&!$n(t)&&t.constructor!==null&&!$n(t.constructor)&&Ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const g0=jt("ArrayBuffer");function mb(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&g0(t.buffer),e}const pb=ra("string"),Ye=ra("function"),y0=ra("number"),ii=t=>t!==null&&typeof t=="object",xb=t=>t===!0||t===!1,Zi=t=>{if(na(t)!=="object")return!1;const e=Ld(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(x0 in t)&&!(sa in t)},gb=t=>{if(!ii(t)||ri(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},yb=jt("Date"),vb=jt("File"),bb=jt("Blob"),Nb=jt("FileList"),wb=t=>ii(t)&&Ye(t.pipe),jb=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ye(t.append)&&((e=na(t))==="formdata"||e==="object"&&Ye(t.toString)&&t.toString()==="[object FormData]"))},kb=jt("URLSearchParams"),[Sb,Cb,Eb,_b]=["ReadableStream","Request","Response","Headers"].map(jt),Pb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function li(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),qn(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(ri(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),a=l.length;let o;for(n=0;n<a;n++)o=l[n],e.call(null,t[o],o,t)}}function v0(t,e){if(ri(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const Os=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,b0=t=>!$n(t)&&t!==Os;function fc(){const{caseless:t,skipUndefined:e}=b0(this)&&this||{},s={},n=(i,l)=>{const a=t&&v0(s,l)||l;Zi(s[a])&&Zi(i)?s[a]=fc(s[a],i):Zi(i)?s[a]=fc({},i):qn(i)?s[a]=i.slice():(!e||!$n(i))&&(s[a]=i)};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&li(arguments[i],n);return s}const Tb=(t,e,s,{allOwnKeys:n}={})=>(li(e,(i,l)=>{s&&Ye(i)?t[l]=p0(i,s):t[l]=i},{allOwnKeys:n}),t),Lb=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mb=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},zb=(t,e,s,n)=>{let i,l,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),l=i.length;l-- >0;)a=i[l],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=s!==!1&&Ld(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},Rb=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},Ob=t=>{if(!t)return null;if(qn(t))return t;let e=t.length;if(!y0(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Ab=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ld(Uint8Array)),$b=(t,e)=>{const n=(t&&t[sa]).call(t);let i;for(;(i=n.next())&&!i.done;){const l=i.value;e.call(t,l[0],l[1])}},Ib=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Bb=jt("HTMLFormElement"),Fb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),jh=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Ub=jt("RegExp"),N0=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};li(s,(i,l)=>{let a;(a=e(i,l,t))!==!1&&(n[l]=a||i)}),Object.defineProperties(t,n)},Db=t=>{N0(t,(e,s)=>{if(Ye(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Ye(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Vb=(t,e)=>{const s={},n=i=>{i.forEach(l=>{s[l]=!0})};return qn(t)?n(t):n(String(t).split(e)),s},Wb=()=>{},Hb=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function qb(t){return!!(t&&Ye(t.append)&&t[x0]==="FormData"&&t[sa])}const Kb=t=>{const e=new Array(10),s=(n,i)=>{if(ii(n)){if(e.indexOf(n)>=0)return;if(ri(n))return n;if(!("toJSON"in n)){e[i]=n;const l=qn(n)?[]:{};return li(n,(a,o)=>{const c=s(a,i+1);!$n(c)&&(l[o]=c)}),e[i]=void 0,l}}return n};return s(t,0)},Xb=jt("AsyncFunction"),Yb=t=>t&&(ii(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),w0=((t,e)=>t?setImmediate:e?((s,n)=>(Os.addEventListener("message",({source:i,data:l})=>{i===Os&&l===s&&n.length&&n.shift()()},!1),i=>{n.push(i),Os.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ye(Os.postMessage)),Qb=typeof queueMicrotask<"u"?queueMicrotask.bind(Os):typeof process<"u"&&process.nextTick||w0,Jb=t=>t!=null&&Ye(t[sa]),P={isArray:qn,isArrayBuffer:g0,isBuffer:ri,isFormData:jb,isArrayBufferView:mb,isString:pb,isNumber:y0,isBoolean:xb,isObject:ii,isPlainObject:Zi,isEmptyObject:gb,isReadableStream:Sb,isRequest:Cb,isResponse:Eb,isHeaders:_b,isUndefined:$n,isDate:yb,isFile:vb,isBlob:bb,isRegExp:Ub,isFunction:Ye,isStream:wb,isURLSearchParams:kb,isTypedArray:Ab,isFileList:Nb,forEach:li,merge:fc,extend:Tb,trim:Pb,stripBOM:Lb,inherits:Mb,toFlatObject:zb,kindOf:na,kindOfTest:jt,endsWith:Rb,toArray:Ob,forEachEntry:$b,matchAll:Ib,isHTMLForm:Bb,hasOwnProperty:jh,hasOwnProp:jh,reduceDescriptors:N0,freezeMethods:Db,toObjectSet:Vb,toCamelCase:Fb,noop:Wb,toFiniteNumber:Hb,findKey:v0,global:Os,isContextDefined:b0,isSpecCompliantForm:qb,toJSONObject:Kb,isAsyncFn:Xb,isThenable:Yb,setImmediate:w0,asap:Qb,isIterable:Jb};function X(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}P.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const j0=X.prototype,k0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{k0[t]={value:t}});Object.defineProperties(X,k0);Object.defineProperty(j0,"isAxiosError",{value:!0});X.from=(t,e,s,n,i,l)=>{const a=Object.create(j0);P.toFlatObject(t,a,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return X.call(a,o,c,s,n,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",l&&Object.assign(a,l),a};const Gb=null;function mc(t){return P.isPlainObject(t)||P.isArray(t)}function S0(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function kh(t,e,s){return t?t.concat(e).map(function(i,l){return i=S0(i),!s&&l?"["+i+"]":i}).join(s?".":""):e}function Zb(t){return P.isArray(t)&&!t.some(mc)}const eN=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function ia(t,e,s){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=P.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!P.isUndefined(b[x])});const n=s.metaTokens,i=s.visitor||u,l=s.dots,a=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(P.isDate(m))return m.toISOString();if(P.isBoolean(m))return m.toString();if(!c&&P.isBlob(m))throw new X("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(m)||P.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,x,b){let p=m;if(m&&!b&&typeof m=="object"){if(P.endsWith(x,"{}"))x=n?x:x.slice(0,-2),m=JSON.stringify(m);else if(P.isArray(m)&&Zb(m)||(P.isFileList(m)||P.endsWith(x,"[]"))&&(p=P.toArray(m)))return x=S0(x),p.forEach(function(v,j){!(P.isUndefined(v)||v===null)&&e.append(a===!0?kh([x],j,l):a===null?x:x+"[]",d(v))}),!1}return mc(m)?!0:(e.append(kh(b,x,l),d(m)),!1)}const h=[],f=Object.assign(eN,{defaultVisitor:u,convertValue:d,isVisitable:mc});function y(m,x){if(!P.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(m),P.forEach(m,function(p,g){(!(P.isUndefined(p)||p===null)&&i.call(e,p,P.isString(g)?g.trim():g,x,f))===!0&&y(p,x?x.concat(g):[g])}),h.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return y(t),e}function Sh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Md(t,e){this._pairs=[],t&&ia(t,this,e)}const C0=Md.prototype;C0.append=function(e,s){this._pairs.push([e,s])};C0.toString=function(e){const s=e?function(n){return e.call(this,n,Sh)}:Sh;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function tN(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function E0(t,e,s){if(!e)return t;const n=s&&s.encode||tN;P.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let l;if(i?l=i(e,s):l=P.isURLSearchParams(e)?e.toString():new Md(e,s).toString(n),l){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Ch{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(n){n!==null&&e(n)})}}const _0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sN=typeof URLSearchParams<"u"?URLSearchParams:Md,nN=typeof FormData<"u"?FormData:null,rN=typeof Blob<"u"?Blob:null,iN={isBrowser:!0,classes:{URLSearchParams:sN,FormData:nN,Blob:rN},protocols:["http","https","file","blob","url","data"]},zd=typeof window<"u"&&typeof document<"u",pc=typeof navigator=="object"&&navigator||void 0,lN=zd&&(!pc||["ReactNative","NativeScript","NS"].indexOf(pc.product)<0),aN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oN=zd&&window.location.href||"http://localhost",cN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zd,hasStandardBrowserEnv:lN,hasStandardBrowserWebWorkerEnv:aN,navigator:pc,origin:oN},Symbol.toStringTag,{value:"Module"})),$e={...cN,...iN};function dN(t,e){return ia(t,new $e.classes.URLSearchParams,{visitor:function(s,n,i,l){return $e.isNode&&P.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function uN(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hN(t){const e={},s=Object.keys(t);let n;const i=s.length;let l;for(n=0;n<i;n++)l=s[n],e[l]=t[l];return e}function P0(t){function e(s,n,i,l){let a=s[l++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=l>=s.length;return a=!a&&P.isArray(i)?i.length:a,c?(P.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!P.isObject(i[a]))&&(i[a]=[]),e(s,n,i[a],l)&&P.isArray(i[a])&&(i[a]=hN(i[a])),!o)}if(P.isFormData(t)&&P.isFunction(t.entries)){const s={};return P.forEachEntry(t,(n,i)=>{e(uN(n),i,s,0)}),s}return null}function fN(t,e,s){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const ai={transitional:_0,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,l=P.isObject(e);if(l&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return i?JSON.stringify(P0(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e)||P.isReadableStream(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return dN(e,this.formSerializer).toString();if((o=P.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ia(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return l||i?(s.setContentType("application/json",!1),fN(e)):e}],transformResponse:[function(e){const s=this.transitional||ai.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(P.isResponse(e)||P.isReadableStream(e))return e;if(e&&P.isString(e)&&(n&&!this.responseType||i)){const a=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?X.from(o,X.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$e.classes.FormData,Blob:$e.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{ai.headers[t]={}});const mN=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pN=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),s=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!s||e[s]&&mN[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Eh=Symbol("internals");function rr(t){return t&&String(t).trim().toLowerCase()}function el(t){return t===!1||t==null?t:P.isArray(t)?t.map(el):String(t)}function xN(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const gN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Da(t,e,s,n,i){if(P.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!P.isString(e)){if(P.isString(n))return e.indexOf(n)!==-1;if(P.isRegExp(n))return n.test(e)}}function yN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function vN(t,e){const s=P.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,l,a){return this[n].call(this,e,i,l,a)},configurable:!0})})}let Qe=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function l(o,c,d){const u=rr(c);if(!u)throw new Error("header name must be a non-empty string");const h=P.findKey(i,u);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||c]=el(o))}const a=(o,c)=>P.forEach(o,(d,u)=>l(d,u,c));if(P.isPlainObject(e)||e instanceof this.constructor)a(e,s);else if(P.isString(e)&&(e=e.trim())&&!gN(e))a(pN(e),s);else if(P.isObject(e)&&P.isIterable(e)){let o={},c,d;for(const u of e){if(!P.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?P.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(o,s)}else e!=null&&l(s,e,n);return this}get(e,s){if(e=rr(e),e){const n=P.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return xN(i);if(P.isFunction(s))return s.call(this,i,n);if(P.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=rr(e),e){const n=P.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Da(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function l(a){if(a=rr(a),a){const o=P.findKey(n,a);o&&(!s||Da(n,n[o],o,s))&&(delete n[o],i=!0)}}return P.isArray(e)?e.forEach(l):l(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const l=s[n];(!e||Da(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const s=this,n={};return P.forEach(this,(i,l)=>{const a=P.findKey(n,l);if(a){s[a]=el(i),delete s[l];return}const o=e?yN(l):String(l).trim();o!==l&&delete s[l],s[o]=el(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return P.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&P.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Eh]=this[Eh]={accessors:{}}).accessors,i=this.prototype;function l(a){const o=rr(a);n[o]||(vN(i,a),n[o]=!0)}return P.isArray(e)?e.forEach(l):l(e),this}};Qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(Qe.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});P.freezeMethods(Qe);function Va(t,e){const s=this||ai,n=e||s,i=Qe.from(n.headers);let l=n.data;return P.forEach(t,function(o){l=o.call(s,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function T0(t){return!!(t&&t.__CANCEL__)}function Kn(t,e,s){X.call(this,t??"canceled",X.ERR_CANCELED,e,s),this.name="CanceledError"}P.inherits(Kn,X,{__CANCEL__:!0});function L0(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new X("Request failed with status code "+s.status,[X.ERR_BAD_REQUEST,X.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function bN(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NN(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,l=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=n[l];a||(a=d),s[i]=c,n[i]=d;let h=l,f=0;for(;h!==i;)f+=s[h++],h=h%t;if(i=(i+1)%t,i===l&&(l=(l+1)%t),d-a<e)return;const y=u&&d-u;return y?Math.round(f*1e3/y):void 0}}function wN(t,e){let s=0,n=1e3/e,i,l;const a=(d,u=Date.now())=>{s=u,i=null,l&&(clearTimeout(l),l=null),t(...d)};return[(...d)=>{const u=Date.now(),h=u-s;h>=n?a(d,u):(i=d,l||(l=setTimeout(()=>{l=null,a(i)},n-h)))},()=>i&&a(i)]}const Ml=(t,e,s=3)=>{let n=0;const i=NN(50,250);return wN(l=>{const a=l.loaded,o=l.lengthComputable?l.total:void 0,c=a-n,d=i(c),u=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-a)/d:void 0,event:l,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},s)},_h=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},Ph=t=>(...e)=>P.asap(()=>t(...e)),jN=$e.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,$e.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL($e.origin),$e.navigator&&/(msie|trident)/i.test($e.navigator.userAgent)):()=>!0,kN=$e.hasStandardBrowserEnv?{write(t,e,s,n,i,l,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];P.isNumber(s)&&o.push(`expires=${new Date(s).toUTCString()}`),P.isString(n)&&o.push(`path=${n}`),P.isString(i)&&o.push(`domain=${i}`),l===!0&&o.push("secure"),P.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function SN(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function CN(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function M0(t,e,s){let n=!SN(e);return t&&(n||s==!1)?CN(t,e):e}const Th=t=>t instanceof Qe?{...t}:t;function qs(t,e){e=e||{};const s={};function n(d,u,h,f){return P.isPlainObject(d)&&P.isPlainObject(u)?P.merge.call({caseless:f},d,u):P.isPlainObject(u)?P.merge({},u):P.isArray(u)?u.slice():u}function i(d,u,h,f){if(P.isUndefined(u)){if(!P.isUndefined(d))return n(void 0,d,h,f)}else return n(d,u,h,f)}function l(d,u){if(!P.isUndefined(u))return n(void 0,u)}function a(d,u){if(P.isUndefined(u)){if(!P.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function o(d,u,h){if(h in e)return n(d,u);if(h in t)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(d,u,h)=>i(Th(d),Th(u),h,!0)};return P.forEach(Object.keys({...t,...e}),function(u){const h=c[u]||i,f=h(t[u],e[u],u);P.isUndefined(f)&&h!==o||(s[u]=f)}),s}const z0=t=>{const e=qs({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:l,headers:a,auth:o}=e;if(e.headers=a=Qe.from(a),e.url=E0(M0(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),P.isFormData(s)){if($e.hasStandardBrowserEnv||$e.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(P.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&a.set(u,h)})}}if($e.hasStandardBrowserEnv&&(n&&P.isFunction(n)&&(n=n(e)),n||n!==!1&&jN(e.url))){const c=i&&l&&kN.read(l);c&&a.set(i,c)}return e},EN=typeof XMLHttpRequest<"u",_N=EN&&function(t){return new Promise(function(s,n){const i=z0(t);let l=i.data;const a=Qe.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=i,u,h,f,y,m;function x(){y&&y(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function p(){if(!b)return;const v=Qe.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:v,config:t,request:b};L0(function(w){s(w),x()},function(w){n(w),x()},k),b=null}"onloadend"in b?b.onloadend=p:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(p)},b.onabort=function(){b&&(n(new X("Request aborted",X.ECONNABORTED,t,b)),b=null)},b.onerror=function(j){const k=j&&j.message?j.message:"Network Error",S=new X(k,X.ERR_NETWORK,t,b);S.event=j||null,n(S),b=null},b.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||_0;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),n(new X(j,k.clarifyTimeoutError?X.ETIMEDOUT:X.ECONNABORTED,t,b)),b=null},l===void 0&&a.setContentType(null),"setRequestHeader"in b&&P.forEach(a.toJSON(),function(j,k){b.setRequestHeader(k,j)}),P.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),o&&o!=="json"&&(b.responseType=i.responseType),d&&([f,m]=Ml(d,!0),b.addEventListener("progress",f)),c&&b.upload&&([h,y]=Ml(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(u=v=>{b&&(n(!v||v.type?new Kn(null,t,b):v),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const g=bN(i.url);if(g&&$e.protocols.indexOf(g)===-1){n(new X("Unsupported protocol "+g+":",X.ERR_BAD_REQUEST,t));return}b.send(l||null)})},PN=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const l=function(d){if(!i){i=!0,o();const u=d instanceof Error?d:this.reason;n.abort(u instanceof X?u:new Kn(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,l(new X(`timeout ${e} of ms exceeded`,X.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),t=null)};t.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>P.asap(o),c}},TN=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},LN=async function*(t,e){for await(const s of MN(t))yield*TN(s,e)},MN=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},Lh=(t,e,s,n)=>{const i=LN(t,e);let l=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await i.next();if(d){o(),c.close();return}let h=u.byteLength;if(s){let f=l+=h;s(f)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Mh=64*1024,{isFunction:_i}=P,zN=(({Request:t,Response:e})=>({Request:t,Response:e}))(P.global),{ReadableStream:zh,TextEncoder:Rh}=P.global,Oh=(t,...e)=>{try{return!!t(...e)}catch{return!1}},RN=t=>{t=P.merge.call({skipUndefined:!0},zN,t);const{fetch:e,Request:s,Response:n}=t,i=e?_i(e):typeof fetch=="function",l=_i(s),a=_i(n);if(!i)return!1;const o=i&&_i(zh),c=i&&(typeof Rh=="function"?(m=>x=>m.encode(x))(new Rh):async m=>new Uint8Array(await new s(m).arrayBuffer())),d=l&&o&&Oh(()=>{let m=!1;const x=new s($e.origin,{body:new zh,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!x}),u=a&&o&&Oh(()=>P.isReadableStream(new n("").body)),h={stream:u&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(x,b)=>{let p=x&&x[m];if(p)return p.call(x);throw new X(`Response type '${m}' is not supported`,X.ERR_NOT_SUPPORT,b)})});const f=async m=>{if(m==null)return 0;if(P.isBlob(m))return m.size;if(P.isSpecCompliantForm(m))return(await new s($e.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(P.isArrayBufferView(m)||P.isArrayBuffer(m))return m.byteLength;if(P.isURLSearchParams(m)&&(m=m+""),P.isString(m))return(await c(m)).byteLength},y=async(m,x)=>{const b=P.toFiniteNumber(m.getContentLength());return b??f(x)};return async m=>{let{url:x,method:b,data:p,signal:g,cancelToken:v,timeout:j,onDownloadProgress:k,onUploadProgress:S,responseType:w,headers:C,withCredentials:T="same-origin",fetchOptions:M}=z0(m),R=e||fetch;w=w?(w+"").toLowerCase():"text";let E=PN([g,v&&v.toAbortSignal()],j),_=null;const O=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let I;try{if(S&&d&&b!=="get"&&b!=="head"&&(I=await y(C,p))!==0){let F=new s(x,{method:"POST",body:p,duplex:"half"}),H;if(P.isFormData(p)&&(H=F.headers.get("content-type"))&&C.setContentType(H),F.body){const[Q,W]=_h(I,Ml(Ph(S)));p=Lh(F.body,Mh,Q,W)}}P.isString(T)||(T=T?"include":"omit");const U=l&&"credentials"in s.prototype,ae={...M,signal:E,method:b.toUpperCase(),headers:C.normalize().toJSON(),body:p,duplex:"half",credentials:U?T:void 0};_=l&&new s(x,ae);let B=await(l?R(_,M):R(x,ae));const V=u&&(w==="stream"||w==="response");if(u&&(k||V&&O)){const F={};["status","statusText","headers"].forEach(K=>{F[K]=B[K]});const H=P.toFiniteNumber(B.headers.get("content-length")),[Q,W]=k&&_h(H,Ml(Ph(k),!0))||[];B=new n(Lh(B.body,Mh,Q,()=>{W&&W(),O&&O()}),F)}w=w||"text";let L=await h[P.findKey(h,w)||"text"](B,m);return!V&&O&&O(),await new Promise((F,H)=>{L0(F,H,{data:L,headers:Qe.from(B.headers),status:B.status,statusText:B.statusText,config:m,request:_})})}catch(U){throw O&&O(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new X("Network Error",X.ERR_NETWORK,m,_),{cause:U.cause||U}):X.from(U,U&&U.code,m,_)}}},ON=new Map,R0=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:i}=e,l=[n,i,s];let a=l.length,o=a,c,d,u=ON;for(;o--;)c=l[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:RN(e)),u=d;return d};R0();const Rd={http:Gb,xhr:_N,fetch:{get:R0}};P.forEach(Rd,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ah=t=>`- ${t}`,AN=t=>P.isFunction(t)||t===null||t===!1;function $N(t,e){t=P.isArray(t)?t:[t];const{length:s}=t;let n,i;const l={};for(let a=0;a<s;a++){n=t[a];let o;if(i=n,!AN(n)&&(i=Rd[(o=String(n)).toLowerCase()],i===void 0))throw new X(`Unknown adapter '${o}'`);if(i&&(P.isFunction(i)||(i=i.get(e))))break;l[o||"#"+a]=i}if(!i){const a=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=s?a.length>1?`since :
`+a.map(Ah).join(`
`):" "+Ah(a[0]):"as no adapter specified";throw new X("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const O0={getAdapter:$N,adapters:Rd};function Wa(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kn(null,t)}function $h(t){return Wa(t),t.headers=Qe.from(t.headers),t.data=Va.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),O0.getAdapter(t.adapter||ai.adapter,t)(t).then(function(n){return Wa(t),n.data=Va.call(t,t.transformResponse,n),n.headers=Qe.from(n.headers),n},function(n){return T0(n)||(Wa(t),n&&n.response&&(n.response.data=Va.call(t,t.transformResponse,n.response),n.response.headers=Qe.from(n.response.headers))),Promise.reject(n)})}const A0="1.13.2",la={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{la[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ih={};la.transitional=function(e,s,n){function i(l,a){return"[Axios v"+A0+"] Transitional option '"+l+"'"+a+(n?". "+n:"")}return(l,a,o)=>{if(e===!1)throw new X(i(a," has been removed"+(s?" in "+s:"")),X.ERR_DEPRECATED);return s&&!Ih[a]&&(Ih[a]=!0,console.warn(i(a," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,a,o):!0}};la.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function IN(t,e,s){if(typeof t!="object")throw new X("options must be an object",X.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const l=n[i],a=e[l];if(a){const o=t[l],c=o===void 0||a(o,l,t);if(c!==!0)throw new X("option "+l+" must be "+c,X.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new X("Unknown option "+l,X.ERR_BAD_OPTION)}}const tl={assertOptions:IN,validators:la},Et=tl.validators;let Bs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ch,response:new Ch}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=qs(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:l}=s;n!==void 0&&tl.assertOptions(n,{silentJSONParsing:Et.transitional(Et.boolean),forcedJSONParsing:Et.transitional(Et.boolean),clarifyTimeoutError:Et.transitional(Et.boolean)},!1),i!=null&&(P.isFunction(i)?s.paramsSerializer={serialize:i}:tl.assertOptions(i,{encode:Et.function,serialize:Et.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),tl.assertOptions(s,{baseUrl:Et.spelling("baseURL"),withXsrfToken:Et.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=l&&P.merge(l.common,l[s.method]);l&&P.forEach(["delete","get","head","post","put","patch","common"],m=>{delete l[m]}),s.headers=Qe.concat(a,l);const o=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(s)===!1||(c=c&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let u,h=0,f;if(!c){const m=[$h.bind(this),void 0];for(m.unshift(...o),m.push(...d),f=m.length,u=Promise.resolve(s);h<f;)u=u.then(m[h++],m[h++]);return u}f=o.length;let y=s;for(;h<f;){const m=o[h++],x=o[h++];try{y=m(y)}catch(b){x.call(this,b);break}}try{u=$h.call(this,y)}catch(m){return Promise.reject(m)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(e){e=qs(this.defaults,e);const s=M0(e.baseURL,e.url,e.allowAbsoluteUrls);return E0(s,e.params,e.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(e){Bs.prototype[e]=function(s,n){return this.request(qs(n||{},{method:e,url:s,data:(n||{}).data}))}});P.forEach(["post","put","patch"],function(e){function s(n){return function(l,a,o){return this.request(qs(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:a}))}}Bs.prototype[e]=s(),Bs.prototype[e+"Form"]=s(!0)});let BN=class $0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(i=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](i);n._listeners=null}),this.promise.then=i=>{let l;const a=new Promise(o=>{n.subscribe(o),l=o}).then(i);return a.cancel=function(){n.unsubscribe(l)},a},e(function(l,a,o){n.reason||(n.reason=new Kn(l,a,o),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new $0(function(i){e=i}),cancel:e}}};function FN(t){return function(s){return t.apply(null,s)}}function UN(t){return P.isObject(t)&&t.isAxiosError===!0}const xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(xc).forEach(([t,e])=>{xc[e]=t});function I0(t){const e=new Bs(t),s=p0(Bs.prototype.request,e);return P.extend(s,Bs.prototype,e,{allOwnKeys:!0}),P.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return I0(qs(t,i))},s}const z=I0(ai);z.Axios=Bs;z.CanceledError=Kn;z.CancelToken=BN;z.isCancel=T0;z.VERSION=A0;z.toFormData=ia;z.AxiosError=X;z.Cancel=z.CanceledError;z.all=function(e){return Promise.all(e)};z.spread=FN;z.isAxiosError=UN;z.mergeConfig=qs;z.AxiosHeaders=Qe;z.formToJSON=t=>P0(P.isHTMLForm(t)?new FormData(t):t);z.getAdapter=O0.getAdapter;z.HttpStatusCode=xc;z.default=z;const{Axios:yS,AxiosError:vS,CanceledError:bS,isCancel:NS,CancelToken:wS,VERSION:jS,all:kS,Cancel:SS,isAxiosError:CS,spread:ES,toFormData:_S,AxiosHeaders:PS,HttpStatusCode:TS,formToJSON:LS,getAdapter:MS,mergeConfig:zS}=z,B0=N.createContext(),ce=()=>N.useContext(B0),DN=({children:t})=>{const[e,s]=N.useState(null),[n,i]=N.useState(null),[l,a]=N.useState(!0);N.useEffect(()=>{const x=localStorage.getItem("user"),b=localStorage.getItem("admin");x&&s(JSON.parse(x)),b&&i(JSON.parse(b)),a(!1)},[]);const m={user:e,admin:n,setAdmin:i,loading:l,loginUser:async(x,b)=>{const{data:p}=await z.post("/api/user/login",{email:x,password:b});return s(p),localStorage.setItem("user",JSON.stringify(p)),p},registerUser:async x=>{const{data:b}=await z.post("/api/user/register",x);return s(b),localStorage.setItem("user",JSON.stringify(b)),b},loginAdmin:async(x,b)=>{const{data:p}=await z.post("/api/admin/login",{email:x,password:b});return i(p),localStorage.setItem("admin",JSON.stringify(p)),p},setupAdmin:async(x,b,p)=>{const{data:g}=await z.post("/api/admin/setup",{username:x,email:b,password:p});return i(g),localStorage.setItem("admin",JSON.stringify(g)),g},logoutUser:()=>{s(null),localStorage.removeItem("user")},logoutAdmin:()=>{i(null),localStorage.removeItem("admin")},updateAdmin:x=>{const b={...n,...x};i(b),localStorage.setItem("admin",JSON.stringify(b))}};return r.jsx(B0.Provider,{value:m,children:t})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const s=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:o="",children:c,...d},u)=>N.createElement("svg",{ref:u,...VN,width:i,height:i,stroke:n,strokeWidth:a?Number(l)*24/Number(i):l,className:["lucide",`lucide-${WN(t)}`,o].join(" "),...d},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=G("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=G("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=G("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=G("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=G("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=G("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=G("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=G("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=G("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=G("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),QN=()=>{const[t,e]=N.useState(!1),[s,n]=N.useState({username:"",email:"",password:""}),[i,l]=N.useState(!1),[a,o]=N.useState(""),[c,d]=N.useState(!1),{loginAdmin:u,setupAdmin:h}=ce(),f=sn(),y=async m=>{var x,b;m.preventDefault(),o(""),d(!0);try{t?await h(s.username,s.email,s.password):await u(s.email,s.password),f("/admin/users")}catch(p){o(((b=(x=p.response)==null?void 0:x.data)==null?void 0:b.message)||"Something went wrong")}finally{d(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex",children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/20 to-blue-600/20"}),r.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-500/30 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:r.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl",children:r.jsx(Kr,{className:"w-12 h-12 text-white"})})}),r.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Admin Control Center"}),r.jsx("p",{className:"text-xl text-gray-300 mb-12",children:"Manage your trading platform with ease"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-md",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[r.jsx(Ol,{className:"w-8 h-8 text-purple-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"User Management"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Create, modify & manage all users"})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[r.jsx(Wr,{className:"w-8 h-8 text-blue-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Wallet Control"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Deposit & withdraw user funds"})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[r.jsx(gs,{className:"w-8 h-8 text-green-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Full Control"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Complete platform settings"})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[r.jsx(KN,{className:"w-8 h-8 text-yellow-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Secure Access"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Protected admin dashboard"})]})]})]})]}),r.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx("div",{className:"text-center mb-8 lg:hidden",children:r.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 bg-purple-600 rounded-xl",children:r.jsx(Kr,{className:"w-8 h-8 text-white"})}),r.jsx("span",{className:"text-2xl font-bold text-white",children:"Admin Panel"})]})}),r.jsxs("div",{className:"bg-dark-800/80 backdrop-blur-xl p-8 rounded-2xl border border-purple-500/20 shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Create Admin Account":"Admin Login"}),r.jsx("p",{className:"text-gray-400 mt-2",children:t?"Set up your admin credentials":"Access the control panel"})]}),a&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6",children:a}),r.jsxs("form",{onSubmit:y,children:[t&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:s.username,onChange:m=>n({...s,username:m.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"Enter username",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",value:s.email,onChange:m=>n({...s,email:m.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"admin@example.com",required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:i?"text":"password",value:s.password,onChange:m=>n({...s,password:m.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-purple-500 transition",placeholder:"Enter password",required:!0}),r.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:i?r.jsx(Xn,{size:20}):r.jsx(nn,{size:20})})]})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 py-3 rounded-lg font-semibold transition disabled:opacity-50 shadow-lg shadow-purple-500/25",children:c?"Please wait...":t?"Create Admin Account":"Sign In"}),r.jsx("button",{type:"button",onClick:()=>e(!t),className:"w-full mt-4 text-sm text-purple-400 hover:text-purple-300 transition",children:t?"Already have an account? Sign In":"First time? Create Admin Account"})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700 text-center",children:r.jsx(Pe,{to:"/login",className:"text-sm text-gray-400 hover:text-white transition",children:"User Login "})})]})]})})]})},JN=()=>{var y;const{admin:t,logoutAdmin:e,updateAdmin:s}=ce(),n=sn(),i=tn(),[l,a]=N.useState(!1),[o,c]=N.useState(((y=t==null?void 0:t.wallet)==null?void 0:y.balance)||0),d=(t==null?void 0:t.role)==="SUPER_ADMIN";N.useEffect(()=>{!d&&(t!=null&&t.token)&&u()},[]);const u=async()=>{try{const{data:m}=await z.get("/api/admin/me",{headers:{Authorization:`Bearer ${t.token}`}});m.wallet&&(c(m.wallet.balance||0),s({wallet:m.wallet,stats:m.stats}))}catch(m){console.error("Error refreshing admin data:",m)}},h=()=>{e(),n("/admin/login")},f=d?[{path:"/admin/dashboard",icon:Wr,label:"Dashboard"},{path:"/admin/admins",icon:Kr,label:"Admin Management"},{path:"/admin/all-users",icon:Ol,label:"All Users"},{path:"/admin/create-user",icon:XN,label:"Create User"},{path:"/admin/instruments",icon:TrendingUp,label:"Instruments"},{path:"/admin/lot-settings",icon:gs,label:"Lot Management"},{path:"/admin/fund-requests",icon:As,label:"Fund Requests"},{path:"/admin/charges",icon:As,label:"Charge Management"},{path:"/admin/market-control",icon:TrendingUp,label:"Market Control"},{path:"/admin/bank-management",icon:Hr,label:"Bank Settings"},{path:"/admin/profile",icon:gs,label:"Profile"}]:[{path:"/admin/dashboard",icon:Wr,label:"Dashboard"},{path:"/admin/users",icon:Ol,label:"User Management"},{path:"/admin/trades",icon:gc,label:"Trade Management"},{path:"/admin/charges",icon:As,label:"Charge Management"},{path:"/admin/fund-requests",icon:As,label:"Fund Requests"},{path:"/admin/bank-accounts",icon:Hr,label:"Bank Accounts"},{path:"/admin/ledger",icon:gc,label:"Transactions"},{path:"/admin/profile",icon:gs,label:"Profile"}];return r.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[r.jsxs("header",{className:"md:hidden bg-dark-800 border-b border-dark-600 px-4 py-3 flex items-center justify-between",children:[r.jsxs(Pe,{to:"/",className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-lg font-bold",children:"THEFX"}),r.jsx("span",{className:`text-xs ml-1 ${d?"text-yellow-400":"text-purple-400"}`,children:d?"Super Admin":"Admin"})]}),r.jsx("button",{onClick:()=>a(!l),className:"text-gray-400 hover:text-white",children:r.jsx(V0,{size:24})})]}),l&&r.jsxs("div",{className:"md:hidden bg-dark-800 border-b border-dark-600 p-4",children:[f.map(m=>r.jsxs(Pe,{to:m.path,onClick:()=>a(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${i.pathname===m.path||m.path!=="/admin/dashboard"&&i.pathname.startsWith(m.path)?(d?"bg-yellow-600":"bg-purple-600")+" text-white":"text-gray-400"}`,children:[r.jsx(m.icon,{size:20}),m.label]},m.path)),r.jsxs("div",{className:"border-t border-dark-600 pt-3 mt-3",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-1 px-4",children:(t==null?void 0:t.name)||(t==null?void 0:t.username)}),(t==null?void 0:t.adminCode)&&r.jsxs("div",{className:"text-xs text-purple-400 mb-2 px-4",children:["Code: ",t.adminCode]}),r.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-red-400 hover:text-red-300 px-4 py-2",children:[r.jsx(qr,{size:18}),"Logout"]})]})]}),r.jsxs("aside",{className:"hidden md:flex w-64 bg-dark-800 border-r border-dark-600 flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dark-600",children:[r.jsx(Pe,{to:"/",className:"flex items-center gap-2",children:r.jsx("span",{className:"text-xl font-bold",children:"THEFX"})}),r.jsx("p",{className:`text-xs mt-1 ${d?"text-yellow-400":"text-purple-400"}`,children:d?"Super Admin Panel":"Admin Panel"})]}),!d&&(t==null?void 0:t.adminCode)&&r.jsxs("div",{className:"px-4 py-3 border-b border-dark-600 bg-dark-700/50",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Your Admin Code"}),r.jsx("div",{className:"text-lg font-mono font-bold text-purple-400",children:t.adminCode}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Wallet: ",o.toLocaleString()]})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-1",children:f.map(m=>r.jsxs(Pe,{to:m.path,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${i.pathname===m.path||m.path!=="/admin/dashboard"&&i.pathname.startsWith(m.path)?(d?"bg-yellow-600":"bg-purple-600")+" text-white":"text-gray-400 hover:bg-dark-700"}`,children:[r.jsx(m.icon,{size:20}),m.label]},m.path))}),r.jsxs("div",{className:"p-4 border-t border-dark-600",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-1",children:(t==null?void 0:t.name)||(t==null?void 0:t.username)}),r.jsx("div",{className:"text-xs text-gray-500 mb-2",children:t==null?void 0:t.email}),r.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-red-400 hover:text-red-300 transition",children:[r.jsx(qr,{size:18}),"Logout"]})]})]}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsxs(m0,{children:[r.jsx(de,{path:"dashboard",element:d?r.jsx(Fh,{}):r.jsx(Uh,{})}),d&&r.jsx(de,{path:"admins/*",element:r.jsx(GN,{})}),d&&r.jsx(de,{path:"all-users",element:r.jsx(yw,{})}),d&&r.jsx(de,{path:"create-user",element:r.jsx(rw,{})}),d&&r.jsx(de,{path:"instruments",element:r.jsx(uw,{})}),d&&r.jsx(de,{path:"lot-settings",element:r.jsx(pw,{})}),d&&r.jsx(de,{path:"fund-requests",element:r.jsx(iw,{})}),d&&r.jsx(de,{path:"market-control",element:r.jsx(hw,{})}),d&&r.jsx(de,{path:"bank-management",element:r.jsx(dw,{})}),!d&&r.jsx(de,{path:"users/*",element:r.jsx(vw,{})}),!d&&r.jsx(de,{path:"trades",element:r.jsx(fw,{})}),!d&&r.jsx(de,{path:"fund-requests",element:r.jsx(lw,{})}),!d&&r.jsx(de,{path:"bank-accounts",element:r.jsx(aw,{})}),!d&&r.jsx(de,{path:"ledger",element:r.jsx(cw,{})}),r.jsx(de,{path:"charges",element:r.jsx(xw,{})}),r.jsx(de,{path:"profile",element:r.jsx(gw,{})}),r.jsx(de,{path:"*",element:d?r.jsx(Fh,{}):r.jsx(Uh,{})})]})})]})},Fh=()=>{const{admin:t}=ce(),[e,s]=N.useState(null),[n,i]=N.useState(!0);N.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:a}=await z.get("/api/admin/manage/dashboard-stats",{headers:{Authorization:`Bearer ${t.token}`}});s(a)}catch(a){console.error("Error fetching stats:",a)}finally{i(!1)}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin text-gray-400",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Super Admin Dashboard"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsx(as,{title:"Total Admins",value:(e==null?void 0:e.totalAdmins)||0,subtitle:`${(e==null?void 0:e.activeAdmins)||0} active`,color:"yellow"}),r.jsx(as,{title:"Total Users",value:(e==null?void 0:e.totalUsers)||0,subtitle:`${(e==null?void 0:e.activeUsers)||0} active`,color:"purple"}),r.jsx(as,{title:"Admin Wallets",value:`${((e==null?void 0:e.totalAdminBalance)||0).toLocaleString()}`,subtitle:"Total balance",color:"green"}),r.jsx(as,{title:"User Wallets",value:`${((e==null?void 0:e.totalUserBalance)||0).toLocaleString()}`,subtitle:"Total balance",color:"blue"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Pe,{to:"/admin/admins",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(Kr,{className:"text-yellow-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Manage Admins"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Create, edit, fund admins"})]})]}),r.jsxs(Pe,{to:"/admin/instruments",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(TrendingUp,{className:"text-green-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Instruments"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Manage trading instruments"})]})]}),r.jsxs(Pe,{to:"/admin/market-control",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(Wr,{className:"text-blue-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Market Control"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Open/Close market trading"})]})]})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System Info"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Platform"}),r.jsx("span",{children:"NTrader v1.0"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Your Role"}),r.jsx("span",{className:"text-yellow-400",children:"SUPER_ADMIN"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status"}),r.jsx("span",{className:"text-green-400",children:"Active"})]})]})]})]})]})},Uh=()=>{var u;const{admin:t,updateAdmin:e}=ce(),[s,n]=N.useState({users:0,pendingRequests:0}),[i,l]=N.useState(!0),[a,o]=N.useState(((u=t==null?void 0:t.wallet)==null?void 0:u.balance)||0);N.useEffect(()=>{d(),c()},[]);const c=async()=>{try{const{data:h}=await z.get("/api/admin/me",{headers:{Authorization:`Bearer ${t.token}`}});h.wallet&&(o(h.wallet.balance||0),e({wallet:h.wallet,stats:h.stats}))}catch(h){console.error("Error refreshing admin data:",h)}},d=async()=>{try{const[h,f]=await Promise.all([z.get("/api/admin/manage/users",{headers:{Authorization:`Bearer ${t.token}`}}),z.get("/api/admin/manage/fund-requests?status=PENDING",{headers:{Authorization:`Bearer ${t.token}`}})]);n({users:h.data.length,pendingRequests:f.data.length})}catch(h){console.error("Error:",h)}finally{l(!1)}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsx(as,{title:"Your Wallet",value:`${a.toLocaleString()}`,subtitle:"Available balance",color:"green"}),r.jsx(as,{title:"Total Users",value:s.users,subtitle:"Under your code",color:"purple"}),r.jsx(as,{title:"Pending Requests",value:s.pendingRequests,subtitle:"Fund requests",color:"yellow"}),r.jsx(as,{title:"Admin Code",value:(t==null?void 0:t.adminCode)||"N/A",subtitle:"Share with users",color:"blue"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(Pe,{to:"/admin/users",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(Ol,{className:"text-purple-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Manage Users"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Create, edit, fund users"})]})]}),r.jsxs(Pe,{to:"/admin/trades",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(gc,{className:"text-green-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Trade Management"}),r.jsx("div",{className:"text-sm text-gray-400",children:"View and manage user trades"})]})]}),r.jsxs(Pe,{to:"/admin/fund-requests",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(As,{className:"text-yellow-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Fund Requests"}),r.jsxs("div",{className:"text-sm text-gray-400",children:[s.pendingRequests," pending"]})]})]}),r.jsxs(Pe,{to:"/admin/bank-accounts",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[r.jsx(Hr,{className:"text-blue-400",size:24}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Bank Accounts"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Manage payment methods"})]})]})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Info"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Name"}),r.jsx("span",{children:(t==null?void 0:t.name)||(t==null?void 0:t.username)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email"}),r.jsx("span",{children:t==null?void 0:t.email})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Admin Code"}),r.jsx("span",{className:"text-purple-400 font-mono",children:t==null?void 0:t.adminCode})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status"}),r.jsx("span",{className:"text-green-400",children:(t==null?void 0:t.status)||"ACTIVE"})]})]}),(t==null?void 0:t.referralCode)&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[r.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"User Registration Link"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/login?ref=${t.referralCode}`,className:"flex-1 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-xs font-mono text-green-400"}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/login?ref=${t.referralCode}`),alert("Link copied!")},className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Copy"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with users to register under your account."})]})]})]})]})},as=({title:t,value:e,subtitle:s,color:n})=>{const i={green:"text-green-400",purple:"text-purple-400",yellow:"text-yellow-400",blue:"text-blue-400",red:"text-red-400"};return r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:t}),r.jsx("div",{className:`text-2xl font-bold ${i[n]||"text-white"}`,children:e}),r.jsx("div",{className:"text-xs text-gray-500",children:s})]})},GN=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState(!1),[h,f]=N.useState(!1),[y,m]=N.useState(!1),[x,b]=N.useState(null),[p,g]=N.useState("");N.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:S}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});s(S)}catch(S){console.error("Error:",S)}finally{i(!1)}},j=async(S,w)=>{var C,T;try{await z.put(`/api/admin/manage/admins/${S}/status`,{status:w},{headers:{Authorization:`Bearer ${t.token}`}}),v()}catch(M){alert(((T=(C=M.response)==null?void 0:C.data)==null?void 0:T.message)||"Error updating status")}},k=e.filter(S=>{var w,C,T,M;return((w=S.name)==null?void 0:w.toLowerCase().includes(p.toLowerCase()))||((C=S.username)==null?void 0:C.toLowerCase().includes(p.toLowerCase()))||((T=S.email)==null?void 0:T.toLowerCase().includes(p.toLowerCase()))||((M=S.adminCode)==null?void 0:M.toLowerCase().includes(p.toLowerCase()))});return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Admin Management"}),r.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg",children:[r.jsx(Ks,{size:20}),"Create Admin"]})]}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search admins by name, email, or code...",value:p,onChange:S=>g(S.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:border-yellow-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Admins"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Active"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(S=>S.status==="ACTIVE").length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Users"}),r.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.reduce((S,w)=>{var C;return S+(((C=w.stats)==null?void 0:C.totalUsers)||0)},0)})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Admin Wallet"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["",e.reduce((S,w)=>{var C;return S+(((C=w.wallet)==null?void 0:C.balance)||0)},0).toLocaleString()]})]})]}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):k.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No admins found"}):r.jsx("div",{className:"space-y-4",children:k.map(S=>{var w,C,T;return r.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-bold text-lg",children:S.name||S.username}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${S.status==="ACTIVE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:S.status})]}),r.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[S.email,"  ",S.phone||"No phone"]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 flex-wrap",children:[r.jsx("span",{className:"text-sm font-mono bg-purple-500/20 text-purple-400 px-2 py-1 rounded",children:S.adminCode}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Created: ",new Date(S.createdAt).toLocaleDateString()]}),S.referralCode&&r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/login?ref=${S.referralCode}`),alert("Registration link copied!")},className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded hover:bg-green-600/30",children:"Copy User Link"})]})]}),r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Wallet"}),r.jsxs("div",{className:"text-lg font-bold text-green-400",children:["",(((w=S.wallet)==null?void 0:w.balance)||0).toLocaleString()]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Users"}),r.jsx("div",{className:"text-lg font-bold",children:((C=S.stats)==null?void 0:C.totalUsers)||S.userCount||0})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((T=S.charges)==null?void 0:T.brokerage)||20]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:()=>{b(S),u(!0)},className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm flex items-center gap-1",children:[r.jsx(nn,{size:16})," View"]}),r.jsxs("button",{onClick:()=>{b(S),c(!0)},className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm flex items-center gap-1",children:[r.jsx(Vt,{size:16})," Fund"]}),r.jsxs("button",{onClick:()=>{b(S),m(!0)},className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm flex items-center gap-1",children:[r.jsx(gs,{size:16})," Charges"]}),r.jsxs("button",{onClick:()=>{b(S),f(!0)},className:"px-3 py-2 bg-yellow-600 hover:bg-yellow-700 rounded text-sm flex items-center gap-1",children:[r.jsx(yc,{size:16})," Password"]}),S.status==="ACTIVE"?r.jsx("button",{onClick:()=>j(S._id,"SUSPENDED"),className:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Suspend"}):r.jsx("button",{onClick:()=>j(S._id,"ACTIVE"),className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Activate"})]})]})},S._id)})}),l&&r.jsx(ZN,{token:t.token,onClose:()=>a(!1),onSuccess:()=>{a(!1),v()}}),o&&x&&r.jsx(ew,{admin:x,token:t.token,onClose:()=>{c(!1),b(null)},onSuccess:()=>{v()}}),d&&x&&r.jsx(tw,{admin:x,token:t.token,onClose:()=>{u(!1),b(null)}}),h&&x&&r.jsx(sw,{admin:x,token:t.token,onClose:()=>{f(!1),b(null)}}),y&&x&&r.jsx(nw,{admin:x,token:t.token,onClose:()=>{m(!1),b(null)},onSuccess:()=>{v()}})]})},ZN=({token:t,onClose:e,onSuccess:s})=>{const[n,i]=N.useState({username:"",name:"",email:"",phone:"",password:"",pin:""}),[l,a]=N.useState(!1),[o,c]=N.useState(""),d=async u=>{var h,f;u.preventDefault(),a(!0),c("");try{await z.post("/api/admin/manage/admins",n,{headers:{Authorization:`Bearer ${t}`}}),s()}catch(y){c(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error creating admin")}finally{a(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create New Admin"}),r.jsx("button",{onClick:e,children:r.jsx(be,{size:24})})]}),o&&r.jsx("div",{className:"bg-red-500/20 text-red-400 p-2 rounded mb-4",children:o}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Username *",value:n.username,onChange:u=>i({...n,username:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("input",{type:"text",placeholder:"Full Name",value:n.name,onChange:u=>i({...n,name:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"}),r.jsx("input",{type:"email",placeholder:"Email *",value:n.email,onChange:u=>i({...n,email:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("input",{type:"text",placeholder:"Phone",value:n.phone,onChange:u=>i({...n,phone:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"}),r.jsx("input",{type:"password",placeholder:"Password *",value:n.password,onChange:u=>i({...n,password:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("input",{type:"text",inputMode:"numeric",placeholder:"4-6 digit PIN *",value:n.pin,onChange:u=>i({...n,pin:u.target.value.replace(/\D/g,"")}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,pattern:"[0-9]{4,6}"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-yellow-600 py-2 rounded",children:l?"Creating...":"Create Admin"})]})]})]})})},ew=({admin:t,token:e,onClose:s,onSuccess:n})=>{var y,m;const[i,l]=N.useState(""),[a,o]=N.useState(""),[c,d]=N.useState(!1),[u,h]=N.useState(""),f=async x=>{var b,p;if(!i||Number(i)<=0)return h("Enter valid amount");d(!0),h("");try{await z.post(`/api/admin/manage/admins/${t._id}/${x}-funds`,{amount:Number(i),description:a},{headers:{Authorization:`Bearer ${e}`}}),l(""),o(""),n(),s()}catch(g){h(((p=(b=g.response)==null?void 0:b.data)==null?void 0:p.message)||"Error")}finally{d(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Manage Admin Wallet"}),r.jsx("button",{onClick:s,children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-4 mb-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:t.name||t.username}),r.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode}),r.jsxs("div",{className:"text-2xl font-bold text-green-400 mt-2",children:["",((m=(y=t.wallet)==null?void 0:y.balance)==null?void 0:m.toLocaleString())||"0"]})]}),u&&r.jsx("div",{className:"bg-red-500/20 text-red-400 p-2 rounded mb-4",children:u}),r.jsx("input",{type:"number",placeholder:"Amount ()",value:i,onChange:x=>l(x.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-3"}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:a,onChange:x=>o(x.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-4"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>f("add"),disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded flex items-center justify-center gap-2",children:[r.jsx(Rl,{size:18})," Deposit"]}),r.jsxs("button",{onClick:()=>f("deduct"),disabled:c,className:"flex-1 bg-red-600 hover:bg-red-700 py-2 rounded flex items-center justify-center gap-2",children:[r.jsx(zl,{size:18})," Withdraw"]})]})]})})},tw=({admin:t,token:e,onClose:s})=>{var f,y,m,x,b,p,g,v,j,k,S;const[n,i]=N.useState("users"),[l,a]=N.useState([]),[o,c]=N.useState([]),[d,u]=N.useState(!0);N.useEffect(()=>{h()},[]);const h=async()=>{try{const[w,C]=await Promise.all([z.get(`/api/admin/manage/admins/${t._id}/users`,{headers:{Authorization:`Bearer ${e}`}}),z.get(`/api/admin/manage/admins/${t._id}/ledger`,{headers:{Authorization:`Bearer ${e}`}})]);a(w.data.users||[]),c(C.data||[])}catch(w){console.error("Error:",w)}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-dark-600",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:t.name||t.username}),r.jsx("div",{className:"text-sm text-gray-400",children:t.email}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsx("span",{className:"font-mono bg-purple-500/20 text-purple-400 px-2 py-1 rounded text-sm",children:t.adminCode}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="ACTIVE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:t.status})]})]}),r.jsx("button",{onClick:s,children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-b border-dark-600",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Wallet Balance"}),r.jsxs("div",{className:"text-lg font-bold text-green-400",children:["",(((f=t.wallet)==null?void 0:f.balance)||0).toLocaleString()]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Total Users"}),r.jsx("div",{className:"text-lg font-bold",children:l.length})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((y=t.charges)==null?void 0:y.brokerage)||20]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Leverage"}),r.jsxs("div",{className:"text-lg font-bold",children:[((m=t.charges)==null?void 0:m.intradayLeverage)||5,"x"]})]})]}),r.jsxs("div",{className:"flex border-b border-dark-600",children:[r.jsxs("button",{onClick:()=>i("users"),className:`flex-1 py-3 ${n==="users"?"bg-purple-600":"bg-dark-700"}`,children:["Users (",l.length,")"]}),r.jsxs("button",{onClick:()=>i("ledger"),className:`flex-1 py-3 ${n==="ledger"?"bg-purple-600":"bg-dark-700"}`,children:["Ledger (",o.length,")"]}),r.jsx("button",{onClick:()=>i("charges"),className:`flex-1 py-3 ${n==="charges"?"bg-purple-600":"bg-dark-700"}`,children:"Charges"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):n==="users"?l.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No users under this admin"}):r.jsx("div",{className:"space-y-2",children:l.map(w=>{var C;return r.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded p-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:w.fullName||w.username}),r.jsxs("div",{className:"text-xs text-gray-400",children:[w.email,"  ",w.userId]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-green-400 font-bold",children:["",(((C=w.wallet)==null?void 0:C.cashBalance)||0).toLocaleString()]}),r.jsx("div",{className:`text-xs ${w.isActive?"text-green-400":"text-red-400"}`,children:w.isActive?"Active":"Inactive"})]})]},w._id)})}):n==="ledger"?o.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No transactions"}):r.jsx("div",{className:"space-y-2",children:o.map(w=>{var C,T;return r.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded p-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:w.reason}),r.jsx("div",{className:"text-xs text-gray-400",children:new Date(w.createdAt).toLocaleString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:w.type==="CREDIT"?"text-green-400":"text-red-400",children:[w.type==="CREDIT"?"+":"-","",(C=w.amount)==null?void 0:C.toLocaleString()]}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Bal: ",(T=w.balanceAfter)==null?void 0:T.toLocaleString()]})]})]},w._id)})}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((x=t.charges)==null?void 0:x.brokerage)||20]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Intraday Leverage"}),r.jsxs("div",{className:"text-lg font-bold",children:[((b=t.charges)==null?void 0:b.intradayLeverage)||5,"x"]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Delivery Leverage"}),r.jsxs("div",{className:"text-lg font-bold",children:[((p=t.charges)==null?void 0:p.deliveryLeverage)||1,"x"]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Option Buy Leverage"}),r.jsxs("div",{className:"text-lg font-bold",children:[((g=t.charges)==null?void 0:g.optionBuyLeverage)||1,"x"]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Withdrawal Fee"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((v=t.charges)==null?void 0:v.withdrawalFee)||0]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Profit Share"}),r.jsxs("div",{className:"text-lg font-bold",children:[((j=t.charges)==null?void 0:j.profitShare)||0,"%"]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Min Withdrawal"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((k=t.charges)==null?void 0:k.minWithdrawal)||100]})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Max Withdrawal"}),r.jsxs("div",{className:"text-lg font-bold",children:["",((S=t.charges)==null?void 0:S.maxWithdrawal)||1e5]})]})]})}),r.jsx("div",{className:"p-4 border-t border-dark-600",children:r.jsx("button",{onClick:s,className:"w-full bg-dark-600 hover:bg-dark-500 py-2 rounded",children:"Close"})})]})})},sw=({admin:t,token:e,onClose:s})=>{const[n,i]=N.useState(""),[l,a]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState({type:"",text:""}),h=async f=>{var y,m;if(f.preventDefault(),n.length<6){u({type:"error",text:"Password must be at least 6 characters"});return}c(!0),u({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${t._id}/reset-password`,{newPassword:n},{headers:{Authorization:`Bearer ${e}`}}),u({type:"success",text:"Password reset successfully"}),setTimeout(s,1500)}catch(x){u({type:"error",text:((m=(y=x.response)==null?void 0:y.data)==null?void 0:m.message)||"Error resetting password"})}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Reset Admin Password"}),r.jsx("button",{onClick:s,children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-4 mb-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Resetting password for:"}),r.jsx("div",{className:"font-bold",children:t.name||t.username}),r.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode})]}),d.text&&r.jsx("div",{className:`p-3 rounded mb-4 ${d.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.text}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{className:"relative mb-4",children:[r.jsx("input",{type:l?"text":"password",placeholder:"New Password (min 6 characters)",value:n,onChange:f=>i(f.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?r.jsx(Xn,{size:18}):r.jsx(nn,{size:18})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 py-2 rounded",children:o?"Resetting...":"Reset Password"})]})]})]})})},nw=({admin:t,token:e,onClose:s,onSuccess:n})=>{var h,f,y,m,x,b,p,g,v,j;const[i,l]=N.useState({brokerage:((h=t.charges)==null?void 0:h.brokerage)||20,intradayLeverage:((f=t.charges)==null?void 0:f.intradayLeverage)||5,deliveryLeverage:((y=t.charges)==null?void 0:y.deliveryLeverage)||1,optionBuyLeverage:((m=t.charges)==null?void 0:m.optionBuyLeverage)||1,optionSellLeverage:((x=t.charges)==null?void 0:x.optionSellLeverage)||1,futuresLeverage:((b=t.charges)==null?void 0:b.futuresLeverage)||1,withdrawalFee:((p=t.charges)==null?void 0:p.withdrawalFee)||0,profitShare:((g=t.charges)==null?void 0:g.profitShare)||0,minWithdrawal:((v=t.charges)==null?void 0:v.minWithdrawal)||100,maxWithdrawal:((j=t.charges)==null?void 0:j.maxWithdrawal)||1e5}),[a,o]=N.useState(!1),[c,d]=N.useState({type:"",text:""}),u=async k=>{var S,w;k.preventDefault(),o(!0),d({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${t._id}/charges`,{charges:i},{headers:{Authorization:`Bearer ${e}`}}),d({type:"success",text:"Charges updated successfully"}),n(),setTimeout(s,1500)}catch(C){d({type:"error",text:((w=(S=C.response)==null?void 0:S.data)==null?void 0:w.message)||"Error updating charges"})}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit Admin Charges"}),r.jsx("button",{onClick:s,children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"bg-dark-700 rounded p-3 mb-4",children:[r.jsx("div",{className:"font-bold",children:t.name||t.username}),r.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode})]}),c.text&&r.jsx("div",{className:`p-3 rounded mb-4 ${c.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:c.text}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Brokerage ()"}),r.jsx("input",{type:"number",value:i.brokerage,onChange:k=>l({...i,brokerage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Intraday Leverage"}),r.jsx("input",{type:"number",value:i.intradayLeverage,onChange:k=>l({...i,intradayLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Delivery Leverage"}),r.jsx("input",{type:"number",value:i.deliveryLeverage,onChange:k=>l({...i,deliveryLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Option Buy Leverage"}),r.jsx("input",{type:"number",value:i.optionBuyLeverage,onChange:k=>l({...i,optionBuyLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Option Sell Leverage"}),r.jsx("input",{type:"number",value:i.optionSellLeverage,onChange:k=>l({...i,optionSellLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Futures Leverage"}),r.jsx("input",{type:"number",value:i.futuresLeverage,onChange:k=>l({...i,futuresLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Withdrawal Fee ()"}),r.jsx("input",{type:"number",value:i.withdrawalFee,onChange:k=>l({...i,withdrawalFee:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Profit Share (%)"}),r.jsx("input",{type:"number",value:i.profitShare,onChange:k=>l({...i,profitShare:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Min Withdrawal ()"}),r.jsx("input",{type:"number",value:i.minWithdrawal,onChange:k=>l({...i,minWithdrawal:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Max Withdrawal ()"}),r.jsx("input",{type:"number",value:i.maxWithdrawal,onChange:k=>l({...i,maxWithdrawal:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded",children:a?"Saving...":"Save Charges"})]})]})]})})},rw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(""),[l,a]=N.useState(!1),[o,c]=N.useState({type:"",text:""}),[d,u]=N.useState({username:"",email:"",password:"",fullName:"",phone:"",initialBalance:0,marginType:"exposure",ledgerBalanceClosePercent:90,profitTradeHoldSeconds:0,lossTradeHoldSeconds:0,isActivated:!0,isReadOnly:!1,isDemo:!1,intradaySquare:!1,blockLimitAboveBelowHighLow:!1,blockLimitBetweenHighLow:!1,allowedSegments:["NSE","MCX","EQ"],segmentPermissions:{showMCX:!0,showMCXOptBuy:!0,showMCXOptSell:!0,showMCXOpt:!0,showNSE:!0,showIDXNSE:!0,showIDXOptBuy:!0,showIDXOptSell:!0,showIDXOpt:!0,showSTKOptBuy:!0,showSTKOptSell:!0,showSTKOpt:!0,showSTKNSE:!0,showSTKEQ:!0,showBSEOptBuy:!0,showBSEOptSell:!0,showBSEOpt:!0,showIDXBSE:!0,showCRYPTO:!1,showFOREX:!1,showCOMEX:!1,showGLOBALINDEX:!1}}),h=["NSE","MCX","BFO","EQ","CRYPTO","COMEX","FOREX","GLOBALINDEX"];N.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:p}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}}),g=[{_id:"SUPER",username:"Super Admin (Direct)",adminCode:"SUPER"},...p];s(g),i("SUPER")}catch(p){console.error("Error fetching admins:",p)}},y=p=>{u(g=>({...g,allowedSegments:g.allowedSegments.includes(p)?g.allowedSegments.filter(v=>v!==p):[...g.allowedSegments,p]}))},m=p=>{u(g=>({...g,segmentPermissions:{...g.segmentPermissions,[p]:!g.segmentPermissions[p]}}))},x=async p=>{var g,v,j;p.preventDefault(),a(!0),c({type:"",text:""});try{const k=e.find(C=>C._id===n),S=(k==null?void 0:k.adminCode)||"SUPER",{data:w}=await z.post("/api/admin/manage/create-user",{...d,adminCode:S},{headers:{Authorization:`Bearer ${t.token}`}});c({type:"success",text:`User created successfully! User ID: ${((g=w.user)==null?void 0:g.userId)||w.userId}`}),u({username:"",email:"",password:"",fullName:"",phone:"",initialBalance:0,marginType:"exposure",ledgerBalanceClosePercent:90,profitTradeHoldSeconds:0,lossTradeHoldSeconds:0,isActivated:!0,isReadOnly:!1,isDemo:!1,intradaySquare:!1,blockLimitAboveBelowHighLow:!1,blockLimitBetweenHighLow:!1,allowedSegments:["NSE","MCX","EQ"],segmentPermissions:{showMCX:!0,showMCXOptBuy:!0,showMCXOptSell:!0,showMCXOpt:!0,showNSE:!0,showIDXNSE:!0,showIDXOptBuy:!0,showIDXOptSell:!0,showIDXOpt:!0,showSTKOptBuy:!0,showSTKOptSell:!0,showSTKOpt:!0,showSTKNSE:!0,showSTKEQ:!0,showBSEOptBuy:!0,showBSEOptSell:!0,showBSEOpt:!0,showIDXBSE:!0,showCRYPTO:!1,showFOREX:!1,showCOMEX:!1,showGLOBALINDEX:!1}})}catch(k){c({type:"error",text:((j=(v=k.response)==null?void 0:v.data)==null?void 0:j.message)||"Failed to create user"})}finally{a(!1)}},b=({label:p,checked:g,onChange:v})=>r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx("span",{className:"text-sm text-gray-300",children:p}),r.jsx("button",{type:"button",onClick:v,className:`relative w-12 h-6 rounded-full transition-colors ${g?"bg-green-600":"bg-dark-600"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${g?"left-7":"left-1"}`})})]});return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Create User"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Create a new user with comprehensive settings"})]}),o.text&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${o.type==="success"?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:o.text}),r.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Basic Information"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Assign to Admin"}),r.jsx("select",{value:n,onChange:p=>i(p.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:e.map(p=>r.jsxs("option",{value:p._id,children:[p.username," (",p.adminCode,")"]},p._id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Username *"}),r.jsx("input",{type:"text",value:d.username,onChange:p=>u({...d,username:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",value:d.fullName,onChange:p=>u({...d,fullName:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email *"}),r.jsx("input",{type:"email",value:d.email,onChange:p=>u({...d,email:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",value:d.phone,onChange:p=>u({...d,phone:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Password *"}),r.jsx("input",{type:"password",value:d.password,onChange:p=>u({...d,password:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,minLength:6})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Initial Balance ()"}),r.jsx("input",{type:"number",value:d.initialBalance,onChange:p=>u({...d,initialBalance:parseFloat(p.target.value)||0}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Margin Type"}),r.jsxs("select",{value:d.marginType,onChange:p=>u({...d,marginType:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"exposure",children:"Exposure"}),r.jsx("option",{value:"margin",children:"Margin"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Trading Settings"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Ledger Balance Close (%)"}),r.jsx("input",{type:"number",value:d.ledgerBalanceClosePercent,onChange:p=>u({...d,ledgerBalanceClosePercent:parseInt(p.target.value)||90}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"0",max:"100"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Close positions when loss reaches this % of ledger balance"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Profit Trade Hold (seconds)"}),r.jsx("input",{type:"number",value:d.profitTradeHoldSeconds,onChange:p=>u({...d,profitTradeHoldSeconds:parseInt(p.target.value)||0}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"0"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Loss Trade Hold (seconds)"}),r.jsx("input",{type:"number",value:d.lossTradeHoldSeconds,onChange:p=>u({...d,lossTradeHoldSeconds:parseInt(p.target.value)||0}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"0"})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Account Controls"}),r.jsx(b,{label:"Activation",checked:d.isActivated,onChange:()=>u({...d,isActivated:!d.isActivated})}),r.jsx(b,{label:"Read Only",checked:d.isReadOnly,onChange:()=>u({...d,isReadOnly:!d.isReadOnly})}),r.jsx(b,{label:"Demo Account",checked:d.isDemo,onChange:()=>u({...d,isDemo:!d.isDemo})}),r.jsx(b,{label:"Intraday Square (3:29 PM)",checked:d.intradaySquare,onChange:()=>u({...d,intradaySquare:!d.intradaySquare})}),r.jsx(b,{label:"Block Limit Above/Below High Low",checked:d.blockLimitAboveBelowHighLow,onChange:()=>u({...d,blockLimitAboveBelowHighLow:!d.blockLimitAboveBelowHighLow})}),r.jsx(b,{label:"Block Limit Between High Low",checked:d.blockLimitBetweenHighLow,onChange:()=>u({...d,blockLimitBetweenHighLow:!d.blockLimitBetweenHighLow})})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Segment Allow"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select the segments you want to allow for this user"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(p=>r.jsx("button",{type:"button",onClick:()=>y(p),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${d.allowedSegments.includes(p)?"bg-green-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:p},p))})]}),r.jsxs("div",{className:"lg:col-span-2 bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Segment Permissions"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"MCX"}),r.jsx(b,{label:"Show MCX",checked:d.segmentPermissions.showMCX,onChange:()=>m("showMCX")}),r.jsx(b,{label:"MCX Opt Buy",checked:d.segmentPermissions.showMCXOptBuy,onChange:()=>m("showMCXOptBuy")}),r.jsx(b,{label:"MCX Opt Sell",checked:d.segmentPermissions.showMCXOptSell,onChange:()=>m("showMCXOptSell")}),r.jsx(b,{label:"MCX Opt",checked:d.segmentPermissions.showMCXOpt,onChange:()=>m("showMCXOpt")})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"NSE Index"}),r.jsx(b,{label:"Show NSE",checked:d.segmentPermissions.showNSE,onChange:()=>m("showNSE")}),r.jsx(b,{label:"IDX NSE",checked:d.segmentPermissions.showIDXNSE,onChange:()=>m("showIDXNSE")}),r.jsx(b,{label:"IDX Opt Buy",checked:d.segmentPermissions.showIDXOptBuy,onChange:()=>m("showIDXOptBuy")}),r.jsx(b,{label:"IDX Opt Sell",checked:d.segmentPermissions.showIDXOptSell,onChange:()=>m("showIDXOptSell")}),r.jsx(b,{label:"IDX Opt",checked:d.segmentPermissions.showIDXOpt,onChange:()=>m("showIDXOpt")})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"Stock Options"}),r.jsx(b,{label:"STK Opt Buy",checked:d.segmentPermissions.showSTKOptBuy,onChange:()=>m("showSTKOptBuy")}),r.jsx(b,{label:"STK Opt Sell",checked:d.segmentPermissions.showSTKOptSell,onChange:()=>m("showSTKOptSell")}),r.jsx(b,{label:"STK Opt",checked:d.segmentPermissions.showSTKOpt,onChange:()=>m("showSTKOpt")}),r.jsx(b,{label:"STK NSE",checked:d.segmentPermissions.showSTKNSE,onChange:()=>m("showSTKNSE")}),r.jsx(b,{label:"STK EQ",checked:d.segmentPermissions.showSTKEQ,onChange:()=>m("showSTKEQ")})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"BSE"}),r.jsx(b,{label:"BSE Opt Buy",checked:d.segmentPermissions.showBSEOptBuy,onChange:()=>m("showBSEOptBuy")}),r.jsx(b,{label:"BSE Opt Sell",checked:d.segmentPermissions.showBSEOptSell,onChange:()=>m("showBSEOptSell")}),r.jsx(b,{label:"BSE Opt",checked:d.segmentPermissions.showBSEOpt,onChange:()=>m("showBSEOpt")}),r.jsx(b,{label:"IDX BSE",checked:d.segmentPermissions.showIDXBSE,onChange:()=>m("showIDXBSE")})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"Others"}),r.jsx(b,{label:"CRYPTO",checked:d.segmentPermissions.showCRYPTO,onChange:()=>m("showCRYPTO")}),r.jsx(b,{label:"FOREX",checked:d.segmentPermissions.showFOREX,onChange:()=>m("showFOREX")}),r.jsx(b,{label:"COMEX",checked:d.segmentPermissions.showCOMEX,onChange:()=>m("showCOMEX")}),r.jsx(b,{label:"GLOBAL INDEX",checked:d.segmentPermissions.showGLOBALINDEX,onChange:()=>m("showGLOBALINDEX")})]})]})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx("button",{type:"submit",disabled:l,className:"w-full py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-semibold disabled:opacity-50",children:l?"Creating User...":"Create User"})})]})]})},iw=()=>{var y,m;const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState("PENDING"),[o,c]=N.useState("ALL"),[d,u]=N.useState({pending:0,approved:0,rejected:0,totalDeposits:0,totalWithdrawals:0});N.useEffect(()=>{h()},[l,o]);const h=async()=>{try{i(!0);const{data:x}=await z.get("/api/admin/manage/all-fund-requests",{params:{status:l,type:o!=="ALL"?o:void 0},headers:{Authorization:`Bearer ${t.token}`}});s(x.requests||[]),u(x.stats||d)}catch(x){console.error("Error:",x)}finally{i(!1)}},f=async(x,b)=>{var p,g;try{await z.post(`/api/admin/manage/fund-requests/${x}/${b}`,{},{headers:{Authorization:`Bearer ${t.token}`}}),h()}catch(v){alert(((g=(p=v.response)==null?void 0:p.data)==null?void 0:g.message)||"Error")}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Fund Requests"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage deposit and withdrawal requests from all users"})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Pending"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:d.pending})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Approved"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.approved})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Rejected"}),r.jsx("div",{className:"text-2xl font-bold text-red-400",children:d.rejected})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Deposits"}),r.jsxs("div",{className:"text-xl font-bold text-green-400",children:["",((y=d.totalDeposits)==null?void 0:y.toLocaleString())||0]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Withdrawals"}),r.jsxs("div",{className:"text-xl font-bold text-red-400",children:["",((m=d.totalWithdrawals)==null?void 0:m.toLocaleString())||0]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[r.jsx("div",{className:"flex gap-2",children:["PENDING","APPROVED","REJECTED","ALL"].map(x=>r.jsx("button",{onClick:()=>a(x),className:`px-4 py-2 rounded text-sm ${l===x?"bg-purple-600":"bg-dark-700 hover:bg-dark-600"}`,children:x},x))}),r.jsx("div",{className:"flex gap-2",children:["ALL","DEPOSIT","WITHDRAWAL"].map(x=>r.jsx("button",{onClick:()=>c(x),className:`px-4 py-2 rounded text-sm ${o===x?"bg-blue-600":"bg-dark-700 hover:bg-dark-600"}`,children:x==="ALL"?"All Types":x},x))})]}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:["No ",l.toLowerCase()," requests found"]}):r.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"User"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Admin"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Amount"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Reference"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Date"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Action"})]})}),r.jsx("tbody",{children:e.map(x=>{var b,p,g,v,j,k;return r.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700/50",children:[r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-medium",children:((b=x.user)==null?void 0:b.fullName)||((p=x.user)==null?void 0:p.username)}),r.jsx("div",{className:"text-xs text-gray-500",children:(g=x.user)==null?void 0:g.userId})]}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"text-sm",children:((v=x.admin)==null?void 0:v.username)||"Super Admin"}),r.jsx("div",{className:"text-xs text-gray-500",children:((j=x.admin)==null?void 0:j.adminCode)||"-"})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${x.type==="DEPOSIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:x.type})}),r.jsxs("td",{className:"px-4 py-3 text-right font-mono font-bold",children:["",(k=x.amount)==null?void 0:k.toLocaleString()]}),r.jsx("td",{className:"px-4 py-3 text-gray-400 text-xs",children:x.referenceId||"-"}),r.jsx("td",{className:"px-4 py-3 text-gray-400 text-xs",children:new Date(x.createdAt).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${x.status==="PENDING"?"bg-yellow-500/20 text-yellow-400":x.status==="APPROVED"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:x.status})}),r.jsx("td",{className:"px-4 py-3 text-center",children:x.status==="PENDING"&&r.jsxs("div",{className:"flex gap-1 justify-center",children:[r.jsx("button",{onClick:()=>f(x._id,"approve"),className:"px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),r.jsx("button",{onClick:()=>f(x._id,"reject"),className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},x._id)})})]})})]})},lw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState("PENDING");N.useEffect(()=>{o()},[l]);const o=async()=>{try{const{data:d}=await z.get(`/api/admin/manage/fund-requests?status=${l}`,{headers:{Authorization:`Bearer ${t.token}`}});s(d)}catch(d){console.error("Error:",d)}finally{i(!1)}},c=async(d,u)=>{var h,f;try{await z.post(`/api/admin/manage/fund-requests/${d}/${u}`,{},{headers:{Authorization:`Bearer ${t.token}`}}),o()}catch(y){alert(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error")}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Fund Requests"}),r.jsx("div",{className:"flex gap-2 mb-6",children:["PENDING","APPROVED","REJECTED"].map(d=>r.jsx("button",{onClick:()=>a(d),className:`px-4 py-2 rounded ${l===d?"bg-purple-600":"bg-dark-700"}`,children:d},d))}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:["No ",l.toLowerCase()," requests"]}):r.jsx("div",{className:"space-y-4",children:e.map(d=>{var u,h;return r.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="DEPOSIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.type}),r.jsxs("span",{className:"font-bold",children:["",d.amount.toLocaleString()]})]}),r.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["User: ",((u=d.user)==null?void 0:u.fullName)||((h=d.user)==null?void 0:h.username)," (",d.userId,")"]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(d.createdAt).toLocaleString()}),d.referenceId&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Ref: ",d.referenceId]})]}),d.status==="PENDING"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>c(d._id,"approve"),className:"px-4 py-2 bg-green-600 rounded text-sm",children:"Approve"}),r.jsx("button",{onClick:()=>c(d._id,"reject"),className:"px-4 py-2 bg-red-600 rounded text-sm",children:"Reject"})]})]})},d._id)})})]})},aw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState(!1);N.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:d}=await z.get("/api/admin/manage/bank-accounts",{headers:{Authorization:`Bearer ${t.token}`}});s(d)}catch(d){console.error("Error:",d)}finally{i(!1)}},c=async d=>{if(confirm("Delete this account?"))try{await z.delete(`/api/admin/manage/bank-accounts/${d}`,{headers:{Authorization:`Bearer ${t.token}`}}),o()}catch{alert("Error deleting")}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Bank Accounts"}),r.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-purple-600 px-4 py-2 rounded",children:[r.jsx(Ks,{size:20})," Add Account"]})]}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No bank accounts added"}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(d=>r.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="BANK"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:d.type}),r.jsx("div",{className:"font-bold mt-2",children:d.holderName}),d.type==="BANK"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-sm text-gray-400",children:d.bankName}),r.jsx("div",{className:"text-sm font-mono",children:d.accountNumber}),r.jsxs("div",{className:"text-xs text-gray-500",children:["IFSC: ",d.ifsc]})]}):r.jsx("div",{className:"text-sm font-mono text-purple-400",children:d.upiId})]}),r.jsx("button",{onClick:()=>c(d._id),className:"text-red-400 hover:text-red-300",children:r.jsx(vc,{size:18})})]})},d._id))}),l&&r.jsx(ow,{token:t.token,onClose:()=>a(!1),onSuccess:()=>{a(!1),o()}})]})},ow=({token:t,onClose:e,onSuccess:s})=>{const[n,i]=N.useState("BANK"),[l,a]=N.useState({holderName:"",bankName:"",accountNumber:"",ifsc:"",upiId:""}),[o,c]=N.useState(!1),d=async u=>{var h,f;u.preventDefault(),c(!0);try{await z.post("/api/admin/manage/bank-accounts",{type:n,...l},{headers:{Authorization:`Bearer ${t}`}}),s()}catch(y){alert(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Add Payment Method"}),r.jsx("button",{onClick:e,children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{onClick:()=>i("BANK"),className:`flex-1 py-2 rounded ${n==="BANK"?"bg-blue-600":"bg-dark-700"}`,children:"Bank"}),r.jsx("button",{onClick:()=>i("UPI"),className:`flex-1 py-2 rounded ${n==="UPI"?"bg-purple-600":"bg-dark-700"}`,children:"UPI"})]}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Account Holder Name *",value:l.holderName,onChange:u=>a({...l,holderName:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),n==="BANK"?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Bank Name *",value:l.bankName,onChange:u=>a({...l,bankName:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("input",{type:"text",placeholder:"Account Number *",value:l.accountNumber,onChange:u=>a({...l,accountNumber:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("input",{type:"text",placeholder:"IFSC Code *",value:l.ifsc,onChange:u=>a({...l,ifsc:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}):r.jsx("input",{type:"text",placeholder:"UPI ID *",value:l.upiId,onChange:u=>a({...l,upiId:u.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-green-600 py-2 rounded",children:o?"Adding...":"Add Account"})]})]})})},cw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0);N.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:a}=await z.get("/api/admin/manage/my-ledger",{headers:{Authorization:`Bearer ${t.token}`}});s(a)}catch(a){console.error("Error:",a)}finally{i(!1)}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Wallet Ledger"}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No transactions yet"}):r.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Date"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Reason"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Amount"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Balance"})]})}),r.jsx("tbody",{children:e.map(a=>r.jsxs("tr",{className:"border-t border-dark-600",children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(a.createdAt).toLocaleString()}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${a.type==="CREDIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:a.type})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:a.reason}),r.jsxs("td",{className:`px-4 py-3 text-right ${a.type==="CREDIT"?"text-green-400":"text-red-400"}`,children:[a.type==="CREDIT"?"+":"-","",a.amount.toLocaleString()]}),r.jsxs("td",{className:"px-4 py-3 text-right",children:["",a.balanceAfter.toLocaleString()]})]},a._id))})]})})]})},dw=()=>{var C,T,M,R;const{admin:t}=ce(),[e,s]=N.useState(null),[n,i]=N.useState(!0),[l,a]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState(null),[h,f]=N.useState(null),[y,m]=N.useState({});N.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:E}=await z.get("/api/admin/bank-settings",{headers:{Authorization:`Bearer ${t.token}`}});s(E)}catch(E){console.error("Error fetching bank settings:",E)}finally{i(!1)}},b=async E=>{var _,O;E.preventDefault();try{const{data:I}=await z.post("/api/admin/bank-settings/bank-account",y,{headers:{Authorization:`Bearer ${t.token}`}});s(I),a(!1),m({})}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error adding bank account")}},p=async E=>{var _,O;if(confirm("Are you sure you want to delete this bank account?"))try{const{data:I}=await z.delete(`/api/admin/bank-settings/bank-account/${E}`,{headers:{Authorization:`Bearer ${t.token}`}});s(I)}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error deleting bank account")}},g=async E=>{var _,O;E.preventDefault();try{const{data:I}=await z.post("/api/admin/bank-settings/upi-account",y,{headers:{Authorization:`Bearer ${t.token}`}});s(I),c(!1),m({})}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error adding UPI account")}},v=async E=>{var _,O;if(confirm("Are you sure you want to delete this UPI account?"))try{const{data:I}=await z.delete(`/api/admin/bank-settings/upi-account/${E}`,{headers:{Authorization:`Bearer ${t.token}`}});s(I)}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error deleting UPI account")}},j=async(E,_)=>{var O,I;try{const{data:U}=await z.put(`/api/admin/bank-settings/bank-account/${E}`,{isActive:!_},{headers:{Authorization:`Bearer ${t.token}`}});s(U)}catch(U){alert(((I=(O=U.response)==null?void 0:O.data)==null?void 0:I.message)||"Error updating bank status")}},k=async(E,_)=>{var O,I;try{const{data:U}=await z.put(`/api/admin/bank-settings/upi-account/${E}`,{isActive:!_},{headers:{Authorization:`Bearer ${t.token}`}});s(U)}catch(U){alert(((I=(O=U.response)==null?void 0:O.data)==null?void 0:I.message)||"Error updating UPI status")}},S=async E=>{var _,O;try{const{data:I}=await z.put(`/api/admin/bank-settings/bank-account/${E}`,{isPrimary:!0},{headers:{Authorization:`Bearer ${t.token}`}});s(I)}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error setting primary bank")}},w=async E=>{var _,O;try{const{data:I}=await z.put(`/api/admin/bank-settings/upi-account/${E}`,{isPrimary:!0},{headers:{Authorization:`Bearer ${t.token}`}});s(I)}catch(I){alert(((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Error setting primary UPI")}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Bank Management"}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[r.jsx(Hr,{size:24}),"Bank Accounts"]}),r.jsxs("button",{onClick:()=>{a(!0),m({})},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2",children:[r.jsx(Ks,{size:18})," Add Bank"]})]}),((C=e==null?void 0:e.bankAccounts)==null?void 0:C.length)===0?r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No bank accounts configured"}):r.jsx("div",{className:"space-y-4",children:(T=e==null?void 0:e.bankAccounts)==null?void 0:T.map(E=>r.jsx("div",{className:`bg-dark-700 rounded-lg p-4 border-l-4 ${E.isPrimary?"border-green-500":"border-dark-600"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-lg",children:E.bankName}),E.isPrimary&&r.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded",children:"PRIMARY"}),!E.isActive&&r.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded",children:"INACTIVE"})]}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:E.accountName}),r.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Account Number:"}),r.jsx("span",{className:"ml-2 font-mono",children:E.accountNumber})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"IFSC:"}),r.jsx("span",{className:"ml-2 font-mono",children:E.ifscCode})]}),E.branch&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-500",children:"Branch:"}),r.jsx("span",{className:"ml-2",children:E.branch})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[!E.isPrimary&&r.jsx("button",{onClick:()=>S(E._id),className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded",children:"Set Primary"}),r.jsx("button",{onClick:()=>j(E._id,E.isActive),className:`px-3 py-1 text-xs rounded ${E.isActive?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:E.isActive?"Disable":"Enable"}),r.jsx("button",{onClick:()=>{u(E._id),m(E)},className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-700 rounded",children:"Edit"}),r.jsx("button",{onClick:()=>p(E._id),className:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 rounded",children:"Delete"})]})]})},E._id))})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[r.jsx(As,{size:24}),"UPI Accounts"]}),r.jsxs("button",{onClick:()=>{c(!0),m({})},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2",children:[r.jsx(Ks,{size:18})," Add UPI"]})]}),((M=e==null?void 0:e.upiAccounts)==null?void 0:M.length)===0?r.jsx("p",{className:"text-gray-400 text-center py-8",children:"No UPI accounts configured"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(R=e==null?void 0:e.upiAccounts)==null?void 0:R.map(E=>r.jsxs("div",{className:`bg-dark-700 rounded-lg p-4 border-l-4 ${E.isPrimary?"border-green-500":"border-dark-600"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:E.name}),E.isPrimary&&r.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded",children:"PRIMARY"})]}),!E.isActive&&r.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded",children:"INACTIVE"})]}),r.jsx("p",{className:"font-mono text-lg text-green-400",children:E.upiId}),r.jsx("p",{className:"text-xs text-gray-500 capitalize mt-1",children:E.provider}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[!E.isPrimary&&r.jsx("button",{onClick:()=>w(E._id),className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded",children:"Primary"}),r.jsx("button",{onClick:()=>k(E._id,E.isActive),className:`px-2 py-1 text-xs rounded ${E.isActive?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:E.isActive?"Disable":"Enable"}),r.jsx("button",{onClick:()=>v(E._id),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 rounded",children:"Delete"})]})]},E._id))})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add Bank Account"}),r.jsxs("form",{onSubmit:b,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Bank Name *"}),r.jsx("input",{type:"text",value:y.bankName||"",onChange:E=>m({...y,bankName:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Name *"}),r.jsx("input",{type:"text",value:y.accountName||"",onChange:E=>m({...y,accountName:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Number *"}),r.jsx("input",{type:"text",value:y.accountNumber||"",onChange:E=>m({...y,accountNumber:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"IFSC Code *"}),r.jsx("input",{type:"text",value:y.ifscCode||"",onChange:E=>m({...y,ifscCode:E.target.value.toUpperCase()}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Branch"}),r.jsx("input",{type:"text",value:y.branch||"",onChange:E=>m({...y,branch:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isPrimary",checked:y.isPrimary||!1,onChange:E=>m({...y,isPrimary:E.target.checked})}),r.jsx("label",{htmlFor:"isPrimary",className:"text-sm",children:"Set as primary account"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 py-2 bg-green-600 hover:bg-green-700 rounded font-medium",children:"Add Bank"}),r.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-700 rounded font-medium",children:"Cancel"})]})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add UPI Account"}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"UPI ID *"}),r.jsx("input",{type:"text",value:y.upiId||"",onChange:E=>m({...y,upiId:E.target.value}),placeholder:"example@upi",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Name *"}),r.jsx("input",{type:"text",value:y.name||"",onChange:E=>m({...y,name:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Provider"}),r.jsxs("select",{value:y.provider||"other",onChange:E=>m({...y,provider:E.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"gpay",children:"Google Pay"}),r.jsx("option",{value:"phonepe",children:"PhonePe"}),r.jsx("option",{value:"paytm",children:"Paytm"}),r.jsx("option",{value:"bhim",children:"BHIM"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isPrimaryUpi",checked:y.isPrimary||!1,onChange:E=>m({...y,isPrimary:E.target.checked})}),r.jsx("label",{htmlFor:"isPrimaryUpi",className:"text-sm",children:"Set as primary UPI"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 py-2 bg-green-600 hover:bg-green-700 rounded font-medium",children:"Add UPI"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-700 rounded font-medium",children:"Cancel"})]})]})]})})]})},uw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState(""),[o,c]=N.useState({segment:"",category:"",enabled:"",optionType:""}),[d,u]=N.useState(!1),[h,f]=N.useState({}),[y,m]=N.useState({connected:!1});N.useEffect(()=>{p(),x(),b();const w=setInterval(b,2e3);return()=>clearInterval(w)},[o]);const x=async()=>{try{const{data:w}=await z.get("/api/zerodha/status");m(w)}catch(w){console.error("Error fetching Zerodha status:",w)}},b=async()=>{try{const{data:w}=await z.get("/api/zerodha/market-data");w&&Object.keys(w).length>0&&f(w)}catch{}},p=async()=>{try{let w="/api/instruments/admin?";o.segment&&(w+=`segment=${o.segment}&`),o.category&&(w+=`category=${o.category}&`),o.enabled&&(w+=`enabled=${o.enabled}&`),l&&(w+=`search=${l}&`);const{data:C}=await z.get(w,{headers:{Authorization:`Bearer ${t.token}`}});s(C)}catch(w){console.error("Error:",w)}finally{i(!1)}},g=async w=>{var C,T;try{await z.put(`/api/instruments/admin/${w}/toggle`,{},{headers:{Authorization:`Bearer ${t.token}`}}),p()}catch(M){alert(((T=(C=M.response)==null?void 0:C.data)==null?void 0:T.message)||"Error toggling instrument")}},v=async w=>{var T,M;const C=e.filter(R=>R.isEnabled!==w).map(R=>R._id);if(C.length!==0)try{await z.put("/api/instruments/admin/bulk-toggle",{ids:C,isEnabled:w},{headers:{Authorization:`Bearer ${t.token}`}}),p()}catch(R){alert(((M=(T=R.response)==null?void 0:T.data)==null?void 0:M.message)||"Error")}},j=async()=>{var w,C;u(!0);try{const{data:T}=await z.post("/api/instruments/admin/seed-defaults",{},{headers:{Authorization:`Bearer ${t.token}`}});alert(T.message),p()}catch(T){alert(((C=(w=T.response)==null?void 0:w.data)==null?void 0:C.message)||"Error seeding instruments")}finally{u(!1)}},k=w=>{w.preventDefault(),p()},S=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","STOCKS","INDICES","MCX","COMMODITY","CURRENCY","OTHER"];return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Instrument Management"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${y.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),r.jsxs("span",{className:"text-sm text-gray-400",children:["Zerodha: ",y.connected?`Connected (${y.userId})`:"Not Connected"]}),Object.keys(h).length>0&&r.jsxs("span",{className:"text-sm text-green-400 ml-2",children:[" ",Object.keys(h).length," live prices"]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:j,disabled:d,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm",children:d?"Seeding...":"Seed Default Instruments"})})]}),r.jsx("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsx("form",{onSubmit:k,className:"md:col-span-2",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search symbol or name...",value:l,onChange:w=>a(w.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded pl-10 pr-4 py-2"})]})}),r.jsxs("select",{value:o.segment,onChange:w=>c({...o,segment:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"All Segments"}),r.jsx("option",{value:"EQUITY",children:"Equity"}),r.jsx("option",{value:"FNO",children:"F&O"}),r.jsx("option",{value:"MCX",children:"MCX"}),r.jsx("option",{value:"COMMODITY",children:"Commodity"}),r.jsx("option",{value:"CURRENCY",children:"Currency"})]}),r.jsxs("select",{value:o.category,onChange:w=>c({...o,category:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"All Categories"}),S.map(w=>r.jsx("option",{value:w,children:w},w))]}),r.jsxs("select",{value:o.enabled,onChange:w=>c({...o,enabled:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"true",children:"Enabled"}),r.jsx("option",{value:"false",children:"Disabled"})]}),r.jsxs("select",{value:o.optionType,onChange:w=>c({...o,optionType:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"CE",children:"Calls (CE)"}),r.jsx("option",{value:"PE",children:"Puts (PE)"}),r.jsx("option",{value:"FUT",children:"Futures"})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total"}),r.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Enabled"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(w=>w.isEnabled).length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Disabled"}),r.jsx("div",{className:"text-2xl font-bold text-red-400",children:e.filter(w=>!w.isEnabled).length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Featured"}),r.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.filter(w=>w.isFeatured).length})]})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{onClick:()=>v(!0),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Enable All Visible"}),r.jsx("button",{onClick:()=>v(!1),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Disable All Visible"}),r.jsxs("button",{onClick:p,className:"px-3 py-1 bg-dark-600 hover:bg-dark-500 rounded text-sm flex items-center gap-1",children:[r.jsx(ne,{size:14})," Refresh"]})]}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:'No instruments found. Click "Seed Default Instruments" to add popular stocks and indices.'}):r.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Symbol"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Category"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Strike"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"LTP"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Change"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Live"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"})]})}),r.jsx("tbody",{children:e.map(w=>{const C=h[w.token]||{},T=C.ltp||w.ltp||0,M=C.change||w.change||0,R=C.changePercent||w.changePercent||0,E=!!C.ltp;return r.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700/50",children:[r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-medium",children:w.symbol}),r.jsxs("div",{className:"text-xs text-gray-500",children:[w.exchange,"  ",w.expiry||"Spot"]})]}),r.jsx("td",{className:"px-4 py-3",children:w.optionType?r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${w.optionType==="CE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:w.optionType}):w.instrumentType==="FUTURES"?r.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-xs",children:"FUT"}):r.jsx("span",{className:"px-2 py-0.5 bg-gray-500/20 text-gray-400 rounded text-xs",children:w.instrumentType})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 rounded text-xs",children:w.category})}),r.jsx("td",{className:"px-4 py-3 text-right font-mono text-gray-400",children:w.strike?`${w.strike.toLocaleString()}`:"-"}),r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:T>0?`${T.toLocaleString()}`:"-"}),r.jsx("td",{className:`px-4 py-3 text-right font-mono ${M>=0?"text-green-400":"text-red-400"}`,children:R?`${M>=0?"+":""}${parseFloat(R).toFixed(2)}%`:"-"}),r.jsx("td",{className:"px-4 py-3 text-center",children:E?r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full inline-block animate-pulse"}):r.jsx("span",{className:"w-2 h-2 bg-gray-600 rounded-full inline-block"})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("button",{onClick:()=>g(w._id),className:`relative w-12 h-6 rounded-full transition ${w.isEnabled?"bg-green-600":"bg-dark-600"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition ${w.isEnabled?"left-7":"left-1"}`})})})]},w._id)})})]})})]})},hw=()=>{const{admin:t}=ce(),[e,s]=N.useState(null),[n,i]=N.useState(!0),[l,a]=N.useState(!1),[o,c]=N.useState(null);N.useEffect(()=>{u(),d();const m=new URLSearchParams(window.location.search),x=m.get("zerodha");x==="success"?(alert("Zerodha connected successfully!"),window.history.replaceState({},"",window.location.pathname),d()):x==="error"?(alert("Zerodha connection failed: "+(m.get("message")||"Unknown error")),window.history.replaceState({},"",window.location.pathname)):x==="cancelled"&&(alert("Zerodha login was cancelled"),window.history.replaceState({},"",window.location.pathname))},[]);const d=async()=>{try{const{data:m}=await z.get("/api/zerodha/status");c(m)}catch(m){console.error("Error fetching broker status:",m)}},u=async()=>{try{const{data:m}=await z.get("/api/trade/market-state");s(m)}catch(m){console.error("Error:",m)}finally{i(!1)}},h=async()=>{var m,x;a(!0);try{const{data:b}=await z.put("/api/trade/market-state",{isMarketOpen:!e.isMarketOpen},{headers:{Authorization:`Bearer ${t.token}`}});s(b)}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error updating market state")}finally{a(!1)}},f=async()=>{var m,x;try{const{data:b}=await z.get("/api/zerodha/login-url",{headers:{Authorization:`Bearer ${t.token}`}});window.location.href=b.loginUrl}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error getting Zerodha login URL")}},y=async()=>{var m,x;try{await z.post("/api/zerodha/logout",{},{headers:{Authorization:`Bearer ${t.token}`}}),d(),alert("Zerodha disconnected")}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error disconnecting Zerodha")}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Market Control"}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Zerodha Kite Connect"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Connect to Zerodha Kite API for live market data feed"}),r.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-dark-600",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:r.jsx(TrendingUp,{className:"text-blue-400",size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Zerodha Kite"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Kite Connect API"})]})]}),r.jsx("div",{className:`px-2 py-1 rounded text-xs ${o!=null&&o.connected?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o!=null&&o.connected?"Connected":"Disconnected"})]}),o!=null&&o.connected?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-xs text-gray-400 mb-3",children:["User ID: ",o.userId]}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("button",{onClick:async()=>{var m,x;try{const{data:b}=await z.post("/api/zerodha/seed-mcx",{},{headers:{Authorization:`Bearer ${t.token}`}});alert(b.message)}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error seeding MCX")}},className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded text-sm",children:"Seed MCX"}),r.jsx("button",{onClick:async()=>{var m,x;try{const{data:b}=await z.post("/api/zerodha/subscribe-all",{},{headers:{Authorization:`Bearer ${t.token}`}});alert(b.message)}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error subscribing")}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded text-sm",children:"Subscribe All"})]}),r.jsx("button",{onClick:y,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm",children:"Disconnect"})]}):r.jsx("button",{onClick:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm",children:"Connect to Kite"})]})}),r.jsxs("div",{className:"mt-4 p-3 bg-dark-700 rounded-lg border border-dark-600",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Kite Connect Redirect URL"}),r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Add this URL in your Kite Connect app settings:"}),r.jsxs("code",{className:"block bg-dark-900 p-2 rounded text-xs text-green-400 break-all",children:[window.location.origin.replace(":3000",":5001"),"/api/zerodha/callback"]})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Global Market Status"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:e!=null&&e.isMarketOpen?"Market is OPEN - Trading is allowed":"Market is CLOSED - Trading is disabled"})]}),r.jsx("button",{onClick:h,disabled:l,className:`px-8 py-4 rounded-lg text-lg font-bold transition ${e!=null&&e.isMarketOpen?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:l?"Updating...":e!=null&&e.isMarketOpen?"CLOSE MARKET":"OPEN MARKET"})]}),r.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${e!=null&&e.isMarketOpen?"bg-green-500 animate-pulse":"bg-red-500"}`}),r.jsx("span",{className:`text-lg font-bold ${e!=null&&e.isMarketOpen?"text-green-400":"text-red-400"}`,children:e!=null&&e.isMarketOpen?"MARKET OPEN":"MARKET CLOSED"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-400",children:"When Market is OPEN"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[r.jsx("li",{children:" Users can place new orders"}),r.jsx("li",{children:" Users can modify orders"}),r.jsx("li",{children:" New positions can be opened"}),r.jsx("li",{children:" Square-off allowed"}),r.jsx("li",{children:" RMS actions active"})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-400",children:"When Market is CLOSED"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[r.jsx("li",{children:" No new orders allowed"}),r.jsx("li",{children:" No modifications allowed"}),r.jsx("li",{children:" No new positions"}),r.jsx("li",{children:" Square-off still allowed"}),r.jsx("li",{children:" RMS actions still work"}),r.jsx("li",{children:" Admin settlement allowed"})]})]})]}),(e==null?void 0:e.lastUpdatedAt)&&r.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["Last updated: ",new Date(e.lastUpdatedAt).toLocaleString()]})]})},fw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState(""),[o,c]=N.useState(!1);N.useEffect(()=>{d()},[l]);const d=async()=>{try{const h=l?`/api/trade/admin/trades?status=${l}`:"/api/trade/admin/trades",{data:f}=await z.get(h,{headers:{Authorization:`Bearer ${t.token}`}});s(f)}catch(h){console.error("Error:",h)}finally{i(!1)}},u=async(h,f)=>{var m,x;const y=prompt("Enter exit price:",f);if(y)try{await z.post(`/api/trade/admin/trade/${h}/close`,{exitPrice:Number(y)},{headers:{Authorization:`Bearer ${t.token}`}}),d()}catch(b){alert(((x=(m=b.response)==null?void 0:m.data)==null?void 0:x.message)||"Error closing trade")}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Trade Management"}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition",children:[r.jsx(Ks,{size:20}),r.jsx("span",{children:"Create Trade"})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[r.jsx("button",{onClick:()=>a(""),className:`px-4 py-2 rounded ${l?"bg-dark-700":"bg-purple-600"}`,children:"All"}),r.jsx("button",{onClick:()=>a("OPEN"),className:`px-4 py-2 rounded ${l==="OPEN"?"bg-green-600":"bg-dark-700"}`,children:"Open"}),r.jsx("button",{onClick:()=>a("CLOSED"),className:`px-4 py-2 rounded ${l==="CLOSED"?"bg-red-600":"bg-dark-700"}`,children:"Closed"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Trades"}),r.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Open"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(h=>h.status==="OPEN").length})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total P&L"}),r.jsxs("div",{className:`text-2xl font-bold ${e.reduce((h,f)=>h+(f.netPnL||f.unrealizedPnL||0),0)>=0?"text-green-400":"text-red-400"}`,children:["",e.reduce((h,f)=>h+(f.netPnL||f.unrealizedPnL||0),0).toLocaleString()]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Brokerage"}),r.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["",e.reduce((h,f)=>{var y;return h+(((y=f.charges)==null?void 0:y.brokerage)||0)},0).toLocaleString()]})]})]}),n?r.jsx("div",{className:"text-center py-8",children:r.jsx(ne,{className:"animate-spin inline"})}):e.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No trades found"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"md:hidden space-y-4",children:e.map(h=>{var f,y;return r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:h.symbol}),r.jsxs("div",{className:"text-xs text-gray-400",children:[h.segment,"  ",h.productType]})]}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:h.status})]}),r.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["User: ",((f=h.user)==null?void 0:f.fullName)||((y=h.user)==null?void 0:y.username)]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.side==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:h.side}),r.jsxs("span",{className:"ml-2 text-sm",children:["Qty: ",h.quantity]})]}),r.jsxs("div",{className:`font-bold ${(h.netPnL||h.unrealizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(h.netPnL||h.unrealizedPnL||0)>=0?"+":"","",(h.netPnL||h.unrealizedPnL||0).toFixed(2)]})]}),h.status==="OPEN"&&r.jsx("button",{onClick:()=>u(h._id,h.currentPrice||h.entryPrice),className:"w-full mt-3 px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Force Close"})]},h._id)})}),r.jsx("div",{className:"hidden md:block bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Trade ID"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"User"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Symbol"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Side"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Qty"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Entry"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Exit/LTP"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"P&L"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Action"})]})}),r.jsx("tbody",{children:e.map(h=>{var f,y,m,x;return r.jsxs("tr",{className:"border-t border-dark-600",children:[r.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:h.tradeId}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{children:((f=h.user)==null?void 0:f.fullName)||((y=h.user)==null?void 0:y.username)})}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-medium",children:h.symbol}),r.jsxs("div",{className:"text-xs text-gray-500",children:[h.segment,"  ",h.productType]})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.side==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:h.side})}),r.jsx("td",{className:"px-4 py-3 text-right",children:h.quantity}),r.jsxs("td",{className:"px-4 py-3 text-right",children:["",(m=h.entryPrice)==null?void 0:m.toFixed(2)]}),r.jsxs("td",{className:"px-4 py-3 text-right",children:["",(x=h.exitPrice||h.currentPrice||h.entryPrice)==null?void 0:x.toFixed(2)]}),r.jsxs("td",{className:`px-4 py-3 text-right font-bold ${(h.netPnL||h.unrealizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(h.netPnL||h.unrealizedPnL||0)>=0?"+":"","",(h.netPnL||h.unrealizedPnL||0).toFixed(2)]}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:h.status})}),r.jsx("td",{className:"px-4 py-3 text-center",children:h.status==="OPEN"&&r.jsx("button",{onClick:()=>u(h._id,h.currentPrice||h.entryPrice),className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Close"})})]},h._id)})})]})})]}),o&&r.jsx(mw,{token:t.token,onClose:()=>c(!1),onSuccess:()=>{c(!1),d()}})]})},mw=({token:t,onClose:e,onSuccess:s})=>{const[n,i]=N.useState([]),[l,a]=N.useState([]),[o,c]=N.useState(!1),[d,u]=N.useState(""),[h,f]=N.useState(""),[y,m]=N.useState(""),[x,b]=N.useState({userId:"",userName:"",symbol:"",instrumentToken:"",segment:"NSE",side:"BUY",productType:"INTRADAY",quantity:1,entryPrice:"",tradeDate:new Date().toISOString().split("T")[0],tradeTime:new Date().toTimeString().slice(0,5)});N.useEffect(()=>{p(),g()},[]);const p=async()=>{try{const{data:S}=await z.get("/api/admin/manage/users",{headers:{Authorization:`Bearer ${t}`}});i(S)}catch(S){console.error("Error fetching users:",S)}},g=async()=>{try{const{data:S}=await z.get("/api/instruments?status=ACTIVE&limit=500",{headers:{Authorization:`Bearer ${t}`}});a(S.instruments||S||[])}catch(S){console.error("Error fetching instruments:",S)}},v=n.filter(S=>{var w,C,T;return((w=S.fullName)==null?void 0:w.toLowerCase().includes(h.toLowerCase()))||((C=S.username)==null?void 0:C.toLowerCase().includes(h.toLowerCase()))||((T=S.userId)==null?void 0:T.toLowerCase().includes(h.toLowerCase()))}).slice(0,10),j=l.filter(S=>{var w,C;return((w=S.tradingsymbol)==null?void 0:w.toLowerCase().includes(y.toLowerCase()))||((C=S.name)==null?void 0:C.toLowerCase().includes(y.toLowerCase()))}).slice(0,10),k=async S=>{var w,C;if(S.preventDefault(),!x.userId)return u("Please select a user");if(!x.symbol)return u("Please select an instrument");if(!x.entryPrice||Number(x.entryPrice)<=0)return u("Please enter valid entry price");if(!x.quantity||Number(x.quantity)<=0)return u("Please enter valid quantity");c(!0),u("");try{await z.post("/api/trade/admin/create-trade",{userId:x.userId,symbol:x.symbol,instrumentToken:x.instrumentToken,segment:x.segment,side:x.side,productType:x.productType,quantity:Number(x.quantity),entryPrice:Number(x.entryPrice),tradeDate:x.tradeDate,tradeTime:x.tradeTime},{headers:{Authorization:`Bearer ${t}`}}),s()}catch(T){u(((C=(w=T.response)==null?void 0:w.data)==null?void 0:C.message)||"Error creating trade")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-dark-800 p-4 border-b border-dark-600 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create Trade"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),r.jsxs("form",{onSubmit:k,className:"p-4 space-y-4",children:[d&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded",children:d}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select User *"}),r.jsx("input",{type:"text",placeholder:"Search by name or ID...",value:h,onChange:S=>f(S.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-2"}),h&&v.length>0&&!x.userId&&r.jsx("div",{className:"bg-dark-700 border border-dark-600 rounded max-h-40 overflow-y-auto",children:v.map(S=>r.jsxs("div",{onClick:()=>{b({...x,userId:S._id,userName:S.fullName||S.username}),f(S.fullName||S.username)},className:"px-3 py-2 hover:bg-dark-600 cursor-pointer",children:[r.jsx("div",{className:"font-medium",children:S.fullName||S.username}),r.jsxs("div",{className:"text-xs text-gray-400",children:["@",S.username,"  ",S.userId]})]},S._id))}),x.userId&&r.jsxs("div",{className:"flex items-center justify-between bg-green-500/10 border border-green-500/30 rounded px-3 py-2",children:[r.jsx("span",{className:"text-green-400",children:x.userName}),r.jsx("button",{type:"button",onClick:()=>{b({...x,userId:"",userName:""}),f("")},className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:16})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select Instrument *"}),r.jsx("input",{type:"text",placeholder:"Search instruments...",value:y,onChange:S=>m(S.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-2"}),y&&j.length>0&&!x.symbol&&r.jsx("div",{className:"bg-dark-700 border border-dark-600 rounded max-h-40 overflow-y-auto",children:j.map(S=>r.jsxs("div",{onClick:()=>{b({...x,symbol:S.tradingsymbol,instrumentToken:S.instrument_token,segment:S.segment||S.exchange||"NSE"}),m(S.tradingsymbol)},className:"px-3 py-2 hover:bg-dark-600 cursor-pointer",children:[r.jsx("div",{className:"font-medium",children:S.tradingsymbol}),r.jsxs("div",{className:"text-xs text-gray-400",children:[S.name,"  ",S.segment||S.exchange]})]},S._id||S.instrument_token))}),x.symbol&&r.jsxs("div",{className:"flex items-center justify-between bg-blue-500/10 border border-blue-500/30 rounded px-3 py-2",children:[r.jsxs("span",{className:"text-blue-400",children:[x.symbol," (",x.segment,")"]}),r.jsx("button",{type:"button",onClick:()=>{b({...x,symbol:"",instrumentToken:""}),m("")},className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:16})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Side *"}),r.jsxs("select",{value:x.side,onChange:S=>b({...x,side:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"BUY",children:"BUY"}),r.jsx("option",{value:"SELL",children:"SELL"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Product Type *"}),r.jsxs("select",{value:x.productType,onChange:S=>b({...x,productType:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[r.jsx("option",{value:"INTRADAY",children:"INTRADAY"}),r.jsx("option",{value:"DELIVERY",children:"DELIVERY"}),r.jsx("option",{value:"CARRYFORWARD",children:"CARRYFORWARD"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:x.quantity,onChange:S=>b({...x,quantity:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"1",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Entry Price *"}),r.jsx("input",{type:"number",step:"0.01",value:x.entryPrice,onChange:S=>b({...x,entryPrice:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",placeholder:"0.00",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Trade Date"}),r.jsx("input",{type:"date",value:x.tradeDate,onChange:S=>b({...x,tradeDate:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Trade Time"}),r.jsx("input",{type:"time",value:x.tradeTime,onChange:S=>b({...x,tradeTime:S.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded disabled:opacity-50",children:o?"Creating...":"Create Trade"})]})]})]})})},pw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(null),[l,a]=N.useState({niftyMaxLotIntraday:100,niftyMaxLotCarryForward:50,niftyLotSize:25,bankniftyMaxLotIntraday:100,bankniftyMaxLotCarryForward:50,bankniftyLotSize:15,finniftyMaxLotIntraday:100,finniftyMaxLotCarryForward:50,finniftyLotSize:25,midcpniftyMaxLotIntraday:100,midcpniftyMaxLotCarryForward:50,midcpniftyLotSize:50,equityMaxQtyIntraday:1e4,equityMaxQtyDelivery:5e3,maxOpenPositions:20,maxDailyTrades:100}),[o,c]=N.useState(!0),[d,u]=N.useState(!1),[h,f]=N.useState({type:"",text:""});N.useEffect(()=>{y()},[]),N.useEffect(()=>{n&&m(n)},[n]);const y=async()=>{try{const{data:g}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});s(g),g.length>0&&i(g[0]._id)}catch(g){console.error("Error fetching admins:",g)}finally{c(!1)}},m=async g=>{try{const{data:v}=await z.get(`/api/admin/manage/admins/${g}`,{headers:{Authorization:`Bearer ${t.token}`}});v.lotSettings&&a(v.lotSettings)}catch(v){console.error("Error fetching lot settings:",v)}},x=async()=>{var g,v;u(!0),f({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${n}/lot-settings`,{lotSettings:l,enabledLeverages:l.enabledLeverages,allowTradingOutsideMarketHours:l.allowTradingOutsideMarketHours,marginCallPercentage:l.marginCallPercentage},{headers:{Authorization:`Bearer ${t.token}`}}),f({type:"success",text:"All settings saved successfully!"})}catch(j){f({type:"error",text:((v=(g=j.response)==null?void 0:g.data)==null?void 0:v.message)||"Error saving settings"})}finally{u(!1)}},b=(g,v)=>{a(j=>({...j,[g]:parseInt(v)||0}))},p=[{name:"NIFTY",color:"blue",fields:[{key:"niftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"niftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"niftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"BANKNIFTY",color:"purple",fields:[{key:"bankniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"bankniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"bankniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"FINNIFTY",color:"green",fields:[{key:"finniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"finniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"finniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"MIDCPNIFTY",color:"yellow",fields:[{key:"midcpniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"midcpniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"midcpniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]}];return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Lot Management"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Configure max lot limits for each admin's users"})]}),r.jsx("button",{onClick:x,disabled:d,className:"px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium disabled:opacity-50",children:d?"Saving...":"Save Settings"})]}),h.text&&r.jsx("div",{className:`mb-4 p-3 rounded-lg ${h.type==="success"?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:h.text}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Select Admin"}),r.jsx("select",{value:n||"",onChange:g=>i(g.target.value),className:"w-full md:w-64 bg-dark-700 border border-dark-600 rounded px-3 py-2",children:e.map(g=>r.jsxs("option",{value:g._id,children:[g.username," (",g.adminCode,")"]},g._id))})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:p.map(g=>r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("h3",{className:`text-lg font-semibold mb-4 text-${g.color}-400`,children:g.name}),r.jsx("div",{className:"space-y-4",children:g.fields.map(v=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:v.label}),r.jsx("div",{className:"text-xs text-gray-500",children:v.desc})]}),r.jsx("input",{type:"number",value:l[v.key],onChange:j=>b(v.key,j.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]},v.key))})]},g.name))}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Equity"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Max Qty (Intraday)"}),r.jsx("div",{className:"text-xs text-gray-500",children:"MIS orders"})]}),r.jsx("input",{type:"number",value:l.equityMaxQtyIntraday,onChange:g=>b("equityMaxQtyIntraday",g.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Max Qty (Delivery)"}),r.jsx("div",{className:"text-xs text-gray-500",children:"CNC orders"})]}),r.jsx("input",{type:"number",value:l.equityMaxQtyDelivery,onChange:g=>b("equityMaxQtyDelivery",g.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-400",children:"Global Limits"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Max Open Positions"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Per user"})]}),r.jsx("input",{type:"number",value:l.maxOpenPositions,onChange:g=>b("maxOpenPositions",g.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Max Daily Trades"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Per user"})]}),r.jsx("input",{type:"number",value:l.maxDailyTrades,onChange:g=>b("maxDailyTrades",g.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]})]}),r.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-400",children:"Leverage Settings"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which leverage options to enable for users. Higher leverage = higher risk."}),r.jsx("div",{className:"flex flex-wrap gap-3",children:[1,2,5,10,20,50,100,200,500,800,1e3,1500,2e3].map(g=>{var j;const v=(j=l.enabledLeverages)==null?void 0:j.includes(g);return r.jsxs("button",{onClick:()=>{const k=l.enabledLeverages||[1,2,5,10],S=v?k.filter(w=>w!==g):[...k,g].sort((w,C)=>w-C);a(w=>({...w,enabledLeverages:S}))},className:`px-4 py-2 rounded-lg font-medium transition ${v?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[g,"x"]},g)})}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Enabled: ",(l.enabledLeverages||[1,2,5,10]).join("x, "),"x"]})]}),r.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-cyan-400",children:"Trading Settings"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Allow Trading Outside Market Hours"}),r.jsx("div",{className:"text-xs text-gray-500",children:"For LIMIT orders only"})]}),r.jsx("button",{onClick:()=>a(g=>({...g,allowTradingOutsideMarketHours:!g.allowTradingOutsideMarketHours})),className:`w-12 h-6 rounded-full transition ${l.allowTradingOutsideMarketHours?"bg-green-600":"bg-dark-600"}`,children:r.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition transform ${l.allowTradingOutsideMarketHours?"translate-x-6":"translate-x-0.5"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium",children:"Margin Call %"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Auto-close when loss reaches this %"})]}),r.jsx("input",{type:"number",value:l.marginCallPercentage||100,onChange:g=>a(v=>({...v,marginCallPercentage:parseInt(g.target.value)||100})),className:"w-20 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]}),r.jsxs("div",{className:"mt-6 bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"How Settings Work"}),r.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Leverage"}),": Higher leverage = more buying power but higher risk"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Margin Call"}),": Trades auto-close when loss reaches wallet balance"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Intraday (MIS)"}),": Orders that must be squared off same day"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Carry Forward (NRML)"}),": Orders that can be held till expiry"]})]})]})]})},xw=()=>{const{admin:t}=ce();t==null||t.role;const[e,s]=N.useState({spread:0,commissionType:"PER_LOT",perLotCharge:0,perTradeCharge:0,perCroreCharge:0}),[n,i]=N.useState(!0),[l,a]=N.useState(!1),[o,c]=N.useState({type:"",text:""});N.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:h}=await z.get("/api/trading/admin/charge-settings",{headers:{Authorization:`Bearer ${t.token}`}});h&&s({spread:h.spread||0,commissionType:h.commissionType||"PER_LOT",perLotCharge:h.perLotCharge||h.commission||0,perTradeCharge:h.perTradeCharge||0,perCroreCharge:h.perCroreCharge||0})}catch(h){console.error("Error fetching charge settings:",h)}finally{i(!1)}},u=async()=>{var h,f;a(!0),c({type:"",text:""});try{await z.post("/api/trading/admin/charge-settings",e,{headers:{Authorization:`Bearer ${t.token}`}}),c({type:"success",text:"Charge settings saved successfully!"})}catch(y){c({type:"error",text:((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error saving settings"})}finally{a(!1)}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Charge Management"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Configure spread and commission for trades"})]}),r.jsx("button",{onClick:u,disabled:l,className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition disabled:opacity-50",children:l?"Saving...":"Save Settings"})]}),o.text&&r.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${o.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o.text}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 max-w-3xl",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Spread (Points)"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Spread is added to buy price and subtracted from sell price. This is the difference between bid and ask price."}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:e.spread,onChange:h=>s({...e,spread:parseFloat(h.target.value)||0}),className:"w-48 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg font-mono focus:outline-none focus:border-green-500"}),r.jsx("span",{className:"text-gray-400",children:"points per trade"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Commission Type"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select how commission should be calculated for trades."}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"PER_LOT",label:"Per Lot",desc:"Charge per lot traded"},{value:"PER_TRADE",label:"Per Trade",desc:"Fixed charge per trade"},{value:"PER_CRORE",label:"Per Crore",desc:"Charge per 1 Cr turnover"}].map(h=>r.jsxs("button",{onClick:()=>s({...e,commissionType:h.value}),className:`p-3 rounded-lg border-2 text-left transition ${e.commissionType===h.value?"border-green-500 bg-green-500/10":"border-dark-600 bg-dark-700 hover:border-dark-500"}`,children:[r.jsx("div",{className:"font-semibold text-sm",children:h.label}),r.jsx("div",{className:"text-xs text-gray-500",children:h.desc})]},h.value))})]}),e.commissionType==="PER_LOT"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Per Lot Charge ()"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:e.perLotCharge,onChange:h=>s({...e,perLotCharge:parseFloat(h.target.value)||0}),className:"w-48 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg font-mono focus:outline-none focus:border-green-500"}),r.jsx("span",{className:"text-gray-400",children:" per lot"})]}),r.jsx("div",{className:"mt-2 text-sm text-yellow-400",children:"Example: If charge is 20 and user trades 5 lots, total = 100"})]}),e.commissionType==="PER_TRADE"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Per Trade Charge ()"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:e.perTradeCharge,onChange:h=>s({...e,perTradeCharge:parseFloat(h.target.value)||0}),className:"w-48 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg font-mono focus:outline-none focus:border-green-500"}),r.jsx("span",{className:"text-gray-400",children:" per trade"})]}),r.jsx("div",{className:"mt-2 text-sm text-yellow-400",children:"Fixed charge applied to each trade regardless of quantity"})]}),e.commissionType==="PER_CRORE"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Per Crore Charge ()"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"number",step:"0.01",min:"0",value:e.perCroreCharge,onChange:h=>s({...e,perCroreCharge:parseFloat(h.target.value)||0}),className:"w-48 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg font-mono focus:outline-none focus:border-green-500"}),r.jsx("span",{className:"text-gray-400",children:" per crore turnover"})]}),r.jsx("div",{className:"mt-2 text-sm text-yellow-400",children:"Example: If charge is 500/Cr and trade value is 50 Lakhs, commission = 250"})]})]}),r.jsxs("div",{className:"mt-8 bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3 text-gray-300",children:"Trade Charge Preview"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"bg-dark-600 rounded p-3",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Spread"}),r.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[e.spread," pts"]})]}),r.jsxs("div",{className:"bg-dark-600 rounded p-3",children:[r.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Commission (",e.commissionType.replace("_"," "),")"]}),r.jsxs("div",{className:"text-xl font-bold text-purple-400",children:["",e.commissionType==="PER_LOT"?e.perLotCharge:e.commissionType==="PER_TRADE"?e.perTradeCharge:e.perCroreCharge,e.commissionType==="PER_LOT"?"/lot":e.commissionType==="PER_TRADE"?"/trade":"/Cr"]})]})]})]})]}),r.jsxs("div",{className:"mt-6 bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 max-w-3xl",children:[r.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"How Charges Work"}),r.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Spread"}),": Added to buy price, subtracted from sell price (affects entry/exit price)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Per Lot"}),": Commission = Charge  Number of Lots"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Per Trade"}),": Fixed commission per trade regardless of size"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Per Crore"}),": Commission = (Trade Value  1,00,00,000)  Charge"]})]})]})]})},gw=()=>{const{admin:t,setAdmin:e}=ce(),[s,n]=N.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""}),[i,l]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,o]=N.useState(!1),[c,d]=N.useState({type:"",text:""}),[u,h]=N.useState(!1),f=async m=>{var x,b;m.preventDefault(),o(!0),d({type:"",text:""});try{const{data:p}=await z.put("/api/admin/manage/update-profile",s,{headers:{Authorization:`Bearer ${t.token}`}});e({...t,...p}),d({type:"success",text:"Profile updated successfully"})}catch(p){d({type:"error",text:((b=(x=p.response)==null?void 0:x.data)==null?void 0:b.message)||"Error updating profile"})}finally{o(!1)}},y=async m=>{var x,b;if(m.preventDefault(),i.newPassword!==i.confirmPassword){d({type:"error",text:"New passwords do not match"});return}if(i.newPassword.length<6){d({type:"error",text:"Password must be at least 6 characters"});return}o(!0),d({type:"",text:""});try{await z.put("/api/admin/manage/change-password",{currentPassword:i.currentPassword,newPassword:i.newPassword},{headers:{Authorization:`Bearer ${t.token}`}}),l({currentPassword:"",newPassword:"",confirmPassword:""}),d({type:"success",text:"Password changed successfully"})}catch(p){d({type:"error",text:((b=(x=p.response)==null?void 0:x.data)==null?void 0:b.message)||"Error changing password"})}finally{o(!1)}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Profile & Password"}),c.text&&r.jsx("div",{className:`mb-6 p-4 rounded ${c.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:c.text}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Update Profile"}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:s.name,onChange:m=>n({...s,name:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:s.email,onChange:m=>n({...s,email:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),r.jsx("input",{type:"text",value:s.phone,onChange:m=>n({...s,phone:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full bg-green-600 hover:bg-green-700 py-2 rounded",children:a?"Saving...":"Update Profile"})]})]}),r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Change Password"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:u?"text":"password",value:i.currentPassword,onChange:m=>l({...i,currentPassword:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10",required:!0}),r.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:u?r.jsx(Xn,{size:18}):r.jsx(nn,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),r.jsx("input",{type:u?"text":"password",value:i.newPassword,onChange:m=>l({...i,newPassword:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,minLength:6})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:u?"text":"password",value:i.confirmPassword,onChange:m=>l({...i,confirmPassword:m.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,minLength:6})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full bg-yellow-600 hover:bg-yellow-700 py-2 rounded",children:a?"Changing...":"Change Password"})]})]})]}),r.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Information"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[r.jsx("div",{className:"text-gray-400",children:"Role"}),r.jsx("div",{className:(t==null?void 0:t.role)==="SUPER_ADMIN"?"text-yellow-400 font-bold":"text-purple-400 font-bold",children:t==null?void 0:t.role})]}),r.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[r.jsx("div",{className:"text-gray-400",children:"Username"}),r.jsx("div",{children:t==null?void 0:t.username})]}),(t==null?void 0:t.adminCode)&&r.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[r.jsx("div",{className:"text-gray-400",children:"Admin Code"}),r.jsx("div",{className:"font-mono text-purple-400",children:t==null?void 0:t.adminCode})]}),r.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[r.jsx("div",{className:"text-gray-400",children:"Status"}),r.jsx("div",{className:"text-green-400",children:(t==null?void 0:t.status)||"ACTIVE"})]})]})]})]})},yw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState([]),[l,a]=N.useState(!0),[o,c]=N.useState(""),[d,u]=N.useState(null),[h,f]=N.useState(!1),[y,m]=N.useState(""),[x,b]=N.useState(!1);N.useEffect(()=>{p(),g()},[]);const p=async()=>{try{const{data:k}=await z.get("/api/admin/manage/all-users",{headers:{Authorization:`Bearer ${t.token}`}});s(k)}catch(k){console.error("Error fetching users:",k)}finally{a(!1)}},g=async()=>{try{const{data:k}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});i(k)}catch(k){console.error("Error fetching admins:",k)}},v=async()=>{var k,S;if(!(!d||!y)){b(!0);try{await z.post(`/api/admin/manage/users/${d._id}/transfer`,{targetAdminId:y},{headers:{Authorization:`Bearer ${t.token}`}}),alert("User transferred successfully!"),f(!1),u(null),m(""),p()}catch(w){alert(((S=(k=w.response)==null?void 0:k.data)==null?void 0:S.message)||"Error transferring user")}finally{b(!1)}}},j=e.filter(k=>{var S,w,C,T;return((S=k.username)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((w=k.email)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((C=k.fullName)==null?void 0:C.toLowerCase().includes(o.toLowerCase()))||((T=k.adminCode)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))});return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ne,{className:"animate-spin",size:32})}):r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"All Users"}),r.jsxs("div",{className:"text-sm text-gray-400",children:["Total: ",e.length," users"]})]}),r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",placeholder:"Search by username, email, name, or admin code...",value:o,onChange:k=>c(k.target.value),className:"w-full md:w-96 bg-dark-700 border border-dark-600 rounded-lg px-4 py-2 text-white"})}),r.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"User"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Admin"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Wallet"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Joined"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-dark-700",children:j.map(k=>{var S,w;return r.jsxs("tr",{className:"hover:bg-dark-700/50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:k.fullName||k.username}),r.jsx("div",{className:"text-sm text-gray-400",children:k.email})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium",children:((S=k.admin)==null?void 0:S.name)||"N/A"}),r.jsx("div",{className:"text-gray-400",children:k.adminCode})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("span",{className:"text-green-400",children:["",(((w=k.wallet)==null?void 0:w.balance)||0).toLocaleString()]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:k.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:new Date(k.createdAt).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{onClick:()=>{u(k),f(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Transfer"})})]},k._id)})})]})})}),h&&d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md mx-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Transfer User"}),r.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"User"}),r.jsx("div",{className:"font-medium",children:d.fullName||d.username}),r.jsx("div",{className:"text-sm text-gray-400",children:d.email}),r.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["Current Admin: ",d.adminCode]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Transfer to Admin"}),r.jsxs("select",{value:y,onChange:k=>m(k.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-2 text-white",children:[r.jsx("option",{value:"",children:"Select Admin"}),n.filter(k=>k.adminCode!==d.adminCode).map(k=>{var S;return r.jsxs("option",{value:k._id,children:[k.name," (",k.adminCode,") - ",((S=k.stats)==null?void 0:S.totalUsers)||0," users"]},k._id)}),r.jsxs("option",{value:t._id,children:["Super Admin (",t.adminCode,")"]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{f(!1),u(null),m("")},className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-2 rounded-lg",children:"Cancel"}),r.jsx("button",{onClick:v,disabled:!y||x,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white py-2 rounded-lg",children:x?"Transferring...":"Transfer"})]})]})})]})},vw=()=>{const{admin:t}=ce(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,a]=N.useState(""),[o,c]=N.useState(!1),[d,u]=N.useState(!1),[h,f]=N.useState(!1),[y,m]=N.useState(!1),[x,b]=N.useState(null),p=async()=>{try{const{data:j}=await z.get("/api/admin/users",{headers:{Authorization:`Bearer ${t.token}`}});s(j)}catch(j){console.error("Error fetching users:",j)}finally{i(!1)}};N.useEffect(()=>{p()},[]);const g=e.filter(j=>{var k;return j.username.toLowerCase().includes(l.toLowerCase())||j.email.toLowerCase().includes(l.toLowerCase())||((k=j.fullName)==null?void 0:k.toLowerCase().includes(l.toLowerCase()))}),v=async j=>{var k,S;if(confirm("Are you sure you want to delete this user?"))try{await z.delete(`/api/admin/users/${j}`,{headers:{Authorization:`Bearer ${t.token}`}}),p()}catch(w){alert(((S=(k=w.response)==null?void 0:k.data)==null?void 0:S.message)||"Error deleting user")}};return r.jsxs("div",{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"User Management"}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition",children:[r.jsx(Ks,{size:20}),r.jsx("span",{children:"Create User"})]})]}),r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:j=>a(j.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:border-purple-500"})]}),r.jsx("div",{className:"md:hidden space-y-4",children:n?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(ne,{className:"animate-spin inline mr-2",size:20}),"Loading..."]}):g.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No users found"}):g.map(j=>{var k,S;return r.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:j.fullName||j.username}),r.jsxs("div",{className:"text-sm text-gray-400",children:["@",j.username]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:j.isActive?"Active":"Inactive"})]}),r.jsx("div",{className:"text-sm text-gray-400 mb-1",children:j.email}),r.jsx("div",{className:"text-sm text-gray-400 mb-3",children:j.phone||"No phone"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-green-400 font-bold",children:["",((S=(k=j.wallet)==null?void 0:k.balance)==null?void 0:S.toLocaleString())||"0"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{b(j),u(!0)},className:"p-2 bg-dark-700 rounded text-blue-400",children:r.jsx(Bh,{size:16})}),r.jsx("button",{onClick:()=>{b(j),f(!0)},className:"p-2 bg-dark-700 rounded text-yellow-400",children:r.jsx(yc,{size:16})}),r.jsx("button",{onClick:()=>{b(j),m(!0)},className:"p-2 bg-dark-700 rounded text-green-400",children:r.jsx(Vt,{size:16})}),r.jsx("button",{onClick:()=>v(j._id),className:"p-2 bg-dark-700 rounded text-red-400",children:r.jsx(vc,{size:16})})]})]})]},j._id)})}),r.jsx("div",{className:"hidden md:block bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-dark-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"User"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"Email"}),r.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"Phone"}),r.jsx("th",{className:"text-right px-4 py-3 text-gray-400 font-medium",children:"Balance"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400 font-medium",children:"Status"}),r.jsx("th",{className:"text-center px-4 py-3 text-gray-400 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:n?r.jsx("tr",{children:r.jsxs("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:[r.jsx(ne,{className:"animate-spin inline mr-2",size:20}),"Loading..."]})}):g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"No users found"})}):g.map(j=>{var k,S;return r.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:j.fullName||j.username}),r.jsxs("div",{className:"text-sm text-gray-400",children:["@",j.username]})]})}),r.jsx("td",{className:"px-4 py-3 text-gray-300",children:j.email}),r.jsx("td",{className:"px-4 py-3 text-gray-300",children:j.phone||"-"}),r.jsx("td",{className:"px-4 py-3 text-right",children:r.jsxs("span",{className:"text-green-400 font-medium",children:["",((S=(k=j.wallet)==null?void 0:k.balance)==null?void 0:S.toLocaleString())||"0"]})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:j.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>{b(j),u(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-blue-400",title:"Edit User",children:r.jsx(Bh,{size:16})}),r.jsx("button",{onClick:()=>{b(j),f(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-yellow-400",title:"Change Password",children:r.jsx(yc,{size:16})}),r.jsx("button",{onClick:()=>{b(j),m(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-green-400",title:"Manage Wallet",children:r.jsx(Vt,{size:16})}),r.jsx("button",{onClick:()=>v(j._id),className:"p-2 hover:bg-dark-600 rounded transition text-red-400",title:"Delete User",children:r.jsx(vc,{size:16})})]})})]},j._id)})})]})}),o&&r.jsx(bw,{onClose:()=>c(!1),onSuccess:()=>{c(!1),p()},token:t.token}),d&&x&&r.jsx(Nw,{user:x,onClose:()=>{u(!1),b(null)},onSuccess:()=>{u(!1),b(null),p()},token:t.token}),h&&x&&r.jsx(ww,{user:x,onClose:()=>{f(!1),b(null)},token:t.token}),y&&x&&r.jsx(jw,{user:x,onClose:()=>{m(!1),b(null)},onSuccess:()=>{p()},token:t.token})]})},bw=({onClose:t,onSuccess:e,token:s})=>{const[n,i]=N.useState({username:"",email:"",password:"",fullName:"",phone:""}),[l,a]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState(""),h=async f=>{var y,m;f.preventDefault(),c(!0),u("");try{await z.post("/api/admin/users",n,{headers:{Authorization:`Bearer ${s}`}}),e()}catch(x){u(((m=(y=x.response)==null?void 0:y.data)==null?void 0:m.message)||"Error creating user")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create New User"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),d&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:d}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Username *"}),r.jsx("input",{type:"text",value:n.username,onChange:f=>i({...n,username:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),r.jsx("input",{type:"email",value:n.email,onChange:f=>i({...n,email:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password *"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l?"text":"password",value:n.password,onChange:f=>i({...n,password:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10 focus:outline-none focus:border-green-500",required:!0}),r.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?r.jsx(Xn,{size:18}):r.jsx(nn,{size:18})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name"}),r.jsx("input",{type:"text",value:n.fullName,onChange:f=>i({...n,fullName:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),r.jsx("input",{type:"text",value:n.phone,onChange:f=>i({...n,phone:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:o?"Creating...":"Create User"})]})]})]})})},Nw=({user:t,onClose:e,onSuccess:s,token:n})=>{const[i,l]=N.useState({username:t.username,email:t.email,fullName:t.fullName||"",phone:t.phone||"",isActive:t.isActive}),[a,o]=N.useState(!1),[c,d]=N.useState(""),u=async h=>{var f,y;h.preventDefault(),o(!0),d("");try{await z.put(`/api/admin/users/${t._id}`,i,{headers:{Authorization:`Bearer ${n}`}}),s()}catch(m){d(((y=(f=m.response)==null?void 0:f.data)==null?void 0:y.message)||"Error updating user")}finally{o(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit User"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),c&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:c}),r.jsxs("form",{onSubmit:u,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Username"}),r.jsx("input",{type:"text",value:i.username,onChange:h=>l({...i,username:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:i.email,onChange:h=>l({...i,email:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name"}),r.jsx("input",{type:"text",value:i.fullName,onChange:h=>l({...i,fullName:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),r.jsx("input",{type:"text",value:i.phone,onChange:h=>l({...i,phone:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:h=>l({...i,isActive:h.target.checked}),className:"w-4 h-4"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-400",children:"Active Account"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})]})})},ww=({user:t,onClose:e,token:s})=>{const[n,i]=N.useState(""),[l,a]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState(""),[h,f]=N.useState(!1),y=async m=>{var x,b;m.preventDefault(),c(!0),u("");try{await z.put(`/api/admin/users/${t._id}/password`,{newPassword:n},{headers:{Authorization:`Bearer ${s}`}}),f(!0),setTimeout(e,1500)}catch(p){u(((b=(x=p.response)==null?void 0:x.data)==null?void 0:b.message)||"Error changing password")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Change Password"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),r.jsxs("p",{className:"text-gray-400 mb-4",children:["Changing password for: ",r.jsx("span",{className:"text-white",children:t.username})]}),d&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:d}),h&&r.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-400 px-4 py-2 rounded mb-4",children:"Password changed successfully!"}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l?"text":"password",value:n,onChange:m=>i(m.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10 focus:outline-none focus:border-green-500",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?r.jsx(Xn,{size:18}):r.jsx(nn,{size:18})})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o||h,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 py-2 rounded transition disabled:opacity-50",children:o?"Changing...":"Change Password"})]})]})]})})},jw=({user:t,onClose:e,onSuccess:s,token:n})=>{var j,k,S,w,C,T;const{admin:i,updateAdmin:l}=ce(),[a,o]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(!1),[f,y]=N.useState(""),[m,x]=N.useState(null),[b,p]=N.useState(((j=i==null?void 0:i.wallet)==null?void 0:j.balance)||0);N.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:M}=await z.get(`/api/admin/manage/users/${t._id}`,{headers:{Authorization:`Bearer ${n}`}});x(M)}catch(M){console.error("Error fetching wallet:",M)}},v=async M=>{var R,E;if(!a||Number(a)<=0){y("Please enter a valid amount");return}h(!0),y("");try{const _=M==="deposit"?`/api/admin/manage/users/${t._id}/add-funds`:`/api/admin/manage/users/${t._id}/deduct-funds`,{data:O}=await z.post(_,{amount:Number(a),description:c},{headers:{Authorization:`Bearer ${n}`}});o(""),d(""),g(),s(),O.adminWallet&&(p(O.adminWallet.balance),l({wallet:O.adminWallet}))}catch(_){y(((E=(R=_.response)==null?void 0:R.data)==null?void 0:E.message)||`Error ${M}ing funds`)}finally{h(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Manage Wallet"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),(i==null?void 0:i.role)==="ADMIN"&&r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-purple-400",children:"Your Wallet Balance"}),r.jsxs("span",{className:"text-lg font-bold text-purple-400",children:["",b.toLocaleString()]})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Funds will be deducted from your wallet when depositing to user"})]}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 mb-4",children:[r.jsxs("p",{className:"text-gray-400 text-sm",children:["User: ",t.fullName||t.username]}),r.jsxs("p",{className:"text-2xl font-bold text-green-400 mt-1",children:["",(((k=m==null?void 0:m.wallet)==null?void 0:k.cashBalance)||((S=m==null?void 0:m.wallet)==null?void 0:S.balance)||0).toLocaleString()]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Cash Balance: ",(((w=m==null?void 0:m.wallet)==null?void 0:w.cashBalance)||0).toLocaleString()]})]}),f&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:f}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Amount ()"}),r.jsx("input",{type:"number",value:a,onChange:M=>o(M.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Enter amount",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description (Optional)"}),r.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Transaction note"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsxs("button",{onClick:()=>v("deposit"),disabled:u,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:[r.jsx(Rl,{size:18}),"Deposit"]}),r.jsxs("button",{onClick:()=>v("withdraw"),disabled:u,className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 py-2 rounded transition disabled:opacity-50",children:[r.jsx(zl,{size:18}),"Withdraw"]})]}),((T=(C=m==null?void 0:m.wallet)==null?void 0:C.transactions)==null?void 0:T.length)>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Recent Transactions"}),r.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:m.wallet.transactions.slice(-5).reverse().map((M,R)=>r.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded px-3 py-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:M.type==="deposit"||M.type==="credit"?"text-green-400":"text-red-400",children:M.type.toUpperCase()}),r.jsx("span",{className:"text-gray-400 ml-2",children:M.description})]}),r.jsxs("span",{className:M.type==="deposit"||M.type==="credit"?"text-green-400":"text-red-400",children:[M.type==="deposit"||M.type==="credit"?"+":"-","",M.amount]})]},R))})]}),r.jsx("button",{onClick:e,className:"w-full mt-4 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Close"})]})})},kw=()=>{const[t]=hb(),e=t.get("ref")||"",[s,n]=N.useState(t.get("register")==="true"||!!e),[i,l]=N.useState({username:"",email:"",password:"",fullName:"",phone:"",adminCode:"",referralCode:e}),[a,o]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(!1),{loginUser:f,registerUser:y}=ce(),m=sn(),x=async p=>{var g,v;p.preventDefault(),d(""),h(!0);try{s?await y(i):await f(i.email,i.password),m("/dashboard")}catch(j){d(((v=(g=j.response)==null?void 0:g.data)==null?void 0:v.message)||"Something went wrong")}finally{h(!1)}},b=()=>{n(!s),d(""),l({username:"",email:"",password:"",fullName:"",phone:"",adminCode:"",referralCode:e})};return r.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900/20 to-dark-900"}),r.jsxs("div",{className:"w-full max-w-md relative z-10",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center gap-3 mb-4",children:r.jsx("span",{className:"text-3xl font-bold text-white",children:"THEFX"})}),r.jsx("p",{className:"text-gray-400",children:"Welcome back, trader!"})]}),r.jsxs("div",{className:"bg-dark-800/90 backdrop-blur-xl p-8 rounded-2xl border border-green-500/20 shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:s?"Create Account":"Sign In"}),r.jsx("p",{className:"text-gray-400 mt-2",children:s?"Start your trading journey":"Access your trading dashboard"})]}),c&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6",children:c}),r.jsxs("form",{onSubmit:x,children:[s&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",value:i.fullName,onChange:p=>l({...i,fullName:p.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"John Doe",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:i.username,onChange:p=>l({...i,username:p.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"johndoe",required:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",value:i.phone,onChange:p=>l({...i,phone:p.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"+91 9876543210"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",value:i.email,onChange:p=>l({...i,email:p.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"trader@example.com",required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:a?"text":"password",value:i.password,onChange:p=>l({...i,password:p.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-green-500 transition",placeholder:s?"Create password":"Enter password",required:!0,minLength:s?6:void 0}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:a?r.jsx(Xn,{size:20}):r.jsx(nn,{size:20})})]})]}),r.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 py-3 rounded-lg font-semibold transition disabled:opacity-50 shadow-lg shadow-green-500/25",children:u?"Please wait...":s?"Create Account":"Start Trading"}),r.jsx("button",{type:"button",onClick:b,className:"w-full mt-4 text-sm text-green-400 hover:text-green-300 transition",children:s?"Already have an account? Sign In":"Don't have an account? Create one"})]})]})]})]}),r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden bg-gradient-to-br from-dark-800 to-dark-900",children:[r.jsx("div",{className:"absolute top-10 right-10 w-96 h-96 bg-green-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-10 left-10 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 600",children:[r.jsx("path",{d:"M0,300 Q100,250 200,280 T400,260 T600,300 T800,250",fill:"none",stroke:"#22c55e",strokeWidth:"2"}),r.jsx("path",{d:"M0,350 Q150,300 300,330 T500,310 T700,350 T800,300",fill:"none",stroke:"#10b981",strokeWidth:"2"})]})}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Trade Smarter"}),r.jsx("p",{className:"text-xl text-gray-400 mb-12",children:"NSE  BSE  MCX  F&O"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-md",children:[r.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[r.jsx(U0,{className:"w-8 h-8 text-green-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Live Charts"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Real-time TradingView charts"})]}),r.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[r.jsx(W0,{className:"w-8 h-8 text-yellow-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Fast Execution"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Lightning fast orders"})]}),r.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[r.jsx(Od,{className:"w-8 h-8 text-blue-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"All Segments"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Equity, F&O, Commodities"})]}),r.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[r.jsx(Vt,{className:"w-8 h-8 text-purple-400 mb-3"}),r.jsx("h3",{className:"font-semibold text-white mb-1",children:"Secure Wallet"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Safe fund management"})]})]}),r.jsxs("div",{className:"mt-12 flex items-center justify-center gap-8 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-500",children:"NIFTY 50"}),r.jsx("div",{className:"text-green-400 font-mono",children:"--"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-500",children:"BANKNIFTY"}),r.jsx("div",{className:"text-green-400 font-mono",children:"--"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-gray-500",children:"SENSEX"}),r.jsx("div",{className:"text-red-400 font-mono",children:"--"})]})]})]})]})]})};function ie(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function Fs(t,e){return t.width===e.width&&t.height===e.height}var Sw=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(i){return i!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Cw(t){return new Sw(t)}var Ew=function(){function t(e,s,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ie({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(l){return l},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ie({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ie(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;Fs(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=ie(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Fs(this.bitmapSize,n)?null:n;s===null&&i===null||s!==null&&i!==null&&Fs(s,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(s,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Pw().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=Dh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Cw(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=Dh(this._canvasElement);if(n!==null){var i=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,l=this._canvasElement.getClientRects(),a=l[0]!==void 0?Tw(l[0],i):ie({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(a){return a.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],l=ie({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function _w(t,e){return new Ew(t,e.transform,e.options)}function Dh(t){return t.ownerDocument.defaultView}function Pw(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Tw(t,e){return ie({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Lw=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ys(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new Lw(i,s,n)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Mw={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},zw={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Rw={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Ow={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Aw={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},$w={color:"#26a69a",base:0},H0={color:"#2196f3"},q0={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Vh,Wh;function Qs(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function K0(t,e,s,n){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(s,e+i),t.lineTo(n,e+i),t.stroke()}function Ns(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ue(t){if(t===void 0)throw new Error("Value is undefined");return t}function A(t){if(t===null)throw new Error("Value is null");return t}function Nn(t){return A(Ue(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Vh||(Vh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Wh||(Wh={}));const Hh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function lt(t){return t<0?0:t>255?255:Math.round(t)||0}function X0(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const Iw=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Bw=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Fw=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Uw=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Xr(t){(t=t.toLowerCase())in Hh&&(t=Hh[t]);{const e=Uw.exec(t)||Fw.exec(t);if(e)return[lt(parseInt(e[1],10)),lt(parseInt(e[2],10)),lt(parseInt(e[3],10)),X0(e.length<5?1:parseFloat(e[4]))]}{const e=Bw.exec(t);if(e)return[lt(parseInt(e[1],16)),lt(parseInt(e[2],16)),lt(parseInt(e[3],16)),1]}{const e=Iw.exec(t);if(e)return[lt(17*parseInt(e[1],16)),lt(17*parseInt(e[2],16)),lt(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function Y0(t){return .199*t[0]+.687*t[1]+.114*t[2]}function aa(t){const e=Xr(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:Y0(e)>160?"black":"white"}}class ge{constructor(){this.h=[]}l(e,s,n){const i={o:e,_:s,u:n===!0};this.h.push(i)}v(e){const s=this.h.findIndex(n=>e===n.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,n){const i=[...this.h];this.h=this.h.filter(l=>!l.u),i.forEach(l=>l.o(e,s,n))}M(){return this.h.length>0}S(){this.h=[]}}function wt(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:wt(t[n],s[n]));return t}function Lt(t){return typeof t=="number"&&isFinite(t)}function Yr(t){return typeof t=="number"&&t%1==0}function oi(t){return typeof t=="string"}function Pi(t){return typeof t=="boolean"}function Ft(t){const e=t;if(!e||typeof e!="object")return e;let s,n,i;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],s[n]=i&&typeof i=="object"?Ft(i):i);return s}function Dw(t){return t!==null}function Qr(t){return t===null?void 0:t}const Ad="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Bn(t,e,s){return e===void 0&&(e=Ad),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class Vw{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),n=this.H();return e.P===s&&e.D===n||(e.P=s,e.D=n,e.R=Bn(s,n),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class $d{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,n){this.Y.forEach(i=>{i.X(e,s,n)})}}class kt{X(e,s,n){e.useBitmapCoordinateSpace(i=>this.K(i,s,n))}}class Ww extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,l=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let d=i.to-1;d>=i.from;--d){const u=l.it[d],h=Math.round(u.nt*s)+a,f=u.st*n,y=c*n+a;e.moveTo(h,f),e.arc(h,f,y,0,2*Math.PI)}e.fill()};l.et>0&&(e.fillStyle=l.rt,o(l.ht+l.et)),e.fillStyle=l.lt,o(l.ht)}}function Hw(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const qw={from:0,to:1};class Kw{constructor(e,s){this.ut=new $d,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(Hw),this.ct=this.dt.map(n=>{const i=new Ww;return i.J(n),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),n=this.vt.xt(),i=this.F.St();s.forEach((l,a)=>{var o;const c=this.dt[a],d=l.kt(n);if(e||d===null||!l.yt())return void(c.tt=null);const u=A(l.Ct());c.lt=d.Tt,c.ht=d.ht,c.et=d.Pt,c.it[0]._t=d._t,c.it[0].st=l.Dt().Rt(d._t,u.Vt),c.rt=(o=d.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/l.Dt().At()),c.it[0].ot=n,c.it[0].nt=i.It(n),c.tt=qw})}}class Xw extends kt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const l=this.zt.Lt.yt,a=this.zt.Et.yt;if(!l&&!a)return;const o=Math.round(this.zt.nt*n),c=Math.round(this.zt.st*i);e.lineCap="butt",l&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Qs(e,this.zt.Lt.Nt),function(d,u,h,f){d.beginPath();const y=d.lineWidth%2?.5:0;d.moveTo(u+y,h),d.lineTo(u+y,f),d.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Qs(e,this.zt.Et.Nt),K0(e,c,0,s.width))}}class Yw{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new Xw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=A(this.jt.Ht()),n=s.$t().W().crosshair,i=this.Ft;if(n.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(s),i.Lt.yt=e&&this.jt.qt(),i.Et.et=n.horzLine.width,i.Et.Nt=n.horzLine.style,i.Et.V=n.horzLine.color,i.Lt.et=n.vertLine.width,i.Lt.Nt=n.vertLine.style,i.Lt.V=n.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function Qw(t,e,s,n,i,l){t.fillRect(e+l,s,n-2*l,l),t.fillRect(e+l,s+i-l,n-2*l,l),t.fillRect(e,s,l,i),t.fillRect(e+n-l,s,l,i)}function oa(t,e,s,n,i,l){t.save(),t.globalCompositeOperation="copy",t.fillStyle=l,t.fillRect(e,s,n,i),t.restore()}function qh(t,e,s,n,i,l){t.beginPath(),t.roundRect?t.roundRect(e,s,n,i,l):(t.lineTo(e+n-l[1],s),l[1]!==0&&t.arcTo(e+n,s,e+n,s+l[1],l[1]),t.lineTo(e+n,s+i-l[2]),l[2]!==0&&t.arcTo(e+n,s+i,e+n-l[2],s+i,l[2]),t.lineTo(e+l[3],s+i),l[3]!==0&&t.arcTo(e,s+i,e,s+i-l[3],l[3]),t.lineTo(e,s+l[0]),l[0]!==0&&t.arcTo(e,s,e+l[0],s,l[0]))}function Kh(t,e,s,n,i,l,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===l)return qh(t,e,s,n,i,o),t.fillStyle=l,t.fill(),void t.restore();const d=a/2;var u;qh(t,e+d,s+d,n-a,i-a,(u=-d,o.map(h=>h===0?h:h+u))),l!=="transparent"&&(t.fillStyle=l,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function Q0(t,e,s,n,i,l,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,l),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,n,i),t.restore()}class Xh{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,n,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const d=c.context;d.font=s.R;const u=this.Gt(c,s,n,i),h=u.Jt;return u.Qt?Kh(d,h.ti,h.ii,h.ni,h.si,a,h.ei,[h.ht,0,0,h.ht],a):Kh(d,h.ri,h.ii,h.ni,h.si,a,h.ei,[0,h.ht,h.ht,0],a),this.zt.hi&&(d.fillStyle=l,d.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(d.fillStyle=s.O,d.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:c})=>{const d=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=l,c.fillText(this.zt.Kt,d.fi,(d.ii+d.ci)/2+d.pi)})}Gt(e,s,n,i){var l;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:d,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.mi?s.T:0,f=this.zt.bi?s.C:0,y=s.L+this.Xt.wi,m=s.B+this.Xt.gi,x=s.A,b=s.I,p=this.zt.Kt,g=s.P,v=n.Mi(a,p),j=Math.ceil(n.xi(a,p)),k=g+y+m,S=s.C+x+b+j+h,w=Math.max(1,Math.floor(u));let C=Math.round(k*u);C%2!=w%2&&(C+=1);const T=f>0?Math.max(1,Math.floor(f*d)):0,M=Math.round(S*d),R=Math.round(h*d),E=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,_=Math.round(E*u)-Math.floor(.5*u),O=Math.floor(_+w/2-C/2),I=O+C,U=i==="right",ae=U?c.width-f:f,B=U?o.width-T:T;let V,L,F;return U?(V=B-M,L=B-R,F=ae-h-x-f):(V=B+M,L=B+R,F=ae+h+x),{Qt:U,Jt:{ii:O,li:_,ci:I,ni:M,si:C,ht:2*d,ei:T,ti:V,ri:B,ai:L,oi:w,ui:o.width},di:{ii:O/u,ci:I/u,fi:F,pi:v}}}}class ca{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||Xh)(this.Ci,this.yi),this.Ri=new(e||Xh)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class Jw extends ca{constructor(e,s,n){super(),this.jt=e,this.Li=s,this.Ei=n}zi(e,s,n){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const a=aa(i.labelBackgroundColor);n.t=a.t,e.V=a.i;const o=2/12*this.Li.P();n.wi=o,n.gi=o;const c=this.Ei(this.Li);n.ki=c.ki,e.Kt=this.Li.Fi(c._t,l),e.yt=!0}}const Gw=/[1-9]/g;class J0{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=s.R,Math.round(s.Wi.xi(f,A(this.zt).Kt,Gw))));if(n<=0)return;const i=s.ji,l=n+2*i,a=l/2,o=this.zt.Hi;let c=this.zt.ki,d=Math.floor(c-a)+.5;d<0?(c+=Math.abs(0-d),d=Math.floor(c-a)+.5):d+l>o&&(c-=Math.abs(o-(d+l)),d=Math.floor(c-a)+.5);const u=d+l,h=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:y,verticalPixelRatio:m})=>{const x=A(this.zt);f.fillStyle=x.t;const b=Math.round(d*y),p=Math.round(0*m),g=Math.round(u*y),v=Math.round(h*m),j=Math.round(2*y);if(f.beginPath(),f.moveTo(b,p),f.lineTo(b,v-j),f.arcTo(b,v,b+j,v,j),f.lineTo(g-j,v),f.arcTo(g,v,g,v-j,j),f.lineTo(g,p),f.fill(),x.hi){const k=Math.round(x.ki*y),S=p,w=Math.round((S+s.T)*m);f.fillStyle=x.V;const C=Math.max(1,Math.floor(y)),T=Math.floor(.5*y);f.fillRect(k-T,S,C,w-S)}}),e.useMediaCoordinateSpace(({context:f})=>{const y=A(this.zt),m=0+s.C+s.T+s.L+s.P/2;f.font=s.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=y.V;const x=s.Wi.Mi(f,"Apr0");f.translate(d+i,m+x),f.fillText(y.Kt,0,0)})}}class Zw{constructor(e,s,n){this.ft=!0,this.Wt=new J0,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const l=n.Ui(this.vt.xt());e.Kt=n.qi(A(l)),e.yt=!0;const a=aa(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=n.W().ticksVisible}}class Id{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Yh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Yh||(Yh={}));class ej extends Id{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new Kw(e,this),this.fn=((i,l)=>a=>{const o=l(),c=i();if(a===A(this.tn).vn())return{_t:c,ki:o};{const d=A(a.Ct());return{_t:a.pn(o,d),ki:o}}})(()=>this.nn,()=>this.an);const n=((i,l)=>()=>{const a=this.$i.St().mn(i()),o=l();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new Zw(this,e,n),this.wn=new Yw(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,s,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,n){this.Bn(e,s,n)&&this.Vn()}Bn(e,s,n){const i=this.ln,l=this.an,a=this.nn,o=this.sn,c=this.tn,d=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const u=d!==null?d.Ct():null;return d!==null&&u!==null?(this.nn=s,this.an=d.Rt(s,u)):(this.nn=NaN,this.an=NaN),i!==this.ln||l!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(Dw),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,n){let i=e.get(s);return i===void 0&&(i=new Jw(this,s,n),e.set(s,i)),i}}function da(t){return t==="left"||t==="right"}class _e{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const n=function(i,l){return i===void 0?l:{Fn:Math.max(i.Fn,l.Fn),Wn:i.Wn||l.Wn}}(this.zn.get(e),s);this.zn.set(e,n)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,n)=>{this.Nn(n,s)})}static ss(){return new _e(2)}static es(){return new _e(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const Qh=".";function Ut(t,e){if(!Lt(t))return"n/a";if(!Yr(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class ua{constructor(e,s){if(s||(s=1),Lt(e)&&Yr(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let n=Math.floor(e),i="";const l=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-n*s).toFixed(this._s);a>=s&&(a-=s,n+=1),i=Qh+Ut(+a.toFixed(this._s)*this.rs,l)}else n=Math.round(n*s)/s,l>0&&(i=Qh+Ut(0,l));return n.toFixed(0)+i}}class G0 extends ua{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class tj{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const n=Math.pow(10,this.us);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(i,l)=>l)}}function Z0(t,e,s,n,i,l,a){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:d}=t,u=e[n.from];let h=l(t,u),f=u;if(n.to-n.from<2){const y=i/2;o.beginPath();const m={nt:u.nt-y,st:u.st},x={nt:u.nt+y,st:u.st};o.moveTo(m.nt*c,m.st*d),o.lineTo(x.nt*c,x.st*d),a(t,h,m,x)}else{const y=(x,b)=>{a(t,h,f,b),o.beginPath(),h=x,f=b};let m=f;o.beginPath(),o.moveTo(u.nt*c,u.st*d);for(let x=n.from+1;x<n.to;++x){m=e[x];const b=l(t,m);switch(s){case 0:o.lineTo(m.nt*c,m.st*d);break;case 1:o.lineTo(m.nt*c,e[x-1].st*d),b!==h&&(y(b,m),o.lineTo(m.nt*c,e[x-1].st*d)),o.lineTo(m.nt*c,m.st*d);break;case 2:{const[p,g]=sj(e,x-1,x);o.bezierCurveTo(p.nt*c,p.st*d,g.nt*c,g.st*d,m.nt*c,m.st*d);break}}s!==1&&b!==h&&(y(b,m),o.moveTo(m.nt*c,m.st*d))}(f!==m||f===m&&s===1)&&a(t,h,f,m)}}const Jh=6;function Ka(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Gh(t,e){return{nt:t.nt/e,st:t.st/e}}function sj(t,e,s){const n=Math.max(0,e-1),i=Math.min(t.length-1,s+1);var l,a;return[(l=t[e],a=Gh(Ka(t[s],t[n]),Jh),{nt:l.nt+a.nt,st:l.st+a.st}),Ka(t[s],Gh(Ka(t[i],t[e]),Jh))]}function nj(t,e,s,n,i){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=e;l.lineTo(i.nt*a,t*o),l.lineTo(n.nt*a,t*o),l.closePath(),l.fillStyle=s,l.fill()}class ex extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:n,tt:i,ds:l,et:a,Nt:o,fs:c}=this.G,d=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=a,Qs(u,o),u.lineWidth=1,Z0(e,n,c,i,l,this.bs.bind(this),nj.bind(null,d))}}function bc(t,e,s){return Math.min(Math.max(t,e),s)}function Ti(t,e,s){return e-t<=s}function tx(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Bd{ws(e,s){const n=this.gs,{Ms:i,xs:l,Ss:a,ks:o,ys:c,vs:d}=s;if(this.Cs===void 0||n===void 0||n.Ms!==i||n.xs!==l||n.Ss!==a||n.ks!==o||n.vs!==d||n.ys!==c){const u=e.context.createLinearGradient(0,0,0,c);if(u.addColorStop(0,i),d!=null){const h=bc(d*e.verticalPixelRatio/c,0,1);u.addColorStop(h,l),u.addColorStop(h,a)}u.addColorStop(1,o),this.Cs=u,this.gs=s}return this.Cs}}class rj extends ex{constructor(){super(...arguments),this.Ts=new Bd}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function ij(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class sx extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:n,ds:i,fs:l,et:a,Nt:o,Ds:c}=this.G;if(n===null)return;const d=e.context;d.lineCap="butt",d.lineWidth=a*e.verticalPixelRatio,Qs(d,o),d.lineJoin="round";const u=this.Vs.bind(this);l!==void 0&&Z0(e,s,l,n,i,u,ij),c&&function(h,f,y,m,x){const{horizontalPixelRatio:b,verticalPixelRatio:p,context:g}=h;let v=null;const j=Math.max(1,Math.floor(b))%2/2,k=y*p+j;for(let S=m.to-1;S>=m.from;--S){const w=f[S];if(w){const C=x(h,w);C!==v&&(g.beginPath(),v!==null&&g.fill(),g.fillStyle=C,v=C);const T=Math.round(w.nt*b)+j,M=w.st*p;g.moveTo(T,M),g.arc(T,M,k,0,2*Math.PI)}}g.fill()}(e,s,c,n,u)}}class nx extends sx{Vs(e,s){return s.lt}}function rx(t,e,s,n,i=0,l=e.length){let a=l-i;for(;0<a;){const o=a>>1,c=i+o;n(e[c],s)===t?(i=c+1,a-=o+1):a=o}return i}const ci=rx.bind(null,!0),ix=rx.bind(null,!1);function lj(t,e){return t.ot<e}function aj(t,e){return e<t.ot}function lx(t,e,s){const n=e.Os(),i=e.ui(),l=ci(t,n,lj),a=ix(t,i,aj);if(!s)return{from:l,to:a};let o=l,c=a;return l>0&&l<t.length&&t[l].ot>=n&&(o=l-1),a>0&&a<t.length&&t[a-1].ot<=i&&(c=a+1),{from:o,to:c}}class Fd{constructor(e,s,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const n=s.Xs();if(n===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=lx(this.zs,n,this.Fs),this.Gs(e,s,i.Vt),this.Js())}}class ha extends Fd{constructor(e,s){super(e,s,!0)}Gs(e,s,n){s.Qs(this.zs,Qr(this.Ls)),e.te(this.zs,n,Qr(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const n=s.Vt[3];return this.se(s.ee,n,e)})}}class oj extends ha{constructor(e,s){super(e,s),this.js=new $d,this.re=new rj,this.he=new nx,this.js.Z([this.re,this.he])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class cj extends kt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let i=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];i!==o.ce&&(e.fillStyle=o.ce,i=o.ce);const c=Math.floor(.5*this.oe),d=Math.round(o.nt*s),u=d-c,h=this.oe,f=u+h-1,y=Math.min(o.de,o.fe),m=Math.max(o.de,o.fe),x=Math.round(y*n)-c,b=Math.round(m*n)+c,p=Math.max(b-x,this.oe);e.fillRect(u,x,h,p);const g=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const S=d-g;let w=Math.max(x,Math.round(o.pe*n)-c),C=w+h-1;C>x+p-1&&(C=x+p-1,w=C-h+1),e.fillRect(S,w,u-S,C-w+1)}const v=d+g;let j=Math.max(x,Math.round(o.me*n)-c),k=j+h-1;k>x+p-1&&(k=x+p-1,j=k-h+1),e.fillRect(f+1,j,v-f,k-j+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(n,i){return Math.floor(.3*n*i)}(A(this.zt).le,e)))}}class ax extends Fd{constructor(e,s){super(e,s,!1)}Gs(e,s,n){s.Qs(this.zs,Qr(this.Ls)),e.be(this.zs,n,Qr(this.Ls))}we(e,s,n){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class dj extends ax{constructor(){super(...arguments),this.js=new cj}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class uj extends ex{constructor(){super(...arguments),this.Ts=new Bd}bs(e,s){const n=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:n.vs})}}class hj extends sx{constructor(){super(...arguments),this.Pe=new Bd}Vs(e,s){const n=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:n.vs})}}class fj extends ha{constructor(e,s){super(e,s),this.js=new $d,this.Ve=new uj,this.Oe=new hj,this.js.Z([this.Ve,this.Oe])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),n=this.Es.Dt().Rt(s.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:n,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:i})}}class mj extends kt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(l,a){if(l>=2.5&&l<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),c=Math.floor(l*o*a),d=Math.floor(l*a),u=Math.min(c,d);return Math.max(Math.floor(a),u)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const i=this.ze(s);(!this.zt._i||this.ae>2*i)&&this.Le(e,n,this.zt.tt)}Ae(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(l),Math.floor(this.zt.le*l));c=Math.max(Math.floor(l),Math.min(c,this.ae));const d=Math.floor(.5*c);let u=null;for(let h=n.from;h<n.to;h++){const f=s[h];f.Ee!==o&&(i.fillStyle=f.Ee,o=f.Ee);const y=Math.round(Math.min(f.pe,f.me)*a),m=Math.round(Math.max(f.pe,f.me)*a),x=Math.round(f.de*a),b=Math.round(f.fe*a);let p=Math.round(l*f.nt)-d;const g=p+c-1;u!==null&&(p=Math.max(u+1,p),p=Math.min(p,g));const v=g-p+1;i.fillRect(p,x,v,y-x),i.fillRect(p,m+1,v,b-m),u=g}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),s);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);let d=null;for(let u=n.from;u<n.to;u++){const h=s[u];h.Ne!==o&&(i.fillStyle=h.Ne,o=h.Ne);let f=Math.round(h.nt*l)-Math.floor(.5*this.ae);const y=f+this.ae-1,m=Math.round(Math.min(h.pe,h.me)*a),x=Math.round(Math.max(h.pe,h.me)*a);if(d!==null&&(f=Math.max(d+1,f),f=Math.min(f,y)),this.zt.le*l>2*c)Qw(i,f,m,y-f+1,x-m+1,c);else{const b=y-f+1;i.fillRect(f,m,b,x-m+1)}d=y}}Le(e,s,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);for(let d=n.from;d<n.to;d++){const u=s[d];let h=Math.round(Math.min(u.pe,u.me)*a),f=Math.round(Math.max(u.pe,u.me)*a),y=Math.round(u.nt*l)-Math.floor(.5*this.ae),m=y+this.ae-1;if(u.ce!==o){const x=u.ce;i.fillStyle=x,o=x}this.zt._i&&(y+=c,h+=c,m-=c,f-=c),h>f||i.fillRect(y,h,m-y+1,f-h+1)}}}class pj extends ax{constructor(){super(...arguments),this.js=new mj}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class xj{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,n){this.Fe.draw(e,this.Li,s,n)}}class Xa extends Fd{constructor(e,s,n){super(e,s,!1),this.wn=n,this.js=new xj(this.wn.renderer(),i=>{const l=e.Ct();return l===null?null:e.Dt().Rt(i,l.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,Qr(this.Ls))}Js(){this.wn.update({bars:this.zs.map(gj),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function gj(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class yj extends kt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const i=Math.max(1,Math.floor(n)),l=Math.round(this.zt.Ye*n)-Math.floor(i/2),a=l+i;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],d=this.Ue[o-this.zt.tt.from],u=Math.round(c.st*n);let h,f;e.fillStyle=c.ce,u<=l?(h=u,f=a):(h=l,f=u-Math.floor(i/2)+i),e.fillRect(d.Os,h,d.ui-d.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.zt.it[l],o=Math.round(a.nt*e);let c,d;if(n%2){const u=(n-1)/2;c=o-u,d=o+u}else{const u=n/2;c=o-u,d=o+u-1}this.Ue[l-this.zt.tt.from]={Os:c,ui:d,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from],o=this.Ue[l-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let i=Math.ceil(this.zt.le*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;i=Math.min(o,i)}if(s>0&&i<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui-a.Os+1>i&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class vj extends ha{constructor(){super(...arguments),this.js=new yj}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,A(this.Es.Ct()).Vt)};this.js.J(e)}}class bj extends ha{constructor(){super(...arguments),this.js=new nx}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const Nj=/[2-9]/g;class Jr{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,n){return this.sr(e,s,n).width}Mi(e,s,n){const i=this.sr(e,s,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,s,n){const i=n||Nj,l=String(s).replace(i,"0");if(this.tr.has(l))return Ue(this.tr.get(l)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(l);return e.restore(),a.width===0&&s.length||(this.tr.set(l,{er:a,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),a}}class wj{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,n){this.hr=e,this.k=s,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class ox{constructor(e,s,n){this.ur=e,this.ar=new Jr(50),this.cr=s,this.F=n,this.j=-1,this.Wt=new wj(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const n=e.mr(s);if(n==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,n),this.Wt}}class jj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:i,et:l,gr:a}=this.zt;return s>=i-l-7&&s<=i+l+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*i);l<0||l>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),Qs(e,this.zt.Nt),K0(e,l,0,s.width))}}class Ud{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new jj,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class kj extends Ud{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class Sj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const i=this.zt;if(i===null)return;const l=Math.max(1,Math.floor(s)),a=l%2/2,o=Math.round(i.Xe.x*s)+a,c=i.Xe.y*n;e.fillStyle=i.Tr,e.beginPath();const d=Math.max(2,1.5*i.Pr)*s;e.arc(o,c,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(o,c,i.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=l,e.strokeStyle=i.Dr,e.beginPath(),e.arc(o,c,i.ht*s+l/2,0,2*Math.PI,!1),e.stroke()}}const Cj=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Zh(t,e,s,n){return function(i,l){if(i==="transparent")return i;const a=Xr(i),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${l*o})`}(t,s+(n-s)*e)}function ef(t,e){const s=t%2600/2600;let n;for(const c of Cj)if(s>=c.Vr&&s<=c.Or){n=c;break}Ns(n!==void 0,"Last price animation internal logic error");const i=(s-n.Vr)/(n.Or-n.Vr);return{Rr:Zh(e,i,n.Ir,n.zr),Dr:Zh(e,i,n.Lr,n.Er),ht:(l=i,a=n.Br,o=n.Ar,a+(o-a)*l)};var l,a,o}class Ej{constructor(e){this.Wt=new Sj,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),n=this.jr.Ct();if(s===null||n===null)return;const i=this.jr.Zr(!0);if(i.Xr||!s.Kr(i.ee))return;const l={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,n.Vt)},a=i.V,o=this.jr.W().lineWidth,c=ef(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:l})}Yr(){const e=this.Wt.$e();if(e!==null){const s=ef(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Nr(t,e){return tx(Math.min(Math.max(t,12),30)*e)}function Gr(t,e){switch(t){case"arrowDown":case"arrowUp":return Nr(e,1);case"circle":return Nr(e,.8);case"square":return Nr(e,.7)}}function cx(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(Nr(t,1))}function tf(t){return Math.max(Nr(t,.1),3)}function sf(t,e,s){return e?t:s?Math.ceil(t/2):0}function dx(t,e,s,n,i){const l=Gr("square",s),a=(l-1)/2,o=t-a,c=e-a;return n>=o&&n<=o+l&&i>=c&&i<=c+l}function nf(t,e,s,n){const i=(Gr("arrowUp",n)-1)/2*s.Jr,l=(tx(n/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st-i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st+i),e.lineTo(s.nt-l,s.st+i),e.lineTo(s.nt-l,s.st)):(e.moveTo(s.nt-i,s.st),e.lineTo(s.nt,s.st+i),e.lineTo(s.nt+i,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st-i),e.lineTo(s.nt-l,s.st-i),e.lineTo(s.nt-l,s.st)),e.fill()}function _j(t,e,s,n,i,l){return dx(e,s,n,i,l)}class Pj extends kt{constructor(){super(...arguments),this.zt=null,this.ar=new Jr,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=Bn(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const i=this.zt.it[n];if(Lj(i,e,s))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n},i,l){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),Tj(o,e,s,n)}}}}function Tj(t,e,s,n){e.fillStyle=t.V,t.Kt!==void 0&&function(i,l,a,o,c,d){i.save(),i.scale(c,d),i.fillText(l,a,o),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,n),function(i,l,a){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void nf(!1,l,a,i.Ks);case"arrowUp":return void nf(!0,l,a,i.Ks);case"circle":return void function(o,c,d){const u=(Gr("circle",d)-1)/2;o.beginPath(),o.arc(c.nt,c.st,u*c.Jr,0,2*Math.PI,!1),o.fill()}(l,a,i.Ks);case"square":return void function(o,c,d){const u=Gr("square",d),h=(u-1)*c.Jr/2,f=c.nt-h,y=c.st-h;o.fillRect(f,y,u*c.Jr,u*c.Jr)}(l,a,i.Ks)}i.nh}}(t,e,function(i,l,a){const o=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(i.nt*l)+o,st:i.st*a,Jr:l}}(t,s,n))}function Lj(t,e,s){return!(t.Kt===void 0||!function(n,i,l,a,o,c){const d=a/2;return o>=n&&o<=n+l&&c>=i-d&&c<=i+d}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(n,i,l){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return _j(0,n.nt,n.st,n.Ks,i,l);case"circle":return function(a,o,c,d,u){const h=2+Gr("circle",c)/2,f=a-d,y=o-u;return Math.sqrt(f*f+y*y)<=h}(n.nt,n.st,n.Ks,i,l);case"square":return dx(n.nt,n.st,n.Ks,i,l)}}(t,e,s)}function Mj(t,e,s,n,i,l,a,o,c){const d=Lt(s)?s:s.Se,u=Lt(s)?s:s.Me,h=Lt(s)?s:s.xe,f=Lt(e.size)?Math.max(e.size,0):1,y=cx(o.le())*f,m=y/2;switch(t.Ks=y,e.position){case"inBar":return t.st=a.Rt(d,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+m+l+.6*i));case"aboveBar":return t.st=a.Rt(u,c)-m-n.sh,t.Kt!==void 0&&(t.Kt.st=t.st-m-.6*i,n.sh+=1.2*i),void(n.sh+=y+l);case"belowBar":return t.st=a.Rt(h,c)+m+n.eh,t.Kt!==void 0&&(t.Kt.st=t.st+m+l+.6*i,n.eh+=1.2*i),void(n.eh+=y+l)}e.position}class zj{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new Pj,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=tf(e),n=1.5*cx(e)+2*s,i=this.fh();this.ah={above:sf(n,i.aboveBar,i.inBar),below:sf(n,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(u=>({ot:u.time,nt:0,st:0,Ks:0,nh:u.shape,V:u.color,th:u.th,gr:u.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const l=s.Xs();if(l===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=tf(s.le()),d={sh:c,eh:c};this.zt.tt=lx(this.zt.it,l,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=n[u];h.time!==o&&(d.sh=c,d.eh=c,o=h.time);const f=this.zt.it[u];f.nt=s.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const y=this.jr.ph(h.time);y!==null&&Mj(f,h,y,d,i.fontSize,c,e,s,a.Vt)}this.ft=!1}}class Rj extends Ud{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(s.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class Oj extends ca{constructor(e){super(),this.jt=e}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.jt;if(!i.yt())return;const l=i.W(),a=l.lastValueVisible,o=i.bh()!=="",c=l.seriesLastValueMode===0,d=i.Zr(!1);if(d.Xr)return;a&&(e.Kt=this.wh(d,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(d,a,o,c),s.yt=s.Kt.length>0);const u=i.mh(d.V),h=aa(u);n.t=h.t,n.ki=d.ki,s.Ot=i.$t().Bt(d.ki/i.Dt().At()),e.Ot=u,e.V=h.i,s.V=h.i}gh(e,s,n,i){let l="";const a=this.jt.bh();return n&&a.length!==0&&(l+=`${a} `),s&&i&&(l+=this.jt.Dt().Mh()?e.xh:e.Sh),l.trim()}wh(e,s,n){return s?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function rf(t,e,s,n){const i=Number.isFinite(e),l=Number.isFinite(s);return i&&l?t(e,s):i||l?i?e:s:n}class Je{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Je(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Je(rf(Math.min,this.Ph(),e.Ph(),-1/0),rf(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Lt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let n=this.yh-s,i=this.kh-s;n*=e,i*=e,this.yh=s+n,this.kh=s+i}Oh(e){Lt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Je(e.minValue,e.maxValue)}}class Al{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Al(Je.Ah(e.priceRange),e.margins)}}class Aj extends Ud{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class $j extends ca{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,n){e.yt=!1,s.yt=!1;const i=this.Nh.W(),l=i.axisLabelVisible,a=i.title!=="",o=this.jr;if(!l||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=i.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const d=aa(i.axisLabelColor||i.color);n.t=d.t;const u=i.axisLabelTextColor||d.i;e.V=u,s.V=u,n.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class Ij{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Aj(e,this),this.ur=new $j(e,this),this.Hh=new ox(this.ur,e,e.$t())}$h(e){wt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const n=e.Ct();return n===null?null:s.Rt(this.cn.price,n.Vt)}}class Bj extends Id{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Fj={Bar:(t,e,s,n)=>{var i;const l=e.upColor,a=e.downColor,o=A(t(s,n)),c=Nn(o.Vt[0])<=Nn(o.Vt[3]);return{ce:(i=o.V)!==null&&i!==void 0?i:c?l:a}},Candlestick:(t,e,s,n)=>{var i,l,a;const o=e.upColor,c=e.downColor,d=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,y=A(t(s,n)),m=Nn(y.Vt[0])<=Nn(y.Vt[3]);return{ce:(i=y.V)!==null&&i!==void 0?i:m?o:c,Ne:(l=y.Ot)!==null&&l!==void 0?l:m?d:u,Ee:(a=y.Xh)!==null&&a!==void 0?a:m?h:f}},Custom:(t,e,s,n)=>{var i;return{ce:(i=A(t(s,n)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,s,n)=>{var i,l,a,o;const c=A(t(s,n));return{ce:(i=c.lt)!==null&&i!==void 0?i:e.lineColor,lt:(l=c.lt)!==null&&l!==void 0?l:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,n)=>{var i,l,a,o,c,d;const u=A(t(s,n));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=u.Re)!==null&&i!==void 0?i:e.topLineColor,De:(l=u.De)!==null&&l!==void 0?l:e.bottomLineColor,ke:(a=u.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=u.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=u.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(d=u.Te)!==null&&d!==void 0?d:e.bottomFillColor2}},Line:(t,e,s,n)=>{var i,l;const a=A(t(s,n));return{ce:(i=a.V)!==null&&i!==void 0?i:e.color,lt:(l=a.V)!==null&&l!==void 0?l:e.color}},Histogram:(t,e,s,n)=>{var i;return{ce:(i=A(t(s,n)).V)!==null&&i!==void 0?i:e.color}}};class Uj{constructor(e){this.Kh=(s,n)=>n!==void 0?n.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=Fj[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var lf;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(lf||(lf={}));const Zt=30;class Dj{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const n=this.hl(e,s);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,s,n){if(this.Ni())return null;let i=null;for(const l of n)i=Li(i,this._l(e,s,l));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const n=this.ul(e);if(n===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return ci(this.tl,e,(s,n)=>s.ee<n)}vl(e){return ix(this.tl,e,(s,n)=>s.ee>n)}pl(e,s,n){let i=null;for(let l=e;l<s;l++){const a=this.tl[l].Vt[n];Number.isNaN(a)||(i===null?i={ml:a,bl:a}:(a<i.ml&&(i.ml=a),a>i.bl&&(i.bl=a)))}return i}_l(e,s,n){if(this.Ni())return null;let i=null;const l=A(this.el()),a=A(this.An()),o=Math.max(e,l),c=Math.min(s,a),d=Math.ceil(o/Zt)*Zt,u=Math.max(d,Math.floor(c/Zt)*Zt);{const f=this.fl(o),y=this.vl(Math.min(c,d,s));i=Li(i,this.pl(f,y,n))}let h=this.il.get(n);h===void 0&&(h=new Map,this.il.set(n,h));for(let f=Math.max(d+1,o);f<u;f+=Zt){const y=Math.floor(f/Zt);let m=h.get(y);if(m===void 0){const x=this.fl(y*Zt),b=this.vl((y+1)*Zt-1);m=this.pl(x,b,n),h.set(y,m)}i=Li(i,m)}{const f=this.fl(u),y=this.vl(c);i=Li(i,this.pl(f,y,n))}return i}}function Li(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class Vj{constructor(e){this.wl=e}X(e,s,n){this.wl.draw(e)}gl(e,s,n){var i,l;(l=(i=this.wl).drawBackground)===null||l===void 0||l.call(i,e)}}class Ya{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const n=new Vj(s);return this.tr={Ml:s,xl:n},n}Sl(){var e,s,n;return(n=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:"normal"}}function ux(t){var e,s,n,i,l;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(n=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||n===void 0||n,hi:(l=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||l===void 0||l}}class Wj{constructor(e,s){this.Wt=new J0,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},ux(this.kl))),this.Wt}}class Hj extends ca{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,n){const i=ux(this.kl);n.t=i.t,e.V=i.V;const l=2/12*this.Li.P();n.wi=l,n.gi=l,n.ki=i.ki,n.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class qj{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,n,i;const l=(n=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===l)return this.Cl.xl;const a=l.map(o=>new Ya(o));return this.Cl={Ml:l,xl:a},a}Qi(){var e,s,n,i;const l=(n=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===l)return this.Tl.xl;const a=this.jr.$t().St(),o=l.map(c=>new Wj(c,a));return this.Tl={Ml:l,xl:o},o}Rn(){var e,s,n,i;const l=(n=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===l)return this.Pl.xl;const a=this.jr.Dt(),o=l.map(c=>new Hj(c,a));return this.Pl={Ml:l,xl:o},o}Bl(){var e,s,n,i;const l=(n=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===l)return this.Rl.xl;const a=l.map(o=>new Ya(o));return this.Rl={Ml:l,xl:a},a}Al(){var e,s,n,i;const l=(n=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===l)return this.Dl.xl;const a=l.map(o=>new Ya(o));return this.Dl={Ml:l,xl:a},a}Il(e,s){var n,i,l;return(l=(i=(n=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(n,e,s))!==null&&l!==void 0?l:null}wr(e,s){var n,i,l;return(l=(i=(n=this.Vl).hitTest)===null||i===void 0?void 0:i.call(n,e,s))!==null&&l!==void 0?l:null}}function Qa(t,e,s,n){t.forEach(i=>{e(i).forEach(l=>{l.Sl()===s&&n.push(l)})})}function Ja(t){return t.Pn()}function Kj(t){return t.Bl()}function Xj(t){return t.Al()}class Dd extends Bj{constructor(e,s,n,i,l){super(e),this.zt=new Dj,this.jh=new Rj(this),this.zl=[],this.Ll=new kj(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=n;const a=new Oj(this);this.rn=[a],this.Hh=new ox(a,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new Ej(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;const i=this.$t().St().Xs(),l=this.Ct();if(i===null||l===null)return s;let a,o;if(e){const h=this.zt.sl();if(h===null)return s;a=h,o=h.ee}else{const h=this.zt.ll(i.ui(),-1);if(h===null||(a=this.zt.Gh(h.ee),a===null))return s;o=h.ee}const c=a.Vt[3],d=this.Us().$s(o,{Vt:a}),u=n.Rt(c,l.Vt);return{Xr:!1,_t:c,Kt:n.Fi(c,l.Vt),xh:n.Yl(c),Sh:n.Zl(c,l.Vt),V:d.ce,ki:u,ee:o}}Us(){return this.Nl!==null||(this.Nl=new Uj(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),wt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new Ij(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];Qa(this.Hl,Ja,"top",s);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),s.unshift(n)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(n=>n.qh());return e.push(...s),Qa(this.Hl,Ja,"normal",e),e}ua(){return this.ca(Ja,"bottom")}da(e){return this.ca(Kj,e)}fa(e){return this.ca(Xj,e)}va(e,s){return this.Hl.map(n=>n.wr(e,s)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const i of this.zl)n.push(i.Zh());return this.Hl.forEach(i=>{n.push(...i.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,s);return i===null?null:i.Bh()});return Al.Ah(n)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return A(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new qj(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof Xa)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof Xa)return e=>this.wn.je(e)}_a(){return!da(this.Dt().Pa())}pa(e,s){if(!Yr(e)||!Yr(s)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,s,n);let l=i!==null?new Je(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new Je(o,o);l=l!==null?l.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const y=new Je(c.priceRange.minValue,c.priceRange.maxValue);l=l!==null?l.ts(y):y}var d,u,h,f;c!=null&&c.margins&&(d=a,u=c.margins,a={above:Math.max((h=d==null?void 0:d.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((f=d==null?void 0:d.below)!==null&&f!==void 0?f:0,u.below)})}),new Al(l,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new tj(this.cn.priceFormat.precision);break;case"percent":this.wa=new G0(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new ua(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=A(this.zt.el());this.Wl=this.Fl.map((n,i)=>{const l=A(e.Va(n.time,!0)),a=l<s?1:-1;return{time:A(this.zt.ll(l,a)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:i,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new zj(this,this.$t()),this.$l){case"Bar":this.wn=new dj(this,this.$t());break;case"Candlestick":this.wn=new pj(this,this.$t());break;case"Line":this.wn=new bj(this,this.$t());break;case"Custom":this.wn=new Xa(this,this.$t(),Ue(e));break;case"Area":this.wn=new oj(this,this.$t());break;case"Baseline":this.wn=new fj(this,this.$t());break;case"Histogram":this.wn=new vj(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const n=[];return Qa(this.Hl,e,s,n),n}}class Yj{constructor(e){this.cn=e}Oa(e,s,n){let i=e;if(this.cn.mode===0)return i;const l=n.vn(),a=l.Ct();if(a===null)return i;const o=l.Rt(e,a),c=n.Ba().filter(u=>u instanceof Dd).reduce((u,h)=>{if(n.vr(h)||!h.yt())return u;const f=h.Dt(),y=h.In();if(f.Ni()||!y.Kr(s))return u;const m=y.Gh(s);if(m===null)return u;const x=Nn(h.Ct());return u.concat([f.Rt(m.Vt[3],x.Vt)])},[]);if(c.length===0)return i;c.sort((u,h)=>Math.abs(u-o)-Math.abs(h-o));const d=c[0];return i=l.pn(d,a),i}}class Qj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const l=Math.max(1,Math.floor(n));e.lineWidth=l,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=A(this.zt);if(a.Aa){e.strokeStyle=a.Ia,Qs(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*n);e.moveTo(c,-l),e.lineTo(c,s.height+l)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,Qs(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*i);e.moveTo(-l,c),e.lineTo(s.width+l,c)}e.stroke()}})}}class Jj{constructor(e){this.Wt=new Qj,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class Gj{constructor(e){this.wn=new Jj(e)}qh(){return this.wn}}const Ga={$a:4,Ua:1e-4};function wn(t,e){const s=100*(t-e)/e;return e<0?-s:s}function Zj(t,e){const s=wn(t.Ph(),e),n=wn(t.Rh(),e);return new Je(s,n)}function wr(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function e1(t,e){const s=wr(t.Ph(),e),n=wr(t.Rh(),e);return new Je(s,n)}function $l(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ua)+e.$a;return t<0?-n:n}function jr(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.$a)-e.Ua;return t<0?-n:n}function ir(t,e){if(t===null)return null;const s=$l(t.Ph(),e),n=$l(t.Rh(),e);return new Je(s,n)}function Mi(t,e){if(t===null)return null;const s=jr(t.Ph(),e),n=jr(t.Rh(),e);return new Je(s,n)}function Za(t){if(t===null)return Ga;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Ga;const s=Math.ceil(Math.abs(Math.log10(e))),n=Ga.$a+s;return{$a:n,Ua:1/Math.pow(10,n)}}class eo{constructor(e,s){if(this.qa=e,this.Ya=s,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,n){const i=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const h=Ti(l,i,1e-14)&&l>i+1e-14,f=Ti(l,n*o,1e-14),y=Ti(l,1,1e-14);if(!(h&&f&&y))break;l/=o,o=this.Ya[++a%this.Ya.length]}if(l<=i+1e-14&&(l=i),l=Math.max(1,l),this.Za.length>0&&(c=l,d=1,u=1e-14,Math.abs(c-d)<u))for(a=0,o=this.Za[0];Ti(l,n*o,1e-14)&&l>i+1e-14;)l/=o,o=this.Za[++a%this.Za.length];var c,d,u;return l}}class af{constructor(e,s,n,i){this.Ka=[],this.Li=e,this.qa=s,this.Ga=n,this.Ja=i}Xa(e,s){if(e<s)throw new Error("high < low");const n=this.Li.At(),i=(e-s)*this.Qa()/n,l=new eo(this.qa,[2,2.5,2]),a=new eo(this.qa,[2,2,2.5]),o=new eo(this.qa,[2.5,2,2]),c=[];return c.push(l.Xa(e,s,i),a.Xa(e,s,i),o.Xa(e,s,i)),function(d){if(d.length<1)throw Error("array is empty");let u=d[0];for(let h=1;h<d.length;++h)d[h]<u&&(u=d[h]);return u}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const n=e.At(),i=this.Ga(n-1,s),l=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=n-1-a,d=Math.max(i,l),u=Math.min(i,l);if(d===u)return void(this.Ka=[]);let h=this.Xa(d,u),f=d%h;f+=f<0?h:0;const y=d>=u?1:-1;let m=null,x=0;for(let b=d-f;b>u;b-=h){const p=this.Ja(b,s,!0);m!==null&&Math.abs(p-m)<this.Qa()||p<o||p>c||(x<this.Ka.length?(this.Ka[x].Ea=p,this.Ka[x].so=e.eo(b)):this.Ka.push({Ea:p,so:e.eo(b)}),x++,m=p,e.ro()&&(h=this.Xa(b*y,u)))}this.Ka.length=x}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function hx(t){return t.slice().sort((e,s)=>A(e.Xi())-A(s.Xi()))}var of;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(of||(of={}));const cf=new G0,df=new ua(100,1);class t1{constructor(e,s,n,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ge,this.vo=new ge,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=df,this.xo=Za(null),this.So=e,this.cn=s,this.ko=n,this.yo=i,this.Co=new af(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(wt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Ue(e.scaleMargins.top),n=Ue(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(l,a){if(l===null)return!1;const o=jr(l.Ph(),a),c=jr(l.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(n=Mi(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(n=ir(this.Ih,this.xo),n!==null&&this.Ao(n));const i=s.Cr!==this.cn.mode;i&&(s.Cr===2||this.Mh())&&this.Ra(),i&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const n=this.Ih;(s||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=wn(e,s):this.Oo()&&(e=wr(e,s)),this.Po(e,s)}te(e,s,n){this.Wo();const i=this.Fo(),l=A(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,d=this.Bo(),u=c/(o-a),h=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.Ho();for(let m=h;m<f;m++){const x=e[m],b=x._t;if(isNaN(b))continue;let p=b;y!==null&&(p=y(x._t,s));const g=i+u*(p-a),v=d?g:this.ho-1-g;x.st=v}}be(e,s,n){this.Wo();const i=this.Fo(),l=A(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,d=this.Bo(),u=c/(o-a),h=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.Ho();for(let m=h;m<f;m++){const x=e[m];let b=x.ge,p=x.Me,g=x.xe,v=x.Se;y!==null&&(b=y(x.ge,s),p=y(x.Me,s),g=y(x.xe,s),v=y(x.Se,s));let j=i+u*(b-a),k=d?j:this.ho-1-j;x.pe=k,j=i+u*(p-a),k=d?j:this.ho-1-j,x.de=k,j=i+u*(g-a),k=d?j:this.ho-1-j,x.fe=k,j=i+u*(v-a),k=d?j:this.ho-1-j,x.me=k}}pn(e,s){const n=this.To(e,s);return this.$o(n,s)}$o(e,s){let n=e;return this.Mh()?n=function(i,l){return l<0&&(i=-i),i/100*l+l}(n,s):this.Oo()&&(n=function(i,l){return i-=100,l<0&&(i=-i),i/100*l+l}(n,s)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const n=this.po[s];n.Xi()===null&&n.Ki(s+1),e.push(n)}return e=hx(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const n=s.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=A(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=A(this.ao).Th();s=Math.max(s,.1),n.Vh(s),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=A(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=A(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const i=n*s,l=A(this.ao).Th();l.Oh(i),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(wn(e,s));case 3:return this.ba().format(wr(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,A(this.e_()).ba())}Zl(e,s){return e=wn(e,s),this.s_(e,cf)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=df,this.Mh()?(this.wa=cf,s=100):this.Oo()?(this.wa=new ua(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new af(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?$l(e,this.xo):e;const n=A(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(i)}To(e,s){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),i=A(this.Lh()),l=i.Ph()+i.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?jr(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const n=this.r_();let i=0,l=0;for(const c of n){if(!c.yt())continue;const d=c.Ct();if(d===null)continue;const u=c.Il(e.Os(),e.ui());let h=u&&u.Lh();if(h!==null){switch(this.cn.mode){case 1:h=ir(h,this.xo);break;case 2:h=Zj(h,d.Vt);break;case 3:h=e1(h,d.Vt)}if(s=s===null?h:s.ts(A(h)),u!==null){const f=u.Eh();f!==null&&(i=Math.max(i,f.above),l=Math.max(l,f.below))}}}if(i===this.co&&l===this.do||(this.co=i,this.do=l,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),d=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=Mi(s,this.xo)),s=new Je(s.Ph()-d,s.Rh()+d),this.ro()&&(s=ir(s,this.xo))}if(this.ro()){const c=Mi(s,this.xo),d=Za(c);if(a=d,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const u=this.ao!==null?Mi(this.ao,this.xo):null;this.xo=d,s=ir(c,d),u!==null&&(this.ao=ir(u,d))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Je(-.5,.5)),this.xo=Za(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?wn:this.Oo()?wr:this.ro()?e=>$l(e,this.xo):null}a_(e,s,n){return s===void 0?(n===void 0&&(n=this.ba()),n.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class s1{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ge,this.yl=e,this.$i=s,this.d_=new Gj(this);const n=s.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const n of s){const i=A(n[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Ue(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const n=s.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,n){const i=n!==void 0?n:this.C_().y_+1;this.T_(e,s,i)}Zo(e){const s=this.po.indexOf(e);Ns(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const n=A(e.Dt()).Pa();if(this.o_.has(n)){const l=Ue(this.o_.get(n)),a=l.indexOf(e);a!==-1&&(l.splice(a,1),l.length===0&&this.o_.delete(n))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=hx(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,n=0;for(let i=0;i<e.length;i++){const l=e[i].Xi();l!==null&&(l<s&&(s=l),l>n&&(n=l))}return{H_:s,y_:n}}T_(e,s,n){let i=this.w_(s);if(i===null&&(i=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!da(s)){const l=this.o_.get(s)||[];l.push(e),this.o_.set(s,l)}i.qo(e),e.Gi(i),e.Ki(n),this.P_(i),this.mo=null}m_(e,s,n){s.Cr!==n.Cr&&this.L_(e)}v_(e,s){const n=Object.assign({visible:!0,autoScale:!0},Ft(s)),i=new t1(e,n,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class n1{constructor(e,s,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=n}Y_(e){const s=e.time,n=this.q_.cacheKey(s),i=this.tr.get(n);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Ue(a)),this.Je++,this.Ke--}const l=this.U_(e);return this.tr.set(n,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,l}}class kr{constructor(e,s){Ns(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function uf(t,e){return t===null||e===null?t===e:t.Ch(e)}class r1{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let n=s;n<e.length;++n){const i=e[n];let l=this.J_.get(i.timeWeight);l===void 0&&(l=[],this.J_.set(i.timeWeight,l)),l.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,s){const n=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((n,i)=>{e<=n[0].index?s.push(i):n.splice(ci(n,e,l=>l.index<e),1/0)});for(const n of s)this.J_.delete(n)}ru(e){let s=[];for(const n of Array.from(this.J_.keys()).sort((i,l)=>l-i)){if(!this.J_.get(n))continue;const i=s;s=[];const l=i.length;let a=0;const o=Ue(this.J_.get(n)),c=o.length;let d=1/0,u=-1/0;for(let h=0;h<c;h++){const f=o[h],y=f.index;for(;a<l;){const m=i[a],x=m.index;if(!(x<y)){d=x;break}a++,s.push(m),u=x,d=1/0}if(d-y>=e&&y-u>=e)s.push(f),u=y;else if(this.Q_)return i}for(;a<l;a++)s.push(i[a])}return s}}class Pn{constructor(e){this.hu=e}lu(){return this.hu===null?null:new kr(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Pn(null)}}function i1(t,e){return t.weight>e.weight?t:e}class l1{constructor(e,s,n,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new r1,this.du=new Map,this.fu=Pn.ou(),this.vu=!0,this.pu=new ge,this.mu=new ge,this.bu=new ge,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=n,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){wt(this.yo,e),this.Cu(),this.ku()}$h(e,s){var n;wt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,n;return(n=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&n!==void 0?n:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const n=ci(this.uu,this.q_.key(e),(i,l)=>this.q_.key(i.time)<l);return this.q_.key(e)<this.q_.key(this.uu[n].time)?s?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),n=Math.round(e.to),i=A(this.Bu()),l=A(this.Au());return{from:A(this.Ui(Math.max(i,s))),to:A(this.Ui(Math.min(l,n)))}}Iu(e){return{from:A(this.Va(e.from,!0)),to:A(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const i=this.Su*e/n;this.Su=i}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const i=n-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Yr(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const n=this.Eu(),i=s===void 0?0:s.from,l=s===void 0?e.length:s.to;for(let a=i;a<l;a++){const o=e[a].ot,c=n+this.xu-o,d=this.__-(c+.5)*this.Su-1;e[a].nt=d}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(s/e),i=A(this.Xs()),l=Math.max(i.Os(),i.Os()-n),a=Math.max(i.ui(),i.ui()-n),o=this.cu.su(e,s),c=this.Bu()+n,d=this.Au()-n,u=this.$u(),h=this.cn.fixLeftEdge||u,f=this.cn.fixRightEdge||u;let y=0;for(const m of o){if(!(l<=m.index&&m.index<=a))continue;let x;y<this.Mu.length?(x=this.Mu[y],x.coord=this.It(m.index),x.label=this.Uu(m),x.weight=m.weight):(x={needAlignCoordinate:!1,coord:this.It(m.index),label:this.Uu(m),weight:m.weight},this.Mu.push(x)),this.Su>s/2&&!u?x.needAlignCoordinate=!1:x.needAlignCoordinate=h&&m.index<=c||f&&m.index>=d,y++}return this.Mu.length=y,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const n=this.Fu(e),i=this.le(),l=i+s*(i/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=bc(this.__-e,0,this.__),n=bc(this.__-A(this.wo),0,this.__);s!==0&&n!==0&&this.Gn(this.wu.le*s/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=A(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,i=performance.now();this.$i.Zn({Qu:l=>(l-i)/s>=1,tc:l=>{const a=(l-i)/s;return a>=1?e:n+(e-n)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new kr(e,s+this.cn.rightOffset))}lc(e){const s=new kr(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),n=this.Eu()+this.xu-s;return Math.round(1e6*n)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Pn.ou());const e=this.Eu(),s=this.__/this.Su,n=this.xu+e,i=new kr(n-s+1,n);this._c(new Pn(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new n1(n=>this.fc(n),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,uf(s.lu(),this.fu.lu())||this.pu.m(),uf(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const n=s.Os()-e;if(n<0){const i=this.xu-n-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class a1{X(e,s,n){e.useMediaCoordinateSpace(i=>this.K(i,s,n))}gl(e,s,n){e.useMediaCoordinateSpace(i=>this.vc(i,s,n))}vc(e,s,n){}}class o1 extends a1{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:n}=e;let i=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>n.width?a.Zu=n.width/o:a.Zu=1,i+=a.gc*a.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((n.height-i)/2,0);break;case"bottom":l=Math.max(n.height-i,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=n.width/2;break;case"right":s.textAlign="right",o=n.width-1-a.gc/2}s.translate(o,l),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),l+=a.gc*a.Zu}}wc(e,s){const n=this.kc(e.font);let i=n.get(s);return i===void 0&&(i=e.measureText(s).width,n.set(s,i)),i}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class c1{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new o1(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:Bn(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class d1 extends Id{constructor(e,s){super(),this.cn=s,this.wn=new c1(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var hf,ff,mf,pf,xf;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(hf||(hf={}));class u1{constructor(e,s,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ge,this.Rc=new ge,this.Dc=null,this.Vc=e,this.cn=s,this.q_=n,this.Oc=new Vw(this),this.yl=new l1(this,s.timeScale,this.cn.localization,n),this.vt=new ej(this,s.crosshair),this.Bc=new Yj(s.crosshair),this.Ac=new d1(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(_e.es())}Uh(){this.Nc(_e.ss())}oa(){this.Nc(new _e(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){wt(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const n=this.Uc(e);n!==null&&(n.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const n=s.w_(e);if(n!==null)return{Ht:s,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new s1(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const n=e===void 0?this.yc.length-1:e,i=_e.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Nc(i),s}V_(e,s,n){e.V_(s,n)}O_(e,s,n){e.O_(s,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,n){s.Vo()||e.A_(s,n)}I_(e,s,n){s.Vo()||(e.I_(s,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const n=this.St();if(n.Ni()||s===0)return;const i=n.Hi();e=Math.max(1,Math.min(e,i)),n.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,n,i,l){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const d=i.vn(),u=d.Ct();u!==null&&(a=d.pn(s,u)),a=this.Bc.Oa(a,o,i),this.vt.kn(o,a,i),this.oa(),l||this.Rc.m(this.vt.xt(),{x:e,y:s},n)}ad(e,s,n){const i=n.vn(),l=i.Ct(),a=i.Rt(e,A(l)),o=this.yl.Va(s,!0),c=this.yl.It(A(o));this.ld(c,a,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),n=this.vt.Sn();this.ld(s,n,null,e)}this.vt.Vn()}_d(e,s,n){const i=this.yl.mn(0);s!==void 0&&n!==void 0&&this.yl.bt(s,n);const l=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&i!==null&&l!==null){const c=o.Kr(a),d=this.q_.key(i)>this.q_.key(l),u=e!==null&&e>a&&!d,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(n!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(u&&!f){const y=e-a;this.yl.Jn(this.yl.Hu()-y)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(n=>n.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,n){const i=this.yc[0],l=this.fd(s,e,i,n);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(e){const s=this.dr(e),n=this.Cc.indexOf(e);Ns(n!==-1,"Series not found"),this.Cc.splice(n,1),A(s).Zo(e),e.S&&e.S()}Xl(e,s){const n=A(this.dr(e));n.Zo(e);const i=this.Uc(s);if(i===null){const l=e.Xi();n.qo(e,s,l)}else{const l=i.Ht===n?e.Xi():void 0;i.Ht.qo(e,s,l)}}hc(){const e=_e.ss();e.$n(),this.Nc(e)}pd(e){const s=_e.ss();s.Yn(e),this.Nc(s)}Kn(){const e=_e.ss();e.Kn(),this.Nc(e)}Gn(e){const s=_e.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=_e.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=_e.ss();s.Zn(e),this.Nc(s)}Un(){const e=_e.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,n=this.zc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==s)this.Dc={Ps:n,Rs:s,wd:new Map};else{const l=this.Dc.wd.get(e);if(l!==void 0)return l}const i=function(l,a,o){const[c,d,u,h]=Xr(l),[f,y,m,x]=Xr(a),b=[lt(c+o*(f-c)),lt(d+o*(y-d)),lt(u+o*(m-u)),X0(h+o*(x-h))];return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${b[3]})`}(n,s,e/100);return this.Dc.wd.set(e,i),i}Gc(e,s){const n=new _e(s);if(e!==null){const i=this.yc.indexOf(e);n.Nn(i,{Fn:s})}return n}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,n,i){const l=new Dd(this,e,s,n,i),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(l,a),da(a)||l.$h(e),l}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function Nc(t){return!Lt(t)&&!oi(t)}function fx(t){return Lt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(ff||(ff={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(mf||(mf={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(pf||(pf={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(xf||(xf={}));const gf=t=>t.getUTCFullYear();function h1(t,e,s){return e.replace(/yyyy/g,(n=>Ut(gf(n),4))(t)).replace(/yy/g,(n=>Ut(gf(n)%100,2))(t)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,s)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,s)).replace(/MM/g,(n=>Ut((i=>i.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>Ut((i=>i.getUTCDate())(n),2))(t))}class mx{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return h1(e,this.gd,this.Md)}}class f1{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Ut(e.getUTCHours(),2)).replace("%m",Ut(e.getUTCMinutes(),2)).replace("%s",Ut(e.getUTCSeconds(),2))}}const m1={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class p1{constructor(e={}){const s=Object.assign(Object.assign({},m1),e);this.Td=new mx(s.Sd,s.Cd),this.Pd=new f1(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function zi(t){return 60*t*60*1e3}function to(t){return 60*t*1e3}const Ri=[{Dd:(yf=1,1e3*yf),Vd:10},{Dd:to(1),Vd:20},{Dd:to(5),Vd:21},{Dd:to(30),Vd:22},{Dd:zi(1),Vd:30},{Dd:zi(3),Vd:31},{Dd:zi(6),Vd:32},{Dd:zi(12),Vd:33}];var yf;function vf(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=Ri.length-1;s>=0;--s)if(Math.floor(e.getTime()/Ri[s].Dd)!==Math.floor(t.getTime()/Ri[s].Dd))return Ri[s].Vd;return 0}function so(t){let e=t;if(oi(t)&&(e=Vd(t)),!Nc(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function bf(t){if(!fx(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Vd(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Nf(t){oi(t.time)&&(t.time=Vd(t.time))}class wf{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(Nf)}(e):Nf(e)}createConverterToInternalObj(e){return A(function(s){return s.length===0?null:Nc(s[0].time)||oi(s[0].time)?so:bf}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return fx(s=e)?bf(s):Nc(s)?so(s):so(Vd(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new p1({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new mx(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const n=function(l,a,o){switch(l){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const l=i.tickMarkFormatter(e.originalTime,n,s.locale);if(l!==null)return l}return function(l,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const d=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(i1,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,i=0){if(n.length===0)return;let l=i===0?null:n[i-1].time.Od,a=l!==null?new Date(1e3*l):null,o=0;for(let c=i;c<n.length;++c){const d=n[c],u=new Date(1e3*d.time.Od);a!==null&&(d.timeWeight=vf(u,a)),o+=d.time.Od-(l||d.time.Od),l=d.time.Od,a=u}if(i===0&&n.length>1){const c=Math.ceil(o/(n.length-1)),d=new Date(1e3*(n[0].time.Od-c));n[0].timeWeight=vf(new Date(1e3*n[0].time.Od),d)}})(e,s)}static Id(e){return wt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Fn=typeof window<"u";function jf(){return!!Fn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function no(){return!!Fn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function wc(t){return t+t%2}function ro(t,e){return t.zd-e.zd}function io(t,e,s){const n=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),s)}class x1{constructor(e,s,n,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=n,this.rs=i}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let n=0;const i=io(this.Ld,this.Ed,this.Ud),l=ro(this.Ld,this.Ed),a=[i],o=[l];if(n+=l,this.Nd!==null){const d=io(this.Ed,this.Nd,this.Ud);if(Math.sign(d)===Math.sign(i)){const u=ro(this.Ed,this.Nd);if(a.push(d),o.push(u),n+=u,this.Fd!==null){const h=io(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(i)){const f=ro(this.Nd,this.Fd);a.push(h),o.push(f),n+=f}}}}let c=0;for(let d=0;d<a.length;++d)c+=o[d]/n*a[d];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(d,u){const h=Math.log(u);return Math.log(1*h/-d)/h}(Math.abs(c),this.qd))}tc(e){const s=A(this.Wd),n=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-A(this.Wd).ot;return Math.min(s,this.jd)}}class g1{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return Y0(Xr(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Js(t,e){const s=A(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=_w(s,{options:{allowResizeObserver:!1},transform:(i,l)=>({width:Math.max(i.width,l.width),height:Math.max(i.height,l.height)})});return n.resizeCanvasElement(e),n}function Gs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function jc(t,e,s,n){t.gl&&t.gl(e,s,n)}function sl(t,e,s,n){t.X(e,s,n)}function kc(t,e,s,n){const i=t(s,n);for(const l of i){const a=l.gt();a!==null&&e(a)}}function y1(t){Fn&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Wd{constructor(e,s,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!no(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const l=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(_t(i),this.cf);a<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(_t(i),this.af);a<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=lo(e.changedTouches,A(this.Of));if(s===null||(this.Vf=Oi(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(_t(s),A(this.pf)),{nv:i,sv:l,Nf:a}=n;if(this.mf||!(a<5)){if(!this.mf){const o=.5*i,c=l>=o&&!this.cn.ev(),d=o>l&&!this.cn.rv();c||d||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),on(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(_t(e),A(this.vf)),{Nf:n}=s;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,s){const n=Math.abs(s.nt-e.nt),i=Math.abs(s.st-e.st);return{nv:n,sv:i,Nf:n+i}}ov(e){let s=lo(e.changedTouches,A(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=Oi(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,s);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(_t(s),this.cf);i<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&on(e));this._f===0&&on(e),e.touches.length===0&&this.ff&&(this.ff=!1,on(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),jf()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(_t(e),this.af);n<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=Oi(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=_t(s),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",l),n.removeEventListener("touchend",a)},n.addEventListener("touchmove",l,{passive:!1}),n.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,s);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=_t(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;jf()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=_t(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",l)},s.addEventListener("mousemove",i),s.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=_t(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}no()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),y1(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=kf(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),on(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=kf(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!no()}vv(e){const s=lo(e.touches,A(this.Of));if(s===null)return;const n=this.Ef(e,s);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Oi(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const n=s||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&on(e)}}}}function kf(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function on(t){t.cancelable&&t.preventDefault()}function _t(t){return{nt:t.pageX,st:t.pageY}}function Oi(t){return t.timeStamp||performance.now()}function lo(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function Ai(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function v1(t,e,s){for(const n of t){const i=n.gt();if(i!==null&&i.wr){const l=i.wr(e,s);if(l!==null)return{Bv:n,Iv:l}}}return null}function ao(t,e){return s=>{var n,i,l,a;return((i=(n=s.Dt())===null||n===void 0?void 0:n.Pa())!==null&&i!==void 0?i:"")!==e?[]:(a=(l=s.da)===null||l===void 0?void 0:l.call(s,t))!==null&&a!==void 0?a:[]}}function Sf(t,e,s,n){if(!t.length)return;let i=0;const l=s/2,a=t[0].At(n,!0);let o=e===1?l-(t[0].Vi()-a/2):t[0].Vi()-a/2-l;o=Math.max(0,o);for(let c=1;c<t.length;c++){const d=t[c],u=t[c-1],h=u.At(n,!1),f=d.Vi(),y=u.Vi();if(e===1?f>y-h:f<y+h){const m=y-h*e;d.Oi(m);const x=m-e*h/2;if((e===1?x<0:x>s)&&o>0){const b=e===1?-1-x:x-s,p=Math.min(b,o);for(let g=i;g<t.length;g++)t[g].Oi(t[g].Vi()+e*p);o-=p}}else i=c,o=e===1?y-h-f:f-(y+h)}}class Cf{constructor(e,s,n,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Jr(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=n,this.qv=i==="left",this.Yv=ao("normal",i),this.Zv=ao("top",i),this.Xv=ao("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Js(this.Kv,ie({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=Js(this.Kv,ie({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Wd(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Gs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Gs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),n=A(this.Gv.canvasElement.getContext("2d"));n.save();const i=this.Li.Ha();n.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(n,i[0].so),this.Fv.xi(n,i[i.length-1].so)));const l=this.up();for(let d=l.length;d--;){const u=this.Fv.xi(n,l[d].Kt());u>e&&(e=u)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const d=this.Li.pn(1,a),u=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(d,u))+.11111111111111,a)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(d,u))-.11111111111111,a)))}var o;n.restore();const c=e||34;return wc(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&Fs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return A(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,A(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=Ys(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const s=Ys(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,s.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp(),i=this.Li;s.O_(n,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,s.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(n=>{for(let i=0;i<n.length;++i){const l=n[i].Rn(this.tn.fp(),s);for(let a=0;a<l.length;a++)e.push(l[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,l=this.tn.fp().$t(),a=l.q(),o=l.bd();a===o?oa(e,0,0,n,i,a):Q0(e,0,0,n,i,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*n));let l;l=this.qv?s.width-i:0,e.fillRect(l,0,i,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),n=this.Li.W(),i=this.ap(),l=this.qv?this.Ev.width-i.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=n.borderColor;const d=Math.max(1,Math.floor(c)),u=Math.floor(.5*c),h=Math.round(i.T*o);a.beginPath();for(const f of s)a.rect(Math.floor(l*o),Math.round(f.Ea*c)-u,h,d);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=n.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(l-i.A):Math.round(l+i.T+i.A),d=s.map(u=>this.Fv.Mi(a,u.so));for(let u=s.length;u--;){const h=s[u];a.fillText(h.so,c,h.Ea+d[u])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),n=this.tn.fp(),i=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(a=>{n.vr(a)&&s.push(a)});const l=this.Li;s.forEach(a=>{a.Rn(n,l).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,s){if(this.Ev===null)return;const n=this.Ev.height/2,i=e.filter(a=>a.ki()<=n),l=e.filter(a=>a.ki()>n);i.sort((a,o)=>o.ki()-a.ki()),l.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}Sf(i,1,this.Ev.height,s),Sf(l,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),n=this.ap(),i=this.qv?"right":"left";s.forEach(l=>{l.Ai()&&l.gt(A(this.Li)).X(e,n,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),n=[],i=this.tn.fp(),l=s.Zc().Rn(i,this.Li);l.length&&n.push(l);const a=this.ap(),o=this.qv?"right":"left";n.forEach(c=>{c.forEach(d=>{d.gt(A(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Bn(this.ko.fontSize,this.ko.fontFamily)}}function b1(t,e){var s,n;return(n=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function $i(t,e){var s,n;return(n=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function N1(t,e){var s,n;return(n=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function w1(t,e){var s,n;return(n=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}class Hd{constructor(e,s){this.Ev=ie({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ge,this.Op=new ge,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=Js(n,ie({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Js(n,ie({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Wd(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Gs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Gs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return A(this.Np)}qp(e){var s,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Hd.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new g1(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(A(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(A(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,n=e.localY;this.Gp(s,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const n=e.localX,i=e.localY;this.Gp(n,i,e);const l=this.wr(n,i);this.Qd.Qp((s=l==null?void 0:l.Lv)!==null&&s!==void 0?s:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const n=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=A(this.Lp),l=i.x+(s-this.Ip.x),a=i.y+(n-this.Ip.y);this.Gp(l,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const n=this.Np;return n===null?null:function(i,l,a){const o=i.Uo(),c=function(d,u,h){var f,y;let m,x;for(const g of d){const v=(y=(f=g.va)===null||f===void 0?void 0:f.call(g,u,h))!==null&&y!==void 0?y:[];for(const j of v)b=j.zOrder,(!(p=m==null?void 0:m.zOrder)||b==="top"&&p!=="top"||b==="normal"&&p==="bottom")&&(m=j,x=g)}var b,p;return m&&x?{zv:m,Hc:x}:null}(o,l,a);if((c==null?void 0:c.zv.zOrder)==="top")return Ai(c);for(const d of o){if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return Ai(c);const u=v1(d.Pn(i),l,a);if(u!==null)return{Hc:d,Bv:u.Bv,Iv:u.Iv};if(c&&c.Hc===d&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return Ai(c)}return c!=null&&c.zv?Ai(c):null}(n,e,s)}_m(e,s){A(s==="left"?this.Cp:this.Tp).cp(ie({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Fs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=A(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const n=s.Dt();n!==null&&e.P_(n),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=Ys(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(n,b1),this.vm(n),this.pm(n),this.fm(n,$i),this.fm(n,N1)))}this.Jv.applySuggestedBitmapSize();const s=Ys(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.bm(s),this.fm(s,w1))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const n=s.localX,i=s.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:i},s)}mp({context:e,bitmapSize:s}){const{width:n,height:i}=s,l=this.$i(),a=l.q(),o=l.bd();a===o?oa(e,0,0,n,i,o):Q0(e,0,0,n,i,a,o)}vm(e){const s=A(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,$i,jc,s),this.Mm(e,$i,sl,s)}bm(e){this.Mm(e,$i,sl,this.$i().Zc())}fm(e,s){const n=A(this.Np).Uo();for(const i of n)this.Mm(e,s,jc,i);for(const i of n)this.Mm(e,s,sl,i)}Mm(e,s,n,i){const l=A(this.Np),a=l.$t().Wc(),o=a!==null&&a.Hc===i,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;kc(s,d=>n(d,e,o,c),i,l)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,n=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();s&&this.Cp===null&&(this.Cp=new Cf(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new Cf(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,n){this.$i().ld(this.Sm(e),this.km(s),n,A(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,n){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,n);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),n=this.fp();if(s.z_(n,n.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const i=performance.now(),l=s.St();this.Ep.Vr(l.Hu(),i),this.Ep.Qu(i)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)A(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),n=s.St();if(n.Ni())return;const i=this.Qd.W(),l=i.handleScroll,a=i.kineticScroll;if((!l.pressedMouseMove||e.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const d=n.le();this.Ep=new x1(.2/d,7/d,.997,15/d),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),c))}}class Ef{constructor(e,s,n,i,l){this.ft=!0,this.Ev=ie({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=s,this.Tm=i,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Js(this.Kv,ie({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Gs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Fs(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Ys(this.Gv);s!==null&&s.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*n),a=Math.floor(this.Oc.W().C*i),o=this.qv?s.width-l:0;e.fillRect(o,0,l,a)}mp({context:e,bitmapSize:s}){oa(e,0,0,s.width,s.height,this.Pm())}}function qd(t){return e=>{var s,n;return(n=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&n!==void 0?n:[]}}const j1=qd("normal"),k1=qd("top"),S1=qd("bottom");class C1{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=ie({width:0,height:0}),this.Om=new ge,this.Fv=new Jr(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Js(this.Im,ie({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=Js(this.Im,ie({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Wd(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Gs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Gs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,n){Fs(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(ie({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(ie({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=Ys(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(n,S1)}),this.wp(n),this.$m(n,j1)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Ys(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,k1))}$m(e,s){const n=this.Qd.$t().wt();for(const i of n)kc(s,l=>jc(l,e,!1,void 0),i,void 0);for(const i of n)kc(s,l=>sl(l,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:s}){oa(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,s.width,i)}}wp(e){const s=this.Qd.$t().St(),n=s.Ha();if(!n||n.length===0)return;const i=this.q_.maxTickMarkWeight(n),l=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:d})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);o.beginPath();const f=Math.round(l.T*d);for(let y=n.length;y--;){const m=Math.round(n[y].coord*c);o.rect(m-h,0,u,f)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=l.C+l.T+l.L+l.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const d of n)if(d.weight<i){const u=d.needAlignCoordinate?this.Ym(o,d.coord,d.label):d.coord;o.fillText(d.label,u,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const d of n)if(d.weight>=i){const u=d.needAlignCoordinate?this.Ym(o,d.coord,d.label):d.coord;o.fillText(d.label,u,c)}})}Ym(e,s,n){const i=this.Fv.xi(e,n),l=i/2,a=Math.floor(s-l)+.5;return a<0?s+=Math.abs(0-a):a+i>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+i))),s}Um(e,s){const n=this.jm();for(const i of e)for(const l of i.Qi())l.gt().X(s,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Bn(this.j(),this.cn.fontFamily)}Zm(){return Bn(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Jr,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const n=this.j();e.P=n,e.R=s,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},i=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,l=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new Ef("left",s,n,i,l),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new Ef("right",s,n,i,l),this.Am.appendChild(this.Dm.lp()))}}const E1=!!Fn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Fn&&(!((oo=navigator==null?void 0:navigator.userAgentData)===null||oo===void 0)&&oo.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var oo;class _1{constructor(e,s,n){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ge,this.Op=new ge,this.Rc=new ge,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),co(this.cn)&&this.hb(!0),this.$i=new u1(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new C1(this,this.q_),this.sb.appendChild(this.ab.lp());const l=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(l||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],A(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,n=!1){if(this.ho===s&&this.__===e)return;const i=function(o){const c=Math.floor(o.width),d=Math.floor(o.height);return ie({width:c-c%2,height:d-d%2})}(ie({width:e,height:s}));this.ho=i.height,this.__=i.width;const l=this.ho+"px",a=this.__+"px";A(this.Xd).style.height=l,A(this.Xd).style.width=a,this.sb.style.height=l,this.sb.style.width=a,n?this.mb(_e.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=_e.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=co(this.cn);this.$i.$h(e);const n=co(this.cn);n!==s&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=A(s.getContext("2d"));return this.gb(n),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:A(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Ue(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,n=0;const i=this.Xm[0],l=(o,c)=>{let d=0;for(let u=0;u<this.Xm.length;u++){const h=this.Xm[u],f=A(o==="left"?h.wm():h.gm()),y=f.xp();e!==null&&f.Sp(e,c,d),d+=y.height}};this.xb()&&(l("left",0),s+=A(i.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],d=c.xp();e!==null&&c.Sp(e,s,n),n+=d.height}s+=i.xp().width,this.Sb()&&(l("right",s),s+=A(i.gm()).xp().width);const a=(o,c,d)=>{A(o==="left"?this.ab.Lm():this.ab.Em()).Sp(A(e),c,d)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,n),c=A(i.wm()).xp().width),this.ab.Sp(e,c,n),c+=o.width,this.Sb()&&a("right",c,n)}n+=o.height}return ie({width:s,height:n})}Pb(){let e=0,s=0,n=0;for(const m of this.Xm)this.xb()&&(s=Math.max(s,A(m.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,A(m.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=m.M_();s=wc(s),n=wc(n);const i=this.__,l=this.ho,a=Math.max(i-s-n,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var d;c=(d=c)+d%2;const u=0+c,h=l<u?0:l-u,f=h/e;let y=0;for(let m=0;m<this.Xm.length;++m){const x=this.Xm[m];x.qp(this.$i.qc()[m]);let b=0,p=0;p=m===this.Xm.length-1?h-y:Math.round(x.M_()*f),b=Math.max(p,2),y+=b,x.cp(ie({width:a,height:b})),this.xb()&&x._m(s,"left"),this.Sb()&&x._m(n,"right"),x.fp()&&this.$i.Kc(x.fp(),b)}this.ab.Fm(ie({width:o?a:0,height:c}),o?s:0,o?n:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return E1?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),n=s*e.deltaX/100,i=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(i)*Math.min(1,Math.abs(i)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,l)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,s){var n;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const n of e.Qn())this.ns(n,s)}Vb(e){const s=this.$i.qc();for(let n=0;n<s.length;n++)e.Hn(n).Wn&&s[n].N_()}ns(e,s){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(s)||n.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,s);for(const i of n.Qn())if(i.qn===5&&!i.Vt.Qu(s)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,n=this.Xm.length;for(let i=s;i<n;i++){const l=Ue(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let i=n;i<s;i++){const l=new Hd(this,e[i]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let i=0;i<s;i++){const l=e[i],a=this.Xm[i];a.fp()!==l?a.qp(l):a.Up()}this.cb(),this.Pb()}Ib(e,s,n){var i;const l=new Map;e!==null&&this.$i.wt().forEach(u=>{const h=u.In().ll(e);h!==null&&l.set(u,h)});let a;if(e!==null){const u=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;u!==void 0&&(a=u)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Dd?o.Hc:void 0,d=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:l,Fb:d,Wb:n??void 0}}Bb(e,s,n){this.Vp.m(()=>this.Ib(e,s,n))}Ab(e,s,n){this.Op.m(()=>this.Ib(e,s,n))}lb(e,s,n){this.Rc.m(()=>this.Ib(e,s,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(n=>n.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function co(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function P1(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function px(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]])}return s}function _f(t,e,s,n){const i=s.value,l={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.color!==void 0&&(l.V=s.color),l}function T1(t,e,s,n){const i=s.value,l={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.lineColor!==void 0&&(l.lt=s.lineColor),s.topColor!==void 0&&(l.Ps=s.topColor),s.bottomColor!==void 0&&(l.Rs=s.bottomColor),l}function L1(t,e,s,n){const i=s.value,l={ee:e,ot:t,Vt:[i,i,i,i],zb:n};return s.topLineColor!==void 0&&(l.Re=s.topLineColor),s.bottomLineColor!==void 0&&(l.De=s.bottomLineColor),s.topFillColor1!==void 0&&(l.ke=s.topFillColor1),s.topFillColor2!==void 0&&(l.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(l.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(l.Te=s.bottomFillColor2),l}function M1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),i}function z1(t,e,s,n){const i={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(i.V=s.color),s.borderColor!==void 0&&(i.Ot=s.borderColor),s.wickColor!==void 0&&(i.Xh=s.wickColor),i}function R1(t,e,s,n,i){const l=Ue(i)(s),a=Math.max(...l),o=Math.min(...l),c=l[l.length-1],d=[c,a,o,c],u=s,{time:h,color:f}=u;return{ee:e,ot:t,Vt:d,zb:n,$e:px(u,["time","color"]),V:f}}function Ii(t){return t.Vt!==void 0}function Pf(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function _s(t){return(e,s,n,i,l,a)=>function(o,c){return c?c(o):(d=o).open===void 0&&d.value===void 0;var d}(n,a)?Pf({ot:e,ee:s,zb:i},n):Pf(t(e,s,n,i,l),n)}function Tf(t){return{Candlestick:_s(z1),Bar:_s(M1),Area:_s(T1),Baseline:_s(L1),Histogram:_s(_f),Line:_s(_f),Custom:_s(R1)}[t]}function Lf(t){return{ee:0,Hb:new Map,la:t}}function Mf(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function zf(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Ue(e)}class O1{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let n=this.qb.size!==0,i=!1;const l=this.Yb.get(e);if(l!==void 0)if(this.Yb.size===1)n=!1,i=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(i=!0);let a=[];if(s.length!==0){const c=s.map(y=>y.time),d=this.q_.createConverterToInternalObj(s),u=Tf(e.Qh()),h=e.Ca(),f=e.Ta();a=s.map((y,m)=>{const x=d(y.time),b=this.q_.key(x);let p=this.qb.get(b);p===void 0&&(p=Lf(x),this.qb.set(b,p),i=!0);const g=u(x,p.ee,y,c[m],h,f);return p.Hb.set(e,g),g})}n&&this.Gb(),this.Jb(e,a);let o=-1;if(i){const c=[];this.qb.forEach(d=>{c.push({timeWeight:0,time:d.la,pointData:d,originalTime:zf(d.Hb)})}),c.sort((d,u)=>this.q_.key(d.time)-this.q_.key(u.time)),o=this.Qb(c)}return this.tw(e,o,function(c,d,u){const h=Mf(c,u),f=Mf(d,u);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),l,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const n=s;(function(x){x.zb===void 0&&(x.zb=x.time)})(n),this.q_.preprocessData(s);const i=this.q_.createConverterToInternalObj([s])(s.time),l=this.Zb.get(e);if(l!==void 0&&this.q_.key(i)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${i}`);let a=this.qb.get(this.q_.key(i));const o=a===void 0;a===void 0&&(a=Lf(i),this.qb.set(this.q_.key(i),a));const c=Tf(e.Qh()),d=e.Ca(),u=e.Ta(),h=c(i,a.ee,s,n.zb,d,u);a.Hb.set(e,h),this.nw(e,h);const f={ta:Ii(h)};if(!o)return this.tw(e,-1,f);const y={timeWeight:0,time:a.la,pointData:a,originalTime:zf(a.Hb)},m=ci(this.Xb,this.q_.key(y.time),(x,b)=>this.q_.key(x.time)<b);this.Xb.splice(m,0,y);for(let x=m;x<this.Xb.length;++x)uo(this.Xb[x].pointData,x);return this.q_.fillWeightsForPoints(this.Xb,m),this.tw(e,m,f)}nw(e,s){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.q_.key(s.ot)>this.q_.key(i.ot)?Ii(s)&&n.push(s):Ii(s)?n[n.length-1]=s:n.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(Ii)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const i=this.Xb[n],l=e[n];if(this.q_.key(i.time)!==this.q_.key(l.time)){s=n;break}l.timeWeight=i.timeWeight,uo(l.pointData,n)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)uo(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,n){const i={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((l,a)=>{i.ew.set(a,{$e:l,rw:a===e?n:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:n}),i.St.hw=this.Xb,i.St.lw=s;else{const l=this.Yb.get(e);i.ew.set(e,{$e:l||[],rw:n})}return i}}function uo(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function Kd(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function Rf(t){const e=Kd(t);return t.V!==void 0&&(e.color=t.V),e}function A1(t){const e=Kd(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function $1(t){const e=Kd(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function xx(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function I1(t){const e=xx(t);return t.V!==void 0&&(e.color=t.V),e}function B1(t){const e=xx(t),{V:s,Ot:n,Xh:i}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function Sc(t){return{Area:A1,Line:Rf,Baseline:$1,Histogram:Rf,Bar:I1,Candlestick:B1,Custom:F1}[t]}function F1(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const U1={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},D1={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},V1={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ad,attributionLogo:!0},ho={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},W1={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},H1={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Ad,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function Of(){return{width:0,height:0,autoSize:!1,layout:V1,crosshair:U1,grid:D1,overlayPriceScales:Object.assign({},ho),leftPriceScale:Object.assign(Object.assign({},ho),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},ho),{visible:!0}),timeScale:W1,watermark:H1,localization:{locale:Fn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class q1{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return da(this.ow)?this.aw.Mb(this.ow):0}Li(){return A(this.aw.$t().Uc(this.ow)).Dt}}function Af(t,e,s){const n=px(t,["time","originalTime"]),i=Object.assign({time:e},n);return s!==void 0&&(i.originalTime=s),i}const K1={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class X1{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class Y1{constructor(e,s,n,i,l){this.uw=new ge,this.Es=e,this.cw=s,this.dw=n,this.q_=l,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new Pn(new kr(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const i=n.ll(s.Os(),1),l=n.ll(s.ui(),-1),a=A(n.el()),o=A(n.An());if(i!==null&&l!==null&&i.ee>l.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:i===null||i.ee===a?e.from-a:i.ee-a,barsAfter:l===null||l.ee===o?o-e.to:o-l.ee};return i!==null&&l!==null&&(c.from=i.zb,c.to=l.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const n=this.Es.In().ll(e,s);return n===null?null:Sc(this.seriesType())(n)}data(){const e=Sc(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(n=>Af(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>Af(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Ft(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=wt(Ft(K1),e),n=this.Es.ea(s);return new X1(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class Q1{constructor(e,s,n){this.ww=new ge,this.mu=new ge,this.Om=new ge,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(s);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){Ns(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(s,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const s=this.$i.St(),n=s.Nu(e),i=s.Ui(n);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Ft(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function J1(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(s);if(Math.abs(i-s)<1e-8)return n;s*=10}return n}(e.minMove))}function $f(t){return function(e){if(Pi(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;Pi(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),Pi(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const s=e.handleScroll;Pi(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class G1{constructor(e,s,n){this.Sw=new Map,this.kw=new Map,this.yw=new ge,this.Cw=new ge,this.Tw=new ge,this.Pw=new O1(s);const i=n===void 0?Ft(Of()):wt(Ft(Of()),$f(n));this.q_=s,this.aw=new _1(e,i,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const l=this.aw.$t();this.Dw=new Q1(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,n){this.autoSizeActive()||this.aw._b(e,s,n)}addCustomSeries(e,s){const n=Nn(e),i=Object.assign(Object.assign({},H0),n.defaultOptions());return this.Vw("Custom",i,s,n)}addAreaSeries(e){return this.Vw("Area",Ow,e)}addBaselineSeries(e){return this.Vw("Baseline",Aw,e)}addBarSeries(e){return this.Vw("Bar",zw,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",Mw,e)}addHistogramSeries(e){return this.Vw("Histogram",$w,e)}addLineSeries(e){return this.Vw("Line",Rw,e)}removeSeries(e){const s=Ue(this.Sw.get(e)),n=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(n),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new q1(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h($f(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,n){const i=this.Sw.get(n);if(i===void 0)return;const l=this.aw.$t().dr(i);l!==null&&this.aw.$t().ad(e,s,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,n={},i){J1(n.priceFormat);const l=wt(Ft(q0),Ft(s),n),a=this.aw.$t().dd(e,l,i),o=new Y1(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,i)=>i.J(n.$e,n.rw)),s.Wu()}Bw(e){return Ue(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((i,l)=>{const a=l.Qh(),o=Sc(a)(i);if(a!=="Custom")Ns(P1(o));else{const c=l.Ta();Ns(!c||c(o)===!1)}s.set(this.Bw(l),o)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function Z1(t,e,s){let n;if(oi(t)){const l=document.getElementById(t);Ns(l!==null,`Cannot find element in DOM with id=${t}`),n=l}else n=t;const i=new G1(n,e,s);return e.setOptions(i.options()),i}function gx(t,e){return Z1(t,new wf,wf.Id(e))}Object.assign(Object.assign({},q0),H0);const Ot=Object.create(null);Ot.open="0";Ot.close="1";Ot.ping="2";Ot.pong="3";Ot.message="4";Ot.upgrade="5";Ot.noop="6";const nl=Object.create(null);Object.keys(Ot).forEach(t=>{nl[Ot[t]]=t});const Cc={type:"error",data:"parser error"},yx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vx=typeof ArrayBuffer=="function",bx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Xd=({type:t,data:e},s,n)=>yx&&e instanceof Blob?s?n(e):If(e,n):vx&&(e instanceof ArrayBuffer||bx(e))?s?n(e):If(new Blob([e]),n):n(Ot[t]+(e||"")),If=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function Bf(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let fo;function ek(t,e){if(yx&&t.data instanceof Blob)return t.data.arrayBuffer().then(Bf).then(e);if(vx&&(t.data instanceof ArrayBuffer||bx(t.data)))return e(Bf(t.data));Xd(t,!1,s=>{fo||(fo=new TextEncoder),e(fo.encode(s))})}const Ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ur=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ff.length;t++)ur[Ff.charCodeAt(t)]=t;const tk=t=>{let e=t.length*.75,s=t.length,n,i=0,l,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(n=0;n<s;n+=4)l=ur[t.charCodeAt(n)],a=ur[t.charCodeAt(n+1)],o=ur[t.charCodeAt(n+2)],c=ur[t.charCodeAt(n+3)],u[i++]=l<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|c&63;return d},sk=typeof ArrayBuffer=="function",Yd=(t,e)=>{if(typeof t!="string")return{type:"message",data:Nx(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:nk(t.substring(1),e)}:nl[s]?t.length>1?{type:nl[s],data:t.substring(1)}:{type:nl[s]}:Cc},nk=(t,e)=>{if(sk){const s=tk(t);return Nx(s,e)}else return{base64:!0,data:t}},Nx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},wx="",rk=(t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach((l,a)=>{Xd(l,!1,o=>{n[a]=o,++i===s&&e(n.join(wx))})})},ik=(t,e)=>{const s=t.split(wx),n=[];for(let i=0;i<s.length;i++){const l=Yd(s[i],e);if(n.push(l),l.type==="error")break}return n};function lk(){return new TransformStream({transform(t,e){ek(t,s=>{const n=s.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const l=new DataView(i.buffer);l.setUint8(0,126),l.setUint16(1,n)}else{i=new Uint8Array(9);const l=new DataView(i.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(s)})}})}let mo;function Bi(t){return t.reduce((e,s)=>e+s.length,0)}function Fi(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)s[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function ak(t,e){mo||(mo=new TextDecoder);const s=[];let n=0,i=-1,l=!1;return new TransformStream({transform(a,o){for(s.push(a);;){if(n===0){if(Bi(s)<1)break;const c=Fi(s,1);l=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Bi(s)<2)break;const c=Fi(s,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Bi(s)<8)break;const c=Fi(s,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(Cc);break}i=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Bi(s)<i)break;const c=Fi(s,i);o.enqueue(Yd(l?c:mo.decode(c),e)),n=0}if(i===0||i>t){o.enqueue(Cc);break}}}})}const jx=4;function ve(t){if(t)return ok(t)}function ok(t){for(var e in ve.prototype)t[e]=ve.prototype[e];return t}ve.prototype.on=ve.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ve.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};ve.prototype.off=ve.prototype.removeListener=ve.prototype.removeAllListeners=ve.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<s.length;i++)if(n=s[i],n===e||n.fn===e){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+t],this};ve.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,i=s.length;n<i;++n)s[n].apply(this,e)}return this};ve.prototype.emitReserved=ve.prototype.emit;ve.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ve.prototype.hasListeners=function(t){return!!this.listeners(t).length};const fa=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),ct=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ck="arraybuffer";function kx(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const dk=ct.setTimeout,uk=ct.clearTimeout;function ma(t,e){e.useNativeTimers?(t.setTimeoutFn=dk.bind(ct),t.clearTimeoutFn=uk.bind(ct)):(t.setTimeoutFn=ct.setTimeout.bind(ct),t.clearTimeoutFn=ct.clearTimeout.bind(ct))}const hk=1.33;function fk(t){return typeof t=="string"?mk(t):Math.ceil((t.byteLength||t.size)*hk)}function mk(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function Sx(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function pk(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function xk(t){let e={},s=t.split("&");for(let n=0,i=s.length;n<i;n++){let l=s[n].split("=");e[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return e}class gk extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class Qd extends ve{constructor(e){super(),this.writable=!1,ma(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new gk(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=Yd(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=pk(e);return s.length?"?"+s:""}}class yk extends Qd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ik(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,rk(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Sx()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let Cx=!1;try{Cx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const vk=Cx;function bk(){}class Nk extends yk{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(i,l)=>{this.onError("xhr post error",i,l)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class Rt extends ve{constructor(e,s,n){super(),this.createRequest=e,ma(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=kx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Rt.requestsCount++,Rt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=bk,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Rt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Rt.requestsCount=0;Rt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Uf);else if(typeof addEventListener=="function"){const t="onpagehide"in ct?"pagehide":"unload";addEventListener(t,Uf,!1)}}function Uf(){for(let t in Rt.requests)Rt.requests.hasOwnProperty(t)&&Rt.requests[t].abort()}const wk=function(){const t=Ex({xdomain:!1});return t&&t.responseType!==null}();class jk extends Nk{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=wk&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Rt(Ex,this.uri(),e)}}function Ex(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||vk))return new XMLHttpRequest}catch{}if(!e)try{return new ct[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const _x=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class kk extends Qd{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=_x?{}:kx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;Xd(n,this.supportsBinary,l=>{try{this.doWrite(n,l)}catch{}i&&fa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Sx()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const po=ct.WebSocket||ct.MozWebSocket;class Sk extends kk{createSocket(e,s,n){return _x?new po(e,s,n):s?new po(e,s):new po(e)}doWrite(e,s){this.ws.send(s)}}class Ck extends Qd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=ak(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),i=lk();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const l=()=>{n.read().then(({done:o,value:c})=>{o||(this.onPacket(c),l())}).catch(o=>{})};l();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;this._writer.write(n).then(()=>{i&&fa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ek={websocket:Sk,webtransport:Ck,polling:jk},_k=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Pk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ec(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let i=_k.exec(t||""),l={},a=14;for(;a--;)l[Pk[a]]=i[a]||"";return s!=-1&&n!=-1&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Tk(l,l.path),l.queryKey=Lk(l,l.query),l}function Tk(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Lk(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,l){i&&(s[i]=l)}),s}const _c=typeof addEventListener=="function"&&typeof removeEventListener=="function",rl=[];_c&&addEventListener("offline",()=>{rl.forEach(t=>t())},!1);class ys extends ve{constructor(e,s){if(super(),this.binaryType=ck,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Ec(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Ec(s.host).host);ma(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=xk(this.opts.query)),_c&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},rl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=jx,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ys.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",ys.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(s+=fk(i)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,fa(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,i){if(typeof s=="function"&&(i=s,s=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const l={type:e,data:s,options:n};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(ys.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),_c&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=rl.indexOf(this._offlineEventListener);n!==-1&&rl.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}ys.protocol=jx;class Mk extends ys{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;ys.priorWebsocketSuccess=!1;const i=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;ys.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function l(){n||(n=!0,u(),s.close(),s=null)}const a=h=>{const f=new Error("probe error: "+h);f.transport=s.name,l(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function c(){a("socket closed")}function d(h){s&&h.name!==s.name&&l()}const u=()=>{s.removeListener("open",i),s.removeListener("error",a),s.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};s.once("open",i),s.once("error",a),s.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let zk=class extends Mk{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>Ek[i]).filter(i=>!!i)),super(e,n)}};function Rk(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Ec(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const l=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+l+":"+n.port+e,n.href=n.protocol+"://"+l+(s&&s.port===n.port?"":":"+n.port),n}const Ok=typeof ArrayBuffer=="function",Ak=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Px=Object.prototype.toString,$k=typeof Blob=="function"||typeof Blob<"u"&&Px.call(Blob)==="[object BlobConstructor]",Ik=typeof File=="function"||typeof File<"u"&&Px.call(File)==="[object FileConstructor]";function Jd(t){return Ok&&(t instanceof ArrayBuffer||Ak(t))||$k&&t instanceof Blob||Ik&&t instanceof File}function il(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(il(t[s]))return!0;return!1}if(Jd(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return il(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&il(t[s]))return!0;return!1}function Bk(t){const e=[],s=t.data,n=t;return n.data=Pc(s,e),n.attachments=e.length,{packet:n,buffers:e}}function Pc(t,e){if(!t)return t;if(Jd(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=Pc(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=Pc(t[n],e));return s}return t}function Fk(t,e){return t.data=Tc(t.data,e),delete t.attachments,t}function Tc(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Tc(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Tc(t[s],e));return t}const Tx=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Uk=5;var Y;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Y||(Y={}));class Dk{constructor(e){this.replacer=e}encode(e){return(e.type===Y.EVENT||e.type===Y.ACK)&&il(e)?this.encodeAsBinary({type:e.type===Y.EVENT?Y.BINARY_EVENT:Y.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===Y.BINARY_EVENT||e.type===Y.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=Bk(e),n=this.encodeAsString(s.packet),i=s.buffers;return i.unshift(n),i}}class Gd extends ve{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===Y.BINARY_EVENT;n||s.type===Y.BINARY_ACK?(s.type=n?Y.EVENT:Y.ACK,this.reconstructor=new Vk(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Jd(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(Y[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Y.BINARY_EVENT||n.type===Y.BINARY_ACK){const l=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const a=e.substring(l,s);if(a!=Number(a)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(s+1)==="/"){const l=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(l,s)}else n.nsp="/";const i=e.charAt(s+1);if(i!==""&&Number(i)==i){const l=s+1;for(;++s;){const a=e.charAt(s);if(a==null||Number(a)!=a){--s;break}if(s===e.length)break}n.id=Number(e.substring(l,s+1))}if(e.charAt(++s)){const l=this.tryParse(e.substr(s));if(Gd.isPayloadValid(n.type,l))n.data=l;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case Y.CONNECT:return Il(s);case Y.DISCONNECT:return s===void 0;case Y.CONNECT_ERROR:return typeof s=="string"||Il(s);case Y.EVENT:case Y.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Tx.indexOf(s[0])===-1);case Y.ACK:case Y.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vk{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=Fk(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Wk(t){return typeof t=="string"}const Hk=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function qk(t){return t===void 0||Hk(t)}function Il(t){return Object.prototype.toString.call(t)==="[object Object]"}function Kk(t,e){switch(t){case Y.CONNECT:return e===void 0||Il(e);case Y.DISCONNECT:return e===void 0;case Y.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Tx.indexOf(e[0])===-1);case Y.ACK:return Array.isArray(e);case Y.CONNECT_ERROR:return typeof e=="string"||Il(e);default:return!1}}function Xk(t){return Wk(t.nsp)&&qk(t.id)&&Kk(t.type,t.data)}const Yk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gd,Encoder:Dk,get PacketType(){return Y},isPacketValid:Xk,protocol:Uk},Symbol.toStringTag,{value:"Module"}));function gt(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Qk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Lx extends ve{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[gt(e,"open",this.onopen.bind(this)),gt(e,"packet",this.onpacket.bind(this)),gt(e,"error",this.onerror.bind(this)),gt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,i,l;if(Qk.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:Y.EVENT,data:s};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,h=s.pop();this._registerAckCallback(u,h),a.id=u}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,s){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=s;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);s.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(l),s.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...s){return new Promise((n,i)=>{const l=(a,o)=>a?i(a):n(o);l.withError=!0,s.push(l),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...l)=>(this._queue[0],i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(i)):(this._queue.shift(),s&&s(null,...l)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Y.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Y.EVENT:case Y.BINARY_EVENT:this.onevent(e);break;case Y.ACK:case Y.BINARY_ACK:this.onack(e);break;case Y.DISCONNECT:this.ondisconnect();break;case Y.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...i){n||(n=!0,s.packet({type:Y.ACK,id:e,data:i}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function Yn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Yn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+s:t-s}return Math.min(t,this.max)|0};Yn.prototype.reset=function(){this.attempts=0};Yn.prototype.setMin=function(t){this.ms=t};Yn.prototype.setMax=function(t){this.max=t};Yn.prototype.setJitter=function(t){this.jitter=t};class Lc extends ve{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ma(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Yn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const i=s.parser||Yk;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new zk(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=gt(s,"open",function(){n.onopen(),e&&e()}),l=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=gt(s,"error",l);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),l(new Error("timeout")),s.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(gt(e,"ping",this.onping.bind(this)),gt(e,"data",this.ondata.bind(this)),gt(e,"error",this.onerror.bind(this)),gt(e,"close",this.onclose.bind(this)),gt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){fa(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Lx(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const lr={};function ll(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=Rk(t,e.path||"/socket.io"),n=s.source,i=s.id,l=s.path,a=lr[i]&&l in lr[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Lc(n,e):(lr[i]||(lr[i]=new Lc(n,e)),c=lr[i]),s.query&&!e.query&&(e.query=s.queryKey),c.socket(s.path,e)}Object.assign(ll,{Manager:Lc,Socket:Lx,io:ll,connect:ll});const Jk=()=>{var Q,W,K,Ce,Ge,Yt,Qt,rn;const{user:t,logoutUser:e}=ce(),s=sn(),[n,i]=N.useState(null),[l,a]=N.useState(null),[o,c]=N.useState("positions"),[d,u]=N.useState(!1),[h,f]=N.useState("quotes"),[y,m]=N.useState(!1),[x,b]=N.useState("buy"),[p,g]=N.useState(!1),[v,j]=N.useState(null),[k,S]=N.useState(!1),[w,C]=N.useState(!1),[T,M]=N.useState(!1),[R,E]=N.useState({}),[_,O]=N.useState({}),[I,U]=N.useState(0),ae=()=>U(te=>te+1);N.useEffect(()=>{const Me=ll("https://thefx.live");return Me.on("connect",()=>{console.log("Socket.IO connected for real-time ticks")}),Me.on("market_tick",Es=>{O(ze=>({...ze,...Es}));const St=Object.values(Es).find(ze=>ze.symbol==="NIFTY 50"||ze.symbol==="NIFTY"),Ne=Object.values(Es).find(ze=>ze.symbol==="NIFTY BANK"||ze.symbol==="BANKNIFTY"),di=Object.values(Es).find(ze=>ze.symbol==="NIFTY FIN SERVICE"||ze.symbol==="FINNIFTY");(St||Ne||di)&&E(ze=>({nifty:St||ze.nifty,banknifty:Ne||ze.banknifty,finnifty:di||ze.finnifty}))}),()=>Me.disconnect()},[]),N.useEffect(()=>{V(),B();const te=setInterval(B,3e3);return()=>clearInterval(te)},[]);const B=async()=>{try{const{data:te}=await z.get("/api/zerodha/market-data");if(te&&Object.keys(te).length>0){console.log(`Received ${Object.keys(te).length} market data entries`),O(Ne=>({...Ne,...te}));const Me=Object.values(te).find(Ne=>Ne.symbol==="NIFTY 50"||Ne.symbol==="NIFTY"),Es=Object.values(te).find(Ne=>Ne.symbol==="NIFTY BANK"||Ne.symbol==="BANKNIFTY"),St=Object.values(te).find(Ne=>Ne.symbol==="NIFTY FIN SERVICE"||Ne.symbol==="FINNIFTY");E({nifty:Me||null,banknifty:Es||null,finnifty:St||null})}}catch{}},V=async()=>{try{const{data:te}=await z.get("/api/user/wallet",{headers:{Authorization:`Bearer ${t.token}`}});a(te)}catch(te){console.error("Error fetching wallet:",te)}},L=()=>{e(),s("/login")},F=(te,Me=null)=>{Me&&i(Me),b(te),m(!0)},H=(te,Me)=>{j(Me),b(te)};return r.jsxs("div",{className:"h-screen bg-dark-900 flex flex-col overflow-hidden",children:[r.jsxs("header",{className:"bg-dark-800 border-b border-dark-600 px-4 py-2 hidden md:flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-lg font-bold",children:"THEFX"})}),r.jsxs("div",{className:"hidden lg:flex items-center gap-6 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"NIFTY"}),R.nifty?r.jsxs("span",{className:`ml-2 ${R.nifty.change>=0?"text-green-400":"text-red-400"}`,children:[(Q=R.nifty.ltp)==null?void 0:Q.toLocaleString(),r.jsxs("span",{className:"text-xs ml-1",children:["(",R.nifty.change>=0?"+":"",R.nifty.changePercent,"%)"]})]}):r.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"BANKNIFTY"}),R.banknifty?r.jsxs("span",{className:`ml-2 ${R.banknifty.change>=0?"text-green-400":"text-red-400"}`,children:[(W=R.banknifty.ltp)==null?void 0:W.toLocaleString(),r.jsxs("span",{className:"text-xs ml-1",children:["(",R.banknifty.change>=0?"+":"",R.banknifty.changePercent,"%)"]})]}):r.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"FINNIFTY"}),R.finnifty?r.jsxs("span",{className:`ml-2 ${R.finnifty.change>=0?"text-green-400":"text-red-400"}`,children:[(K=R.finnifty.ltp)==null?void 0:K.toLocaleString(),r.jsxs("span",{className:"text-xs ml-1",children:["(",R.finnifty.change>=0?"+":"",R.finnifty.changePercent,"%)"]})]}):r.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]})]})]}),r.jsx("div",{className:"flex-1 max-w-md mx-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search Instruments",className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-1.5 text-sm focus:outline-none focus:border-green-500"})]})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 bg-dark-700 hover:bg-dark-600 px-3 py-1.5 rounded-lg transition-colors",children:[r.jsx(Vt,{size:18,className:"text-green-400"}),r.jsxs("span",{className:"text-green-400 font-medium",children:["",((Ge=(Ce=l==null?void 0:l.wallet)==null?void 0:Ce.balance)==null?void 0:Ge.toLocaleString())||"0"]}),r.jsx(Ks,{size:14,className:"text-gray-400"})]}),r.jsx("button",{onClick:()=>M(!0),className:"text-gray-400 hover:text-white",children:r.jsx(In,{size:20})}),r.jsx("button",{onClick:()=>C(!0),className:"text-gray-400 hover:text-white",children:r.jsx(gs,{size:20})}),r.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm",children:[r.jsx(YN,{size:18,className:"text-gray-400"}),r.jsx("span",{children:t==null?void 0:t.username})]}),r.jsx("button",{onClick:L,className:"text-red-400 hover:text-red-300",children:r.jsx(qr,{size:20})})]})]}),r.jsxs("header",{className:"bg-dark-800 border-b border-dark-600 px-4 py-3 flex md:hidden items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-lg font-bold",children:"THEFX"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{className:"text-gray-400 hover:text-white",children:r.jsx(Xs,{size:20})}),r.jsx("button",{onClick:()=>M(!0),className:"text-gray-400 hover:text-white",children:r.jsx(In,{size:20})}),r.jsx("button",{onClick:()=>g(!p),className:"text-gray-400 hover:text-white",children:r.jsx(V0,{size:20})})]})]}),p&&r.jsxs("div",{className:"md:hidden absolute top-14 right-2 bg-dark-700 rounded-lg shadow-xl z-50 py-2 min-w-[200px]",onClick:te=>te.stopPropagation(),children:[r.jsxs("div",{className:"px-4 py-2 border-b border-dark-600",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Logged in as"}),r.jsx("p",{className:"font-medium",children:t==null?void 0:t.username})]}),r.jsxs("div",{className:"px-4 py-2 border-b border-dark-600",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Balance"}),r.jsxs("p",{className:"font-medium text-green-400",children:["",((Yt=l==null?void 0:l.cashBalance)==null?void 0:Yt.toLocaleString())||((rn=(Qt=l==null?void 0:l.wallet)==null?void 0:Qt.balance)==null?void 0:rn.toLocaleString())||"0"]})]}),r.jsxs("button",{onClick:()=>{S(!0),g(!1)},className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2 text-green-400",children:[r.jsx(Vt,{size:18})," Add Funds"]}),r.jsxs("button",{onClick:()=>{C(!0),g(!1)},className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2",children:[r.jsx(gs,{size:18})," Settings"]}),r.jsxs("button",{onClick:L,className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2 text-red-400",children:[r.jsx(qr,{size:18})," Logout"]}),r.jsx("button",{onClick:()=>g(!1),className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center justify-center gap-2 text-gray-400 border-t border-dark-600 mt-2",children:"Close"})]}),r.jsxs("div",{className:"flex-1 hidden md:flex overflow-hidden",children:[r.jsx(Gk,{selectedInstrument:n,onSelectInstrument:i,onBuySell:d?H:F,quickMode:d,user:t,marketData:_}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(eS,{selectedInstrument:n,marketData:_}),r.jsx(tS,{activeTab:o,setActiveTab:c,quickMode:d,setQuickMode:u,walletData:l,user:t,marketData:_,refreshKey:I})]}),d&&v?r.jsx(nS,{instrument:v,orderType:x,setOrderType:b,walletData:l,onClose:()=>j(null),user:t,marketData:_,onRefreshWallet:V,onRefreshPositions:ae}):r.jsx(sS,{walletData:l,onOpenWallet:()=>S(!0),user:t,marketData:_})]}),r.jsxs("div",{className:"flex-1 flex flex-col md:hidden overflow-hidden",children:[h==="quotes"&&r.jsx(rS,{selectedInstrument:n,onSelectInstrument:te=>{i(te),f("chart")},onBuySell:F,user:t,marketData:_}),h==="chart"&&r.jsx(iS,{selectedInstrument:n,onBuySell:F,onBack:()=>f("quotes"),marketData:_}),h==="positions"&&r.jsx(Vf,{activeTab:"positions",user:t,marketData:_}),h==="history"&&r.jsx(Vf,{activeTab:"history",user:t,marketData:_}),h==="profile"&&r.jsx(aS,{user:t,walletData:l,onLogout:L})]}),r.jsxs("nav",{className:"md:hidden bg-dark-800 border-t border-dark-600 flex items-center justify-around py-2 safe-area-bottom",children:[r.jsxs("button",{onClick:()=>f("quotes"),className:`flex flex-col items-center p-2 ${h==="quotes"?"text-green-400":"text-gray-400"}`,children:[r.jsx(D0,{size:20}),r.jsx("span",{className:"text-xs mt-1",children:"Quotes"})]}),r.jsxs("button",{onClick:()=>f("chart"),className:`flex flex-col items-center p-2 ${h==="chart"?"text-green-400":"text-gray-400"}`,children:[r.jsx(Od,{size:20}),r.jsx("span",{className:"text-xs mt-1",children:"Chart"})]}),r.jsxs("button",{onClick:()=>F("buy"),className:"flex flex-col items-center p-2 bg-green-600 rounded-full -mt-4 px-4",children:[r.jsx(TrendingUp,{size:24}),r.jsx("span",{className:"text-xs mt-1",children:"Trade"})]}),r.jsxs("button",{onClick:()=>f("positions"),className:`flex flex-col items-center p-2 ${h==="positions"?"text-green-400":"text-gray-400"}`,children:[r.jsx(Vt,{size:20}),r.jsx("span",{className:"text-xs mt-1",children:"Positions"})]}),r.jsxs("button",{onClick:()=>f("profile"),className:`flex flex-col items-center p-2 ${h==="profile"?"text-green-400":"text-gray-400"}`,children:[r.jsx(F0,{size:20}),r.jsx("span",{className:"text-xs mt-1",children:"Profile"})]})]}),y&&r.jsx(uS,{instrument:n,orderType:x,setOrderType:b,onClose:()=>m(!1),walletData:l,user:t,marketData:_,onRefreshWallet:V,onRefreshPositions:ae}),k&&r.jsx(dS,{onClose:()=>S(!1),walletData:l,user:t,onRefresh:V}),w&&r.jsx(cS,{onClose:()=>C(!1),user:t}),T&&r.jsx(oS,{onClose:()=>M(!1),user:t})]})},Gk=({selectedInstrument:t,onSelectInstrument:e,onBuySell:s,quickMode:n,user:i,marketData:l={}})=>{const[a,o]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState("NSE"),[f,y]=N.useState(()=>{const L=localStorage.getItem("ntrader_watchlist");return L?JSON.parse(L):["NIFTY 50","NIFTY BANK","SBIN","RELIANCE"]}),[m,x]=N.useState({}),[b,p]=N.useState([]),[g,v]=N.useState(!0),[j,k]=N.useState([]),[S,w]=N.useState(!1),C=N.useRef(null),T=[{id:"NSE",label:"NSE",color:"bg-green-600"},{id:"NSE_FO",label:"NSE F&O",color:"bg-dark-600"},{id:"MCX",label:"MCX",color:"bg-dark-600"},{id:"BSE_FO",label:"BSE F&O",color:"bg-dark-600"},{id:"Currency",label:"Currency",color:"bg-dark-600"},{id:"Crypto",label:"Crypto",color:"bg-dark-600"}],M={connected:Object.keys(l).length>0,lastUpdate:Object.keys(l).length>0?new Date:null};N.useEffect(()=>{const L=setTimeout(()=>{d(a)},150);return()=>clearTimeout(L)},[a]),N.useEffect(()=>{if(c.length>=1){w(!0);const L=c.toLowerCase(),F=b.filter(H=>{var Q,W,K;return((Q=H.symbol)==null?void 0:Q.toLowerCase().includes(L))||((W=H.name)==null?void 0:W.toLowerCase().includes(L))||((K=H.category)==null?void 0:K.toLowerCase().includes(L))}).slice(0,50);k(F),w(!1)}else k([])},[c,b]),N.useEffect(()=>{R()},[i==null?void 0:i.token]);const R=async()=>{try{v(!0);const L=i!=null&&i.token?"/api/instruments/user":"/api/instruments/public",F=i!=null&&i.token?{Authorization:`Bearer ${i.token}`}:{},{data:H}=await z.get(L,{headers:F});p(H||[])}catch(L){console.error("Error fetching instruments:",L);try{const{data:F}=await z.get("/api/instruments/public");p(F||[])}catch(F){console.error("Fallback also failed:",F)}}finally{v(!1)}};N.useEffect(()=>{E();const L=setInterval(E,5e3);return()=>clearInterval(L)},[]);const E=async()=>{try{const{data:L}=await z.get("/api/binance/prices");x(L)}catch{}};N.useEffect(()=>{localStorage.setItem("ntrader_watchlist",JSON.stringify(f))},[f]);const _=(L,F,H)=>{if(H!=null&&H.isDemo){const Q=(Math.random()-.5)*.02*H.mockPrice;return{ltp:H.mockPrice+Q,change:H.mockChange,changePercent:H.mockChange}}return F&&m[F]?m[F]:L&&l[L]?l[L]:{ltp:0,change:0,changePercent:0}},O=L=>{f.includes(L)||y([...f,L])},I=L=>{y(f.filter(F=>F!==L))},U=L=>f.includes(L),ae=()=>b.length>0?b.map(L=>({...L,symbol:L.symbol,name:L.name,exchange:L.exchange,token:L.token,segment:L.segment,instrumentType:L.instrumentType,category:L.category,lotSize:L.lotSize||1})):[],V=(()=>{const L=ae(),F=a.toLowerCase();let H=L;switch(F&&(H=L.filter(Q=>{var W,K;return((W=Q.symbol)==null?void 0:W.toLowerCase().includes(F))||((K=Q.name)==null?void 0:K.toLowerCase().includes(F))})),u){case"NSE":return H.filter(W=>W.exchange==="NSE"&&(W.instrumentType==="INDEX"||W.instrumentType==="STOCK"||W.segment==="EQUITY")||W.category==="INDICES"||W.category==="STOCKS");case"NSE_FO":return H.filter(W=>(W.exchange==="NFO"||W.segment==="FNO"||W.segment==="NFO")&&(W.instrumentType==="FUTURES"||W.instrumentType==="OPTIONS"));case"MCX":return H.filter(W=>W.exchange==="MCX"||W.segment==="MCX"||W.category==="MCX");case"BSE_FO":return H.filter(W=>W.exchange==="BFO"||W.segment==="BFO"||W.exchange==="BSE");case"Currency":return H.filter(W=>W.exchange==="CDS"||W.segment==="CURRENCY"||W.category==="CURRENCY");case"Crypto":const Q=H.filter(W=>W.isCrypto||W.segment==="CRYPTO"||W.category==="CRYPTO");if(Object.keys(m).length>0){const W=Object.values(m).map(K=>({symbol:K.symbol,name:K.pair,exchange:"BINANCE",token:K.pair,pair:K.pair,segment:"CRYPTO",category:"CRYPTO",instrumentType:"CRYPTO",isCrypto:!0,ltp:K.ltp,change:K.change,changePercent:K.changePercent}));return[...Q,...W.filter(K=>!F||K.symbol.toLowerCase().includes(F)||K.name.toLowerCase().includes(F))]}return Q;default:return H}})();return r.jsxs("aside",{className:"w-72 bg-dark-800 border-r border-dark-600 flex flex-col",children:[r.jsxs("div",{className:"px-3 py-2 border-b border-dark-600 flex items-center justify-between text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${M.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),r.jsx("span",{className:M.connected?"text-green-400":"text-red-400",children:M.connected?"Live":"Offline"})]}),M.connected&&M.lastUpdate&&r.jsx("span",{className:"text-gray-500",children:new Date(M.lastUpdate).toLocaleTimeString()})]}),r.jsx("div",{className:"flex flex-wrap gap-1 p-2 border-b border-dark-600",children:T.map(L=>r.jsx("button",{onClick:()=>h(L.id),className:`px-3 py-1.5 text-xs font-medium rounded transition ${u===L.id?"bg-green-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600 hover:text-white"}`,children:L.label},L.id))}),r.jsx("div",{className:"p-2 border-b border-dark-600",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),r.jsx("input",{ref:C,type:"text",placeholder:"Search symbols...",value:a,onChange:L=>o(L.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded pl-9 pr-8 py-2 text-sm focus:outline-none focus:border-green-500"}),a&&r.jsx("button",{onClick:()=>{var L;o(""),(L=C.current)==null||L.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:r.jsx(be,{size:14})})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:g?r.jsxs("div",{className:"p-4 text-center text-gray-400",children:[r.jsx(ne,{className:"animate-spin inline mr-2",size:16}),"Loading instruments..."]}):V.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[r.jsx("p",{children:"No instruments found"}),r.jsx("p",{className:"mt-2 text-xs",children:u==="Crypto"?"Loading crypto from Binance...":"Try a different segment or search"})]}):V.map(L=>{const F=L.isCrypto?L:_(L.token,L.pair,L);return r.jsx(Zk,{instrument:{...L,ltp:F.ltp||L.ltp||0,change:F.change||L.change||0,changePercent:F.changePercent||L.changePercent||0},isSelected:(t==null?void 0:t.symbol)===L.symbol,onSelect:()=>e({...L,ltp:F.ltp||L.ltp||0}),quickMode:n,onBuySell:s,inWatchlist:U(L.symbol),onAddToWatchlist:()=>O(L.symbol),onRemoveFromWatchlist:()=>I(L.symbol),isCrypto:L.isCrypto,isDemo:L.isDemo},L._id||L.pair||`${L.exchange}-${L.symbol}`)})})]})},Zk=({instrument:t,isSelected:e,onSelect:s,isCall:n,isPut:i,isFuture:l,isCrypto:a,isDemo:o,quickMode:c,onBuySell:d,inWatchlist:u,onRemoveFromWatchlist:h,onAddToWatchlist:f})=>{const[y,m]=N.useState(!1),x=()=>o?"text-purple-400":a?"text-orange-400":n||t.optionType==="CE"?"text-green-400":i||t.optionType==="PE"?"text-red-400":l||t.instrumentType==="FUTURES"?"text-yellow-400":"text-white",b=v=>!v||v<=0?"-":a||t.isCrypto?`$${v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:v.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),p=parseFloat(t.changePercent)||0,g=p>=0;return r.jsxs("div",{onClick:s,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:`flex items-center justify-between px-4 py-3 cursor-pointer border-b border-dark-700 ${e?"bg-dark-700":"hover:bg-dark-750"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`font-bold text-sm uppercase ${x()}`,children:t.symbol}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:t.name||t.symbol})]}),r.jsxs("div",{className:"text-right flex-shrink-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-300",children:b(t.ltp)||"-"}),r.jsx("div",{className:`text-xs font-medium ${g?"text-green-500":"text-red-500"}`,children:p!==0?`${g?"+":""}${p.toFixed(2)}%`:"+0.00%"})]}),y&&r.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[r.jsx("button",{onClick:v=>{v.stopPropagation(),d("sell",t)},className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 rounded font-medium",children:"S"}),r.jsx("button",{onClick:v=>{v.stopPropagation(),d("buy",t)},className:"px-2 py-1 text-xs bg-green-600 hover:bg-green-700 rounded font-medium",children:"B"})]})]})},eS=({selectedInstrument:t,marketData:e})=>{var v,j,k,S,w;const s=N.useRef(null),n=N.useRef(null),i=N.useRef(null),l=N.useRef(null),[a,o]=N.useState("FIFTEEN_MINUTE"),[c,d]=N.useState(!1),[u,h]=N.useState(null),f=N.useRef(null);N.useEffect(()=>{if(t!=null&&t.token&&e[t.token]){const C=e[t.token];if(h({ltp:C.ltp,open:C.open,high:C.high,low:C.low,close:C.close,change:C.change,changePercent:C.changePercent}),i.current&&f.current&&C.ltp){const T=Math.floor(Date.now()/1e3),M=y(a),R=Math.floor(T/M)*M;if(f.current.time===R){const E={time:R,open:f.current.open,high:Math.max(f.current.high,C.ltp),low:Math.min(f.current.low,C.ltp),close:C.ltp};f.current=E,i.current.update(E)}else{const E={time:R,open:C.ltp,high:C.ltp,low:C.ltp,close:C.ltp};f.current=E,i.current.update(E)}}}},[t==null?void 0:t.token,e,a]);const y=C=>({ONE_MINUTE:60,FIVE_MINUTE:300,FIFTEEN_MINUTE:900,THIRTY_MINUTE:1800,ONE_HOUR:3600,ONE_DAY:86400})[C]||900,m=C=>({ONE_MINUTE:"1m",FIVE_MINUTE:"5m",FIFTEEN_MINUTE:"15m",THIRTY_MINUTE:"30m",ONE_HOUR:"1h",ONE_DAY:"1d"})[C]||"15m",x=C=>{const T=[],M=Math.floor(Date.now()/1e3);for(let R=500;R>=0;R--){const E=M-R*900,_=C*.02,O=C+(Math.random()-.5)*_,I=O+(Math.random()-.5)*_,U=Math.max(O,I)+Math.random()*_*.5,ae=Math.min(O,I)-Math.random()*_*.5;T.push({time:E,open:O,high:U,low:ae,close:I,volume:Math.random()*1e5})}return T},b=async(C,T)=>{if(!C)return null;try{if(d(!0),C.isDemo)return x(C.mockPrice||1e3);if(C.isCrypto||C.exchange==="BINANCE"){const R=m(T),{data:E}=await z.get(`/api/binance/candles/${C.pair||C.symbol}`,{params:{interval:R,limit:500}});return E}if(!C.token)return Wf();try{const{data:R}=await z.get(`/api/zerodha/historical/${C.token}`,{params:{interval:T}});if(R&&R.length>0)return R}catch{console.log("Zerodha historical not available, using sample data")}const M=C.ltp||100;return x(M)}catch(M){return console.error("Failed to fetch candle data:",M),Wf()}finally{d(!1)}},p=async()=>{if(t)try{if(t.isDemo){const T=(Math.random()-.5)*.02*t.mockPrice;h({ltp:t.mockPrice+T,open:t.mockPrice*.99,high:t.mockPrice*1.02,low:t.mockPrice*.98,close:t.mockPrice,change:t.mockChange,changePercent:t.mockChange});return}if(t.isCrypto||t.exchange==="BINANCE"){const{data:T}=await z.get(`/api/binance/price/${t.pair||t.symbol}`);h(T);return}if(!t.token)return;const{data:C}=await z.get("/api/zerodha/market-data");C[t.token]&&h(C[t.token])}catch(C){console.error("Failed to fetch live price:",C)}};N.useEffect(()=>{if(!s.current)return;const C=gx(s.current,{layout:{background:{color:"#111111"},textColor:"#d1d5db"},grid:{vertLines:{color:"#1f1f1f"},horzLines:{color:"#1f1f1f"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2a2a"},timeScale:{borderColor:"#2a2a2a",timeVisible:!0,secondsVisible:!1}});n.current=C,i.current=C.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#22c55e",wickDownColor:"#ef4444",wickUpColor:"#22c55e"}),l.current=C.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""}),C.priceScale("").applyOptions({scaleMargins:{top:.8,bottom:0}});const T=()=>{s.current&&C.applyOptions({width:s.current.clientWidth,height:s.current.clientHeight})};return window.addEventListener("resize",T),T(),()=>{window.removeEventListener("resize",T),C.remove()}},[]),N.useEffect(()=>{(async()=>{var R;if(!t||!i.current)return;const M=await b(t,a);if(M&&M.length>0){i.current.setData(M);const E=M.map(_=>({time:_.time,value:_.volume||Math.random()*1e6,color:_.close>=_.open?"#22c55e80":"#ef444480"}));l.current.setData(E),(R=n.current)==null||R.timeScale().fitContent()}})(),p();const T=setInterval(p,5e3);return()=>clearInterval(T)},[t,a]);const g=[{label:"1m",value:"ONE_MINUTE"},{label:"5m",value:"FIVE_MINUTE"},{label:"15m",value:"FIFTEEN_MINUTE"},{label:"30m",value:"THIRTY_MINUTE"},{label:"1h",value:"ONE_HOUR"},{label:"1D",value:"ONE_DAY"}];return r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-dark-600",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Chart"}),c&&r.jsx(ne,{size:14,className:"animate-spin text-green-400"})]}),t&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`font-medium ${t.isDemo?"text-purple-400":t.isCrypto?"text-orange-400":"text-green-400"}`,children:[t.symbol,t.isDemo&&r.jsx("span",{className:"ml-1 text-xs bg-purple-600 px-1 rounded",children:"DEMO"})]}),r.jsx("span",{className:"text-gray-400 text-sm",children:t.exchange}),u&&r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:`font-mono font-bold ${u.change>=0?"text-green-400":"text-red-400"}`,children:[t.isCrypto?"$":"",(v=u.ltp)==null?void 0:v.toLocaleString(void 0,t.isCrypto?{minimumFractionDigits:2,maximumFractionDigits:2}:{})]}),r.jsxs("span",{className:`text-sm ${u.change>=0?"text-green-400":"text-red-400"}`,children:[u.change>=0?"+":"",u.changePercent,"%"]})]})]})]}),t&&u&&r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[r.jsxs("span",{children:["O: ",t.isCrypto?"$":"",(j=u.open)==null?void 0:j.toLocaleString()]}),r.jsxs("span",{children:["H: ",t.isCrypto?"$":"",(k=u.high)==null?void 0:k.toLocaleString()]}),r.jsxs("span",{children:["L: ",t.isCrypto?"$":"",(S=u.low)==null?void 0:S.toLocaleString()]}),r.jsxs("span",{children:["C: ",t.isCrypto?"$":"",(w=u.close)==null?void 0:w.toLocaleString()]})]})]}),r.jsx("div",{className:"flex-1 relative",children:t?r.jsx("div",{ref:s,className:"w-full h-full"}):r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[r.jsx(Od,{size:48,className:"mb-4 opacity-30"}),r.jsx("p",{children:"Select an instrument to view chart"})]})}),t&&r.jsx("div",{className:"flex items-center gap-2 px-4 py-2 border-t border-dark-600 text-sm",children:g.map(C=>r.jsx("button",{onClick:()=>o(C.value),className:`px-3 py-1 rounded ${a===C.value?"bg-green-600 text-white":"hover:bg-dark-600 text-gray-400 hover:text-white"}`,children:C.label},C.value))})]})},tS=({activeTab:t,setActiveTab:e,quickMode:s,setQuickMode:n,walletData:i,user:l,marketData:a,refreshKey:o})=>{const[c,d]=N.useState([]),[u,h]=N.useState([]),[f,y]=N.useState([]),[m,x]=N.useState(!1),[b,p]=N.useState(0);N.useEffect(()=>{if(l!=null&&l.token){g();const w=setInterval(g,2e3);return()=>clearInterval(w)}},[l==null?void 0:l.token,o]);const g=async()=>{try{const w={Authorization:`Bearer ${l.token}`},[C,T,M]=await Promise.all([z.get("/api/trading/positions?status=OPEN",{headers:w}),z.get("/api/trading/pending-orders",{headers:w}),z.get("/api/trading/history",{headers:w})]);d(C.data||[]),h(T.data||[]),y(M.data||[]);const R=(C.data||[]).reduce((E,_)=>E+(_.unrealizedPnL||0),0);p(R)}catch(w){console.error("Error fetching positions:",w)}},v=async(w,C)=>{var T,M;try{x(!0);const R=a[C==null?void 0:C.token]||{},E=R.bid||R.ltp||(C==null?void 0:C.currentPrice),_=R.ask||R.ltp||(C==null?void 0:C.currentPrice);await z.post(`/api/trading/close/${w}`,{bidPrice:E,askPrice:_},{headers:{Authorization:`Bearer ${l.token}`}}),g()}catch(R){alert(((M=(T=R.response)==null?void 0:T.data)==null?void 0:M.message)||"Error closing position")}finally{x(!1)}},j=async w=>{var C,T;try{await z.post(`/api/trading/cancel/${w}`,{},{headers:{Authorization:`Bearer ${l.token}`}}),g()}catch(M){alert(((T=(C=M.response)==null?void 0:C.data)==null?void 0:T.message)||"Error cancelling order")}},k=[{id:"positions",label:"Positions",count:c.length},{id:"pending",label:"Pending",count:u.length},{id:"history",label:"History",count:f.length}],S=w=>{const C=w.token,T=w.symbol,M=w.side;let R=null;if(C&&(a!=null&&a[C]))R=a[C];else if(T&&(a!=null&&a[T]))R=a[T];else for(const[E,_]of Object.entries(a||{}))if(_.symbol===T){R=_;break}return R?M==="BUY"?R.bid||R.ltp||R.last_price||0:R.ask||R.ltp||R.last_price||0:0};return r.jsxs("div",{className:"h-48 bg-dark-800 border-t border-dark-600 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 border-b border-dark-600",children:[r.jsx("div",{className:"flex",children:k.map(w=>r.jsxs("button",{onClick:()=>e(w.id),className:`px-4 py-2 text-sm border-b-2 transition ${t===w.id?"border-green-500 text-green-400":"border-transparent text-gray-400 hover:text-white"}`,children:[w.label," (",w.count,")"]},w.id))}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Quick"}),r.jsx("button",{onClick:()=>n(!s),className:`w-10 h-5 rounded-full transition ${s?"bg-green-500":"bg-dark-600"}`,children:r.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition transform ${s?"translate-x-5":"translate-x-0.5"}`})})]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"P/L: "}),r.jsxs("span",{className:`font-medium ${b>=0?"text-green-400":"text-red-400"}`,children:[b>=0?"+":"","",b.toFixed(2)]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-8 gap-2 px-4 py-2 text-xs text-gray-400 border-b border-dark-700",children:[r.jsx("div",{children:"Symbol"}),r.jsx("div",{children:"Side"}),r.jsx("div",{className:"text-right",children:"Qty"}),r.jsx("div",{className:"text-right",children:"Entry"}),r.jsx("div",{className:"text-right",children:"LTP"}),r.jsx("div",{className:"text-right",children:"Charges"}),r.jsx("div",{className:"text-right",children:"P&L"}),r.jsx("div",{className:"text-center",children:"Action"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t==="positions"&&c.length===0&&r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No open positions"}),t==="positions"&&c.map(w=>{var M;const C=S(w)||w.currentPrice||w.entryPrice,T=w.side==="BUY"?(C-w.entryPrice)*w.quantity:(w.entryPrice-C)*w.quantity;return r.jsxs("div",{className:"grid grid-cols-8 gap-2 px-4 py-2 text-sm border-b border-dark-700 hover:bg-dark-700",children:[r.jsx("div",{className:"truncate font-medium",children:w.symbol}),r.jsx("div",{className:w.side==="BUY"?"text-green-400":"text-red-400",children:w.side}),r.jsx("div",{className:"text-right",children:w.quantity}),r.jsxs("div",{className:"text-right",children:["",(M=w.entryPrice)==null?void 0:M.toFixed(2)]}),r.jsxs("div",{className:"text-right",children:["",C==null?void 0:C.toFixed(2)]}),r.jsxs("div",{className:"text-right text-yellow-400",title:`Spread: ${w.spread||0} pts, Comm: ${w.commission||0}`,children:["",(w.commission||0).toFixed(2)]}),r.jsxs("div",{className:`text-right font-medium ${T>=0?"text-green-400":"text-red-400"}`,children:[T>=0?"+":"","",T.toFixed(2)]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>v(w._id,w),disabled:m,className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Close"})})]},w._id)}),t==="pending"&&u.length===0&&r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No pending orders"}),t==="pending"&&u.map(w=>{var C;return r.jsxs("div",{className:"grid grid-cols-8 gap-2 px-4 py-2 text-sm border-b border-dark-700 hover:bg-dark-700",children:[r.jsx("div",{className:"truncate font-medium",children:w.symbol}),r.jsx("div",{className:w.side==="BUY"?"text-green-400":"text-red-400",children:w.side}),r.jsx("div",{className:"text-right",children:w.quantity}),r.jsxs("div",{className:"text-right",children:["",((C=w.limitPrice)==null?void 0:C.toFixed(2))||"-"]}),r.jsx("div",{className:"text-right",children:"-"}),r.jsxs("div",{className:"text-right text-yellow-400",children:["",(w.commission||0).toFixed(2)]}),r.jsx("div",{className:"text-right text-gray-400",children:w.orderType}),r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>j(w._id),className:"px-2 py-1 bg-yellow-600 hover:bg-yellow-700 rounded text-xs",children:"Cancel"})})]},w._id)}),t==="history"&&f.length===0&&r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No trade history"}),t==="history"&&f.map(w=>{var C,T;return r.jsxs("div",{className:"grid grid-cols-8 gap-2 px-4 py-2 text-sm border-b border-dark-700 hover:bg-dark-700",children:[r.jsx("div",{className:"truncate font-medium",children:w.symbol}),r.jsx("div",{className:w.side==="BUY"?"text-green-400":"text-red-400",children:w.side}),r.jsx("div",{className:"text-right",children:w.quantity}),r.jsxs("div",{className:"text-right",children:["",(C=w.entryPrice)==null?void 0:C.toFixed(2)]}),r.jsxs("div",{className:"text-right",children:["",((T=w.exitPrice)==null?void 0:T.toFixed(2))||"-"]}),r.jsxs("div",{className:"text-right text-yellow-400",children:["",(w.commission||0).toFixed(2)]}),r.jsxs("div",{className:`text-right font-medium ${(w.realizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(w.realizedPnL||0)>=0?"+":"","",(w.realizedPnL||0).toFixed(2)]}),r.jsx("div",{className:"text-center text-xs text-gray-400",children:w.closeReason||"CLOSED"})]},w._id)})]})]})},sS=({walletData:t,onOpenWallet:e,user:s,marketData:n})=>{var f,y,m,x,b,p,g;const[i,l]=N.useState("wallet"),[a,o]=N.useState([]),[c,d]=N.useState([]);N.useEffect(()=>{if(s!=null&&s.token){u();const v=setInterval(u,2e3);return()=>clearInterval(v)}},[s==null?void 0:s.token]);const u=async()=>{try{const v={Authorization:`Bearer ${s.token}`},[j,k]=await Promise.all([z.get("/api/trading/positions?status=OPEN",{headers:v}),z.get("/api/trading/pending-orders",{headers:v})]);o(j.data||[]),d(k.data||[])}catch(v){console.error("Error fetching portfolio data:",v)}},h=async(v,j)=>{var k,S;try{const w=(n==null?void 0:n[j==null?void 0:j.token])||{},C=w.bid||w.ltp||(j==null?void 0:j.currentPrice),T=w.ask||w.ltp||(j==null?void 0:j.currentPrice);await z.post(`/api/trading/close/${v}`,{bidPrice:C,askPrice:T},{headers:{Authorization:`Bearer ${s.token}`}}),u()}catch(w){alert(((S=(k=w.response)==null?void 0:k.data)==null?void 0:S.message)||"Error closing position")}};return r.jsxs("aside",{className:"w-72 bg-dark-800 border-l border-dark-600 flex flex-col",children:[r.jsx("div",{className:"flex border-b border-dark-600",children:["Wallet","Positions","Orders"].map(v=>r.jsx("button",{onClick:()=>l(v.toLowerCase()),className:`flex-1 px-2 py-2 text-sm ${i===v.toLowerCase()?"bg-green-600 text-white":"text-gray-400 hover:bg-dark-700"}`,children:v},v))}),i==="wallet"&&r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-900/30 to-dark-800 border-b border-dark-600",children:[r.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Available Margin"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["",((f=t==null?void 0:t.availableMargin)==null?void 0:f.toLocaleString())||((y=t==null?void 0:t.marginAvailable)==null?void 0:y.toLocaleString())||"0"]}),(t==null?void 0:t.rmsStatus)==="BLOCKED"&&r.jsxs("div",{className:"text-xs text-red-400 mt-1",children:[" Trading Blocked: ",t==null?void 0:t.rmsBlockReason]})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Wallet Breakdown"}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Cash Balance"}),r.jsxs("span",{children:["",((m=t==null?void 0:t.cashBalance)==null?void 0:m.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Used Margin"}),r.jsxs("span",{className:"text-yellow-400",children:["",((x=t==null?void 0:t.usedMargin)==null?void 0:x.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Collateral"}),r.jsxs("span",{children:["",((b=t==null?void 0:t.collateralValue)==null?void 0:b.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"border-t border-dark-600 pt-3 mt-3",children:[r.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"P&L"}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Unrealized P&L"}),r.jsxs("span",{className:(t==null?void 0:t.unrealizedPnL)>=0?"text-green-400":"text-red-400",children:[(t==null?void 0:t.unrealizedPnL)>=0?"+":"","",((p=t==null?void 0:t.unrealizedPnL)==null?void 0:p.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Realized P&L"}),r.jsxs("span",{className:(t==null?void 0:t.realizedPnL)>=0?"text-green-400":"text-red-400",children:[(t==null?void 0:t.realizedPnL)>=0?"+":"","",((g=t==null?void 0:t.realizedPnL)==null?void 0:g.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"flex justify-between text-sm mt-2 pt-2 border-t border-dark-700",children:[r.jsx("span",{className:"text-gray-400",children:"Today's P&L"}),r.jsxs("span",{className:((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)>=0?"text-green-400":"text-red-400",children:[((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)>=0?"+":"","",(((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)).toLocaleString()]})]})]})]}),r.jsx("div",{className:"p-4 border-t border-dark-600 mt-auto",children:r.jsx("button",{onClick:e,className:"w-full bg-green-600 hover:bg-green-700 py-2 rounded text-sm transition",children:"Add Funds"})})]}),i==="positions"&&r.jsx("div",{className:"flex-1 overflow-y-auto",children:a.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center h-full",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-gray-400",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No open positions"}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Enable Quick Trade to start trading"})]}):r.jsx("div",{className:"divide-y divide-dark-600",children:a.map(v=>{var w;const j=(n==null?void 0:n[v.token])||{},k=v.side==="BUY"?j.bid||j.ltp||v.currentPrice:j.ask||j.ltp||v.currentPrice,S=v.side==="BUY"?(k-v.entryPrice)*v.quantity:(v.entryPrice-k)*v.quantity;return r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("span",{className:"font-medium text-sm",children:v.symbol}),r.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${v.side==="BUY"?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:v.side})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[r.jsxs("span",{children:["Qty: ",v.quantity]}),r.jsxs("span",{children:["Entry: ",(w=v.entryPrice)==null?void 0:w.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:`text-sm font-medium ${S>=0?"text-green-400":"text-red-400"}`,children:[S>=0?"+":"","",S.toFixed(2)]}),r.jsx("button",{onClick:()=>h(v._id,v),className:"text-xs bg-red-600 hover:bg-red-700 px-2 py-1 rounded",children:"Close"})]})]},v._id)})})}),i==="orders"&&r.jsx("div",{className:"flex-1 overflow-y-auto",children:c.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center h-full",children:[r.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:r.jsx(D0,{size:48,className:"text-gray-400"})}),r.jsx("p",{className:"text-gray-400 text-sm",children:"No pending orders"})]}):r.jsx("div",{className:"divide-y divide-dark-600",children:c.map(v=>{var j;return r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("span",{className:"font-medium text-sm",children:v.symbol}),r.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${v.side==="BUY"?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:v.side})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[r.jsxs("span",{children:["Qty: ",v.quantity]}),r.jsxs("span",{children:["Limit: ",(j=v.limitPrice)==null?void 0:j.toLocaleString()]})]}),r.jsx("div",{className:"text-xs text-yellow-400",children:"PENDING"})]},v._id)})})})]})},nS=({instrument:t,orderType:e,setOrderType:s,walletData:n,onClose:i,user:l,marketData:a={},onRefreshWallet:o,onRefreshPositions:c})=>{var Zd,eu,tu;const[d,u]=N.useState("1"),[h,f]=N.useState(""),[y,m]=N.useState(""),[x,b]=N.useState(""),[p,g]=N.useState(""),[v,j]=N.useState("MIS"),[k,S]=N.useState("MARKET"),[w,C]=N.useState(1),[T,M]=N.useState([1,2,5,10]),[R,E]=N.useState(null),[_,O]=N.useState({open:!0}),[I,U]=N.useState(!1),[ae,B]=N.useState(""),[V,L]=N.useState(""),F=(t==null?void 0:t.isCrypto)||(t==null?void 0:t.segment)==="CRYPTO"||(t==null?void 0:t.exchange)==="BINANCE",H=a[t==null?void 0:t.token]||{},Q=F?(t==null?void 0:t.ltp)||0:H.ltp||(t==null?void 0:t.ltp)||0,W=F?Q:H.bid||Q,K=F?Q:H.ask||Q,Ce=F?"$":"";N.useEffect(()=>{const q=async()=>{try{if(F){O({open:!0,reason:"Crypto markets are 24/7"});const Ze=await z.get("/api/trading/leverages",{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}});M(Ze.data.leverages||[1,2,5,10])}else{const[Ze,Jt]=await Promise.all([z.get("/api/trading/leverages",{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}}),z.get("/api/trading/market-status",{params:{exchange:(t==null?void 0:t.exchange)||"NSE"}})]);M(Ze.data.leverages||[1,2,5,10]),O(Jt.data)}}catch(Ze){console.error("Error fetching settings:",Ze)}};l!=null&&l.token&&q()},[l==null?void 0:l.token,t==null?void 0:t.exchange,F]),N.useEffect(()=>{Q&&(f(Q.toString()),m(Q.toString()))},[t==null?void 0:t.token]);const Ge=(t==null?void 0:t.segment)==="EQUITY"&&(t==null?void 0:t.instrumentType)==="STOCK";t==null||t.instrumentType;const Yt=(t==null?void 0:t.instrumentType)==="FUTURES",Qt=(t==null?void 0:t.instrumentType)==="OPTIONS",rn=(t==null?void 0:t.optionType)==="CE",te=(t==null?void 0:t.optionType)==="PE",Me=Yt||Qt,St=(()=>{var Ze;if(t!=null&&t.lotSize&&t.lotSize>1)return t.lotSize;const q=((Ze=t==null?void 0:t.category)==null?void 0:Ze.toUpperCase())||"";return q.includes("NIFTY")&&!q.includes("BANK")&&!q.includes("FIN")&&!q.includes("MID")?25:q.includes("BANKNIFTY")?15:q.includes("FINNIFTY")?25:q.includes("MIDCPNIFTY")?50:q.includes("SENSEX")?10:1})(),Ne=Me?parseInt(d||0)*St:parseInt(d||0);N.useEffect(()=>{const Ze=setTimeout(async()=>{if(!(!t||!d||!h))try{const{data:Jt}=await z.post("/api/trading/margin-preview",{symbol:t.symbol,exchange:t.exchange,segment:t.segment,instrumentType:t.instrumentType,optionType:t.optionType||null,strikePrice:t.strike||null,category:t.category,productType:v,side:e.toUpperCase(),quantity:Ne,lots:parseInt(d),lotSize:St,price:parseFloat(h),leverage:w},{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}});E(Jt)}catch(Jt){console.error("Margin preview error:",Jt)}},300);return()=>clearTimeout(Ze)},[t,d,h,v,e,l,Ne,St,w]);const di=async()=>{var q,Ze,Jt,su,nu;if(k==="MARKET"&&!_.open){B(_.reason||"Market is closed");return}if(R&&!R.canPlace){B(`Insufficient funds. Need ${(q=R.shortfall)==null?void 0:q.toLocaleString()} more`);return}U(!0),B(""),L("");try{const ln={symbol:t.symbol,token:t.token,pair:t.pair,isCrypto:F,exchange:t.exchange||(F?"BINANCE":"NSE"),segment:F?"CRYPTO":t.segment||(t.exchange==="MCX"?"MCX":"FNO"),instrumentType:F?"CRYPTO":t.instrumentType||"FUTURES",optionType:t.optionType||null,strike:t.strike||null,expiry:t.expiry||null,category:t.category,productType:v,orderType:k,side:e.toUpperCase(),quantity:Ne,lots:parseInt(d),lotSize:St,price:parseFloat(h),bidPrice:W,askPrice:K,leverage:w,stopLoss:x?parseFloat(x):null,target:p?parseFloat(p):null};console.log("Placing order:",ln),k==="LIMIT"&&(ln.limitPrice=parseFloat(y)),(k==="SL"||k==="SL-M")&&(ln.triggerPrice=parseFloat(y));const{data:ru}=await z.post("/api/trading/order",ln,{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}}),Rx=((Ze=ru.trade)==null?void 0:Ze.status)==="PENDING"?`Order placed! Waiting for price to reach ${Ce}${y}`:`Order executed! Margin: ${(Jt=ru.marginBlocked)==null?void 0:Jt.toLocaleString()}`;L(Rx),o&&o(),c&&c(),setTimeout(()=>{L(""),i()},2e3)}catch(ln){B(((nu=(su=ln.response)==null?void 0:su.data)==null?void 0:nu.message)||"Failed to place order")}finally{U(!1)}},ze=()=>F?[{value:"MIS",label:"Spot",desc:"Crypto spot trading"}]:Ge?[{value:"CNC",label:"CNC (Delivery)",desc:"Hold for days/months"},{value:"MIS",label:"MIS (Intraday)",desc:"Square off same day"}]:Yt||Qt?[{value:"MIS",label:"MIS (Intraday)",desc:"Square off same day"},{value:"NRML",label:"NRML (Carry Forward)",desc:"Hold till expiry"}]:[{value:"MIS",label:"MIS",desc:"Intraday"}],Mx=()=>Ge?"EQUITY":Yt?"FUTURES":Qt?rn?"CALL OPTION (CE)":"PUT OPTION (PE)":"UNKNOWN",zx=()=>{if(F)return e==="buy"?" Buy crypto - Profit if price goes UP":" Sell crypto - Profit if price goes DOWN";if(Ge)return e==="buy"?v==="CNC"?"Buy & hold shares in DEMAT":"Buy intraday, auto square-off at 3:15 PM":v==="MIS"?"Short sell intraday only":"Sell from holdings";if(Yt)return e==="buy"?"Profit if price goes UP":"Profit if price goes DOWN";if(Qt){if(rn)return e==="buy"?"Bullish: Profit if price goes UP":"Bearish/Neutral: Collect premium";if(te)return e==="buy"?"Bearish: Profit if price goes DOWN":"Bullish/Neutral: Collect premium"}return""};return r.jsxs("aside",{className:"w-80 bg-dark-800 border-l border-dark-600 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-600",children:[r.jsxs("div",{children:[r.jsx("div",{className:`font-bold ${F?"text-orange-400":rn?"text-green-400":te?"text-red-400":Yt?"text-yellow-400":""}`,children:t==null?void 0:t.symbol}),r.jsxs("div",{className:"text-xs text-gray-400",children:[t==null?void 0:t.exchange,"  ",F?"CRYPTO":Mx()]})]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:20})})]}),r.jsxs("div",{className:"flex border-b border-dark-600",children:[r.jsxs("button",{onClick:()=>s("sell"),className:`flex-1 py-2 font-semibold transition ${e==="sell"?"bg-red-600 text-white":"bg-dark-700 text-gray-400"}`,children:[r.jsx("div",{className:"text-xs opacity-70",children:F?"Price":"Bid"}),r.jsxs("div",{className:"text-lg",children:[Ce,(W==null?void 0:W.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"--"]}),r.jsx("div",{className:"text-xs",children:"SELL"})]}),r.jsxs("button",{onClick:()=>s("buy"),className:`flex-1 py-2 font-semibold transition ${e==="buy"?"bg-green-600 text-white":"bg-dark-700 text-gray-400"}`,children:[r.jsx("div",{className:"text-xs opacity-70",children:F?"Price":"Ask"}),r.jsxs("div",{className:"text-lg",children:[Ce,(K==null?void 0:K.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"--"]}),r.jsx("div",{className:"text-xs",children:"BUY"})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsx("div",{className:`text-xs p-2 rounded ${e==="buy"?"bg-blue-900/30 text-blue-300":"bg-red-900/30 text-red-300"}`,children:zx()}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Product Type"}),r.jsx("div",{className:"space-y-2",children:ze().map(q=>r.jsxs("button",{onClick:()=>j(q.value),className:`w-full text-left px-3 py-2 rounded border transition ${v===q.value?"border-green-500 bg-green-500/10":"border-dark-600 hover:border-dark-500"}`,children:[r.jsx("div",{className:"font-medium text-sm",children:q.label}),r.jsx("div",{className:"text-xs text-gray-500",children:q.desc})]},q.value))})]}),!_.open&&k==="MARKET"&&r.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-500 text-yellow-300 px-3 py-2 rounded text-sm",children:[" ",_.reason||"Market is closed",". Use LIMIT order instead."]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Order Type"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["MARKET","LIMIT","SL","SL-M"].map(q=>r.jsx("button",{onClick:()=>S(q),disabled:q==="MARKET"&&!_.open,className:`px-3 py-2 rounded text-sm transition ${k===q?"bg-green-600 text-white":q==="MARKET"&&!_.open?"bg-dark-700 text-gray-600 cursor-not-allowed":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:q},q))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Leverage (Buying Power)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(q=>r.jsxs("button",{onClick:()=>C(q),className:`px-3 py-1.5 rounded text-sm transition ${w===q?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[q,"x"]},q))}),w>1&&r.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[w,"x leverage = ",w,"x buying power, ",w,"x risk"]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs text-gray-400 mb-2",children:[Me?"Lots":"Quantity"," ",Me&&r.jsxs("span",{className:"text-yellow-400",children:["(1 Lot = ",St," qty)"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>u(Math.max(1,parseInt(d||1)-1).toString()),className:"w-10 h-10 bg-dark-600 hover:bg-dark-500 rounded text-xl font-bold",children:"-"}),r.jsx("input",{type:"number",value:d,onChange:q=>u(q.target.value),className:"flex-1 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-center text-lg font-bold focus:outline-none focus:border-green-500",min:"1"}),r.jsx("button",{onClick:()=>u((parseInt(d||1)+1).toString()),className:"w-10 h-10 bg-dark-600 hover:bg-dark-500 rounded text-xl font-bold",children:"+"})]}),Me&&r.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[r.jsxs("span",{className:"text-gray-500",children:["Total Qty: ",r.jsx("span",{className:"text-white font-medium",children:Ne})]}),r.jsxs("span",{className:"text-gray-500",children:["Value: ",r.jsxs("span",{className:"text-white",children:["",(Ne*parseFloat(h||0)).toLocaleString()]})]})]}),Me&&r.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,5,10,20].map(q=>r.jsxs("button",{onClick:()=>u(q.toString()),className:`flex-1 py-1 text-xs rounded ${d===q.toString()?"bg-green-600":"bg-dark-600 hover:bg-dark-500"}`,children:[q,"L"]},q))})]}),(k==="LIMIT"||k==="SL")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:k==="LIMIT"?"Limit Price":"Trigger Price"}),r.jsx("input",{type:"number",value:y,onChange:q=>m(q.target.value),placeholder:k==="LIMIT"?"Enter limit price":"Enter trigger price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:k==="LIMIT"?`Order executes when price ${e==="buy"?"falls to":"rises to"} ${y||"..."}`:`Order triggers when price ${e==="buy"?"rises to":"falls to"} ${y||"..."}`})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Stop Loss (Optional)"}),r.jsx("input",{type:"number",value:x,onChange:q=>b(q.target.value),placeholder:"SL Price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Target (Optional)"}),r.jsx("input",{type:"number",value:p,onChange:q=>g(q.target.value),placeholder:"Target Price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-green-500"})]})]}),(x||p)&&r.jsxs("div",{className:"text-xs text-gray-500",children:[x&&r.jsxs("span",{className:"text-red-400",children:["SL: ",x]}),x&&p&&" | ",p&&r.jsxs("span",{className:"text-green-400",children:["Target: ",p]})," - Auto exit when price hits"]}),ae&&r.jsx("div",{className:"bg-red-900/30 border border-red-500 text-red-300 px-3 py-2 rounded text-sm",children:ae}),V&&r.jsx("div",{className:"bg-green-900/30 border border-green-500 text-green-300 px-3 py-2 rounded text-sm",children:V}),r.jsxs("div",{className:"bg-dark-700 rounded p-3 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Available Balance"}),r.jsxs("span",{className:"text-green-400",children:["",((Zd=R==null?void 0:R.availableBalance)==null?void 0:Zd.toLocaleString())||((eu=n==null?void 0:n.availableMargin)==null?void 0:eu.toLocaleString())||"0"]})]}),w>1&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Effective Buying Power"}),r.jsxs("span",{className:"text-purple-400",children:["",(((R==null?void 0:R.availableBalance)||0)*w).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Required Margin"}),r.jsxs("span",{className:(R==null?void 0:R.canPlace)===!1?"text-red-400":"",children:["",((tu=R==null?void 0:R.marginRequired)==null?void 0:tu.toLocaleString())||"--"]})]}),R&&!R.canPlace&&r.jsxs("div",{className:"text-xs text-red-400 mt-2",children:[" ",R.reason]}),Qt&&e==="sell"&&r.jsx("div",{className:"text-xs text-yellow-400 mt-2",children:" Option selling requires higher margin (SPAN + Exposure)"})]})]}),r.jsxs("div",{className:"p-4 border-t border-dark-600",children:[r.jsx("button",{onClick:di,disabled:I||R&&!R.canPlace,className:`w-full py-3 rounded-lg font-semibold transition ${e==="buy"?"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800":"bg-red-600 hover:bg-red-700 disabled:bg-red-800"} disabled:opacity-50 disabled:cursor-not-allowed`,children:I?"Placing Order...":`${e==="buy"?"BUY":"SELL"} ${t==null?void 0:t.symbol}`}),r.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[v,"  ",k]})]})]})},rS=({selectedInstrument:t,onSelectInstrument:e,onBuySell:s,user:n,marketData:i={}})=>{const[l,a]=N.useState([]),[o,c]=N.useState(""),[d,u]=N.useState(""),[h,f]=N.useState([]),[y,m]=N.useState(!0),[x,b]=N.useState([]),[p,g]=N.useState("NSE"),[v,j]=N.useState({}),k=N.useRef(null),S=[{id:"NSE",label:"NSE"},{id:"NSE_FO",label:"F&O"},{id:"MCX",label:"MCX"},{id:"Crypto",label:"Crypto"}];N.useEffect(()=>{const E=setTimeout(()=>{u(o)},150);return()=>clearTimeout(E)},[o]),N.useEffect(()=>{if(d.length>=1){const E=d.toLowerCase(),_=h.filter(O=>{var I,U,ae;return((I=O.symbol)==null?void 0:I.toLowerCase().includes(E))||((U=O.name)==null?void 0:U.toLowerCase().includes(E))||((ae=O.category)==null?void 0:ae.toLowerCase().includes(E))}).slice(0,50);b(_)}else b([])},[d,h]),N.useEffect(()=>{w()},[n==null?void 0:n.token]);const w=async()=>{try{m(!0);const E=n!=null&&n.token?"/api/instruments/user":"/api/instruments/public",_=n!=null&&n.token?{Authorization:`Bearer ${n.token}`}:{},{data:O}=await z.get(E,{headers:_});f(O||[])}catch{try{const{data:_}=await z.get("/api/instruments/public");f(_||[])}catch(_){console.error("Error fetching instruments:",_)}}finally{m(!1)}};N.useEffect(()=>{const E=async()=>{try{const{data:O}=await z.get("/api/binance/prices");j(O||{})}catch{}};E();const _=setInterval(E,5e3);return()=>clearInterval(_)},[]);const T=(()=>{const E=o.toLowerCase();let _=h;switch(E&&(_=h.filter(O=>{var I,U;return((I=O.symbol)==null?void 0:I.toLowerCase().includes(E))||((U=O.name)==null?void 0:U.toLowerCase().includes(E))})),p){case"NSE":return _.filter(I=>I.exchange==="NSE"&&(I.instrumentType==="INDEX"||I.instrumentType==="STOCK"||I.segment==="EQUITY")||I.category==="INDICES"||I.category==="STOCKS");case"NSE_FO":return _.filter(I=>(I.exchange==="NFO"||I.segment==="FNO"||I.segment==="NFO")&&(I.instrumentType==="FUTURES"||I.instrumentType==="OPTIONS"));case"MCX":return _.filter(I=>I.exchange==="MCX"||I.segment==="MCX"||I.category==="MCX");case"Crypto":const O=_.filter(I=>I.isCrypto||I.segment==="CRYPTO"||I.category==="CRYPTO");if(Object.keys(v).length>0){const I=Object.values(v).map(U=>({_id:U.pair,symbol:U.symbol,name:U.pair,exchange:"BINANCE",token:U.pair,pair:U.pair,segment:"CRYPTO",category:"CRYPTO",instrumentType:"CRYPTO",isCrypto:!0,ltp:U.ltp,change:U.change,changePercent:U.changePercent}));return[...O,...I.filter(U=>!E||U.symbol.toLowerCase().includes(E)||U.name.toLowerCase().includes(E))]}return O;default:return _}})(),M=T.reduce((E,_)=>{const O=_.category||"OTHER";return E[O]||(E[O]=[]),E[O].push(_),E},{});Object.keys(M).sort();const R=E=>{const _=i[E];return _?{ltp:_.ltp,change:_.change,changePercent:_.changePercent}:{ltp:0,change:0,changePercent:0}};return r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex gap-1 p-2 bg-dark-800 border-b border-dark-600 overflow-x-auto",children:S.map(E=>r.jsx("button",{onClick:()=>g(E.id),className:`px-3 py-1.5 text-xs font-medium rounded whitespace-nowrap transition ${p===E.id?"bg-green-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600 hover:text-white"}`,children:E.label},E.id))}),r.jsx("div",{className:"p-3 bg-dark-800 border-b border-dark-600",children:r.jsxs("div",{className:"relative",children:[r.jsx(Xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{ref:k,type:"text",placeholder:"Search NIFTY, BANKNIFTY...",value:o,onChange:E=>c(E.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-10 py-2 text-sm focus:outline-none focus:border-green-500"}),o&&r.jsx("button",{onClick:()=>{var E;c(""),(E=k.current)==null||E.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:r.jsx(be,{size:16})})]})}),o.length>=1&&r.jsx("div",{className:"flex-1 overflow-y-auto",children:x.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:['No instruments found for "',o,'"']}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 bg-dark-700 sticky top-0",children:[x.length," results"]}),x.map(E=>{const _=R(E.token);return r.jsx(Df,{instrument:{...E,..._},isCall:E.optionType==="CE",isPut:E.optionType==="PE",isFuture:E.instrumentType==="FUTURES",isCrypto:E.isCrypto||E.segment==="CRYPTO"||E.exchange==="BINANCE",onSelect:()=>{e({...E,..._}),c("")},onBuy:()=>s("buy",{...E,..._}),onSell:()=>s("sell",{...E,..._})},E._id)})]})}),!o&&r.jsx("div",{className:"flex-1 overflow-y-auto",children:y?r.jsxs("div",{className:"p-4 text-center text-gray-400",children:[r.jsx(ne,{className:"animate-spin inline mr-2",size:16}),"Loading..."]}):T.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[r.jsx("p",{children:"No instruments found"}),r.jsx("p",{className:"mt-2 text-xs",children:p==="Crypto"?"Loading crypto from Binance...":"Try a different segment or search"})]}):T.map(E=>{const _=E.isCrypto?E:R(E.token);return r.jsx(Df,{instrument:{...E,ltp:_.ltp||E.ltp||0,change:_.change||E.change||0,changePercent:_.changePercent||E.changePercent||0},isCall:E.optionType==="CE",isPut:E.optionType==="PE",isFuture:E.instrumentType==="FUTURES",isCrypto:E.isCrypto||E.segment==="CRYPTO"||E.exchange==="BINANCE",onSelect:()=>e({...E,ltp:_.ltp||E.ltp||0}),onBuy:()=>s("buy",{...E,ltp:_.ltp||E.ltp||0}),onSell:()=>s("sell",{...E,ltp:_.ltp||E.ltp||0})},E._id||E.pair||`${E.exchange}-${E.symbol}`)})})]})},Df=({instrument:t,isCall:e,isPut:s,isFuture:n,isCrypto:i,onSelect:l,onBuy:a,onSell:o})=>{const c=t.ltp||0,d=t.change||0,u=t.changePercent||0,h=i||t.isCrypto||t.segment==="CRYPTO"||t.exchange==="BINANCE",f=()=>h?"text-orange-400":e||t.optionType==="CE"?"text-green-400":s||t.optionType==="PE"?"text-red-400":n||t.instrumentType==="FUTURES"?"text-yellow-400":"text-white",y=m=>!m||m<=0?"--":h?`$${m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;return r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-700",children:[r.jsxs("div",{className:"flex-1",onClick:l,children:[r.jsx("div",{className:`font-medium text-sm ${f()}`,children:t.symbol}),r.jsxs("div",{className:"text-xs text-gray-500",children:[t.exchange," ",t.strike?` ${t.strike}`:""]})]}),r.jsxs("div",{className:"text-right mr-3",onClick:l,children:[r.jsx("div",{className:`font-mono text-sm ${d>=0?"text-green-400":"text-red-400"}`,children:y(c)}),r.jsx("div",{className:`text-xs ${d>=0?"text-green-400":"text-red-400"}`,children:u?`${d>=0?"+":""}${parseFloat(u).toFixed(2)}%`:"--"})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:o,className:"px-3 py-1.5 text-xs bg-red-600 hover:bg-red-700 rounded font-medium",children:"S"}),r.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs bg-green-600 hover:bg-green-700 rounded font-medium",children:"B"})]})]})},iS=({selectedInstrument:t,onBuySell:e,onBack:s,marketData:n={}})=>{var d;const i=N.useRef(null),l=N.useRef(null),a=N.useRef(null),o=N.useRef(null),c=t!=null&&t.token&&n[t.token]?n[t.token]:null;return N.useEffect(()=>{if(!i.current||!t)return;const u=gx(i.current,{layout:{background:{color:"#111111"},textColor:"#d1d5db"},grid:{vertLines:{color:"#1f1f1f"},horzLines:{color:"#1f1f1f"}},rightPriceScale:{borderColor:"#2a2a2a"},timeScale:{borderColor:"#2a2a2a",timeVisible:!0}});l.current=u;const h=u.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#22c55e",wickDownColor:"#ef4444",wickUpColor:"#22c55e"});a.current=h;const f=t.ltp||100,y=[],m=Math.floor(Date.now()/1e3);for(let b=100;b>=0;b--){const p=m-b*900,g=f*.01,v=f+(Math.random()-.5)*g,j=v+(Math.random()-.5)*g,k=Math.max(v,j)+Math.random()*g*.3,S=Math.min(v,j)-Math.random()*g*.3;y.push({time:p,open:v,high:k,low:S,close:j})}h.setData(y),o.current=y[y.length-1];const x=()=>{i.current&&u.applyOptions({width:i.current.clientWidth,height:i.current.clientHeight})};return window.addEventListener("resize",x),x(),()=>{window.removeEventListener("resize",x),u.remove()}},[t]),N.useEffect(()=>{if(a.current&&o.current&&(c!=null&&c.ltp))try{const u=Math.floor(Date.now()/1e3),h=Math.floor(u/900)*900,f=typeof o.current.time=="number"?o.current.time:Math.floor(Date.now()/1e3);if(h>=f)if(f===h){const y={time:h,open:o.current.open,high:Math.max(o.current.high,c.ltp),low:Math.min(o.current.low,c.ltp),close:c.ltp};o.current=y,a.current.update(y)}else{const y={time:h,open:c.ltp,high:c.ltp,low:c.ltp,close:c.ltp};o.current=y,a.current.update(y)}}catch(u){console.warn("Chart update error:",u.message)}},[c]),r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-600",children:[r.jsx("button",{onClick:s,className:"text-gray-400",children:r.jsx(Ls,{size:20,className:"rotate-180"})}),t?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium text-green-400",children:t.symbol}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[r.jsx("span",{className:"text-gray-400",children:t.exchange}),c&&r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:`font-mono font-bold ${c.change>=0?"text-green-400":"text-red-400"}`,children:["",(d=c.ltp)==null?void 0:d.toLocaleString()]}),r.jsxs("span",{className:`${c.change>=0?"text-green-400":"text-red-400"}`,children:[c.change>=0?"+":"",parseFloat(c.changePercent||0).toFixed(2),"%"]})]})]})]}):r.jsx("span",{className:"text-gray-400",children:"Select Instrument"}),r.jsx("div",{className:"w-5"})]}),r.jsx("div",{className:"flex-1 relative",children:t?r.jsx("div",{ref:i,className:"w-full h-full"}):r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[r.jsx(ne,{size:40,className:"mb-4 opacity-30"}),r.jsx("p",{className:"text-sm",children:"Select an instrument"})]})}),t&&r.jsx("div",{className:"flex items-center justify-center gap-2 px-4 py-2 border-t border-dark-600",children:["1m","5m","15m","1h","1d"].map(u=>r.jsx("button",{className:"px-3 py-1 text-sm text-gray-400 hover:bg-dark-600 rounded",children:u},u))}),t&&r.jsxs("div",{className:"flex gap-3 p-4 border-t border-dark-600",children:[r.jsx("button",{onClick:()=>e("sell",t),className:"flex-1 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold",children:"SELL"}),r.jsx("button",{onClick:()=>e("buy",t),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold",children:"BUY"})]})]})},Vf=({activeTab:t,user:e,marketData:s})=>{const[n,i]=N.useState(t),[l,a]=N.useState([]),[o,c]=N.useState([]),[d,u]=N.useState([]),[h,f]=N.useState(!1);N.useEffect(()=>{if(e!=null&&e.token){y();const p=setInterval(y,5e3);return()=>clearInterval(p)}},[e==null?void 0:e.token,n]);const y=async()=>{try{const p={Authorization:`Bearer ${e.token}`};if(n==="positions"){const{data:g}=await z.get("/api/trading/positions?status=OPEN",{headers:p});a(g||[])}else if(n==="pending"){const{data:g}=await z.get("/api/trading/pending-orders",{headers:p});c(g||[])}else{const{data:g}=await z.get("/api/trading/history",{headers:p});u(g||[])}}catch(p){console.error("Error:",p)}},m=async(p,g)=>{var v,j;try{f(!0);const k=s[g==null?void 0:g.token]||{},S=k.bid||k.ltp||(g==null?void 0:g.currentPrice),w=k.ask||k.ltp||(g==null?void 0:g.currentPrice);await z.post(`/api/trading/close/${p}`,{bidPrice:S,askPrice:w},{headers:{Authorization:`Bearer ${e.token}`}}),y()}catch(k){alert(((j=(v=k.response)==null?void 0:v.data)==null?void 0:j.message)||"Error")}finally{f(!1)}},x=p=>{const g=p.token,v=p.symbol,j=p.side;let k=null;if(g&&(s!=null&&s[g]))k=s[g];else if(v&&(s!=null&&s[v]))k=s[v];else for(const[S,w]of Object.entries(s||{}))if(w.symbol===v){k=w;break}return k?j==="BUY"?k.bid||k.ltp||k.last_price||0:k.ask||k.ltp||k.last_price||0:0},b=n==="positions"?l:n==="pending"?o:d;return r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsx("div",{className:"flex border-b border-dark-600",children:["positions","pending","history"].map(p=>r.jsxs("button",{onClick:()=>i(p),className:`flex-1 py-3 text-sm capitalize ${n===p?"text-green-400 border-b-2 border-green-500":"text-gray-400"}`,children:[p," (",p==="positions"?l.length:p==="pending"?o.length:d.length,")"]},p))}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:b.length===0?r.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400 h-full",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Vt,{size:48,className:"mx-auto mb-4 opacity-30"}),r.jsxs("p",{children:["No ",n==="positions"?"open positions":n==="pending"?"pending orders":"trade history"]})]})}):r.jsx("div",{className:"divide-y divide-dark-700",children:b.map(p=>{var j,k;const g=x(p)||p.currentPrice||p.entryPrice,v=p.side==="BUY"?(g-p.entryPrice)*p.quantity:(p.entryPrice-g)*p.quantity;return r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.symbol}),r.jsxs("div",{className:`text-xs ${p.side==="BUY"?"text-green-400":"text-red-400"}`,children:[p.side,"  ",p.quantity," qty"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`font-medium ${(n==="history"?p.realizedPnL:v)>=0?"text-green-400":"text-red-400"}`,children:[(n==="history"?p.realizedPnL:v)>=0?"+":"","",(j=n==="history"?p.realizedPnL:v)==null?void 0:j.toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Entry: ",(k=p.entryPrice)==null?void 0:k.toFixed(2)]})]})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"text-yellow-400",children:["Spread: ",p.spread||0," pts | Comm: ",(p.commission||0).toFixed(2)]}),n==="positions"&&r.jsx("button",{onClick:()=>m(p._id,p),disabled:h,className:"px-3 py-1 bg-red-600 rounded text-white",children:"Close"})]})]},p._id)})})})]})},lS=({user:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(!0);N.useEffect(()=>{l();const o=setInterval(l,5e3);return()=>clearInterval(o)},[t==null?void 0:t.token]);const l=async()=>{try{const o={Authorization:`Bearer ${t.token}`},[c,d]=await Promise.all([z.get("/api/trading/history?limit=20",{headers:o}),z.get("/api/user-funds/my-requests",{headers:o}).catch(()=>({data:[]}))]),u=(c.data||[]).map(f=>{var y;return{id:f._id,type:"trade",title:`${f.side} ${f.symbol}`,message:`${f.quantity} qty @ ${(y=f.entryPrice)==null?void 0:y.toLocaleString()}`,pnl:f.realizedPnL||0,status:f.closeReason||"CLOSED",time:new Date(f.closedAt||f.createdAt),icon:f.realizedPnL>=0?"":""}}),h=(d.data||[]).map(f=>{var y;return{id:f._id,type:"fund",title:f.type==="DEPOSIT"?"Deposit Request":"Withdrawal Request",message:`${(y=f.amount)==null?void 0:y.toLocaleString()}`,status:f.status,time:new Date(f.updatedAt||f.createdAt),icon:f.type==="DEPOSIT"?"":""}});s([...u,...h].sort((f,y)=>y.time-f.time))}catch(o){console.error("Error fetching notifications:",o)}finally{i(!1)}},a=o=>{const c=Date.now()-o,d=Math.floor(c/6e4);if(d<60)return`${d}m ago`;const u=Math.floor(c/36e5);return u<24?`${u}h ago`:o.toLocaleDateString()};return n?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx(ne,{size:24,className:"animate-spin text-gray-400"})}):r.jsx("div",{className:"flex-1 overflow-y-auto",children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[r.jsx(In,{size:48,className:"mb-4 opacity-30"}),r.jsx("p",{children:"No notifications"})]}):r.jsx("div",{className:"divide-y divide-dark-700",children:e.map(o=>r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-xl",children:o.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("p",{className:"font-medium text-sm",children:o.title}),r.jsx("span",{className:"text-xs text-gray-500",children:a(o.time)})]}),r.jsx("p",{className:"text-sm text-gray-400",children:o.message}),o.type==="trade"?r.jsxs("span",{className:`text-sm ${o.pnl>=0?"text-green-400":"text-red-400"}`,children:["P&L: ",o.pnl>=0?"+":"","",o.pnl.toFixed(2)]}):r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${o.status==="APPROVED"?"text-green-400 bg-green-900/30":o.status==="REJECTED"?"text-red-400 bg-red-900/30":"text-yellow-400 bg-yellow-900/30"}`,children:o.status})]})]})},o.id))})})},aS=({user:t,walletData:e,onLogout:s})=>{var f,y,m,x,b;const[n,i]=N.useState("menu"),[l,a]=N.useState([]),[o,c]=N.useState([]),[d,u]=N.useState(!1);N.useEffect(()=>{if(n==="history"){h();const p=setInterval(h,2e3);return()=>clearInterval(p)}},[n,t==null?void 0:t.token]);const h=async()=>{try{u(!0);const p={Authorization:`Bearer ${t.token}`},[g,v]=await Promise.all([z.get("/api/trading/history",{headers:p}),z.get("/api/user-funds/my-requests",{headers:p}).catch(()=>({data:[]}))]);c(g.data||[]),a(v.data||[])}catch(p){console.error("Error fetching history:",p)}finally{u(!1)}};return n==="history"?r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-600",children:[r.jsx("button",{onClick:()=>i("menu"),className:"text-gray-400",children:r.jsx(Ls,{size:20,className:"rotate-180"})}),r.jsx("h2",{className:"font-bold",children:"Transaction History"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:d&&o.length===0?r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx(ne,{size:24,className:"animate-spin text-gray-400"})}):r.jsxs(r.Fragment,{children:[l.length>0&&r.jsxs("div",{className:"p-4 border-b border-dark-600",children:[r.jsx("h3",{className:"text-sm text-gray-400 mb-3",children:"Fund Requests"}),l.slice(0,5).map(p=>{var g;return r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-dark-700 last:border-0",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:p.type}),r.jsx("p",{className:"text-xs text-gray-400",children:new Date(p.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-medium ${p.type==="DEPOSIT"?"text-green-400":"text-red-400"}`,children:[p.type==="DEPOSIT"?"+":"-","",(g=p.amount)==null?void 0:g.toLocaleString()]}),r.jsx("p",{className:`text-xs ${p.status==="APPROVED"?"text-green-400":p.status==="REJECTED"?"text-red-400":"text-yellow-400"}`,children:p.status})]})]},p._id)})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-sm text-gray-400 mb-3",children:"Trade History"}),o.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:"No trade history"}):o.slice(0,20).map(p=>r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-dark-700 last:border-0",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:p.symbol}),r.jsxs("p",{className:"text-xs text-gray-400",children:[p.side,"  ",p.quantity," qty  ",new Date(p.closedAt||p.createdAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-medium ${(p.realizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(p.realizedPnL||0)>=0?"+":"","",(p.realizedPnL||0).toFixed(2)]}),r.jsx("p",{className:"text-xs text-gray-400",children:p.closeReason||"CLOSED"})]})]},p._id))]})]})})]}):n==="notifications"?r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-600",children:[r.jsx("button",{onClick:()=>i("menu"),className:"text-gray-400",children:r.jsx(Ls,{size:20,className:"rotate-180"})}),r.jsx("h2",{className:"font-bold",children:"Notifications"})]}),r.jsx(lS,{user:t})]}):n==="settings"?r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-dark-600",children:[r.jsx("button",{onClick:()=>i("menu"),className:"text-gray-400",children:r.jsx(Ls,{size:20,className:"rotate-180"})}),r.jsx("h2",{className:"font-bold",children:"Settings"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Account Info"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Username"}),r.jsx("span",{children:t==null?void 0:t.username})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email"}),r.jsx("span",{children:t==null?void 0:t.email})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"User ID"}),r.jsx("span",{className:"font-mono text-xs",children:t==null?void 0:t.userId})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Admin Code"}),r.jsx("span",{className:"font-mono text-xs",children:t==null?void 0:t.adminCode})]})]})]}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Trading Settings"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Trading Status"}),r.jsx("span",{className:(t==null?void 0:t.tradingStatus)==="ACTIVE"?"text-green-400":"text-red-400",children:(t==null?void 0:t.tradingStatus)||"ACTIVE"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Account Status"}),r.jsx("span",{className:t!=null&&t.isActive?"text-green-400":"text-red-400",children:t!=null&&t.isActive?"Active":"Inactive"})]})]})]}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"App Info"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Version"}),r.jsx("span",{children:"1.0.0"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Platform"}),r.jsx("span",{children:"Web"})]})]})]})]})]}):r.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[r.jsxs("div",{className:"p-6 text-center border-b border-dark-600",children:[r.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(F0,{size:48})}),r.jsx("h2",{className:"text-xl font-bold",children:(t==null?void 0:t.fullName)||(t==null?void 0:t.username)}),r.jsxs("p",{className:"text-gray-400 text-sm",children:["@",t==null?void 0:t.username]})]}),r.jsx("div",{className:"p-4 border-b border-dark-600",children:r.jsxs("div",{className:"bg-dark-700 rounded-xl p-4",children:[r.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Wallet Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["",((f=e==null?void 0:e.cashBalance)==null?void 0:f.toLocaleString())||((m=(y=e==null?void 0:e.wallet)==null?void 0:y.balance)==null?void 0:m.toLocaleString())||"0.00"]}),r.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Available Margin"}),r.jsxs("span",{className:"text-green-400",children:["",((x=e==null?void 0:e.availableMargin)==null?void 0:x.toLocaleString())||"0.00"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Used Margin"}),r.jsxs("span",{className:"text-yellow-400",children:["",((b=e==null?void 0:e.usedMargin)==null?void 0:b.toLocaleString())||"0.00"]})]})]})}),r.jsxs("div",{className:"flex-1 p-4",children:[r.jsxs("button",{onClick:()=>i("settings"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[r.jsx(gs,{size:20,className:"text-gray-400"}),r.jsx("span",{children:"Settings"}),r.jsx(Ls,{size:16,className:"ml-auto text-gray-500"})]}),r.jsxs("button",{onClick:()=>i("notifications"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[r.jsx(In,{size:20,className:"text-gray-400"}),r.jsx("span",{children:"Notifications"}),r.jsx(Ls,{size:16,className:"ml-auto text-gray-500"})]}),r.jsxs("button",{onClick:()=>i("history"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[r.jsx(qN,{size:20,className:"text-gray-400"}),r.jsx("span",{children:"Transaction History"}),r.jsx(Ls,{size:16,className:"ml-auto text-gray-500"})]})]}),r.jsx("div",{className:"p-4 border-t border-dark-600",children:r.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-medium",children:[r.jsx(qr,{size:20}),"Logout"]})})]})},oS=({onClose:t,user:e})=>{const[s,n]=N.useState([]),[i,l]=N.useState(!0),[a,o]=N.useState("all");N.useEffect(()=>{c();const f=setInterval(c,5e3);return()=>clearInterval(f)},[e==null?void 0:e.token]);const c=async()=>{try{const f={Authorization:`Bearer ${e.token}`},[y,m]=await Promise.all([z.get("/api/trading/history?limit=20",{headers:f}),z.get("/api/user-funds/my-requests",{headers:f}).catch(()=>({data:[]}))]),x=(y.data||[]).map(g=>{var v,j;return{id:g._id,type:"trade",title:`${g.side} ${g.symbol}`,message:`${g.quantity} qty @ ${(v=g.entryPrice)==null?void 0:v.toLocaleString()}  ${(j=g.exitPrice)==null?void 0:j.toLocaleString()}`,pnl:g.realizedPnL||0,status:g.closeReason||"CLOSED",time:new Date(g.closedAt||g.createdAt),icon:g.realizedPnL>=0?"":""}}),b=(m.data||[]).map(g=>{var v;return{id:g._id,type:"fund",title:g.type==="DEPOSIT"?"Deposit Request":"Withdrawal Request",message:`${(v=g.amount)==null?void 0:v.toLocaleString()}`,status:g.status,time:new Date(g.updatedAt||g.createdAt),icon:g.type==="DEPOSIT"?"":"",isDeposit:g.type==="DEPOSIT"}}),p=[...x,...b].sort((g,v)=>v.time-g.time);n(p)}catch(f){console.error("Error fetching notifications:",f)}finally{l(!1)}},d=s.filter(f=>a==="all"?!0:a==="trades"?f.type==="trade":a==="funds"?f.type==="fund":!0),u=f=>{switch(f){case"APPROVED":return"text-green-400";case"REJECTED":return"text-red-400";case"PENDING":return"text-yellow-400";case"MANUAL":case"CLOSED":return"text-gray-400";case"SL_HIT":return"text-red-400";case"TARGET_HIT":return"text-green-400";default:return"text-gray-400"}},h=f=>{const m=new Date-f,x=Math.floor(m/6e4),b=Math.floor(m/36e5),p=Math.floor(m/864e5);return x<1?"Just now":x<60?`${x}m ago`:b<24?`${b}h ago`:p<7?`${p}d ago`:f.toLocaleDateString()};return r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[r.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[r.jsx(In,{size:20})," Notifications"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),r.jsx("div",{className:"flex border-b border-dark-600",children:[{id:"all",label:"All"},{id:"trades",label:"Trades"},{id:"funds",label:"Funds"}].map(f=>r.jsx("button",{onClick:()=>o(f.id),className:`flex-1 py-2 text-sm font-medium ${a===f.id?"text-green-400 border-b-2 border-green-400":"text-gray-400"}`,children:f.label},f.id))}),r.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:i?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ne,{size:24,className:"animate-spin text-gray-400"})}):d.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[r.jsx(In,{size:48,className:"mb-4 opacity-30"}),r.jsx("p",{children:"No notifications"})]}):r.jsx("div",{className:"divide-y divide-dark-700",children:d.map(f=>r.jsx("div",{className:"p-4 hover:bg-dark-700/50",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-2xl",children:f.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"font-medium text-sm",children:f.title}),r.jsx("span",{className:"text-xs text-gray-500",children:h(f.time)})]}),r.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:f.message}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[f.type==="trade"?r.jsxs("span",{className:`text-sm font-medium ${f.pnl>=0?"text-green-400":"text-red-400"}`,children:["P&L: ",f.pnl>=0?"+":"","",f.pnl.toFixed(2)]}):r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${u(f.status)} bg-dark-600`,children:f.status}),f.type==="trade"&&r.jsx("span",{className:`text-xs ${u(f.status)}`,children:f.status})]})]})]})},f.id))})})]})})},cS=({onClose:t,user:e})=>{const[s,n]=N.useState("account"),[i,l]=N.useState(""),[a,o]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(!1),[f,y]=N.useState(null),m=async()=>{var x,b;if(!i||!a||!c){y({type:"error",text:"Please fill all fields"});return}if(a!==c){y({type:"error",text:"New passwords do not match"});return}if(a.length<6){y({type:"error",text:"Password must be at least 6 characters"});return}try{h(!0),await z.post("/api/user/change-password",{oldPassword:i,newPassword:a},{headers:{Authorization:`Bearer ${e.token}`}}),y({type:"success",text:"Password changed successfully!"}),l(""),o(""),d("")}catch(p){y({type:"error",text:((b=(x=p.response)==null?void 0:x.data)==null?void 0:b.message)||"Failed to change password"})}finally{h(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[r.jsx("h2",{className:"text-lg font-bold",children:"Settings"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"flex border-b border-dark-600",children:[r.jsx("button",{onClick:()=>n("account"),className:`flex-1 py-3 text-sm font-medium ${s==="account"?"text-green-400 border-b-2 border-green-400":"text-gray-400"}`,children:"Account"}),r.jsx("button",{onClick:()=>n("password"),className:`flex-1 py-3 text-sm font-medium ${s==="password"?"text-green-400 border-b-2 border-green-400":"text-gray-400"}`,children:"Change Password"})]}),r.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[s==="account"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Account Information"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Username"}),r.jsx("span",{children:e==null?void 0:e.username})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Full Name"}),r.jsx("span",{children:(e==null?void 0:e.fullName)||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email"}),r.jsx("span",{children:(e==null?void 0:e.email)||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Phone"}),r.jsx("span",{children:(e==null?void 0:e.phone)||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"User ID"}),r.jsx("span",{className:"font-mono text-xs",children:e==null?void 0:e.userId})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Admin Code"}),r.jsx("span",{className:"font-mono text-xs",children:e==null?void 0:e.adminCode})]})]})]}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Trading Status"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status"}),r.jsx("span",{className:(e==null?void 0:e.tradingStatus)==="ACTIVE"?"text-green-400":"text-red-400",children:(e==null?void 0:e.tradingStatus)||"ACTIVE"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Account"}),r.jsx("span",{className:(e==null?void 0:e.isActive)!==!1?"text-green-400":"text-red-400",children:(e==null?void 0:e.isActive)!==!1?"Active":"Inactive"})]})]})]})]}),s==="password"&&r.jsxs("div",{className:"space-y-4",children:[f&&r.jsx("div",{className:`p-3 rounded-lg text-sm ${f.type==="error"?"bg-red-900/50 text-red-400":"bg-green-900/50 text-green-400"}`,children:f.text}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Current Password"}),r.jsx("input",{type:"password",value:i,onChange:x=>l(x.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Enter current password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),r.jsx("input",{type:"password",value:a,onChange:x=>o(x.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Enter new password (min 6 chars)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:"password",value:c,onChange:x=>d(x.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Confirm new password"})]}),r.jsx("button",{onClick:m,disabled:u,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 py-3 rounded-lg font-medium transition",children:u?"Changing...":"Change Password"})]})]})]})})},dS=({onClose:t,walletData:e,user:s,onRefresh:n})=>{var T,M,R,E;const[i,l]=N.useState("deposit"),[a,o]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(""),[f,y]=N.useState(!1),[m,x]=N.useState(null),[b,p]=N.useState(null),[g,v]=N.useState(null);N.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:_}=await z.get("/api/user-funds/admin-bank-accounts",{headers:{Authorization:`Bearer ${s.token}`}}),O=_.find(U=>U.type==="BANK"&&U.isPrimary)||_.find(U=>U.type==="BANK"),I=_.find(U=>U.type==="UPI"&&U.isPrimary)||_.find(U=>U.type==="UPI");v({bankName:(O==null?void 0:O.bankName)||"Not configured",accountName:(O==null?void 0:O.holderName)||"Not configured",accountNumber:(O==null?void 0:O.accountNumber)||"Not configured",ifscCode:(O==null?void 0:O.ifsc)||"Not configured",upiId:(I==null?void 0:I.upiId)||"Not configured",upiName:(I==null?void 0:I.holderName)||"Not configured"})}catch(_){console.error("Error fetching bank details:",_);try{const{data:O}=await z.get("/api/user/bank-details",{headers:{Authorization:`Bearer ${s.token}`}});v(O)}catch{v({bankName:"Not configured",accountName:"Contact your admin",accountNumber:"",ifscCode:"",upiId:""})}}},k=(_,O)=>{navigator.clipboard.writeText(_),p(O),setTimeout(()=>p(null),2e3)},S=async()=>{var _,O;if(!a||parseFloat(a)<=0){x({type:"error",text:"Please enter a valid amount"});return}if(!c){x({type:"error",text:"Please enter UTR/Transaction ID"});return}y(!0);try{await z.post("/api/user/deposit-request",{amount:parseFloat(a),utrNumber:c,paymentMethod:"BANK"},{headers:{Authorization:`Bearer ${s.token}`}}),x({type:"success",text:"Deposit request submitted! It will be verified shortly."}),o(""),d(""),n&&n()}catch(I){x({type:"error",text:((O=(_=I.response)==null?void 0:_.data)==null?void 0:O.message)||"Failed to submit deposit request"})}finally{y(!1)}},w=async()=>{var _,O,I;if(!a||parseFloat(a)<=0){x({type:"error",text:"Please enter a valid amount"});return}if(parseFloat(a)>(((_=e==null?void 0:e.wallet)==null?void 0:_.balance)||0)){x({type:"error",text:"Insufficient balance"});return}y(!0);try{await z.post("/api/user/withdraw-request",{amount:parseFloat(a),accountDetails:u},{headers:{Authorization:`Bearer ${s.token}`}}),x({type:"success",text:"Withdrawal request submitted! It will be processed shortly."}),o(""),h(""),n&&n()}catch(U){x({type:"error",text:((I=(O=U.response)==null?void 0:O.data)==null?void 0:I.message)||"Failed to submit withdrawal request"})}finally{y(!1)}},C=[500,1e3,2e3,5e3,1e4,25e3];return r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-end md:items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 w-full md:w-[480px] md:rounded-xl rounded-t-xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Vt,{className:"text-green-400",size:24}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:"Wallet"}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Balance: ",r.jsxs("span",{className:"text-green-400 font-medium",children:["",((M=(T=e==null?void 0:e.wallet)==null?void 0:T.balance)==null?void 0:M.toLocaleString())||"0"]})]})]})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white p-1",children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"flex border-b border-dark-600",children:[r.jsxs("button",{onClick:()=>{l("deposit"),x(null)},className:`flex-1 py-3 font-medium flex items-center justify-center gap-2 ${i==="deposit"?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-white"}`,children:[r.jsx(zl,{size:18}),"Deposit"]}),r.jsxs("button",{onClick:()=>{l("withdraw"),x(null)},className:`flex-1 py-3 font-medium flex items-center justify-center gap-2 ${i==="withdraw"?"text-red-400 border-b-2 border-red-400":"text-gray-400 hover:text-white"}`,children:[r.jsx(Rl,{size:18}),"Withdraw"]})]}),m&&r.jsx("div",{className:`mx-4 mt-4 p-3 rounded-lg text-sm ${m.type==="success"?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:m.text}),i==="deposit"&&r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[r.jsx(Hr,{size:16}),"Transfer to Bank Account"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Bank Name"}),r.jsx("span",{className:"font-medium",children:(g==null?void 0:g.bankName)||"--"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Account Name"}),r.jsx("span",{className:"font-medium",children:(g==null?void 0:g.accountName)||"--"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Account Number"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-mono font-medium",children:(g==null?void 0:g.accountNumber)||"--"}),r.jsx("button",{onClick:()=>k(g==null?void 0:g.accountNumber,"account"),className:"text-gray-400 hover:text-white",children:b==="account"?r.jsx(Ha,{size:14,className:"text-green-400"}):r.jsx(qa,{size:14})})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"IFSC Code"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-mono font-medium",children:(g==null?void 0:g.ifscCode)||"--"}),r.jsx("button",{onClick:()=>k(g==null?void 0:g.ifscCode,"ifsc"),className:"text-gray-400 hover:text-white",children:b==="ifsc"?r.jsx(Ha,{size:14,className:"text-green-400"}):r.jsx(qa,{size:14})})]})]})]})]}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[r.jsx(As,{size:16}),"Or Pay via UPI"]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-mono text-lg",children:(g==null?void 0:g.upiId)||"--"}),r.jsxs("button",{onClick:()=>k(g==null?void 0:g.upiId,"upi"),className:"px-3 py-1 bg-dark-600 hover:bg-dark-500 rounded text-sm flex items-center gap-1",children:[b==="upi"?r.jsx(Ha,{size:14,className:"text-green-400"}):r.jsx(qa,{size:14}),b==="upi"?"Copied!":"Copy"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Amount ()"}),r.jsx("input",{type:"number",value:a,onChange:_=>o(_.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:C.map(_=>r.jsxs("button",{onClick:()=>o(_.toString()),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm",children:["",_.toLocaleString()]},_))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"UTR / Transaction ID"}),r.jsx("input",{type:"text",value:c,onChange:_=>d(_.target.value),placeholder:"Enter UTR or Transaction ID after payment",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500"})]}),r.jsxs("button",{onClick:S,disabled:f,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[f?r.jsx(ne,{size:18,className:"animate-spin"}):r.jsx(zl,{size:18}),"Submit Deposit Request"]})]}),i==="withdraw"&&r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 text-center",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Available for Withdrawal"}),r.jsxs("p",{className:"text-3xl font-bold text-green-400 mt-1",children:["",((E=(R=e==null?void 0:e.wallet)==null?void 0:R.balance)==null?void 0:E.toLocaleString())||"0"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Withdrawal Amount ()"}),r.jsx("input",{type:"number",value:a,onChange:_=>o(_.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-red-500"}),r.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[C.map(_=>r.jsxs("button",{onClick:()=>o(_.toString()),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm",children:["",_.toLocaleString()]},_)),r.jsx("button",{onClick:()=>{var _;return o((((_=e==null?void 0:e.wallet)==null?void 0:_.balance)||0).toString())},className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm text-green-400",children:"Max"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Bank Account / UPI ID"}),r.jsx("textarea",{value:u,onChange:_=>h(_.target.value),placeholder:"Enter your bank account details or UPI ID",rows:3,className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500 resize-none"})]}),r.jsxs("button",{onClick:w,disabled:f,className:"w-full py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[f?r.jsx(ne,{size:18,className:"animate-spin"}):r.jsx(Rl,{size:18}),"Submit Withdrawal Request"]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Withdrawals are processed within 24-48 hours"})]})]})})},uS=({instrument:t,orderType:e,setOrderType:s,onClose:n,walletData:i,user:l,marketData:a={},onRefreshWallet:o,onRefreshPositions:c})=>{var V;const[d,u]=N.useState("1"),[h,f]=N.useState(""),[y,m]=N.useState("MIS"),[x,b]=N.useState("MARKET"),[p,g]=N.useState(!1),[v,j]=N.useState(""),[k,S]=N.useState(""),w=(t==null?void 0:t.isCrypto)||(t==null?void 0:t.segment)==="CRYPTO"||(t==null?void 0:t.exchange)==="BINANCE",C=a[t==null?void 0:t.token]||{},T=w?(t==null?void 0:t.ltp)||0:C.ltp||(t==null?void 0:t.ltp)||0,M=w?T:C.bid||T,R=w?T:C.ask||T,E=(t==null?void 0:t.lotSize)||1,_=parseFloat(d||1)*E,O=T*_,I=(t==null?void 0:t.segment)==="FNO"||(t==null?void 0:t.instrumentType)==="OPTIONS"||(t==null?void 0:t.instrumentType)==="FUTURES",U=(t==null?void 0:t.segment)==="MCX"||(t==null?void 0:t.exchange)==="MCX",ae=w?[{value:"MIS",label:"Spot",desc:"Crypto spot trading"}]:I||U?[{value:"MIS",label:"Intraday",desc:"Square off same day"},{value:"NRML",label:"Carry Forward",desc:"Hold overnight"}]:[{value:"MIS",label:"Intraday",desc:"Square off same day"},{value:"CNC",label:"Delivery",desc:"Hold in demat"}],B=async()=>{var L,F,H;if(!(l!=null&&l.token)){j("Please login to place orders");return}g(!0),j(""),S("");try{const Q={symbol:t.symbol,token:t.token,pair:t.pair,isCrypto:w,exchange:t.exchange||(w?"BINANCE":"NSE"),segment:w?"CRYPTO":t.segment||(t.exchange==="MCX"?"MCX":"FNO"),instrumentType:w?"CRYPTO":t.instrumentType||"FUTURES",optionType:t.optionType||null,strike:t.strike||null,expiry:t.expiry||null,category:t.category,productType:y,orderType:x,side:e.toUpperCase(),quantity:_,lots:parseFloat(d),lotSize:E,price:T,bidPrice:M,askPrice:R,leverage:1};x==="LIMIT"&&(Q.limitPrice=parseFloat(h)),console.log("Placing order:",Q);const{data:W}=await z.post("/api/trading/order",Q,{headers:{Authorization:`Bearer ${l.token}`}}),K=W.trade,Ce=w?"$":"",Ge=(K==null?void 0:K.status)==="PENDING"?` LIMIT ORDER PLACED - ${t.symbol} @ ${Ce}${h}`:` TRADE EXECUTED - ${K==null?void 0:K.side} ${t.symbol} @ ${Ce}${(L=K==null?void 0:K.entryPrice)==null?void 0:L.toLocaleString()} | Qty: ${K==null?void 0:K.quantity}`;S(Ge),o&&o(),c&&c(),setTimeout(()=>{S(""),n()},3e3)}catch(Q){console.error("Order error:",Q),j(((H=(F=Q.response)==null?void 0:F.data)==null?void 0:H.message)||"Failed to place order")}finally{g(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-end md:items-center justify-center z-50",children:r.jsxs("div",{className:"bg-dark-800 w-full md:w-[420px] md:rounded-xl rounded-t-xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:(t==null?void 0:t.symbol)||"Select Instrument"}),r.jsxs("p",{className:"text-xs text-gray-400",children:[t==null?void 0:t.exchange,"  ",(t==null?void 0:t.segment)||"EQUITY",(t==null?void 0:t.instrumentType)==="OPTIONS"&&`  ${t==null?void 0:t.optionType}`]})]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1",children:r.jsx(be,{size:24})})]}),r.jsxs("div",{className:"flex p-3 gap-2",children:[r.jsxs("button",{onClick:()=>s("sell"),className:`flex-1 py-2 rounded-lg font-bold transition ${e==="sell"?"bg-red-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[r.jsx("div",{className:"text-xs opacity-70",children:w?"Price":"Bid Price"}),r.jsxs("div",{className:"text-xl",children:[w?"$":"",(M==null?void 0:M.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"--"]}),r.jsx("div",{className:"text-sm",children:"SELL"})]}),r.jsxs("button",{onClick:()=>s("buy"),className:`flex-1 py-2 rounded-lg font-bold transition ${e==="buy"?"bg-green-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[r.jsx("div",{className:"text-xs opacity-70",children:w?"Price":"Ask Price"}),r.jsxs("div",{className:"text-xl",children:[w?"$":"",(R==null?void 0:R.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"--"]}),r.jsx("div",{className:"text-sm",children:"BUY"})]})]}),r.jsxs("div",{className:"px-4 pb-3",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Product Type"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.map(L=>r.jsxs("button",{onClick:()=>m(L.value),className:`p-3 rounded-lg border-2 text-left transition ${y===L.value?"border-green-500 bg-green-500/10":"border-dark-600 bg-dark-700 hover:border-dark-500"}`,children:[r.jsx("div",{className:"font-semibold text-sm",children:L.label}),r.jsx("div",{className:"text-xs text-gray-500",children:L.desc})]},L.value))})]}),r.jsxs("div",{className:"px-4 pb-3",children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Order Type"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>b("MARKET"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${x==="MARKET"?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Market"}),r.jsx("button",{onClick:()=>b("LIMIT"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${x==="LIMIT"?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Limit"})]})]}),r.jsxs("div",{className:"p-4 pt-0 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Quantity ",E>1&&`(Lot Size: ${E})`]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>u(Math.max(1,parseInt(d)-1).toString()),className:"px-4 py-3 bg-dark-700 rounded-lg hover:bg-dark-600 font-bold",children:""}),r.jsx("input",{type:"number",value:d,onChange:L=>u(L.target.value),className:"flex-1 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-center text-lg font-bold focus:outline-none focus:border-green-500",min:"1"}),r.jsx("button",{onClick:()=>u((parseInt(d)+1).toString()),className:"px-4 py-3 bg-dark-700 rounded-lg hover:bg-dark-600 font-bold",children:"+"})]})]}),x==="LIMIT"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Limit Price"}),r.jsx("input",{type:"number",value:h,onChange:L=>f(L.target.value),placeholder:"Enter price",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500",step:"0.05"})]}),r.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400 text-sm",children:"Last Traded Price"}),r.jsxs("span",{className:"text-xl font-bold",children:["",(T==null?void 0:T.toLocaleString())||"--"]})]})}),r.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Available Margin"}),r.jsxs("span",{className:"text-green-400 font-medium",children:["",((V=i==null?void 0:i.marginAvailable)==null?void 0:V.toLocaleString())||"0"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-400",children:"Required Margin"}),r.jsxs("span",{className:"font-medium",children:["",(O*(U?.05:.15)/(y==="MIS"?2:1)).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm border-t border-dark-600 pt-2",children:[r.jsx("span",{className:"text-gray-400",children:"Order Value"}),r.jsxs("span",{className:"font-medium",children:["",O.toLocaleString()]})]})]}),v&&r.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-3 py-2 rounded text-sm",children:v}),k&&r.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-400 px-3 py-2 rounded text-sm",children:k}),r.jsxs("button",{onClick:B,disabled:p,className:`w-full py-4 rounded-lg font-bold text-lg transition ${e==="buy"?"bg-green-600 hover:bg-green-700 disabled:bg-green-800":"bg-red-600 hover:bg-red-700 disabled:bg-red-800"}`,children:[p?"Placing Order...":`${e==="buy"?"BUY":"SELL"} ${t==null?void 0:t.symbol}`,r.jsxs("span",{className:"ml-2 text-sm opacity-80",children:["(",y==="MIS"?"Intraday":y==="NRML"?"Carry Forward":"Delivery",")"]})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:y==="MIS"?"Intraday position will be auto squared-off before market close":y==="NRML"?"Position will be carried forward to next trading day":"Shares will be delivered to your demat account (T+1)"})]})]})})};function Wf(){const t=[],e=new Date;let s=984;for(let n=100;n>=0;n--){const i=new Date(e.getTime()-n*6e4),l=s+(Math.random()-.5)*2,a=l+(Math.random()-.5)*2,o=Math.max(l,a)+Math.random()*1,c=Math.min(l,a)-Math.random()*1;t.push({time:Math.floor(i.getTime()/1e3),open:l,high:o,low:c,close:a}),s=a}return t}const hS=()=>r.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[r.jsxs("header",{className:"flex items-center justify-between px-8 py-4 border-b border-dark-600 bg-dark-800/50 backdrop-blur-sm fixed w-full z-50",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-xl font-bold",children:"THEFX"})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(Pe,{to:"/login",className:"px-4 py-2 text-gray-300 hover:text-white transition",children:"Login"}),r.jsx(Pe,{to:"/login?register=true",className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition",children:"Create Account"})]})]}),r.jsx("main",{className:"flex-1 pt-20",children:r.jsxs("div",{className:"relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute top-20 left-1/4 w-96 h-96 bg-green-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-20 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),r.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center px-8 py-20",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-center bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"Professional Trading Platform"}),r.jsx("p",{className:"text-xl text-gray-400 mb-10 text-center max-w-2xl",children:"Trade NSE, BSE, MCX with advanced charting, real-time data, and powerful tools"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-16",children:[r.jsxs(Pe,{to:"/login?register=true",className:"flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-xl font-semibold transition shadow-lg shadow-green-500/25",children:["Create Account",r.jsx(HN,{size:18})]}),r.jsx(Pe,{to:"/login",className:"flex items-center justify-center gap-2 px-8 py-4 bg-dark-700 hover:bg-dark-600 border border-dark-500 rounded-xl font-semibold transition",children:"Already have an account? Login"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl w-full",children:[r.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[r.jsx(W0,{className:"w-10 h-10 text-yellow-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Fast Execution"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Lightning fast order execution with minimal latency"})]}),r.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[r.jsx(U0,{className:"w-10 h-10 text-green-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Advanced Charts"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"TradingView powered charts with all indicators"})]}),r.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[r.jsx(Kr,{className:"w-10 h-10 text-blue-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Secure Trading"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Bank-grade security for your funds and data"})]}),r.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[r.jsx(Wr,{className:"w-10 h-10 text-purple-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Segments"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"NSE, BSE, MCX - Equity, F&O, Commodities"})]})]}),r.jsxs("div",{className:"mt-16 text-center",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"Supported Exchanges"}),r.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:["NSE Equity","BSE Equity","NSE F&O","BSE F&O","MCX"].map(t=>r.jsx("span",{className:"px-4 py-2 bg-dark-700 rounded-lg text-sm text-gray-300",children:t},t))})]})]})]})}),r.jsxs("footer",{className:"text-center py-6 text-gray-500 border-t border-dark-600 bg-dark-800/50",children:[r.jsx("p",{children:" 2024 THEFX. All rights reserved."}),r.jsxs("div",{className:"flex justify-center gap-6 mt-2 text-sm",children:[r.jsx(Pe,{to:"/login",className:"hover:text-green-400 transition",children:"Login"}),r.jsx("span",{className:"hover:text-gray-400 transition cursor-default",children:"Terms"}),r.jsx("span",{className:"hover:text-gray-400 transition cursor-default",children:"Privacy"})]})]})]}),fS=({children:t})=>{const{admin:e,loading:s}=ce();return s?r.jsx("div",{className:"flex items-center justify-center h-screen bg-dark-900",children:"Loading..."}):e?t:r.jsx(f0,{to:"/admin/login"})},mS=({children:t})=>{const{user:e,loading:s}=ce();return s?r.jsx("div",{className:"flex items-center justify-center h-screen bg-dark-900",children:"Loading..."}):e?t:r.jsx(f0,{to:"/login"})};function pS(){return r.jsx(DN,{children:r.jsx(ob,{children:r.jsxs(m0,{children:[r.jsx(de,{path:"/",element:r.jsx(hS,{})}),r.jsx(de,{path:"/login",element:r.jsx(kw,{})}),r.jsx(de,{path:"/admin/login",element:r.jsx(QN,{})}),r.jsx(de,{path:"/admin/*",element:r.jsx(fS,{children:r.jsx(JN,{})})}),r.jsx(de,{path:"/dashboard/*",element:r.jsx(mS,{children:r.jsx(Jk,{})})})]})})})}xo.createRoot(document.getElementById("root")).render(r.jsx(tm.StrictMode,{children:r.jsx(pS,{})}));
