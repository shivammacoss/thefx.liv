function Lx(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const l=Object.getOwnPropertyDescriptor(n,r);l&&Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();function Px(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uf={exports:{}},Il={},Vf={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jr=Symbol.for("react.element"),zx=Symbol.for("react.portal"),Rx=Symbol.for("react.fragment"),Ax=Symbol.for("react.strict_mode"),Ox=Symbol.for("react.profiler"),Ix=Symbol.for("react.provider"),$x=Symbol.for("react.context"),Bx=Symbol.for("react.forward_ref"),Fx=Symbol.for("react.suspense"),Dx=Symbol.for("react.memo"),Ux=Symbol.for("react.lazy"),rd=Symbol.iterator;function Vx(t){return t===null||typeof t!="object"?null:(t=rd&&t[rd]||t["@@iterator"],typeof t=="function"?t:null)}var Wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hf=Object.assign,qf={};function An(t,e,s){this.props=t,this.context=e,this.refs=qf,this.updater=s||Wf}An.prototype.isReactComponent={};An.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};An.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kf(){}Kf.prototype=An.prototype;function Pc(t,e,s){this.props=t,this.context=e,this.refs=qf,this.updater=s||Wf}var zc=Pc.prototype=new Kf;zc.constructor=Pc;Hf(zc,An.prototype);zc.isPureReactComponent=!0;var id=Array.isArray,Yf=Object.prototype.hasOwnProperty,Rc={current:null},Xf={key:!0,ref:!0,__self:!0,__source:!0};function Qf(t,e,s){var n,r={},l=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(l=""+e.key),e)Yf.call(e,n)&&!Xf.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:Jr,type:t,key:l,ref:a,props:r,_owner:Rc.current}}function Wx(t,e){return{$$typeof:Jr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ac(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jr}function Hx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var ld=/\/+/g;function fa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hx(""+t.key):e.toString(36)}function $i(t,e,s,n,r){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Jr:case zx:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+fa(a,0):n,id(r)?(s="",t!=null&&(s=t.replace(ld,"$&/")+"/"),$i(r,e,s,"",function(u){return u})):r!=null&&(Ac(r)&&(r=Wx(r,s+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(ld,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",id(t))for(var o=0;o<t.length;o++){l=t[o];var c=n+fa(l,o);a+=$i(l,e,s,c,r)}else if(c=Vx(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=n+fa(l,o++),a+=$i(l,e,s,c,r);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function oi(t,e,s){if(t==null)return t;var n=[],r=0;return $i(t,n,"","",function(l){return e.call(s,l,r++)}),n}function qx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Bi={transition:null},Kx={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Bi,ReactCurrentOwner:Rc};function Jf(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:oi,forEach:function(t,e,s){oi(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return oi(t,function(){e++}),e},toArray:function(t){return oi(t,function(e){return e})||[]},only:function(t){if(!Ac(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=An;J.Fragment=Rx;J.Profiler=Ox;J.PureComponent=Pc;J.StrictMode=Ax;J.Suspense=Fx;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;J.act=Jf;J.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Hf({},t.props),r=t.key,l=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,a=Rc.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Yf.call(e,c)&&!Xf.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Jr,type:t.type,key:r,ref:l,props:n,_owner:a}};J.createContext=function(t){return t={$$typeof:$x,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ix,_context:t},t.Consumer=t};J.createElement=Qf;J.createFactory=function(t){var e=Qf.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:Bx,render:t}};J.isValidElement=Ac;J.lazy=function(t){return{$$typeof:Ux,_payload:{_status:-1,_result:t},_init:qx}};J.memo=function(t,e){return{$$typeof:Dx,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Bi.transition;Bi.transition={};try{t()}finally{Bi.transition=e}};J.unstable_act=Jf;J.useCallback=function(t,e){return De.current.useCallback(t,e)};J.useContext=function(t){return De.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return De.current.useDeferredValue(t)};J.useEffect=function(t,e){return De.current.useEffect(t,e)};J.useId=function(){return De.current.useId()};J.useImperativeHandle=function(t,e,s){return De.current.useImperativeHandle(t,e,s)};J.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return De.current.useMemo(t,e)};J.useReducer=function(t,e,s){return De.current.useReducer(t,e,s)};J.useRef=function(t){return De.current.useRef(t)};J.useState=function(t){return De.current.useState(t)};J.useSyncExternalStore=function(t,e,s){return De.current.useSyncExternalStore(t,e,s)};J.useTransition=function(){return De.current.useTransition()};J.version="18.3.1";Vf.exports=J;var b=Vf.exports;const Gf=Px(b),Yx=Lx({__proto__:null,default:Gf},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=b,Qx=Symbol.for("react.element"),Jx=Symbol.for("react.fragment"),Gx=Object.prototype.hasOwnProperty,Zx=Xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eg={key:!0,ref:!0,__self:!0,__source:!0};function Zf(t,e,s){var n,r={},l=null,a=null;s!==void 0&&(l=""+s),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Gx.call(e,n)&&!eg.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Qx,type:t,key:l,ref:a,props:r,_owner:Zx.current}}Il.Fragment=Jx;Il.jsx=Zf;Il.jsxs=Zf;Uf.exports=Il;var i=Uf.exports,mo={},ep={exports:{}},tt={},tp={exports:{}},sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,U){var V=I.length;I.push(U);e:for(;0<V;){var K=V-1>>>1,Z=I[K];if(0<r(Z,U))I[K]=U,I[V]=Z,V=K;else break e}}function s(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var U=I[0],V=I.pop();if(V!==U){I[0]=V;e:for(var K=0,Z=I.length,Q=Z>>>1;K<Q;){var se=2*(K+1)-1,Ne=I[se],R=se+1,B=I[R];if(0>r(Ne,V))R<Z&&0>r(B,Ne)?(I[K]=B,I[R]=V,K=R):(I[K]=Ne,I[se]=V,K=se);else if(R<Z&&0>r(B,V))I[K]=B,I[R]=V,K=R;else break e}}return U}function r(I,U){var V=I.sortIndex-U.sortIndex;return V!==0?V:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,f=3,y=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(I){for(var U=s(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=I)n(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=s(u)}}function j(I){if(m=!1,N(I),!p)if(s(c)!==null)p=!0,W(k);else{var U=s(u);U!==null&&be(j,U.startTime-I)}}function k(I,U){p=!1,m&&(m=!1,g(S),S=-1),y=!0;var V=f;try{for(N(U),h=s(c);h!==null&&(!(h.expirationTime>U)||I&&!$());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var Z=K(h.expirationTime<=U);U=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===s(c)&&n(c),N(U)}else n(c);h=s(c)}if(h!==null)var Q=!0;else{var se=s(u);se!==null&&be(j,se.startTime-U),Q=!1}return Q}finally{h=null,f=V,y=!1}}var C=!1,w=null,S=-1,T=5,L=-1;function $(){return!(t.unstable_now()-L<T)}function M(){if(w!==null){var I=t.unstable_now();L=I;var U=!0;try{U=w(!0,I)}finally{U?E():(C=!1,w=null)}}else C=!1}var E;if(typeof x=="function")E=function(){x(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,F=P.port2;P.port1.onmessage=M,E=function(){F.postMessage(null)}}else E=function(){v(M,0)};function W(I){w=I,C||(C=!0,E())}function be(I,U){S=v(function(){I(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||y||(p=!0,W(k))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var V=f;f=U;try{return I()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=f;f=I;try{return U()}finally{f=V}},t.unstable_scheduleCallback=function(I,U,V){var K=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,I){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,I={id:d++,callback:U,priorityLevel:I,startTime:V,expirationTime:Z,sortIndex:-1},V>K?(I.sortIndex=V,e(u,I),s(c)===null&&I===s(u)&&(m?(g(S),S=-1):m=!0,be(j,V-K))):(I.sortIndex=Z,e(c,I),p||y||(p=!0,W(k))),I},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(I){var U=f;return function(){var V=f;f=U;try{return I.apply(this,arguments)}finally{f=V}}}})(sp);tp.exports=sp;var tg=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=b,et=tg;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var np=new Set,jr={};function Xs(t,e){Sn(t,e),Sn(t+"Capture",e)}function Sn(t,e){for(jr[t]=e,t=0;t<e.length;t++)np.add(e[t])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=Object.prototype.hasOwnProperty,ng=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ad={},od={};function rg(t){return xo.call(od,t)?!0:xo.call(ad,t)?!1:ng.test(t)?od[t]=!0:(ad[t]=!0,!1)}function ig(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lg(t,e,s,n){if(e===null||typeof e>"u"||ig(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ue(t,e,s,n,r,l,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=a}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new Ue(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new Ue(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new Ue(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new Ue(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new Ue(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new Ue(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new Ue(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new Ue(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new Ue(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Ic(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Ic);Pe[e]=new Ue(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Ic);Pe[e]=new Ue(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Ic);Pe[e]=new Ue(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new Ue(t,1,!1,t.toLowerCase(),null,!0,!0)});function $c(t,e,s,n){var r=Pe.hasOwnProperty(e)?Pe[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lg(e,s,r,n)&&(s=null),n||r===null?rg(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Yt=sg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),sn=Symbol.for("react.portal"),nn=Symbol.for("react.fragment"),Bc=Symbol.for("react.strict_mode"),go=Symbol.for("react.profiler"),rp=Symbol.for("react.provider"),ip=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),yo=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),cd=Symbol.iterator;function Hn(t){return t===null||typeof t!="object"?null:(t=cd&&t[cd]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,pa;function rr(t){if(pa===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);pa=e&&e[1]||""}return`
`+pa+t}var ma=!1;function xa(t,e){if(!t||ma)return"";ma=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),l=n.stack.split(`
`),a=r.length-1,o=l.length-1;1<=a&&0<=o&&r[a]!==l[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==l[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==l[o]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{ma=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?rr(t):""}function ag(t){switch(t.tag){case 5:return rr(t.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 2:case 15:return t=xa(t.type,!1),t;case 11:return t=xa(t.type.render,!1),t;case 1:return t=xa(t.type,!0),t;default:return""}}function bo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nn:return"Fragment";case sn:return"Portal";case go:return"Profiler";case Bc:return"StrictMode";case yo:return"Suspense";case vo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ip:return(t.displayName||"Context")+".Consumer";case rp:return(t._context.displayName||"Context")+".Provider";case Fc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dc:return e=t.displayName||null,e!==null?e:bo(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return bo(t(e))}catch{}}return null}function og(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(e);case 8:return e===Bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ap(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cg(t){var e=ap(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,l=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,l.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ui(t){t._valueTracker||(t._valueTracker=cg(t))}function op(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=ap(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function No(t,e){var s=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ud(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=ys(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cp(t,e){e=e.checked,e!=null&&$c(t,"checked",e,!1)}function wo(t,e){cp(t,e);var s=ys(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jo(t,e.type,s):e.hasOwnProperty("defaultValue")&&jo(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dd(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function jo(t,e,s){(e!=="number"||rl(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ir=Array.isArray;function yn(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+ys(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ko(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hd(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(O(92));if(ir(s)){if(1<s.length)throw Error(O(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:ys(s)}}function up(t,e){var s=ys(e.value),n=ys(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function fd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function So(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var di,hp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(di=di||document.createElement("div"),di.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=di.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kr(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ug=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(t){ug.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ur[e]=ur[t]})});function fp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||ur.hasOwnProperty(t)&&ur[t]?(""+e).trim():e+"px"}function pp(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=fp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var dg=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(t,e){if(e){if(dg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Eo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=null;function Uc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var To=null,vn=null,bn=null;function pd(t){if(t=ei(t)){if(typeof To!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Ul(e),To(t.stateNode,t.type,e))}}function mp(t){vn?bn?bn.push(t):bn=[t]:vn=t}function xp(){if(vn){var t=vn,e=bn;if(bn=vn=null,pd(t),e)for(t=0;t<e.length;t++)pd(e[t])}}function gp(t,e){return t(e)}function yp(){}var ga=!1;function vp(t,e,s){if(ga)return t(e,s);ga=!0;try{return gp(t,e,s)}finally{ga=!1,(vn!==null||bn!==null)&&(yp(),xp())}}function Sr(t,e){var s=t.stateNode;if(s===null)return null;var n=Ul(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(O(231,e,typeof s));return s}var Mo=!1;if(Vt)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Mo=!1}function hg(t,e,s,n,r,l,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var dr=!1,il=null,ll=!1,Lo=null,fg={onError:function(t){dr=!0,il=t}};function pg(t,e,s,n,r,l,a,o,c){dr=!1,il=null,hg.apply(fg,arguments)}function mg(t,e,s,n,r,l,a,o,c){if(pg.apply(this,arguments),dr){if(dr){var u=il;dr=!1,il=null}else throw Error(O(198));ll||(ll=!0,Lo=u)}}function Qs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function bp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function md(t){if(Qs(t)!==t)throw Error(O(188))}function xg(t){var e=t.alternate;if(!e){if(e=Qs(t),e===null)throw Error(O(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var l=r.alternate;if(l===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===s)return md(r),t;if(l===n)return md(r),e;l=l.sibling}throw Error(O(188))}if(s.return!==n.return)s=r,n=l;else{for(var a=!1,o=r.child;o;){if(o===s){a=!0,s=r,n=l;break}if(o===n){a=!0,n=r,s=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===s){a=!0,s=l,n=r;break}if(o===n){a=!0,n=l,s=r;break}o=o.sibling}if(!a)throw Error(O(189))}}if(s.alternate!==n)throw Error(O(190))}if(s.tag!==3)throw Error(O(188));return s.stateNode.current===s?t:e}function Np(t){return t=xg(t),t!==null?wp(t):null}function wp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wp(t);if(e!==null)return e;t=t.sibling}return null}var jp=et.unstable_scheduleCallback,xd=et.unstable_cancelCallback,gg=et.unstable_shouldYield,yg=et.unstable_requestPaint,xe=et.unstable_now,vg=et.unstable_getCurrentPriorityLevel,Vc=et.unstable_ImmediatePriority,kp=et.unstable_UserBlockingPriority,al=et.unstable_NormalPriority,bg=et.unstable_LowPriority,Sp=et.unstable_IdlePriority,$l=null,Lt=null;function Ng(t){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot($l,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:kg,wg=Math.log,jg=Math.LN2;function kg(t){return t>>>=0,t===0?32:31-(wg(t)/jg|0)|0}var hi=64,fi=4194304;function lr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ol(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,l=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~r;o!==0?n=lr(o):(l&=a,l!==0&&(n=lr(l)))}else a=s&~r,a!==0?n=lr(a):l!==0&&(n=lr(l));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,l=e&-e,r>=l||r===16&&(l&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-vt(e),r=1<<s,n|=t[s],e&=~r;return n}function Sg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,l=t.pendingLanes;0<l;){var a=31-vt(l),o=1<<a,c=r[a];c===-1?(!(o&s)||o&n)&&(r[a]=Sg(o,e)):c<=e&&(t.expiredLanes|=o),l&=~o}}function Po(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cp(){var t=hi;return hi<<=1,!(hi&4194240)&&(hi=64),t}function ya(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Gr(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=s}function Eg(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-vt(s),l=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~l}}function Wc(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-vt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var ne=0;function Ep(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _p,Hc,Tp,Mp,Lp,zo=!1,pi=[],as=null,os=null,cs=null,Cr=new Map,Er=new Map,ts=[],_g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gd(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":Cr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(e.pointerId)}}function Kn(t,e,s,n,r,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[r]},e!==null&&(e=ei(e),e!==null&&Hc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Tg(t,e,s,n,r){switch(e){case"focusin":return as=Kn(as,t,e,s,n,r),!0;case"dragenter":return os=Kn(os,t,e,s,n,r),!0;case"mouseover":return cs=Kn(cs,t,e,s,n,r),!0;case"pointerover":var l=r.pointerId;return Cr.set(l,Kn(Cr.get(l)||null,t,e,s,n,r)),!0;case"gotpointercapture":return l=r.pointerId,Er.set(l,Kn(Er.get(l)||null,t,e,s,n,r)),!0}return!1}function Pp(t){var e=Ts(t.target);if(e!==null){var s=Qs(e);if(s!==null){if(e=s.tag,e===13){if(e=bp(s),e!==null){t.blockedOn=e,Lp(t.priority,function(){Tp(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ro(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);_o=n,s.target.dispatchEvent(n),_o=null}else return e=ei(s),e!==null&&Hc(e),t.blockedOn=s,!1;e.shift()}return!0}function yd(t,e,s){Fi(t)&&s.delete(e)}function Mg(){zo=!1,as!==null&&Fi(as)&&(as=null),os!==null&&Fi(os)&&(os=null),cs!==null&&Fi(cs)&&(cs=null),Cr.forEach(yd),Er.forEach(yd)}function Yn(t,e){t.blockedOn===e&&(t.blockedOn=null,zo||(zo=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,Mg)))}function _r(t){function e(r){return Yn(r,t)}if(0<pi.length){Yn(pi[0],t);for(var s=1;s<pi.length;s++){var n=pi[s];n.blockedOn===t&&(n.blockedOn=null)}}for(as!==null&&Yn(as,t),os!==null&&Yn(os,t),cs!==null&&Yn(cs,t),Cr.forEach(e),Er.forEach(e),s=0;s<ts.length;s++)n=ts[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<ts.length&&(s=ts[0],s.blockedOn===null);)Pp(s),s.blockedOn===null&&ts.shift()}var Nn=Yt.ReactCurrentBatchConfig,cl=!0;function Lg(t,e,s,n){var r=ne,l=Nn.transition;Nn.transition=null;try{ne=1,qc(t,e,s,n)}finally{ne=r,Nn.transition=l}}function Pg(t,e,s,n){var r=ne,l=Nn.transition;Nn.transition=null;try{ne=4,qc(t,e,s,n)}finally{ne=r,Nn.transition=l}}function qc(t,e,s,n){if(cl){var r=Ro(t,e,s,n);if(r===null)_a(t,e,n,ul,s),gd(t,n);else if(Tg(r,t,e,s,n))n.stopPropagation();else if(gd(t,n),e&4&&-1<_g.indexOf(t)){for(;r!==null;){var l=ei(r);if(l!==null&&_p(l),l=Ro(t,e,s,n),l===null&&_a(t,e,n,ul,s),l===r)break;r=l}r!==null&&n.stopPropagation()}else _a(t,e,n,null,s)}}var ul=null;function Ro(t,e,s,n){if(ul=null,t=Uc(n),t=Ts(t),t!==null)if(e=Qs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=bp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ul=t,null}function zp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vg()){case Vc:return 1;case kp:return 4;case al:case bg:return 16;case Sp:return 536870912;default:return 16}default:return 16}}var ns=null,Kc=null,Di=null;function Rp(){if(Di)return Di;var t,e=Kc,s=e.length,n,r="value"in ns?ns.value:ns.textContent,l=r.length;for(t=0;t<s&&e[t]===r[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===r[l-n];n++);return Di=r.slice(t,1<n?1-n:void 0)}function Ui(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mi(){return!0}function vd(){return!1}function st(t){function e(s,n,r,l,a){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?mi:vd,this.isPropagationStopped=vd,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),e}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yc=st(On),Zr=de({},On,{view:0,detail:0}),zg=st(Zr),va,ba,Xn,Bl=de({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xn&&(Xn&&t.type==="mousemove"?(va=t.screenX-Xn.screenX,ba=t.screenY-Xn.screenY):ba=va=0,Xn=t),va)},movementY:function(t){return"movementY"in t?t.movementY:ba}}),bd=st(Bl),Rg=de({},Bl,{dataTransfer:0}),Ag=st(Rg),Og=de({},Zr,{relatedTarget:0}),Na=st(Og),Ig=de({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),$g=st(Ig),Bg=de({},On,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fg=st(Bg),Dg=de({},On,{data:0}),Nd=st(Dg),Ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wg[t])?!!e[t]:!1}function Xc(){return Hg}var qg=de({},Zr,{key:function(t){if(t.key){var e=Ug[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(t){return t.type==="keypress"?Ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kg=st(qg),Yg=de({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wd=st(Yg),Xg=de({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),Qg=st(Xg),Jg=de({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gg=st(Jg),Zg=de({},Bl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ey=st(Zg),ty=[9,13,27,32],Qc=Vt&&"CompositionEvent"in window,hr=null;Vt&&"documentMode"in document&&(hr=document.documentMode);var sy=Vt&&"TextEvent"in window&&!hr,Ap=Vt&&(!Qc||hr&&8<hr&&11>=hr),jd=" ",kd=!1;function Op(t,e){switch(t){case"keyup":return ty.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rn=!1;function ny(t,e){switch(t){case"compositionend":return Ip(e);case"keypress":return e.which!==32?null:(kd=!0,jd);case"textInput":return t=e.data,t===jd&&kd?null:t;default:return null}}function ry(t,e){if(rn)return t==="compositionend"||!Qc&&Op(t,e)?(t=Rp(),Di=Kc=ns=null,rn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ap&&e.locale!=="ko"?null:e.data;default:return null}}var iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iy[t.type]:e==="textarea"}function $p(t,e,s,n){mp(n),e=dl(e,"onChange"),0<e.length&&(s=new Yc("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var fr=null,Tr=null;function ly(t){Xp(t,0)}function Fl(t){var e=on(t);if(op(e))return t}function ay(t,e){if(t==="change")return e}var Bp=!1;if(Vt){var wa;if(Vt){var ja="oninput"in document;if(!ja){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),ja=typeof Cd.oninput=="function"}wa=ja}else wa=!1;Bp=wa&&(!document.documentMode||9<document.documentMode)}function Ed(){fr&&(fr.detachEvent("onpropertychange",Fp),Tr=fr=null)}function Fp(t){if(t.propertyName==="value"&&Fl(Tr)){var e=[];$p(e,Tr,t,Uc(t)),vp(ly,e)}}function oy(t,e,s){t==="focusin"?(Ed(),fr=e,Tr=s,fr.attachEvent("onpropertychange",Fp)):t==="focusout"&&Ed()}function cy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(Tr)}function uy(t,e){if(t==="click")return Fl(e)}function dy(t,e){if(t==="input"||t==="change")return Fl(e)}function hy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nt=typeof Object.is=="function"?Object.is:hy;function Mr(t,e){if(Nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!xo.call(e,r)||!Nt(t[r],e[r]))return!1}return!0}function _d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Td(t,e){var s=_d(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=_d(s)}}function Dp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Up(){for(var t=window,e=rl();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=rl(t.document)}return e}function Jc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fy(t){var e=Up(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Dp(s.ownerDocument.documentElement,s)){if(n!==null&&Jc(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,l=Math.min(n.start,r);n=n.end===void 0?l:Math.min(n.end,r),!t.extend&&l>n&&(r=n,n=l,l=r),r=Td(s,l);var a=Td(s,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),l>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var py=Vt&&"documentMode"in document&&11>=document.documentMode,ln=null,Ao=null,pr=null,Oo=!1;function Md(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Oo||ln==null||ln!==rl(n)||(n=ln,"selectionStart"in n&&Jc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pr&&Mr(pr,n)||(pr=n,n=dl(Ao,"onSelect"),0<n.length&&(e=new Yc("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=ln)))}function xi(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var an={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},ka={},Vp={};Vt&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function Dl(t){if(ka[t])return ka[t];if(!an[t])return t;var e=an[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Vp)return ka[t]=e[s];return t}var Wp=Dl("animationend"),Hp=Dl("animationiteration"),qp=Dl("animationstart"),Kp=Dl("transitionend"),Yp=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){Yp.set(t,e),Xs(e,[t])}for(var Sa=0;Sa<Ld.length;Sa++){var Ca=Ld[Sa],my=Ca.toLowerCase(),xy=Ca[0].toUpperCase()+Ca.slice(1);Ns(my,"on"+xy)}Ns(Wp,"onAnimationEnd");Ns(Hp,"onAnimationIteration");Ns(qp,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(Kp,"onTransitionEnd");Sn("onMouseEnter",["mouseout","mouseover"]);Sn("onMouseLeave",["mouseout","mouseover"]);Sn("onPointerEnter",["pointerout","pointerover"]);Sn("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ar));function Pd(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,mg(n,e,void 0,t),t.currentTarget=null}function Xp(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var l=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==l&&r.isPropagationStopped())break e;Pd(r,o,u),l=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==l&&r.isPropagationStopped())break e;Pd(r,o,u),l=c}}}if(ll)throw t=Lo,ll=!1,Lo=null,t}function ie(t,e){var s=e[Do];s===void 0&&(s=e[Do]=new Set);var n=t+"__bubble";s.has(n)||(Qp(e,t,2,!1),s.add(n))}function Ea(t,e,s){var n=0;e&&(n|=4),Qp(s,t,n,e)}var gi="_reactListening"+Math.random().toString(36).slice(2);function Lr(t){if(!t[gi]){t[gi]=!0,np.forEach(function(s){s!=="selectionchange"&&(gy.has(s)||Ea(s,!1,t),Ea(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gi]||(e[gi]=!0,Ea("selectionchange",!1,e))}}function Qp(t,e,s,n){switch(zp(e)){case 1:var r=Lg;break;case 4:r=Pg;break;default:r=qc}s=r.bind(null,e,s,t),r=void 0,!Mo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function _a(t,e,s,n,r){var l=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Ts(o),a===null)return;if(c=a.tag,c===5||c===6){n=l=a;continue e}o=o.parentNode}}n=n.return}vp(function(){var u=l,d=Uc(s),h=[];e:{var f=Yp.get(t);if(f!==void 0){var y=Yc,p=t;switch(t){case"keypress":if(Ui(s)===0)break e;case"keydown":case"keyup":y=Kg;break;case"focusin":p="focus",y=Na;break;case"focusout":p="blur",y=Na;break;case"beforeblur":case"afterblur":y=Na;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Qg;break;case Wp:case Hp:case qp:y=$g;break;case Kp:y=Gg;break;case"scroll":y=zg;break;case"wheel":y=ey;break;case"copy":case"cut":case"paste":y=Fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wd}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var x=u,N;x!==null;){N=x;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,g!==null&&(j=Sr(x,g),j!=null&&m.push(Pr(x,j,N)))),v)break;x=x.return}0<m.length&&(f=new y(f,p,null,s,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&s!==_o&&(p=s.relatedTarget||s.fromElement)&&(Ts(p)||p[Wt]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(p=s.relatedTarget||s.toElement,y=u,p=p?Ts(p):null,p!==null&&(v=Qs(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(m=bd,j="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=wd,j="onPointerLeave",g="onPointerEnter",x="pointer"),v=y==null?f:on(y),N=p==null?f:on(p),f=new m(j,x+"leave",y,s,d),f.target=v,f.relatedTarget=N,j=null,Ts(d)===u&&(m=new m(g,x+"enter",p,s,d),m.target=N,m.relatedTarget=v,j=m),v=j,y&&p)t:{for(m=y,g=p,x=0,N=m;N;N=en(N))x++;for(N=0,j=g;j;j=en(j))N++;for(;0<x-N;)m=en(m),x--;for(;0<N-x;)g=en(g),N--;for(;x--;){if(m===g||g!==null&&m===g.alternate)break t;m=en(m),g=en(g)}m=null}else m=null;y!==null&&zd(h,f,y,m,!1),p!==null&&v!==null&&zd(h,v,p,m,!0)}}e:{if(f=u?on(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var k=ay;else if(Sd(f))if(Bp)k=dy;else{k=cy;var C=oy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=uy);if(k&&(k=k(t,u))){$p(h,k,s,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&jo(f,"number",f.value)}switch(C=u?on(u):window,t){case"focusin":(Sd(C)||C.contentEditable==="true")&&(ln=C,Ao=u,pr=null);break;case"focusout":pr=Ao=ln=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,Md(h,s,d);break;case"selectionchange":if(py)break;case"keydown":case"keyup":Md(h,s,d)}var w;if(Qc)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else rn?Op(t,s)&&(S="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(Ap&&s.locale!=="ko"&&(rn||S!=="onCompositionStart"?S==="onCompositionEnd"&&rn&&(w=Rp()):(ns=d,Kc="value"in ns?ns.value:ns.textContent,rn=!0)),C=dl(u,S),0<C.length&&(S=new Nd(S,t,null,s,d),h.push({event:S,listeners:C}),w?S.data=w:(w=Ip(s),w!==null&&(S.data=w)))),(w=sy?ny(t,s):ry(t,s))&&(u=dl(u,"onBeforeInput"),0<u.length&&(d=new Nd("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=w))}Xp(h,e)})}function Pr(t,e,s){return{instance:t,listener:e,currentTarget:s}}function dl(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,l=r.stateNode;r.tag===5&&l!==null&&(r=l,l=Sr(t,s),l!=null&&n.unshift(Pr(t,l,r)),l=Sr(t,e),l!=null&&n.push(Pr(t,l,r))),t=t.return}return n}function en(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zd(t,e,s,n,r){for(var l=e._reactName,a=[];s!==null&&s!==n;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,r?(c=Sr(s,l),c!=null&&a.unshift(Pr(s,c,o))):r||(c=Sr(s,l),c!=null&&a.push(Pr(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var yy=/\r\n?/g,vy=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(yy,`
`).replace(vy,"")}function yi(t,e,s){if(e=Rd(e),Rd(t)!==e&&s)throw Error(O(425))}function hl(){}var Io=null,$o=null;function Bo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fo=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,Ny=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(t){return Ad.resolve(null).then(t).catch(wy)}:Fo;function wy(t){setTimeout(function(){throw t})}function Ta(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),_r(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);_r(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Od(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var In=Math.random().toString(36).slice(2),Tt="__reactFiber$"+In,zr="__reactProps$"+In,Wt="__reactContainer$"+In,Do="__reactEvents$"+In,jy="__reactListeners$"+In,ky="__reactHandles$"+In;function Ts(t){var e=t[Tt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Wt]||s[Tt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Od(t);t!==null;){if(s=t[Tt])return s;t=Od(t)}return e}t=s,s=t.parentNode}return null}function ei(t){return t=t[Tt]||t[Wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function on(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Ul(t){return t[zr]||null}var Uo=[],cn=-1;function ws(t){return{current:t}}function ae(t){0>cn||(t.current=Uo[cn],Uo[cn]=null,cn--)}function re(t,e){cn++,Uo[cn]=t.current,t.current=e}var vs={},Ie=ws(vs),He=ws(!1),$s=vs;function Cn(t,e){var s=t.type.contextTypes;if(!s)return vs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},l;for(l in s)r[l]=e[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function qe(t){return t=t.childContextTypes,t!=null}function fl(){ae(He),ae(Ie)}function Id(t,e,s){if(Ie.current!==vs)throw Error(O(168));re(Ie,e),re(He,s)}function Jp(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(O(108,og(t)||"Unknown",r));return de({},s,n)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,$s=Ie.current,re(Ie,t),re(He,He.current),!0}function $d(t,e,s){var n=t.stateNode;if(!n)throw Error(O(169));s?(t=Jp(t,e,$s),n.__reactInternalMemoizedMergedChildContext=t,ae(He),ae(Ie),re(Ie,t)):ae(He),re(He,s)}var Ot=null,Vl=!1,Ma=!1;function Gp(t){Ot===null?Ot=[t]:Ot.push(t)}function Sy(t){Vl=!0,Gp(t)}function js(){if(!Ma&&Ot!==null){Ma=!0;var t=0,e=ne;try{var s=Ot;for(ne=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ot=null,Vl=!1}catch(r){throw Ot!==null&&(Ot=Ot.slice(t+1)),jp(Vc,js),r}finally{ne=e,Ma=!1}}return null}var un=[],dn=0,ml=null,xl=0,it=[],lt=0,Bs=null,It=1,$t="";function Es(t,e){un[dn++]=xl,un[dn++]=ml,ml=t,xl=e}function Zp(t,e,s){it[lt++]=It,it[lt++]=$t,it[lt++]=Bs,Bs=t;var n=It;t=$t;var r=32-vt(n)-1;n&=~(1<<r),s+=1;var l=32-vt(e)+r;if(30<l){var a=r-r%5;l=(n&(1<<a)-1).toString(32),n>>=a,r-=a,It=1<<32-vt(e)+r|s<<r|n,$t=l+t}else It=1<<l|s<<r|n,$t=t}function Gc(t){t.return!==null&&(Es(t,1),Zp(t,1,0))}function Zc(t){for(;t===ml;)ml=un[--dn],un[dn]=null,xl=un[--dn],un[dn]=null;for(;t===Bs;)Bs=it[--lt],it[lt]=null,$t=it[--lt],it[lt]=null,It=it[--lt],it[lt]=null}var Ze=null,Ge=null,oe=!1,yt=null;function em(t,e){var s=ot(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Bd(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ze=t,Ge=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ze=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Bs!==null?{id:It,overflow:$t}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=ot(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Ze=t,Ge=null,!0):!1;default:return!1}}function Vo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wo(t){if(oe){var e=Ge;if(e){var s=e;if(!Bd(t,e)){if(Vo(t))throw Error(O(418));e=us(s.nextSibling);var n=Ze;e&&Bd(t,e)?em(n,s):(t.flags=t.flags&-4097|2,oe=!1,Ze=t)}}else{if(Vo(t))throw Error(O(418));t.flags=t.flags&-4097|2,oe=!1,Ze=t}}}function Fd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ze=t}function vi(t){if(t!==Ze)return!1;if(!oe)return Fd(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bo(t.type,t.memoizedProps)),e&&(e=Ge)){if(Vo(t))throw tm(),Error(O(418));for(;e;)em(t,e),e=us(e.nextSibling)}if(Fd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Ge=us(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Ze?us(t.stateNode.nextSibling):null;return!0}function tm(){for(var t=Ge;t;)t=us(t.nextSibling)}function En(){Ge=Ze=null,oe=!1}function eu(t){yt===null?yt=[t]:yt.push(t)}var Cy=Yt.ReactCurrentBatchConfig;function Qn(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(O(309));var n=s.stateNode}if(!n)throw Error(O(147,t));var r=n,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(a){var o=r.refs;a===null?delete o[l]:o[l]=a},e._stringRef=l,e)}if(typeof t!="string")throw Error(O(284));if(!s._owner)throw Error(O(290,t))}return t}function bi(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dd(t){var e=t._init;return e(t._payload)}function sm(t){function e(g,x){if(t){var N=g.deletions;N===null?(g.deletions=[x],g.flags|=16):N.push(x)}}function s(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=ps(g,x),g.index=0,g.sibling=null,g}function l(g,x,N){return g.index=N,t?(N=g.alternate,N!==null?(N=N.index,N<x?(g.flags|=2,x):N):(g.flags|=2,x)):(g.flags|=1048576,x)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,x,N,j){return x===null||x.tag!==6?(x=Ia(N,g.mode,j),x.return=g,x):(x=r(x,N),x.return=g,x)}function c(g,x,N,j){var k=N.type;return k===nn?d(g,x,N.props.children,j,N.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Dd(k)===x.type)?(j=r(x,N.props),j.ref=Qn(g,x,N),j.return=g,j):(j=Xi(N.type,N.key,N.props,null,g.mode,j),j.ref=Qn(g,x,N),j.return=g,j)}function u(g,x,N,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=$a(N,g.mode,j),x.return=g,x):(x=r(x,N.children||[]),x.return=g,x)}function d(g,x,N,j,k){return x===null||x.tag!==7?(x=As(N,g.mode,j,k),x.return=g,x):(x=r(x,N),x.return=g,x)}function h(g,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ia(""+x,g.mode,N),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ci:return N=Xi(x.type,x.key,x.props,null,g.mode,N),N.ref=Qn(g,null,x),N.return=g,N;case sn:return x=$a(x,g.mode,N),x.return=g,x;case Zt:var j=x._init;return h(g,j(x._payload),N)}if(ir(x)||Hn(x))return x=As(x,g.mode,N,null),x.return=g,x;bi(g,x)}return null}function f(g,x,N,j){var k=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return k!==null?null:o(g,x,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ci:return N.key===k?c(g,x,N,j):null;case sn:return N.key===k?u(g,x,N,j):null;case Zt:return k=N._init,f(g,x,k(N._payload),j)}if(ir(N)||Hn(N))return k!==null?null:d(g,x,N,j,null);bi(g,N)}return null}function y(g,x,N,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(N)||null,o(x,g,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ci:return g=g.get(j.key===null?N:j.key)||null,c(x,g,j,k);case sn:return g=g.get(j.key===null?N:j.key)||null,u(x,g,j,k);case Zt:var C=j._init;return y(g,x,N,C(j._payload),k)}if(ir(j)||Hn(j))return g=g.get(N)||null,d(x,g,j,k,null);bi(x,j)}return null}function p(g,x,N,j){for(var k=null,C=null,w=x,S=x=0,T=null;w!==null&&S<N.length;S++){w.index>S?(T=w,w=null):T=w.sibling;var L=f(g,w,N[S],j);if(L===null){w===null&&(w=T);break}t&&w&&L.alternate===null&&e(g,w),x=l(L,x,S),C===null?k=L:C.sibling=L,C=L,w=T}if(S===N.length)return s(g,w),oe&&Es(g,S),k;if(w===null){for(;S<N.length;S++)w=h(g,N[S],j),w!==null&&(x=l(w,x,S),C===null?k=w:C.sibling=w,C=w);return oe&&Es(g,S),k}for(w=n(g,w);S<N.length;S++)T=y(w,g,S,N[S],j),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?S:T.key),x=l(T,x,S),C===null?k=T:C.sibling=T,C=T);return t&&w.forEach(function($){return e(g,$)}),oe&&Es(g,S),k}function m(g,x,N,j){var k=Hn(N);if(typeof k!="function")throw Error(O(150));if(N=k.call(N),N==null)throw Error(O(151));for(var C=k=null,w=x,S=x=0,T=null,L=N.next();w!==null&&!L.done;S++,L=N.next()){w.index>S?(T=w,w=null):T=w.sibling;var $=f(g,w,L.value,j);if($===null){w===null&&(w=T);break}t&&w&&$.alternate===null&&e(g,w),x=l($,x,S),C===null?k=$:C.sibling=$,C=$,w=T}if(L.done)return s(g,w),oe&&Es(g,S),k;if(w===null){for(;!L.done;S++,L=N.next())L=h(g,L.value,j),L!==null&&(x=l(L,x,S),C===null?k=L:C.sibling=L,C=L);return oe&&Es(g,S),k}for(w=n(g,w);!L.done;S++,L=N.next())L=y(w,g,S,L.value,j),L!==null&&(t&&L.alternate!==null&&w.delete(L.key===null?S:L.key),x=l(L,x,S),C===null?k=L:C.sibling=L,C=L);return t&&w.forEach(function(M){return e(g,M)}),oe&&Es(g,S),k}function v(g,x,N,j){if(typeof N=="object"&&N!==null&&N.type===nn&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ci:e:{for(var k=N.key,C=x;C!==null;){if(C.key===k){if(k=N.type,k===nn){if(C.tag===7){s(g,C.sibling),x=r(C,N.props.children),x.return=g,g=x;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Dd(k)===C.type){s(g,C.sibling),x=r(C,N.props),x.ref=Qn(g,C,N),x.return=g,g=x;break e}s(g,C);break}else e(g,C);C=C.sibling}N.type===nn?(x=As(N.props.children,g.mode,j,N.key),x.return=g,g=x):(j=Xi(N.type,N.key,N.props,null,g.mode,j),j.ref=Qn(g,x,N),j.return=g,g=j)}return a(g);case sn:e:{for(C=N.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){s(g,x.sibling),x=r(x,N.children||[]),x.return=g,g=x;break e}else{s(g,x);break}else e(g,x);x=x.sibling}x=$a(N,g.mode,j),x.return=g,g=x}return a(g);case Zt:return C=N._init,v(g,x,C(N._payload),j)}if(ir(N))return p(g,x,N,j);if(Hn(N))return m(g,x,N,j);bi(g,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,x!==null&&x.tag===6?(s(g,x.sibling),x=r(x,N),x.return=g,g=x):(s(g,x),x=Ia(N,g.mode,j),x.return=g,g=x),a(g)):s(g,x)}return v}var _n=sm(!0),nm=sm(!1),gl=ws(null),yl=null,hn=null,tu=null;function su(){tu=hn=yl=null}function nu(t){var e=gl.current;ae(gl),t._currentValue=e}function Ho(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function wn(t,e){yl=t,tu=hn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(We=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(tu!==t)if(t={context:t,memoizedValue:e,next:null},hn===null){if(yl===null)throw Error(O(308));hn=t,yl.dependencies={lanes:0,firstContext:t}}else hn=hn.next=t;return e}var Ms=null;function ru(t){Ms===null?Ms=[t]:Ms.push(t)}function rm(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,ru(e)):(s.next=r.next,r.next=s),e.interleaved=s,Ht(t,n)}function Ht(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var es=!1;function iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ds(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ht(t,s)}return r=n.interleaved,r===null?(e.next=e,ru(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ht(t,s)}function Vi(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Wc(t,s)}}function Ud(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?r=l=a:l=l.next=a,s=s.next}while(s!==null);l===null?r=l=e:l=l.next=e}else r=l=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function vl(t,e,s,n){var r=t.updateQueue;es=!1;var l=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?l=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(l!==null){var h=r.baseState;a=0,d=u=c=null,o=l;do{var f=o.lane,y=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(f=e,y=s,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(y,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(y,h,f):p,f==null)break e;h=de({},h,f);break e;case 2:es=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else y={eventTime:y,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else l===null&&(r.shared.lanes=0);Ds|=a,t.lanes=a,t.memoizedState=h}}function Vd(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(O(191,r));r.call(n)}}}var ti={},Pt=ws(ti),Rr=ws(ti),Ar=ws(ti);function Ls(t){if(t===ti)throw Error(O(174));return t}function lu(t,e){switch(re(Ar,e),re(Rr,t),re(Pt,ti),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:So(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=So(e,t)}ae(Pt),re(Pt,e)}function Tn(){ae(Pt),ae(Rr),ae(Ar)}function lm(t){Ls(Ar.current);var e=Ls(Pt.current),s=So(e,t.type);e!==s&&(re(Rr,t),re(Pt,s))}function au(t){Rr.current===t&&(ae(Pt),ae(Rr))}var ce=ws(0);function bl(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var La=[];function ou(){for(var t=0;t<La.length;t++)La[t]._workInProgressVersionPrimary=null;La.length=0}var Wi=Yt.ReactCurrentDispatcher,Pa=Yt.ReactCurrentBatchConfig,Fs=0,ue=null,ke=null,Ce=null,Nl=!1,mr=!1,Or=0,Ey=0;function ze(){throw Error(O(321))}function cu(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Nt(t[s],e[s]))return!1;return!0}function uu(t,e,s,n,r,l){if(Fs=l,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wi.current=t===null||t.memoizedState===null?Ly:Py,t=s(n,r),mr){l=0;do{if(mr=!1,Or=0,25<=l)throw Error(O(301));l+=1,Ce=ke=null,e.updateQueue=null,Wi.current=zy,t=s(n,r)}while(mr)}if(Wi.current=wl,e=ke!==null&&ke.next!==null,Fs=0,Ce=ke=ue=null,Nl=!1,e)throw Error(O(300));return t}function du(){var t=Or!==0;return Or=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ue.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function ht(){if(ke===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ce===null?ue.memoizedState:Ce.next;if(e!==null)Ce=e,ke=t;else{if(t===null)throw Error(O(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?ue.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function Ir(t,e){return typeof e=="function"?e(t):e}function za(t){var e=ht(),s=e.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=t;var n=ke,r=n.baseQueue,l=s.pending;if(l!==null){if(r!==null){var a=r.next;r.next=l.next,l.next=a}n.baseQueue=r=l,s.pending=null}if(r!==null){l=r.next,n=n.baseState;var o=a=null,c=null,u=l;do{var d=u.lane;if((Fs&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=n):c=c.next=h,ue.lanes|=d,Ds|=d}u=u.next}while(u!==null&&u!==l);c===null?a=n:c.next=o,Nt(n,e.memoizedState)||(We=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do l=r.lane,ue.lanes|=l,Ds|=l,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Ra(t){var e=ht(),s=e.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,l=e.memoizedState;if(r!==null){s.pending=null;var a=r=r.next;do l=t(l,a.action),a=a.next;while(a!==r);Nt(l,e.memoizedState)||(We=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),s.lastRenderedState=l}return[l,n]}function am(){}function om(t,e){var s=ue,n=ht(),r=e(),l=!Nt(n.memoizedState,r);if(l&&(n.memoizedState=r,We=!0),n=n.queue,hu(dm.bind(null,s,n,t),[t]),n.getSnapshot!==e||l||Ce!==null&&Ce.memoizedState.tag&1){if(s.flags|=2048,$r(9,um.bind(null,s,n,r,e),void 0,null),Ee===null)throw Error(O(349));Fs&30||cm(s,e,r)}return r}function cm(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function um(t,e,s,n){e.value=s,e.getSnapshot=n,hm(e)&&fm(t)}function dm(t,e,s){return s(function(){hm(e)&&fm(t)})}function hm(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Nt(t,s)}catch{return!0}}function fm(t){var e=Ht(t,1);e!==null&&bt(e,t,1,-1)}function Wd(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:t},e.queue=t,t=t.dispatch=My.bind(null,ue,t),[e.memoizedState,t]}function $r(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function pm(){return ht().memoizedState}function Hi(t,e,s,n){var r=_t();ue.flags|=t,r.memoizedState=$r(1|e,s,void 0,n===void 0?null:n)}function Wl(t,e,s,n){var r=ht();n=n===void 0?null:n;var l=void 0;if(ke!==null){var a=ke.memoizedState;if(l=a.destroy,n!==null&&cu(n,a.deps)){r.memoizedState=$r(e,s,l,n);return}}ue.flags|=t,r.memoizedState=$r(1|e,s,l,n)}function Hd(t,e){return Hi(8390656,8,t,e)}function hu(t,e){return Wl(2048,8,t,e)}function mm(t,e){return Wl(4,2,t,e)}function xm(t,e){return Wl(4,4,t,e)}function gm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ym(t,e,s){return s=s!=null?s.concat([t]):null,Wl(4,4,gm.bind(null,e,t),s)}function fu(){}function vm(t,e){var s=ht();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&cu(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function bm(t,e){var s=ht();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&cu(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Nm(t,e,s){return Fs&21?(Nt(s,e)||(s=Cp(),ue.lanes|=s,Ds|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,We=!0),t.memoizedState=s)}function _y(t,e){var s=ne;ne=s!==0&&4>s?s:4,t(!0);var n=Pa.transition;Pa.transition={};try{t(!1),e()}finally{ne=s,Pa.transition=n}}function wm(){return ht().memoizedState}function Ty(t,e,s){var n=fs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},jm(t))km(e,s);else if(s=rm(t,e,s,n),s!==null){var r=Be();bt(s,t,n,r),Sm(s,e,n)}}function My(t,e,s){var n=fs(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(jm(t))km(e,r);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var a=e.lastRenderedState,o=l(a,s);if(r.hasEagerState=!0,r.eagerState=o,Nt(o,a)){var c=e.interleaved;c===null?(r.next=r,ru(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=rm(t,e,r,n),s!==null&&(r=Be(),bt(s,t,n,r),Sm(s,e,n))}}function jm(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function km(t,e){mr=Nl=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Sm(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Wc(t,s)}}var wl={readContext:dt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},Ly={readContext:dt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:Hd,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Hi(4194308,4,gm.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Hi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hi(4,2,t,e)},useMemo:function(t,e){var s=_t();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=_t();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ty.bind(null,ue,t),[n.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Wd,useDebugValue:fu,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Wd(!1),e=t[0];return t=_y.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ue,r=_t();if(oe){if(s===void 0)throw Error(O(407));s=s()}else{if(s=e(),Ee===null)throw Error(O(349));Fs&30||cm(n,e,s)}r.memoizedState=s;var l={value:s,getSnapshot:e};return r.queue=l,Hd(dm.bind(null,n,l,t),[t]),n.flags|=2048,$r(9,um.bind(null,n,l,s,e),void 0,null),s},useId:function(){var t=_t(),e=Ee.identifierPrefix;if(oe){var s=$t,n=It;s=(n&~(1<<32-vt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Or++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Ey++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Py={readContext:dt,useCallback:vm,useContext:dt,useEffect:hu,useImperativeHandle:ym,useInsertionEffect:mm,useLayoutEffect:xm,useMemo:bm,useReducer:za,useRef:pm,useState:function(){return za(Ir)},useDebugValue:fu,useDeferredValue:function(t){var e=ht();return Nm(e,ke.memoizedState,t)},useTransition:function(){var t=za(Ir)[0],e=ht().memoizedState;return[t,e]},useMutableSource:am,useSyncExternalStore:om,useId:wm,unstable_isNewReconciler:!1},zy={readContext:dt,useCallback:vm,useContext:dt,useEffect:hu,useImperativeHandle:ym,useInsertionEffect:mm,useLayoutEffect:xm,useMemo:bm,useReducer:Ra,useRef:pm,useState:function(){return Ra(Ir)},useDebugValue:fu,useDeferredValue:function(t){var e=ht();return ke===null?e.memoizedState=t:Nm(e,ke.memoizedState,t)},useTransition:function(){var t=Ra(Ir)[0],e=ht().memoizedState;return[t,e]},useMutableSource:am,useSyncExternalStore:om,useId:wm,unstable_isNewReconciler:!1};function mt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function qo(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:de({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Hl={isMounted:function(t){return(t=t._reactInternals)?Qs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Be(),r=fs(t),l=Dt(n,r);l.payload=e,s!=null&&(l.callback=s),e=ds(t,l,r),e!==null&&(bt(e,t,r,n),Vi(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Be(),r=fs(t),l=Dt(n,r);l.tag=1,l.payload=e,s!=null&&(l.callback=s),e=ds(t,l,r),e!==null&&(bt(e,t,r,n),Vi(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Be(),n=fs(t),r=Dt(s,n);r.tag=2,e!=null&&(r.callback=e),e=ds(t,r,n),e!==null&&(bt(e,t,n,s),Vi(e,t,n))}};function qd(t,e,s,n,r,l,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,a):e.prototype&&e.prototype.isPureReactComponent?!Mr(s,n)||!Mr(r,l):!0}function Cm(t,e,s){var n=!1,r=vs,l=e.contextType;return typeof l=="object"&&l!==null?l=dt(l):(r=qe(e)?$s:Ie.current,n=e.contextTypes,l=(n=n!=null)?Cn(t,r):vs),e=new e(s,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=l),e}function Kd(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Hl.enqueueReplaceState(e,e.state,null)}function Ko(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},iu(t);var l=e.contextType;typeof l=="object"&&l!==null?r.context=dt(l):(l=qe(e)?$s:Ie.current,r.context=Cn(t,l)),r.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(qo(t,e,l,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Hl.enqueueReplaceState(r,r.state,null),vl(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Mn(t,e){try{var s="",n=e;do s+=ag(n),n=n.return;while(n);var r=s}catch(l){r=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:r,digest:null}}function Aa(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Yo(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Ry=typeof WeakMap=="function"?WeakMap:Map;function Em(t,e,s){s=Dt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){kl||(kl=!0,rc=n),Yo(t,e)},s}function _m(t,e,s){s=Dt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Yo(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Yo(t,e),typeof n!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Yd(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Ry;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Yy.bind(null,t,e,s),e.then(t,t))}function Xd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qd(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Dt(-1,1),e.tag=2,ds(s,e,1))),s.lanes|=1),t)}var Ay=Yt.ReactCurrentOwner,We=!1;function $e(t,e,s,n){e.child=t===null?nm(e,null,s,n):_n(e,t.child,s,n)}function Jd(t,e,s,n,r){s=s.render;var l=e.ref;return wn(e,r),n=uu(t,e,s,n,l,r),s=du(),t!==null&&!We?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,qt(t,e,r)):(oe&&s&&Gc(e),e.flags|=1,$e(t,e,n,r),e.child)}function Gd(t,e,s,n,r){if(t===null){var l=s.type;return typeof l=="function"&&!Nu(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=l,Tm(t,e,l,n,r)):(t=Xi(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&r)){var a=l.memoizedProps;if(s=s.compare,s=s!==null?s:Mr,s(a,n)&&t.ref===e.ref)return qt(t,e,r)}return e.flags|=1,t=ps(l,n),t.ref=e.ref,t.return=e,e.child=t}function Tm(t,e,s,n,r){if(t!==null){var l=t.memoizedProps;if(Mr(l,n)&&t.ref===e.ref)if(We=!1,e.pendingProps=n=l,(t.lanes&r)!==0)t.flags&131072&&(We=!0);else return e.lanes=t.lanes,qt(t,e,r)}return Xo(t,e,s,n,r)}function Mm(t,e,s){var n=e.pendingProps,r=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(pn,Je),Je|=s;else{if(!(s&1073741824))return t=l!==null?l.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(pn,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,re(pn,Je),Je|=n}else l!==null?(n=l.baseLanes|s,e.memoizedState=null):n=s,re(pn,Je),Je|=n;return $e(t,e,r,s),e.child}function Lm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Xo(t,e,s,n,r){var l=qe(s)?$s:Ie.current;return l=Cn(e,l),wn(e,r),s=uu(t,e,s,n,l,r),n=du(),t!==null&&!We?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,qt(t,e,r)):(oe&&n&&Gc(e),e.flags|=1,$e(t,e,s,r),e.child)}function Zd(t,e,s,n,r){if(qe(s)){var l=!0;pl(e)}else l=!1;if(wn(e,r),e.stateNode===null)qi(t,e),Cm(e,s,n),Ko(e,s,n,r),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=qe(s)?$s:Ie.current,u=Cn(e,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Kd(e,a,n,u),es=!1;var f=e.memoizedState;a.state=f,vl(e,n,a,r),c=e.memoizedState,o!==n||f!==c||He.current||es?(typeof d=="function"&&(qo(e,s,d,n),c=e.memoizedState),(o=es||qd(e,s,o,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,im(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:mt(e.type,o),a.props=u,h=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=dt(c):(c=qe(s)?$s:Ie.current,c=Cn(e,c));var y=s.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Kd(e,a,n,c),es=!1,f=e.memoizedState,a.state=f,vl(e,n,a,r);var p=e.memoizedState;o!==h||f!==p||He.current||es?(typeof y=="function"&&(qo(e,s,y,n),p=e.memoizedState),(u=es||qd(e,s,u,n,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Qo(t,e,s,n,l,r)}function Qo(t,e,s,n,r,l){Lm(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&$d(e,s,!1),qt(t,e,l);n=e.stateNode,Ay.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=_n(e,t.child,null,l),e.child=_n(e,null,o,l)):$e(t,e,o,l),e.memoizedState=n.state,r&&$d(e,s,!0),e.child}function Pm(t){var e=t.stateNode;e.pendingContext?Id(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Id(t,e.context,!1),lu(t,e.containerInfo)}function eh(t,e,s,n,r){return En(),eu(r),e.flags|=256,$e(t,e,s,n),e.child}var Jo={dehydrated:null,treeContext:null,retryLane:0};function Go(t){return{baseLanes:t,cachePool:null,transitions:null}}function zm(t,e,s){var n=e.pendingProps,r=ce.current,l=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),re(ce,r&1),t===null)return Wo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,l?(n=e.mode,l=e.child,a={mode:"hidden",children:a},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Yl(a,n,0,null),t=As(t,n,s,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Go(s),e.memoizedState=Jo,t):pu(e,a));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Oy(t,e,a,n,o,r,s);if(l){l=n.fallback,a=e.mode,r=t.child,o=r.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ps(r,c),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?l=ps(o,l):(l=As(l,a,s,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,n=l,l=e.child,a=t.child.memoizedState,a=a===null?Go(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=t.childLanes&~s,e.memoizedState=Jo,n}return l=t.child,t=l.sibling,n=ps(l,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function pu(t,e){return e=Yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ni(t,e,s,n){return n!==null&&eu(n),_n(e,t.child,null,s),t=pu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Oy(t,e,s,n,r,l,a){if(s)return e.flags&256?(e.flags&=-257,n=Aa(Error(O(422))),Ni(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=n.fallback,r=e.mode,n=Yl({mode:"visible",children:n.children},r,0,null),l=As(l,r,a,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,e.mode&1&&_n(e,t.child,null,a),e.child.memoizedState=Go(a),e.memoizedState=Jo,l);if(!(e.mode&1))return Ni(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(O(419)),n=Aa(l,n,void 0),Ni(t,e,a,n)}if(o=(a&t.childLanes)!==0,We||o){if(n=Ee,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==l.retryLane&&(l.retryLane=r,Ht(t,r),bt(n,t,r,-1))}return bu(),n=Aa(Error(O(421))),Ni(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Xy.bind(null,t),r._reactRetry=e,null):(t=l.treeContext,Ge=us(r.nextSibling),Ze=e,oe=!0,yt=null,t!==null&&(it[lt++]=It,it[lt++]=$t,it[lt++]=Bs,It=t.id,$t=t.overflow,Bs=e),e=pu(e,n.children),e.flags|=4096,e)}function th(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ho(t.return,e,s)}function Oa(t,e,s,n,r){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=r)}function Rm(t,e,s){var n=e.pendingProps,r=n.revealOrder,l=n.tail;if($e(t,e,n.children,s),n=ce.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&th(t,s,e);else if(t.tag===19)th(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(re(ce,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&bl(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Oa(e,!1,r,s,l);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bl(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Oa(e,!0,s,null,l);break;case"together":Oa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qt(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,s=ps(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=ps(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Iy(t,e,s){switch(e.tag){case 3:Pm(e),En();break;case 5:lm(e);break;case 1:qe(e.type)&&pl(e);break;case 4:lu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;re(gl,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(re(ce,ce.current&1),e.flags|=128,null):s&e.child.childLanes?zm(t,e,s):(re(ce,ce.current&1),t=qt(t,e,s),t!==null?t.sibling:null);re(ce,ce.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Rm(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(ce,ce.current),n)break;return null;case 22:case 23:return e.lanes=0,Mm(t,e,s)}return qt(t,e,s)}var Am,Zo,Om,Im;Am=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Zo=function(){};Om=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Ls(Pt.current);var l=null;switch(s){case"input":r=No(t,r),n=No(t,n),l=[];break;case"select":r=de({},r,{value:void 0}),n=de({},n,{value:void 0}),l=[];break;case"textarea":r=ko(t,r),n=ko(t,n),l=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=hl)}Co(s,n);var a;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jr.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in n){var c=n[u];if(o=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(l||(l=[]),l.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ie("scroll",t),l||o===c||(l=[])):(l=l||[]).push(u,c))}s&&(l=l||[]).push("style",s);var u=l;(e.updateQueue=u)&&(e.flags|=4)}};Im=function(t,e,s,n){s!==n&&(e.flags|=4)};function Jn(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Re(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function $y(t,e,s){var n=e.pendingProps;switch(Zc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(e),null;case 1:return qe(e.type)&&fl(),Re(e),null;case 3:return n=e.stateNode,Tn(),ae(He),ae(Ie),ou(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yt!==null&&(ac(yt),yt=null))),Zo(t,e),Re(e),null;case 5:au(e);var r=Ls(Ar.current);if(s=e.type,t!==null&&e.stateNode!=null)Om(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(O(166));return Re(e),null}if(t=Ls(Pt.current),vi(e)){n=e.stateNode,s=e.type;var l=e.memoizedProps;switch(n[Tt]=e,n[zr]=l,t=(e.mode&1)!==0,s){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(r=0;r<ar.length;r++)ie(ar[r],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":ud(n,l),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ie("invalid",n);break;case"textarea":hd(n,l),ie("invalid",n)}Co(s,l),r=null;for(var a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&yi(n.textContent,o,t),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&yi(n.textContent,o,t),r=["children",""+o]):jr.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ie("scroll",n)}switch(s){case"input":ui(n),dd(n,l,!0);break;case"textarea":ui(n),fd(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=hl)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[Tt]=e,t[zr]=n,Am(t,e,!1,!1),e.stateNode=t;e:{switch(a=Eo(s,n),s){case"dialog":ie("cancel",t),ie("close",t),r=n;break;case"iframe":case"object":case"embed":ie("load",t),r=n;break;case"video":case"audio":for(r=0;r<ar.length;r++)ie(ar[r],t);r=n;break;case"source":ie("error",t),r=n;break;case"img":case"image":case"link":ie("error",t),ie("load",t),r=n;break;case"details":ie("toggle",t),r=n;break;case"input":ud(t,n),r=No(t,n),ie("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=de({},n,{value:void 0}),ie("invalid",t);break;case"textarea":hd(t,n),r=ko(t,n),ie("invalid",t);break;default:r=n}Co(s,r),o=r;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?pp(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hp(t,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&kr(t,c):typeof c=="number"&&kr(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(jr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ie("scroll",t):c!=null&&$c(t,l,c,a))}switch(s){case"input":ui(t),dd(t,n,!1);break;case"textarea":ui(t),fd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ys(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?yn(t,!!n.multiple,l,!1):n.defaultValue!=null&&yn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=hl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Re(e),null;case 6:if(t&&e.stateNode!=null)Im(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(O(166));if(s=Ls(Ar.current),Ls(Pt.current),vi(e)){if(n=e.stateNode,s=e.memoizedProps,n[Tt]=e,(l=n.nodeValue!==s)&&(t=Ze,t!==null))switch(t.tag){case 3:yi(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yi(n.nodeValue,s,(t.mode&1)!==0)}l&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Tt]=e,e.stateNode=n}return Re(e),null;case 13:if(ae(ce),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&Ge!==null&&e.mode&1&&!(e.flags&128))tm(),En(),e.flags|=98560,l=!1;else if(l=vi(e),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(O(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(O(317));l[Tt]=e}else En(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Re(e),l=!1}else yt!==null&&(ac(yt),yt=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?Se===0&&(Se=3):bu())),e.updateQueue!==null&&(e.flags|=4),Re(e),null);case 4:return Tn(),Zo(t,e),t===null&&Lr(e.stateNode.containerInfo),Re(e),null;case 10:return nu(e.type._context),Re(e),null;case 17:return qe(e.type)&&fl(),Re(e),null;case 19:if(ae(ce),l=e.memoizedState,l===null)return Re(e),null;if(n=(e.flags&128)!==0,a=l.rendering,a===null)if(n)Jn(l,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=bl(t),a!==null){for(e.flags|=128,Jn(l,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)l=s,t=n,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,t=a.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return re(ce,ce.current&1|2),e.child}t=t.sibling}l.tail!==null&&xe()>Ln&&(e.flags|=128,n=!0,Jn(l,!1),e.lanes=4194304)}else{if(!n)if(t=bl(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!oe)return Re(e),null}else 2*xe()-l.renderingStartTime>Ln&&s!==1073741824&&(e.flags|=128,n=!0,Jn(l,!1),e.lanes=4194304);l.isBackwards?(a.sibling=e.child,e.child=a):(s=l.last,s!==null?s.sibling=a:e.child=a,l.last=a)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=xe(),e.sibling=null,s=ce.current,re(ce,n?s&1|2:s&1),e):(Re(e),null);case 22:case 23:return vu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Je&1073741824&&(Re(e),e.subtreeFlags&6&&(e.flags|=8192)):Re(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function By(t,e){switch(Zc(e),e.tag){case 1:return qe(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tn(),ae(He),ae(Ie),ou(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return au(e),null;case 13:if(ae(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));En()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(ce),null;case 4:return Tn(),null;case 10:return nu(e.type._context),null;case 22:case 23:return vu(),null;case 24:return null;default:return null}}var wi=!1,Ae=!1,Fy=typeof WeakSet=="function"?WeakSet:Set,D=null;function fn(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){me(t,e,n)}else s.current=null}function ec(t,e,s){try{s()}catch(n){me(t,e,n)}}var sh=!1;function Dy(t,e){if(Io=cl,t=Up(),Jc(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==s||r!==0&&h.nodeType!==3||(o=a+r),h!==l||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===s&&++u===r&&(o=a),f===l&&++d===n&&(c=a),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for($o={focusedElem:t,selectionRange:s},cl=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:mt(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(j){me(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return p=sh,sh=!1,p}function xr(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var l=r.destroy;r.destroy=void 0,l!==void 0&&ec(e,s,l)}r=r.next}while(r!==n)}}function ql(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function tc(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function $m(t){var e=t.alternate;e!==null&&(t.alternate=null,$m(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tt],delete e[zr],delete e[Do],delete e[jy],delete e[ky])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bm(t){return t.tag===5||t.tag===3||t.tag===4}function nh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=hl));else if(n!==4&&(t=t.child,t!==null))for(sc(t,e,s),t=t.sibling;t!==null;)sc(t,e,s),t=t.sibling}function nc(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(nc(t,e,s),t=t.sibling;t!==null;)nc(t,e,s),t=t.sibling}var _e=null,xt=!1;function Jt(t,e,s){for(s=s.child;s!==null;)Fm(t,e,s),s=s.sibling}function Fm(t,e,s){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount($l,s)}catch{}switch(s.tag){case 5:Ae||fn(s,e);case 6:var n=_e,r=xt;_e=null,Jt(t,e,s),_e=n,xt=r,_e!==null&&(xt?(t=_e,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):_e.removeChild(s.stateNode));break;case 18:_e!==null&&(xt?(t=_e,s=s.stateNode,t.nodeType===8?Ta(t.parentNode,s):t.nodeType===1&&Ta(t,s),_r(t)):Ta(_e,s.stateNode));break;case 4:n=_e,r=xt,_e=s.stateNode.containerInfo,xt=!0,Jt(t,e,s),_e=n,xt=r;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var l=r,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ec(s,e,a),r=r.next}while(r!==n)}Jt(t,e,s);break;case 1:if(!Ae&&(fn(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){me(s,e,o)}Jt(t,e,s);break;case 21:Jt(t,e,s);break;case 22:s.mode&1?(Ae=(n=Ae)||s.memoizedState!==null,Jt(t,e,s),Ae=n):Jt(t,e,s);break;default:Jt(t,e,s)}}function rh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Fy),e.forEach(function(n){var r=Qy.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function pt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var l=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:_e=o.stateNode,xt=!1;break e;case 3:_e=o.stateNode.containerInfo,xt=!0;break e;case 4:_e=o.stateNode.containerInfo,xt=!0;break e}o=o.return}if(_e===null)throw Error(O(160));Fm(l,a,r),_e=null,xt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){me(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dm(e,t),e=e.sibling}function Dm(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pt(e,t),St(t),n&4){try{xr(3,t,t.return),ql(3,t)}catch(m){me(t,t.return,m)}try{xr(5,t,t.return)}catch(m){me(t,t.return,m)}}break;case 1:pt(e,t),St(t),n&512&&s!==null&&fn(s,s.return);break;case 5:if(pt(e,t),St(t),n&512&&s!==null&&fn(s,s.return),t.flags&32){var r=t.stateNode;try{kr(r,"")}catch(m){me(t,t.return,m)}}if(n&4&&(r=t.stateNode,r!=null)){var l=t.memoizedProps,a=s!==null?s.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&cp(r,l),Eo(o,a);var u=Eo(o,l);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?pp(r,h):d==="dangerouslySetInnerHTML"?hp(r,h):d==="children"?kr(r,h):$c(r,d,h,u)}switch(o){case"input":wo(r,l);break;case"textarea":up(r,l);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?yn(r,!!l.multiple,y,!1):f!==!!l.multiple&&(l.defaultValue!=null?yn(r,!!l.multiple,l.defaultValue,!0):yn(r,!!l.multiple,l.multiple?[]:"",!1))}r[zr]=l}catch(m){me(t,t.return,m)}}break;case 6:if(pt(e,t),St(t),n&4){if(t.stateNode===null)throw Error(O(162));r=t.stateNode,l=t.memoizedProps;try{r.nodeValue=l}catch(m){me(t,t.return,m)}}break;case 3:if(pt(e,t),St(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{_r(e.containerInfo)}catch(m){me(t,t.return,m)}break;case 4:pt(e,t),St(t);break;case 13:pt(e,t),St(t),r=t.child,r.flags&8192&&(l=r.memoizedState!==null,r.stateNode.isHidden=l,!l||r.alternate!==null&&r.alternate.memoizedState!==null||(gu=xe())),n&4&&rh(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(Ae=(u=Ae)||d,pt(e,t),Ae=u):pt(e,t),St(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(D=t,d=t.child;d!==null;){for(h=D=d;D!==null;){switch(f=D,y=f.child,f.tag){case 0:case 11:case 14:case 15:xr(4,f,f.return);break;case 1:fn(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){me(n,s,m)}}break;case 5:fn(f,f.return);break;case 22:if(f.memoizedState!==null){lh(h);continue}}y!==null?(y.return=f,D=y):lh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(l=r.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=fp("display",a))}catch(m){me(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){me(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pt(e,t),St(t),n&4&&rh(t);break;case 21:break;default:pt(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Bm(s)){var n=s;break e}s=s.return}throw Error(O(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(kr(r,""),n.flags&=-33);var l=nh(t);nc(t,l,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=nh(t);sc(t,o,a);break;default:throw Error(O(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uy(t,e,s){D=t,Um(t)}function Um(t,e,s){for(var n=(t.mode&1)!==0;D!==null;){var r=D,l=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||wi;if(!a){var o=r.alternate,c=o!==null&&o.memoizedState!==null||Ae;o=wi;var u=Ae;if(wi=a,(Ae=c)&&!u)for(D=r;D!==null;)a=D,c=a.child,a.tag===22&&a.memoizedState!==null?ah(r):c!==null?(c.return=a,D=c):ah(r);for(;l!==null;)D=l,Um(l),l=l.sibling;D=r,wi=o,Ae=u}ih(t)}else r.subtreeFlags&8772&&l!==null?(l.return=r,D=l):ih(t)}}function ih(t){for(;D!==null;){var e=D;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ae||ql(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ae)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:mt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Vd(e,l,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Vd(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_r(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ae||e.flags&512&&tc(e)}catch(f){me(e,e.return,f)}}if(e===t){D=null;break}if(s=e.sibling,s!==null){s.return=e.return,D=s;break}D=e.return}}function lh(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var s=e.sibling;if(s!==null){s.return=e.return,D=s;break}D=e.return}}function ah(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ql(4,e)}catch(c){me(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){me(e,r,c)}}var l=e.return;try{tc(e)}catch(c){me(e,l,c)}break;case 5:var a=e.return;try{tc(e)}catch(c){me(e,a,c)}}}catch(c){me(e,e.return,c)}if(e===t){D=null;break}var o=e.sibling;if(o!==null){o.return=e.return,D=o;break}D=e.return}}var Vy=Math.ceil,jl=Yt.ReactCurrentDispatcher,mu=Yt.ReactCurrentOwner,ut=Yt.ReactCurrentBatchConfig,ee=0,Ee=null,we=null,Le=0,Je=0,pn=ws(0),Se=0,Br=null,Ds=0,Kl=0,xu=0,gr=null,Ve=null,gu=0,Ln=1/0,At=null,kl=!1,rc=null,hs=null,ji=!1,rs=null,Sl=0,yr=0,ic=null,Ki=-1,Yi=0;function Be(){return ee&6?xe():Ki!==-1?Ki:Ki=xe()}function fs(t){return t.mode&1?ee&2&&Le!==0?Le&-Le:Cy.transition!==null?(Yi===0&&(Yi=Cp()),Yi):(t=ne,t!==0||(t=window.event,t=t===void 0?16:zp(t.type)),t):1}function bt(t,e,s,n){if(50<yr)throw yr=0,ic=null,Error(O(185));Gr(t,s,n),(!(ee&2)||t!==Ee)&&(t===Ee&&(!(ee&2)&&(Kl|=s),Se===4&&ss(t,Le)),Ke(t,n),s===1&&ee===0&&!(e.mode&1)&&(Ln=xe()+500,Vl&&js()))}function Ke(t,e){var s=t.callbackNode;Cg(t,e);var n=ol(t,t===Ee?Le:0);if(n===0)s!==null&&xd(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&xd(s),e===1)t.tag===0?Sy(oh.bind(null,t)):Gp(oh.bind(null,t)),Ny(function(){!(ee&6)&&js()}),s=null;else{switch(Ep(n)){case 1:s=Vc;break;case 4:s=kp;break;case 16:s=al;break;case 536870912:s=Sp;break;default:s=al}s=Qm(s,Vm.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Vm(t,e){if(Ki=-1,Yi=0,ee&6)throw Error(O(327));var s=t.callbackNode;if(jn()&&t.callbackNode!==s)return null;var n=ol(t,t===Ee?Le:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Cl(t,n);else{e=n;var r=ee;ee|=2;var l=Hm();(Ee!==t||Le!==e)&&(At=null,Ln=xe()+500,Rs(t,e));do try{qy();break}catch(o){Wm(t,o)}while(!0);su(),jl.current=l,ee=r,we!==null?e=0:(Ee=null,Le=0,e=Se)}if(e!==0){if(e===2&&(r=Po(t),r!==0&&(n=r,e=lc(t,r))),e===1)throw s=Br,Rs(t,0),ss(t,n),Ke(t,xe()),s;if(e===6)ss(t,n);else{if(r=t.current.alternate,!(n&30)&&!Wy(r)&&(e=Cl(t,n),e===2&&(l=Po(t),l!==0&&(n=l,e=lc(t,l))),e===1))throw s=Br,Rs(t,0),ss(t,n),Ke(t,xe()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(O(345));case 2:_s(t,Ve,At);break;case 3:if(ss(t,n),(n&130023424)===n&&(e=gu+500-xe(),10<e)){if(ol(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){Be(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Fo(_s.bind(null,t,Ve,At),e);break}_s(t,Ve,At);break;case 4:if(ss(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-vt(n);l=1<<a,a=e[a],a>r&&(r=a),n&=~l}if(n=r,n=xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vy(n/1960))-n,10<n){t.timeoutHandle=Fo(_s.bind(null,t,Ve,At),n);break}_s(t,Ve,At);break;case 5:_s(t,Ve,At);break;default:throw Error(O(329))}}}return Ke(t,xe()),t.callbackNode===s?Vm.bind(null,t):null}function lc(t,e){var s=gr;return t.current.memoizedState.isDehydrated&&(Rs(t,e).flags|=256),t=Cl(t,e),t!==2&&(e=Ve,Ve=s,e!==null&&ac(e)),t}function ac(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function Wy(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],l=r.getSnapshot;r=r.value;try{if(!Nt(l(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ss(t,e){for(e&=~xu,e&=~Kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-vt(e),n=1<<s;t[s]=-1,e&=~n}}function oh(t){if(ee&6)throw Error(O(327));jn();var e=ol(t,0);if(!(e&1))return Ke(t,xe()),null;var s=Cl(t,e);if(t.tag!==0&&s===2){var n=Po(t);n!==0&&(e=n,s=lc(t,n))}if(s===1)throw s=Br,Rs(t,0),ss(t,e),Ke(t,xe()),s;if(s===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,Ve,At),Ke(t,xe()),null}function yu(t,e){var s=ee;ee|=1;try{return t(e)}finally{ee=s,ee===0&&(Ln=xe()+500,Vl&&js())}}function Us(t){rs!==null&&rs.tag===0&&!(ee&6)&&jn();var e=ee;ee|=1;var s=ut.transition,n=ne;try{if(ut.transition=null,ne=1,t)return t()}finally{ne=n,ut.transition=s,ee=e,!(ee&6)&&js()}}function vu(){Je=pn.current,ae(pn)}function Rs(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,by(s)),we!==null)for(s=we.return;s!==null;){var n=s;switch(Zc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fl();break;case 3:Tn(),ae(He),ae(Ie),ou();break;case 5:au(n);break;case 4:Tn();break;case 13:ae(ce);break;case 19:ae(ce);break;case 10:nu(n.type._context);break;case 22:case 23:vu()}s=s.return}if(Ee=t,we=t=ps(t.current,null),Le=Je=e,Se=0,Br=null,xu=Kl=Ds=0,Ve=gr=null,Ms!==null){for(e=0;e<Ms.length;e++)if(s=Ms[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,l=s.pending;if(l!==null){var a=l.next;l.next=r,n.next=a}s.pending=n}Ms=null}return t}function Wm(t,e){do{var s=we;try{if(su(),Wi.current=wl,Nl){for(var n=ue.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Nl=!1}if(Fs=0,Ce=ke=ue=null,mr=!1,Or=0,mu.current=null,s===null||s.return===null){Se=1,Br=e,we=null;break}e:{var l=t,a=s.return,o=s,c=e;if(e=Le,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Xd(a);if(y!==null){y.flags&=-257,Qd(y,a,o,l,e),y.mode&1&&Yd(l,u,e),e=y,c=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){Yd(l,u,e),bu();break e}c=Error(O(426))}}else if(oe&&o.mode&1){var v=Xd(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Qd(v,a,o,l,e),eu(Mn(c,o));break e}}l=c=Mn(c,o),Se!==4&&(Se=2),gr===null?gr=[l]:gr.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var g=Em(l,c,e);Ud(l,g);break e;case 1:o=c;var x=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(hs===null||!hs.has(N)))){l.flags|=65536,e&=-e,l.lanes|=e;var j=_m(l,o,e);Ud(l,j);break e}}l=l.return}while(l!==null)}Km(s)}catch(k){e=k,we===s&&s!==null&&(we=s=s.return);continue}break}while(!0)}function Hm(){var t=jl.current;return jl.current=wl,t===null?wl:t}function bu(){(Se===0||Se===3||Se===2)&&(Se=4),Ee===null||!(Ds&268435455)&&!(Kl&268435455)||ss(Ee,Le)}function Cl(t,e){var s=ee;ee|=2;var n=Hm();(Ee!==t||Le!==e)&&(At=null,Rs(t,e));do try{Hy();break}catch(r){Wm(t,r)}while(!0);if(su(),ee=s,jl.current=n,we!==null)throw Error(O(261));return Ee=null,Le=0,Se}function Hy(){for(;we!==null;)qm(we)}function qy(){for(;we!==null&&!gg();)qm(we)}function qm(t){var e=Xm(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?Km(t):we=e,mu.current=null}function Km(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=By(s,e),s!==null){s.flags&=32767,we=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,we=null;return}}else if(s=$y(s,e,Je),s!==null){we=s;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);Se===0&&(Se=5)}function _s(t,e,s){var n=ne,r=ut.transition;try{ut.transition=null,ne=1,Ky(t,e,s,n)}finally{ut.transition=r,ne=n}return null}function Ky(t,e,s,n){do jn();while(rs!==null);if(ee&6)throw Error(O(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(Eg(t,l),t===Ee&&(we=Ee=null,Le=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ji||(ji=!0,Qm(al,function(){return jn(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=ut.transition,ut.transition=null;var a=ne;ne=1;var o=ee;ee|=4,mu.current=null,Dy(t,s),Dm(s,t),fy($o),cl=!!Io,$o=Io=null,t.current=s,Uy(s),yg(),ee=o,ne=a,ut.transition=l}else t.current=s;if(ji&&(ji=!1,rs=t,Sl=r),l=t.pendingLanes,l===0&&(hs=null),Ng(s.stateNode),Ke(t,xe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(kl)throw kl=!1,t=rc,rc=null,t;return Sl&1&&t.tag!==0&&jn(),l=t.pendingLanes,l&1?t===ic?yr++:(yr=0,ic=t):yr=0,js(),null}function jn(){if(rs!==null){var t=Ep(Sl),e=ut.transition,s=ne;try{if(ut.transition=null,ne=16>t?16:t,rs===null)var n=!1;else{if(t=rs,rs=null,Sl=0,ee&6)throw Error(O(331));var r=ee;for(ee|=4,D=t.current;D!==null;){var l=D,a=l.child;if(D.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(D=u;D!==null;){var d=D;switch(d.tag){case 0:case 11:case 15:xr(8,d,l)}var h=d.child;if(h!==null)h.return=d,D=h;else for(;D!==null;){d=D;var f=d.sibling,y=d.return;if($m(d),d===u){D=null;break}if(f!==null){f.return=y,D=f;break}D=y}}}var p=l.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}D=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,D=a;else e:for(;D!==null;){if(l=D,l.flags&2048)switch(l.tag){case 0:case 11:case 15:xr(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,D=g;break e}D=l.return}}var x=t.current;for(D=x;D!==null;){a=D;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,D=N;else e:for(a=x;D!==null;){if(o=D,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ql(9,o)}}catch(k){me(o,o.return,k)}if(o===a){D=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,D=j;break e}D=o.return}}if(ee=r,js(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot($l,t)}catch{}n=!0}return n}finally{ne=s,ut.transition=e}}return!1}function ch(t,e,s){e=Mn(s,e),e=Em(t,e,1),t=ds(t,e,1),e=Be(),t!==null&&(Gr(t,1,e),Ke(t,e))}function me(t,e,s){if(t.tag===3)ch(t,t,s);else for(;e!==null;){if(e.tag===3){ch(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hs===null||!hs.has(n))){t=Mn(s,t),t=_m(e,t,1),e=ds(e,t,1),t=Be(),e!==null&&(Gr(e,1,t),Ke(e,t));break}}e=e.return}}function Yy(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Be(),t.pingedLanes|=t.suspendedLanes&s,Ee===t&&(Le&s)===s&&(Se===4||Se===3&&(Le&130023424)===Le&&500>xe()-gu?Rs(t,0):xu|=s),Ke(t,e)}function Ym(t,e){e===0&&(t.mode&1?(e=fi,fi<<=1,!(fi&130023424)&&(fi=4194304)):e=1);var s=Be();t=Ht(t,e),t!==null&&(Gr(t,e,s),Ke(t,s))}function Xy(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Ym(t,s)}function Qy(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(e),Ym(t,s)}var Xm;Xm=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||He.current)We=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return We=!1,Iy(t,e,s);We=!!(t.flags&131072)}else We=!1,oe&&e.flags&1048576&&Zp(e,xl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;qi(t,e),t=e.pendingProps;var r=Cn(e,Ie.current);wn(e,s),r=uu(null,e,n,t,r,s);var l=du();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qe(n)?(l=!0,pl(e)):l=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,iu(e),r.updater=Hl,e.stateNode=r,r._reactInternals=e,Ko(e,n,t,s),e=Qo(null,e,n,!0,l,s)):(e.tag=0,oe&&l&&Gc(e),$e(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(qi(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Gy(n),t=mt(n,t),r){case 0:e=Xo(null,e,n,t,s);break e;case 1:e=Zd(null,e,n,t,s);break e;case 11:e=Jd(null,e,n,t,s);break e;case 14:e=Gd(null,e,n,mt(n.type,t),s);break e}throw Error(O(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:mt(n,r),Xo(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:mt(n,r),Zd(t,e,n,r,s);case 3:e:{if(Pm(e),t===null)throw Error(O(387));n=e.pendingProps,l=e.memoizedState,r=l.element,im(t,e),vl(e,n,null,s);var a=e.memoizedState;if(n=a.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){r=Mn(Error(O(423)),e),e=eh(t,e,n,s,r);break e}else if(n!==r){r=Mn(Error(O(424)),e),e=eh(t,e,n,s,r);break e}else for(Ge=us(e.stateNode.containerInfo.firstChild),Ze=e,oe=!0,yt=null,s=nm(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(En(),n===r){e=qt(t,e,s);break e}$e(t,e,n,s)}e=e.child}return e;case 5:return lm(e),t===null&&Wo(e),n=e.type,r=e.pendingProps,l=t!==null?t.memoizedProps:null,a=r.children,Bo(n,r)?a=null:l!==null&&Bo(n,l)&&(e.flags|=32),Lm(t,e),$e(t,e,a,s),e.child;case 6:return t===null&&Wo(e),null;case 13:return zm(t,e,s);case 4:return lu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=_n(e,null,n,s):$e(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:mt(n,r),Jd(t,e,n,r,s);case 7:return $e(t,e,e.pendingProps,s),e.child;case 8:return $e(t,e,e.pendingProps.children,s),e.child;case 12:return $e(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,l=e.memoizedProps,a=r.value,re(gl,n._currentValue),n._currentValue=a,l!==null)if(Nt(l.value,a)){if(l.children===r.children&&!He.current){e=qt(t,e,s);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){a=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Dt(-1,s&-s),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Ho(l.return,s,e),o.lanes|=s;break}c=c.next}}else if(l.tag===10)a=l.type===e.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(O(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),Ho(a,s,e),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}$e(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,wn(e,s),r=dt(r),n=n(r),e.flags|=1,$e(t,e,n,s),e.child;case 14:return n=e.type,r=mt(n,e.pendingProps),r=mt(n.type,r),Gd(t,e,n,r,s);case 15:return Tm(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:mt(n,r),qi(t,e),e.tag=1,qe(n)?(t=!0,pl(e)):t=!1,wn(e,s),Cm(e,n,r),Ko(e,n,r,s),Qo(null,e,n,!0,t,s);case 19:return Rm(t,e,s);case 22:return Mm(t,e,s)}throw Error(O(156,e.tag))};function Qm(t,e){return jp(t,e)}function Jy(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,s,n){return new Jy(t,e,s,n)}function Nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gy(t){if(typeof t=="function")return Nu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fc)return 11;if(t===Dc)return 14}return 2}function ps(t,e){var s=t.alternate;return s===null?(s=ot(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Xi(t,e,s,n,r,l){var a=2;if(n=t,typeof t=="function")Nu(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case nn:return As(s.children,r,l,e);case Bc:a=8,r|=8;break;case go:return t=ot(12,s,e,r|2),t.elementType=go,t.lanes=l,t;case yo:return t=ot(13,s,e,r),t.elementType=yo,t.lanes=l,t;case vo:return t=ot(19,s,e,r),t.elementType=vo,t.lanes=l,t;case lp:return Yl(s,r,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rp:a=10;break e;case ip:a=9;break e;case Fc:a=11;break e;case Dc:a=14;break e;case Zt:a=16,n=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=ot(a,s,e,r),e.elementType=t,e.type=n,e.lanes=l,e}function As(t,e,s,n){return t=ot(7,t,n,e),t.lanes=s,t}function Yl(t,e,s,n){return t=ot(22,t,n,e),t.elementType=lp,t.lanes=s,t.stateNode={isHidden:!1},t}function Ia(t,e,s){return t=ot(6,t,null,e),t.lanes=s,t}function $a(t,e,s){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zy(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function wu(t,e,s,n,r,l,a,o,c){return t=new Zy(t,e,s,o,c),e===1?(e=1,l===!0&&(e|=8)):e=0,l=ot(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},iu(l),t}function ev(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Jm(t){if(!t)return vs;t=t._reactInternals;e:{if(Qs(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var s=t.type;if(qe(s))return Jp(t,s,e)}return e}function Gm(t,e,s,n,r,l,a,o,c){return t=wu(s,n,!0,t,r,l,a,o,c),t.context=Jm(null),s=t.current,n=Be(),r=fs(s),l=Dt(n,r),l.callback=e??null,ds(s,l,r),t.current.lanes=r,Gr(t,r,n),Ke(t,n),t}function Xl(t,e,s,n){var r=e.current,l=Be(),a=fs(r);return s=Jm(s),e.context===null?e.context=s:e.pendingContext=s,e=Dt(l,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ds(r,e,a),t!==null&&(bt(t,r,a,l),Vi(t,r,a)),a}function El(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function ju(t,e){uh(t,e),(t=t.alternate)&&uh(t,e)}function tv(){return null}var Zm=typeof reportError=="function"?reportError:function(t){console.error(t)};function ku(t){this._internalRoot=t}Ql.prototype.render=ku.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Xl(t,e,null,null)};Ql.prototype.unmount=ku.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Us(function(){Xl(null,t,null,null)}),e[Wt]=null}};function Ql(t){this._internalRoot=t}Ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mp();t={blockedOn:null,target:t,priority:e};for(var s=0;s<ts.length&&e!==0&&e<ts[s].priority;s++);ts.splice(s,0,t),s===0&&Pp(t)}};function Su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dh(){}function sv(t,e,s,n,r){if(r){if(typeof n=="function"){var l=n;n=function(){var u=El(a);l.call(u)}}var a=Gm(e,n,t,0,null,!1,!1,"",dh);return t._reactRootContainer=a,t[Wt]=a.current,Lr(t.nodeType===8?t.parentNode:t),Us(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=El(c);o.call(u)}}var c=wu(t,0,!1,null,null,!1,!1,"",dh);return t._reactRootContainer=c,t[Wt]=c.current,Lr(t.nodeType===8?t.parentNode:t),Us(function(){Xl(e,c,s,n)}),c}function Gl(t,e,s,n,r){var l=s._reactRootContainer;if(l){var a=l;if(typeof r=="function"){var o=r;r=function(){var c=El(a);o.call(c)}}Xl(e,a,t,r)}else a=sv(s,e,t,r,n);return El(a)}_p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=lr(e.pendingLanes);s!==0&&(Wc(e,s|1),Ke(e,xe()),!(ee&6)&&(Ln=xe()+500,js()))}break;case 13:Us(function(){var n=Ht(t,1);if(n!==null){var r=Be();bt(n,t,1,r)}}),ju(t,1)}};Hc=function(t){if(t.tag===13){var e=Ht(t,134217728);if(e!==null){var s=Be();bt(e,t,134217728,s)}ju(t,134217728)}};Tp=function(t){if(t.tag===13){var e=fs(t),s=Ht(t,e);if(s!==null){var n=Be();bt(s,t,e,n)}ju(t,e)}};Mp=function(){return ne};Lp=function(t,e){var s=ne;try{return ne=t,e()}finally{ne=s}};To=function(t,e,s){switch(e){case"input":if(wo(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Ul(n);if(!r)throw Error(O(90));op(n),wo(n,r)}}}break;case"textarea":up(t,s);break;case"select":e=s.value,e!=null&&yn(t,!!s.multiple,e,!1)}};gp=yu;yp=Us;var nv={usingClientEntryPoint:!1,Events:[ei,on,Ul,mp,xp,yu]},Gn={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rv={bundleType:Gn.bundleType,version:Gn.version,rendererPackageName:Gn.rendererPackageName,rendererConfig:Gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Np(t),t===null?null:t.stateNode},findFiberByHostInstance:Gn.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ki.isDisabled&&ki.supportsFiber)try{$l=ki.inject(rv),Lt=ki}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nv;tt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Su(e))throw Error(O(200));return ev(t,e,null,s)};tt.createRoot=function(t,e){if(!Su(t))throw Error(O(299));var s=!1,n="",r=Zm;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=wu(t,1,!1,null,null,s,!1,n,r),t[Wt]=e.current,Lr(t.nodeType===8?t.parentNode:t),new ku(e)};tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Np(e),t=t===null?null:t.stateNode,t};tt.flushSync=function(t){return Us(t)};tt.hydrate=function(t,e,s){if(!Jl(e))throw Error(O(200));return Gl(null,t,e,!0,s)};tt.hydrateRoot=function(t,e,s){if(!Su(t))throw Error(O(405));var n=s!=null&&s.hydratedSources||null,r=!1,l="",a=Zm;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=Gm(e,null,t,1,s??null,r,!1,l,a),t[Wt]=e.current,Lr(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new Ql(e)};tt.render=function(t,e,s){if(!Jl(e))throw Error(O(200));return Gl(null,t,e,!1,s)};tt.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(O(40));return t._reactRootContainer?(Us(function(){Gl(null,null,t,!1,function(){t._reactRootContainer=null,t[Wt]=null})}),!0):!1};tt.unstable_batchedUpdates=yu;tt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Jl(s))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Gl(t,e,s,!1,n)};tt.version="18.3.1-next-f1338f8080-20240426";function e0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e0)}catch(t){console.error(t)}}e0(),ep.exports=tt;var iv=ep.exports,hh=iv;mo.createRoot=hh.createRoot,mo.hydrateRoot=hh.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fr(){return Fr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Fr.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));const fh="popstate";function lv(t){t===void 0&&(t={});function e(n,r){let{pathname:l,search:a,hash:o}=n.location;return oc("",{pathname:l,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:_l(r)}return ov(e,s,null,t)}function ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function av(){return Math.random().toString(36).substr(2,8)}function ph(t,e){return{usr:t.state,key:t.key,idx:e}}function oc(t,e,s,n){return s===void 0&&(s=null),Fr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$n(e):e,{state:s,key:e&&e.key||n||av()})}function _l(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function $n(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ov(t,e,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:l=!1}=n,a=r.history,o=is.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Fr({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=is.Pop;let v=d(),g=v==null?null:v-u;u=v,c&&c({action:o,location:m.location,delta:g})}function f(v,g){o=is.Push;let x=oc(m.location,v,g);u=d()+1;let N=ph(x,u),j=m.createHref(x);try{a.pushState(N,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(j)}l&&c&&c({action:o,location:m.location,delta:1})}function y(v,g){o=is.Replace;let x=oc(m.location,v,g);u=d();let N=ph(x,u),j=m.createHref(x);a.replaceState(N,"",j),l&&c&&c({action:o,location:m.location,delta:0})}function p(v){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof v=="string"?v:_l(v);return x=x.replace(/ $/,"%20"),ge(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let m={get action(){return o},get location(){return t(r,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(fh,h),c=v,()=>{r.removeEventListener(fh,h),c=null}},createHref(v){return e(r,v)},createURL:p,encodeLocation(v){let g=p(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:y,go(v){return a.go(v)}};return m}var mh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mh||(mh={}));function cv(t,e,s){return s===void 0&&(s="/"),uv(t,e,s)}function uv(t,e,s,n){let r=typeof e=="string"?$n(e):e,l=Eu(r.pathname||"/",s);if(l==null)return null;let a=t0(t);dv(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=jv(l);o=bv(a[c],u)}return o}function t0(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(l,a,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:a,route:l};c.relativePath.startsWith("/")&&(ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ms([n,c.relativePath]),d=s.concat(c);l.children&&l.children.length>0&&(ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),t0(l.children,e,d,u)),!(l.path==null&&!l.index)&&e.push({path:u,score:yv(u,l.index),routesMeta:d})};return t.forEach((l,a)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))r(l,a);else for(let c of s0(l.path))r(l,a,c)}),e}function s0(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return r?[l,""]:[l];let a=s0(n.join("/")),o=[];return o.push(...a.map(c=>c===""?l:[l,c].join("/"))),r&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function dv(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:vv(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const hv=/^:[\w-]+$/,fv=3,pv=2,mv=1,xv=10,gv=-2,xh=t=>t==="*";function yv(t,e){let s=t.split("/"),n=s.length;return s.some(xh)&&(n+=gv),e&&(n+=pv),s.filter(r=>!xh(r)).reduce((r,l)=>r+(hv.test(l)?fv:l===""?mv:xv),n)}function vv(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function bv(t,e,s){let{routesMeta:n}=t,r={},l="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=l==="/"?e:e.slice(l.length)||"/",h=Nv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:ms([l,h.pathname]),pathnameBase:_v(ms([l,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(l=ms([l,h.pathnameBase]))}return a}function Nv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=wv(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let l=r[0],a=l.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let m=o[h]||"";a=l.slice(0,l.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[h];return y&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:a,pattern:t}}function wv(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Cu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function jv(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Eu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sv=t=>kv.test(t);function Cv(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?$n(t):t,l;if(s)if(Sv(s))l=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),Cu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+s))}s.startsWith("/")?l=gh(s.substring(1),"/"):l=gh(s,e)}else l=e;return{pathname:l,search:Tv(n),hash:Mv(r)}}function gh(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function Ba(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ev(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function _u(t,e){let s=Ev(t);return e?s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Tu(t,e,s,n){n===void 0&&(n=!1);let r;typeof t=="string"?r=$n(t):(r=Fr({},t),ge(!r.pathname||!r.pathname.includes("?"),Ba("?","pathname","search",r)),ge(!r.pathname||!r.pathname.includes("#"),Ba("#","pathname","hash",r)),ge(!r.search||!r.search.includes("#"),Ba("#","search","hash",r)));let l=t===""||r.pathname==="",a=l?"/":r.pathname,o;if(a==null)o=s;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}o=h>=0?e[h]:"/"}let c=Cv(r,o),u=a&&a!=="/"&&a.endsWith("/"),d=(l||a===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),_v=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Lv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n0=["post","put","patch","delete"];new Set(n0);const Pv=["get",...n0];new Set(Pv);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dr(){return Dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Dr.apply(this,arguments)}const Mu=b.createContext(null),zv=b.createContext(null),ks=b.createContext(null),Zl=b.createContext(null),Ss=b.createContext({outlet:null,matches:[],isDataRoute:!1}),r0=b.createContext(null);function Rv(t,e){let{relative:s}=e===void 0?{}:e;Bn()||ge(!1);let{basename:n,navigator:r}=b.useContext(ks),{hash:l,pathname:a,search:o}=l0(t,{relative:s}),c=a;return n!=="/"&&(c=a==="/"?n:ms([n,a])),r.createHref({pathname:c,search:o,hash:l})}function Bn(){return b.useContext(Zl)!=null}function Js(){return Bn()||ge(!1),b.useContext(Zl).location}function i0(t){b.useContext(ks).static||b.useLayoutEffect(t)}function Gs(){let{isDataRoute:t}=b.useContext(Ss);return t?Kv():Av()}function Av(){Bn()||ge(!1);let t=b.useContext(Mu),{basename:e,future:s,navigator:n}=b.useContext(ks),{matches:r}=b.useContext(Ss),{pathname:l}=Js(),a=JSON.stringify(_u(r,s.v7_relativeSplatPath)),o=b.useRef(!1);return i0(()=>{o.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Tu(u,JSON.parse(a),l,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ms([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,l,t])}function l0(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=b.useContext(ks),{matches:r}=b.useContext(Ss),{pathname:l}=Js(),a=JSON.stringify(_u(r,n.v7_relativeSplatPath));return b.useMemo(()=>Tu(t,JSON.parse(a),l,s==="path"),[t,a,l,s])}function Ov(t,e){return Iv(t,e)}function Iv(t,e,s,n){Bn()||ge(!1);let{navigator:r}=b.useContext(ks),{matches:l}=b.useContext(Ss),a=l[l.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Js(),d;if(e){var h;let v=typeof e=="string"?$n(e):e;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||ge(!1),d=v}else d=u;let f=d.pathname||"/",y=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=cv(t,{pathname:y}),m=Uv(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:ms([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ms([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,s,n);return e&&m?b.createElement(Zl.Provider,{value:{location:Dr({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:is.Pop}},m):m}function $v(){let t=qv(),e=Lv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),s?b.createElement("pre",{style:r},s):null,null)}const Bv=b.createElement($v,null);class Fv extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?b.createElement(Ss.Provider,{value:this.props.routeContext},b.createElement(r0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dv(t){let{routeContext:e,match:s,children:n}=t,r=b.useContext(Mu);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(Ss.Provider,{value:e},n)}function Uv(t,e,s,n){var r;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,o=(r=s)==null?void 0:r.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||ge(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=s,p=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let y,p=!1,m=null,v=null;s&&(y=o&&h.route.id?o[h.route.id]:void 0,m=h.route.errorElement||Bv,c&&(u<0&&f===0?(Yv("route-fallback"),p=!0,v=null):u===f&&(p=!0,v=h.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,f+1)),x=()=>{let N;return y?N=m:p?N=v:h.route.Component?N=b.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=d,b.createElement(Dv,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:s!=null},children:N})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(Fv,{location:s.location,revalidation:s.revalidation,component:m,error:y,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var a0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a0||{}),o0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(o0||{});function Vv(t){let e=b.useContext(Mu);return e||ge(!1),e}function Wv(t){let e=b.useContext(zv);return e||ge(!1),e}function Hv(t){let e=b.useContext(Ss);return e||ge(!1),e}function c0(t){let e=Hv(),s=e.matches[e.matches.length-1];return s.route.id||ge(!1),s.route.id}function qv(){var t;let e=b.useContext(r0),s=Wv(),n=c0();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function Kv(){let{router:t}=Vv(a0.UseNavigateStable),e=c0(o0.UseNavigateStable),s=b.useRef(!1);return i0(()=>{s.current=!0}),b.useCallback(function(r,l){l===void 0&&(l={}),s.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Dr({fromRouteId:e},l)))},[t,e])}const yh={};function Yv(t,e,s){yh[t]||(yh[t]=!0)}function Xv(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function u0(t){let{to:e,replace:s,state:n,relative:r}=t;Bn()||ge(!1);let{future:l,static:a}=b.useContext(ks),{matches:o}=b.useContext(Ss),{pathname:c}=Js(),u=Gs(),d=Tu(e,_u(o,l.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:r}),[u,h,r,s,n]),null}function pe(t){ge(!1)}function Qv(t){let{basename:e="/",children:s=null,location:n,navigationType:r=is.Pop,navigator:l,static:a=!1,future:o}=t;Bn()&&ge(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:l,static:a,future:Dr({v7_relativeSplatPath:!1},o)}),[c,o,l,a]);typeof n=="string"&&(n=$n(n));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:p="default"}=n,m=b.useMemo(()=>{let v=Eu(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:y,key:p},navigationType:r}},[c,d,h,f,y,p,r]);return m==null?null:b.createElement(ks.Provider,{value:u},b.createElement(Zl.Provider,{children:s,value:m}))}function d0(t){let{children:e,location:s}=t;return Ov(cc(e),s)}new Promise(()=>{});function cc(t,e){e===void 0&&(e=[]);let s=[];return b.Children.forEach(t,(n,r)=>{if(!b.isValidElement(n))return;let l=[...e,r];if(n.type===b.Fragment){s.push.apply(s,cc(n.props.children,l));return}n.type!==pe&&ge(!1),!n.props.index||!n.props.children||ge(!1);let a={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=cc(n.props.children,l)),s.push(a)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},uc.apply(this,arguments)}function Jv(t,e){if(t==null)return{};var s={},n=Object.keys(t),r,l;for(l=0;l<n.length;l++)r=n[l],!(e.indexOf(r)>=0)&&(s[r]=t[r]);return s}function Gv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zv(t,e){return t.button===0&&(!e||e==="_self")&&!Gv(t)}function dc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(r=>[s,r]):[[s,n]])},[]))}function eb(t,e){let s=dc(t);return e&&e.forEach((n,r)=>{s.has(r)||e.getAll(r).forEach(l=>{s.append(r,l)})}),s}const tb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sb="6";try{window.__reactRouterVersion=sb}catch{}const nb="startTransition",vh=Yx[nb];function rb(t){let{basename:e,children:s,future:n,window:r}=t,l=b.useRef();l.current==null&&(l.current=lv({window:r,v5Compat:!0}));let a=l.current,[o,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=b.useCallback(h=>{u&&vh?vh(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>a.listen(d),[a,d]),b.useEffect(()=>Xv(n),[n]),b.createElement(Qv,{basename:e,children:s,location:o.location,navigationType:o.action,navigator:a,future:n})}const ib=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=b.forwardRef(function(e,s){let{onClick:n,relative:r,reloadDocument:l,replace:a,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Jv(e,tb),{basename:y}=b.useContext(ks),p,m=!1;if(typeof u=="string"&&lb.test(u)&&(p=u,ib))try{let N=new URL(window.location.href),j=u.startsWith("//")?new URL(N.protocol+u):new URL(u),k=Eu(j.pathname,y);j.origin===N.origin&&k!=null?u=k+j.search+j.hash:m=!0}catch{}let v=Rv(u,{relative:r}),g=ab(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:r,viewTransition:h});function x(N){n&&n(N),N.defaultPrevented||g(N)}return b.createElement("a",uc({},f,{href:p||v,onClick:m||l?n:x,ref:s,target:c}))});var bh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bh||(bh={}));var Nh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nh||(Nh={}));function ab(t,e){let{target:s,replace:n,state:r,preventScrollReset:l,relative:a,viewTransition:o}=e===void 0?{}:e,c=Gs(),u=Js(),d=l0(t,{relative:a});return b.useCallback(h=>{if(Zv(h,s)){h.preventDefault();let f=n!==void 0?n:_l(u)===_l(d);c(t,{replace:f,state:r,preventScrollReset:l,relative:a,viewTransition:o})}},[u,c,d,n,r,s,t,l,a,o])}function ob(t){let e=b.useRef(dc(t)),s=b.useRef(!1),n=Js(),r=b.useMemo(()=>eb(n.search,s.current?null:e.current),[n.search]),l=Gs(),a=b.useCallback((o,c)=>{const u=dc(typeof o=="function"?o(r):o);s.current=!0,l("?"+u,c)},[l,r]);return[r,a]}function h0(t,e){return function(){return t.apply(e,arguments)}}const{toString:cb}=Object.prototype,{getPrototypeOf:Lu}=Object,{iterator:ea,toStringTag:f0}=Symbol,ta=(t=>e=>{const s=cb.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),jt=t=>(t=t.toLowerCase(),e=>ta(e)===t),sa=t=>e=>typeof e===t,{isArray:Fn}=Array,Pn=sa("undefined");function si(t){return t!==null&&!Pn(t)&&t.constructor!==null&&!Pn(t.constructor)&&Ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const p0=jt("ArrayBuffer");function ub(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&p0(t.buffer),e}const db=sa("string"),Ye=sa("function"),m0=sa("number"),ni=t=>t!==null&&typeof t=="object",hb=t=>t===!0||t===!1,Qi=t=>{if(ta(t)!=="object")return!1;const e=Lu(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(f0 in t)&&!(ea in t)},fb=t=>{if(!ni(t)||si(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},pb=jt("Date"),mb=jt("File"),xb=jt("Blob"),gb=jt("FileList"),yb=t=>ni(t)&&Ye(t.pipe),vb=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ye(t.append)&&((e=ta(t))==="formdata"||e==="object"&&Ye(t.toString)&&t.toString()==="[object FormData]"))},bb=jt("URLSearchParams"),[Nb,wb,jb,kb]=["ReadableStream","Request","Response","Headers"].map(jt),Sb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ri(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),Fn(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{if(si(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),a=l.length;let o;for(n=0;n<a;n++)o=l[n],e.call(null,t[o],o,t)}}function x0(t,e){if(si(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],e===r.toLowerCase())return r;return null}const Ps=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,g0=t=>!Pn(t)&&t!==Ps;function hc(){const{caseless:t,skipUndefined:e}=g0(this)&&this||{},s={},n=(r,l)=>{const a=t&&x0(s,l)||l;Qi(s[a])&&Qi(r)?s[a]=hc(s[a],r):Qi(r)?s[a]=hc({},r):Fn(r)?s[a]=r.slice():(!e||!Pn(r))&&(s[a]=r)};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&ri(arguments[r],n);return s}const Cb=(t,e,s,{allOwnKeys:n}={})=>(ri(e,(r,l)=>{s&&Ye(r)?t[l]=h0(r,s):t[l]=r},{allOwnKeys:n}),t),Eb=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_b=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Tb=(t,e,s,n)=>{let r,l,a;const o={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),l=r.length;l-- >0;)a=r[l],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=s!==!1&&Lu(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},Mb=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},Lb=t=>{if(!t)return null;if(Fn(t))return t;let e=t.length;if(!m0(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Pb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Lu(Uint8Array)),zb=(t,e)=>{const n=(t&&t[ea]).call(t);let r;for(;(r=n.next())&&!r.done;){const l=r.value;e.call(t,l[0],l[1])}},Rb=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Ab=jt("HTMLFormElement"),Ob=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),wh=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Ib=jt("RegExp"),y0=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};ri(s,(r,l)=>{let a;(a=e(r,l,t))!==!1&&(n[l]=a||r)}),Object.defineProperties(t,n)},$b=t=>{y0(t,(e,s)=>{if(Ye(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Ye(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Bb=(t,e)=>{const s={},n=r=>{r.forEach(l=>{s[l]=!0})};return Fn(t)?n(t):n(String(t).split(e)),s},Fb=()=>{},Db=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Ub(t){return!!(t&&Ye(t.append)&&t[f0]==="FormData"&&t[ea])}const Vb=t=>{const e=new Array(10),s=(n,r)=>{if(ni(n)){if(e.indexOf(n)>=0)return;if(si(n))return n;if(!("toJSON"in n)){e[r]=n;const l=Fn(n)?[]:{};return ri(n,(a,o)=>{const c=s(a,r+1);!Pn(c)&&(l[o]=c)}),e[r]=void 0,l}}return n};return s(t,0)},Wb=jt("AsyncFunction"),Hb=t=>t&&(ni(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),v0=((t,e)=>t?setImmediate:e?((s,n)=>(Ps.addEventListener("message",({source:r,data:l})=>{r===Ps&&l===s&&n.length&&n.shift()()},!1),r=>{n.push(r),Ps.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ye(Ps.postMessage)),qb=typeof queueMicrotask<"u"?queueMicrotask.bind(Ps):typeof process<"u"&&process.nextTick||v0,Kb=t=>t!=null&&Ye(t[ea]),_={isArray:Fn,isArrayBuffer:p0,isBuffer:si,isFormData:vb,isArrayBufferView:ub,isString:db,isNumber:m0,isBoolean:hb,isObject:ni,isPlainObject:Qi,isEmptyObject:fb,isReadableStream:Nb,isRequest:wb,isResponse:jb,isHeaders:kb,isUndefined:Pn,isDate:pb,isFile:mb,isBlob:xb,isRegExp:Ib,isFunction:Ye,isStream:yb,isURLSearchParams:bb,isTypedArray:Pb,isFileList:gb,forEach:ri,merge:hc,extend:Cb,trim:Sb,stripBOM:Eb,inherits:_b,toFlatObject:Tb,kindOf:ta,kindOfTest:jt,endsWith:Mb,toArray:Lb,forEachEntry:zb,matchAll:Rb,isHTMLForm:Ab,hasOwnProperty:wh,hasOwnProp:wh,reduceDescriptors:y0,freezeMethods:$b,toObjectSet:Bb,toCamelCase:Ob,noop:Fb,toFiniteNumber:Db,findKey:x0,global:Ps,isContextDefined:g0,isSpecCompliantForm:Ub,toJSONObject:Vb,isAsyncFn:Wb,isThenable:Hb,setImmediate:v0,asap:qb,isIterable:Kb};function Y(t,e,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}_.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const b0=Y.prototype,N0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{N0[t]={value:t}});Object.defineProperties(Y,N0);Object.defineProperty(b0,"isAxiosError",{value:!0});Y.from=(t,e,s,n,r,l)=>{const a=Object.create(b0);_.toFlatObject(t,a,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return Y.call(a,o,c,s,n,r),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",l&&Object.assign(a,l),a};const Yb=null;function fc(t){return _.isPlainObject(t)||_.isArray(t)}function w0(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function jh(t,e,s){return t?t.concat(e).map(function(r,l){return r=w0(r),!s&&l?"["+r+"]":r}).join(s?".":""):e}function Xb(t){return _.isArray(t)&&!t.some(fc)}const Qb=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function na(t,e,s){if(!_.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=_.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!_.isUndefined(v[m])});const n=s.metaTokens,r=s.visitor||d,l=s.dots,a=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(_.isDate(p))return p.toISOString();if(_.isBoolean(p))return p.toString();if(!c&&_.isBlob(p))throw new Y("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(p)||_.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,m,v){let g=p;if(p&&!v&&typeof p=="object"){if(_.endsWith(m,"{}"))m=n?m:m.slice(0,-2),p=JSON.stringify(p);else if(_.isArray(p)&&Xb(p)||(_.isFileList(p)||_.endsWith(m,"[]"))&&(g=_.toArray(p)))return m=w0(m),g.forEach(function(N,j){!(_.isUndefined(N)||N===null)&&e.append(a===!0?jh([m],j,l):a===null?m:m+"[]",u(N))}),!1}return fc(p)?!0:(e.append(jh(v,m,l),u(p)),!1)}const h=[],f=Object.assign(Qb,{defaultVisitor:d,convertValue:u,isVisitable:fc});function y(p,m){if(!_.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(p),_.forEach(p,function(g,x){(!(_.isUndefined(g)||g===null)&&r.call(e,g,_.isString(x)?x.trim():x,m,f))===!0&&y(g,m?m.concat(x):[x])}),h.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return y(t),e}function kh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Pu(t,e){this._pairs=[],t&&na(t,this,e)}const j0=Pu.prototype;j0.append=function(e,s){this._pairs.push([e,s])};j0.toString=function(e){const s=e?function(n){return e.call(this,n,kh)}:kh;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Jb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function k0(t,e,s){if(!e)return t;const n=s&&s.encode||Jb;_.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let l;if(r?l=r(e,s):l=_.isURLSearchParams(e)?e.toString():new Pu(e,s).toString(n),l){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Sh{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(n){n!==null&&e(n)})}}const S0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gb=typeof URLSearchParams<"u"?URLSearchParams:Pu,Zb=typeof FormData<"u"?FormData:null,eN=typeof Blob<"u"?Blob:null,tN={isBrowser:!0,classes:{URLSearchParams:Gb,FormData:Zb,Blob:eN},protocols:["http","https","file","blob","url","data"]},zu=typeof window<"u"&&typeof document<"u",pc=typeof navigator=="object"&&navigator||void 0,sN=zu&&(!pc||["ReactNative","NativeScript","NS"].indexOf(pc.product)<0),nN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rN=zu&&window.location.href||"http://localhost",iN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zu,hasStandardBrowserEnv:sN,hasStandardBrowserWebWorkerEnv:nN,navigator:pc,origin:rN},Symbol.toStringTag,{value:"Module"})),Oe={...iN,...tN};function lN(t,e){return na(t,new Oe.classes.URLSearchParams,{visitor:function(s,n,r,l){return Oe.isNode&&_.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function aN(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oN(t){const e={},s=Object.keys(t);let n;const r=s.length;let l;for(n=0;n<r;n++)l=s[n],e[l]=t[l];return e}function C0(t){function e(s,n,r,l){let a=s[l++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=l>=s.length;return a=!a&&_.isArray(r)?r.length:a,c?(_.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):((!r[a]||!_.isObject(r[a]))&&(r[a]=[]),e(s,n,r[a],l)&&_.isArray(r[a])&&(r[a]=oN(r[a])),!o)}if(_.isFormData(t)&&_.isFunction(t.entries)){const s={};return _.forEachEntry(t,(n,r)=>{e(aN(n),r,s,0)}),s}return null}function cN(t,e,s){if(_.isString(t))try{return(e||JSON.parse)(t),_.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const ii={transitional:S0,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,l=_.isObject(e);if(l&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return r?JSON.stringify(C0(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e)||_.isReadableStream(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return lN(e,this.formSerializer).toString();if((o=_.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return na(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return l||r?(s.setContentType("application/json",!1),cN(e)):e}],transformResponse:[function(e){const s=this.transitional||ii.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(_.isResponse(e)||_.isReadableStream(e))return e;if(e&&_.isString(e)&&(n&&!this.responseType||r)){const a=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?Y.from(o,Y.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oe.classes.FormData,Blob:Oe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],t=>{ii.headers[t]={}});const uN=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dN=t=>{const e={};let s,n,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),s=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!s||e[s]&&uN[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Ch=Symbol("internals");function Zn(t){return t&&String(t).trim().toLowerCase()}function Ji(t){return t===!1||t==null?t:_.isArray(t)?t.map(Ji):String(t)}function hN(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const fN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Fa(t,e,s,n,r){if(_.isFunction(n))return n.call(this,e,s);if(r&&(e=s),!!_.isString(e)){if(_.isString(n))return e.indexOf(n)!==-1;if(_.isRegExp(n))return n.test(e)}}function pN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function mN(t,e){const s=_.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,l,a){return this[n].call(this,e,r,l,a)},configurable:!0})})}let Xe=class{constructor(e){e&&this.set(e)}set(e,s,n){const r=this;function l(o,c,u){const d=Zn(c);if(!d)throw new Error("header name must be a non-empty string");const h=_.findKey(r,d);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||c]=Ji(o))}const a=(o,c)=>_.forEach(o,(u,d)=>l(u,d,c));if(_.isPlainObject(e)||e instanceof this.constructor)a(e,s);else if(_.isString(e)&&(e=e.trim())&&!fN(e))a(dN(e),s);else if(_.isObject(e)&&_.isIterable(e)){let o={},c,u;for(const d of e){if(!_.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?_.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}a(o,s)}else e!=null&&l(s,e,n);return this}get(e,s){if(e=Zn(e),e){const n=_.findKey(this,e);if(n){const r=this[n];if(!s)return r;if(s===!0)return hN(r);if(_.isFunction(s))return s.call(this,r,n);if(_.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Zn(e),e){const n=_.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Fa(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let r=!1;function l(a){if(a=Zn(a),a){const o=_.findKey(n,a);o&&(!s||Fa(n,n[o],o,s))&&(delete n[o],r=!0)}}return _.isArray(e)?e.forEach(l):l(e),r}clear(e){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const l=s[n];(!e||Fa(this,this[l],l,e,!0))&&(delete this[l],r=!0)}return r}normalize(e){const s=this,n={};return _.forEach(this,(r,l)=>{const a=_.findKey(n,l);if(a){s[a]=Ji(r),delete s[l];return}const o=e?pN(l):String(l).trim();o!==l&&delete s[l],s[o]=Ji(r),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return _.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=e&&_.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Ch]=this[Ch]={accessors:{}}).accessors,r=this.prototype;function l(a){const o=Zn(a);n[o]||(mN(r,a),n[o]=!0)}return _.isArray(e)?e.forEach(l):l(e),this}};Xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Xe.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});_.freezeMethods(Xe);function Da(t,e){const s=this||ii,n=e||s,r=Xe.from(n.headers);let l=n.data;return _.forEach(t,function(o){l=o.call(s,l,r.normalize(),e?e.status:void 0)}),r.normalize(),l}function E0(t){return!!(t&&t.__CANCEL__)}function Dn(t,e,s){Y.call(this,t??"canceled",Y.ERR_CANCELED,e,s),this.name="CanceledError"}_.inherits(Dn,Y,{__CANCEL__:!0});function _0(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new Y("Request failed with status code "+s.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function xN(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function gN(t,e){t=t||10;const s=new Array(t),n=new Array(t);let r=0,l=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=n[l];a||(a=u),s[r]=c,n[r]=u;let h=l,f=0;for(;h!==r;)f+=s[h++],h=h%t;if(r=(r+1)%t,r===l&&(l=(l+1)%t),u-a<e)return;const y=d&&u-d;return y?Math.round(f*1e3/y):void 0}}function yN(t,e){let s=0,n=1e3/e,r,l;const a=(u,d=Date.now())=>{s=d,r=null,l&&(clearTimeout(l),l=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-s;h>=n?a(u,d):(r=u,l||(l=setTimeout(()=>{l=null,a(r)},n-h)))},()=>r&&a(r)]}const Tl=(t,e,s=3)=>{let n=0;const r=gN(50,250);return yN(l=>{const a=l.loaded,o=l.lengthComputable?l.total:void 0,c=a-n,u=r(c),d=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-a)/u:void 0,event:l,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},s)},Eh=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},_h=t=>(...e)=>_.asap(()=>t(...e)),vN=Oe.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Oe.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Oe.origin),Oe.navigator&&/(msie|trident)/i.test(Oe.navigator.userAgent)):()=>!0,bN=Oe.hasStandardBrowserEnv?{write(t,e,s,n,r,l,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];_.isNumber(s)&&o.push(`expires=${new Date(s).toUTCString()}`),_.isString(n)&&o.push(`path=${n}`),_.isString(r)&&o.push(`domain=${r}`),l===!0&&o.push("secure"),_.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function NN(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wN(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function T0(t,e,s){let n=!NN(e);return t&&(n||s==!1)?wN(t,e):e}const Th=t=>t instanceof Xe?{...t}:t;function Vs(t,e){e=e||{};const s={};function n(u,d,h,f){return _.isPlainObject(u)&&_.isPlainObject(d)?_.merge.call({caseless:f},u,d):_.isPlainObject(d)?_.merge({},d):_.isArray(d)?d.slice():d}function r(u,d,h,f){if(_.isUndefined(d)){if(!_.isUndefined(u))return n(void 0,u,h,f)}else return n(u,d,h,f)}function l(u,d){if(!_.isUndefined(d))return n(void 0,d)}function a(u,d){if(_.isUndefined(d)){if(!_.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function o(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const c={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d,h)=>r(Th(u),Th(d),h,!0)};return _.forEach(Object.keys({...t,...e}),function(d){const h=c[d]||r,f=h(t[d],e[d],d);_.isUndefined(f)&&h!==o||(s[d]=f)}),s}const M0=t=>{const e=Vs({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:a,auth:o}=e;if(e.headers=a=Xe.from(a),e.url=k0(T0(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),_.isFormData(s)){if(Oe.hasStandardBrowserEnv||Oe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(_.isFunction(s.getHeaders)){const c=s.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&a.set(d,h)})}}if(Oe.hasStandardBrowserEnv&&(n&&_.isFunction(n)&&(n=n(e)),n||n!==!1&&vN(e.url))){const c=r&&l&&bN.read(l);c&&a.set(r,c)}return e},jN=typeof XMLHttpRequest<"u",kN=jN&&function(t){return new Promise(function(s,n){const r=M0(t);let l=r.data;const a=Xe.from(r.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=r,d,h,f,y,p;function m(){y&&y(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function g(){if(!v)return;const N=Xe.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:N,config:t,request:v};_0(function(w){s(w),m()},function(w){n(w),m()},k),v=null}"onloadend"in v?v.onloadend=g:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(g)},v.onabort=function(){v&&(n(new Y("Request aborted",Y.ECONNABORTED,t,v)),v=null)},v.onerror=function(j){const k=j&&j.message?j.message:"Network Error",C=new Y(k,Y.ERR_NETWORK,t,v);C.event=j||null,n(C),v=null},v.ontimeout=function(){let j=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||S0;r.timeoutErrorMessage&&(j=r.timeoutErrorMessage),n(new Y(j,k.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,v)),v=null},l===void 0&&a.setContentType(null),"setRequestHeader"in v&&_.forEach(a.toJSON(),function(j,k){v.setRequestHeader(k,j)}),_.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),o&&o!=="json"&&(v.responseType=r.responseType),u&&([f,p]=Tl(u,!0),v.addEventListener("progress",f)),c&&v.upload&&([h,y]=Tl(c),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(d=N=>{v&&(n(!N||N.type?new Dn(null,t,v):N),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const x=xN(r.url);if(x&&Oe.protocols.indexOf(x)===-1){n(new Y("Unsupported protocol "+x+":",Y.ERR_BAD_REQUEST,t));return}v.send(l||null)})},SN=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,r;const l=function(u){if(!r){r=!0,o();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Y?d:new Dn(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,l(new Y(`timeout ${e} of ms exceeded`,Y.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(l):u.removeEventListener("abort",l)}),t=null)};t.forEach(u=>u.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>_.asap(o),c}},CN=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,r;for(;n<s;)r=n+e,yield t.slice(n,r),n=r},EN=async function*(t,e){for await(const s of _N(t))yield*CN(s,e)},_N=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},Mh=(t,e,s,n)=>{const r=EN(t,e);let l=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){o(),c.close();return}let h=d.byteLength;if(s){let f=l+=h;s(f)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),r.return()}},{highWaterMark:2})},Lh=64*1024,{isFunction:Si}=_,TN=(({Request:t,Response:e})=>({Request:t,Response:e}))(_.global),{ReadableStream:Ph,TextEncoder:zh}=_.global,Rh=(t,...e)=>{try{return!!t(...e)}catch{return!1}},MN=t=>{t=_.merge.call({skipUndefined:!0},TN,t);const{fetch:e,Request:s,Response:n}=t,r=e?Si(e):typeof fetch=="function",l=Si(s),a=Si(n);if(!r)return!1;const o=r&&Si(Ph),c=r&&(typeof zh=="function"?(p=>m=>p.encode(m))(new zh):async p=>new Uint8Array(await new s(p).arrayBuffer())),u=l&&o&&Rh(()=>{let p=!1;const m=new s(Oe.origin,{body:new Ph,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),d=a&&o&&Rh(()=>_.isReadableStream(new n("").body)),h={stream:d&&(p=>p.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(m,v)=>{let g=m&&m[p];if(g)return g.call(m);throw new Y(`Response type '${p}' is not supported`,Y.ERR_NOT_SUPPORT,v)})});const f=async p=>{if(p==null)return 0;if(_.isBlob(p))return p.size;if(_.isSpecCompliantForm(p))return(await new s(Oe.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(_.isArrayBufferView(p)||_.isArrayBuffer(p))return p.byteLength;if(_.isURLSearchParams(p)&&(p=p+""),_.isString(p))return(await c(p)).byteLength},y=async(p,m)=>{const v=_.toFiniteNumber(p.getContentLength());return v??f(m)};return async p=>{let{url:m,method:v,data:g,signal:x,cancelToken:N,timeout:j,onDownloadProgress:k,onUploadProgress:C,responseType:w,headers:S,withCredentials:T="same-origin",fetchOptions:L}=M0(p),$=e||fetch;w=w?(w+"").toLowerCase():"text";let M=SN([x,N&&N.toAbortSignal()],j),E=null;const P=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let F;try{if(C&&u&&v!=="get"&&v!=="head"&&(F=await y(S,g))!==0){let K=new s(m,{method:"POST",body:g,duplex:"half"}),Z;if(_.isFormData(g)&&(Z=K.headers.get("content-type"))&&S.setContentType(Z),K.body){const[Q,se]=Eh(F,Tl(_h(C)));g=Mh(K.body,Lh,Q,se)}}_.isString(T)||(T=T?"include":"omit");const W=l&&"credentials"in s.prototype,be={...L,signal:M,method:v.toUpperCase(),headers:S.normalize().toJSON(),body:g,duplex:"half",credentials:W?T:void 0};E=l&&new s(m,be);let I=await(l?$(E,L):$(m,be));const U=d&&(w==="stream"||w==="response");if(d&&(k||U&&P)){const K={};["status","statusText","headers"].forEach(Ne=>{K[Ne]=I[Ne]});const Z=_.toFiniteNumber(I.headers.get("content-length")),[Q,se]=k&&Eh(Z,Tl(_h(k),!0))||[];I=new n(Mh(I.body,Lh,Q,()=>{se&&se(),P&&P()}),K)}w=w||"text";let V=await h[_.findKey(h,w)||"text"](I,p);return!U&&P&&P(),await new Promise((K,Z)=>{_0(K,Z,{data:V,headers:Xe.from(I.headers),status:I.status,statusText:I.statusText,config:p,request:E})})}catch(W){throw P&&P(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,p,E),{cause:W.cause||W}):Y.from(W,W&&W.code,p,E)}}},LN=new Map,L0=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:r}=e,l=[n,r,s];let a=l.length,o=a,c,u,d=LN;for(;o--;)c=l[o],u=d.get(c),u===void 0&&d.set(c,u=o?new Map:MN(e)),d=u;return u};L0();const Ru={http:Yb,xhr:kN,fetch:{get:L0}};_.forEach(Ru,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ah=t=>`- ${t}`,PN=t=>_.isFunction(t)||t===null||t===!1;function zN(t,e){t=_.isArray(t)?t:[t];const{length:s}=t;let n,r;const l={};for(let a=0;a<s;a++){n=t[a];let o;if(r=n,!PN(n)&&(r=Ru[(o=String(n)).toLowerCase()],r===void 0))throw new Y(`Unknown adapter '${o}'`);if(r&&(_.isFunction(r)||(r=r.get(e))))break;l[o||"#"+a]=r}if(!r){const a=Object.entries(l).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=s?a.length>1?`since :
`+a.map(Ah).join(`
`):" "+Ah(a[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const P0={getAdapter:zN,adapters:Ru};function Ua(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dn(null,t)}function Oh(t){return Ua(t),t.headers=Xe.from(t.headers),t.data=Da.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),P0.getAdapter(t.adapter||ii.adapter,t)(t).then(function(n){return Ua(t),n.data=Da.call(t,t.transformResponse,n),n.headers=Xe.from(n.headers),n},function(n){return E0(n)||(Ua(t),n&&n.response&&(n.response.data=Da.call(t,t.transformResponse,n.response),n.response.headers=Xe.from(n.response.headers))),Promise.reject(n)})}const z0="1.13.2",ra={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ra[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ih={};ra.transitional=function(e,s,n){function r(l,a){return"[Axios v"+z0+"] Transitional option '"+l+"'"+a+(n?". "+n:"")}return(l,a,o)=>{if(e===!1)throw new Y(r(a," has been removed"+(s?" in "+s:"")),Y.ERR_DEPRECATED);return s&&!Ih[a]&&(Ih[a]=!0,console.warn(r(a," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(l,a,o):!0}};ra.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function RN(t,e,s){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const l=n[r],a=e[l];if(a){const o=t[l],c=o===void 0||a(o,l,t);if(c!==!0)throw new Y("option "+l+" must be "+c,Y.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Y("Unknown option "+l,Y.ERR_BAD_OPTION)}}const Gi={assertOptions:RN,validators:ra},Ct=Gi.validators;let Os=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Sh,response:new Sh}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Vs(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:l}=s;n!==void 0&&Gi.assertOptions(n,{silentJSONParsing:Ct.transitional(Ct.boolean),forcedJSONParsing:Ct.transitional(Ct.boolean),clarifyTimeoutError:Ct.transitional(Ct.boolean)},!1),r!=null&&(_.isFunction(r)?s.paramsSerializer={serialize:r}:Gi.assertOptions(r,{encode:Ct.function,serialize:Ct.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Gi.assertOptions(s,{baseUrl:Ct.spelling("baseURL"),withXsrfToken:Ct.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=l&&_.merge(l.common,l[s.method]);l&&_.forEach(["delete","get","head","post","put","patch","common"],p=>{delete l[p]}),s.headers=Xe.concat(a,l);const o=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(c=c&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,h=0,f;if(!c){const p=[Oh.bind(this),void 0];for(p.unshift(...o),p.push(...u),f=p.length,d=Promise.resolve(s);h<f;)d=d.then(p[h++],p[h++]);return d}f=o.length;let y=s;for(;h<f;){const p=o[h++],m=o[h++];try{y=p(y)}catch(v){m.call(this,v);break}}try{d=Oh.call(this,y)}catch(p){return Promise.reject(p)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Vs(this.defaults,e);const s=T0(e.baseURL,e.url,e.allowAbsoluteUrls);return k0(s,e.params,e.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(e){Os.prototype[e]=function(s,n){return this.request(Vs(n||{},{method:e,url:s,data:(n||{}).data}))}});_.forEach(["post","put","patch"],function(e){function s(n){return function(l,a,o){return this.request(Vs(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:a}))}}Os.prototype[e]=s(),Os.prototype[e+"Form"]=s(!0)});let AN=class R0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const a=new Promise(o=>{n.subscribe(o),l=o}).then(r);return a.cancel=function(){n.unsubscribe(l)},a},e(function(l,a,o){n.reason||(n.reason=new Dn(l,a,o),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new R0(function(r){e=r}),cancel:e}}};function ON(t){return function(s){return t.apply(null,s)}}function IN(t){return _.isObject(t)&&t.isAxiosError===!0}const mc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mc).forEach(([t,e])=>{mc[e]=t});function A0(t){const e=new Os(t),s=h0(Os.prototype.request,e);return _.extend(s,Os.prototype,e,{allOwnKeys:!0}),_.extend(s,e,null,{allOwnKeys:!0}),s.create=function(r){return A0(Vs(t,r))},s}const z=A0(ii);z.Axios=Os;z.CanceledError=Dn;z.CancelToken=AN;z.isCancel=E0;z.VERSION=z0;z.toFormData=na;z.AxiosError=Y;z.Cancel=z.CanceledError;z.all=function(e){return Promise.all(e)};z.spread=ON;z.isAxiosError=IN;z.mergeConfig=Vs;z.AxiosHeaders=Xe;z.formToJSON=t=>C0(_.isHTMLForm(t)?new FormData(t):t);z.getAdapter=P0.getAdapter;z.HttpStatusCode=mc;z.default=z;const{Axios:dS,AxiosError:hS,CanceledError:fS,isCancel:pS,CancelToken:mS,VERSION:xS,all:gS,Cancel:yS,isAxiosError:vS,spread:bS,toFormData:NS,AxiosHeaders:wS,HttpStatusCode:jS,formToJSON:kS,getAdapter:SS,mergeConfig:CS}=z,O0=b.createContext(),fe=()=>b.useContext(O0),$N=({children:t})=>{const[e,s]=b.useState(null),[n,r]=b.useState(null),[l,a]=b.useState(!0);b.useEffect(()=>{const m=localStorage.getItem("user"),v=localStorage.getItem("admin");m&&s(JSON.parse(m)),v&&r(JSON.parse(v)),a(!1)},[]);const p={user:e,admin:n,setAdmin:r,loading:l,loginUser:async(m,v)=>{const{data:g}=await z.post("/api/user/login",{email:m,password:v});return s(g),localStorage.setItem("user",JSON.stringify(g)),g},registerUser:async m=>{const{data:v}=await z.post("/api/user/register",m);return s(v),localStorage.setItem("user",JSON.stringify(v)),v},loginAdmin:async(m,v)=>{const{data:g}=await z.post("/api/admin/login",{email:m,password:v});return r(g),localStorage.setItem("admin",JSON.stringify(g)),g},setupAdmin:async(m,v,g)=>{const{data:x}=await z.post("/api/admin/setup",{username:m,email:v,password:g});return r(x),localStorage.setItem("admin",JSON.stringify(x)),x},logoutUser:()=>{s(null),localStorage.removeItem("user")},logoutAdmin:()=>{r(null),localStorage.removeItem("admin")},updateAdmin:m=>{const v={...n,...m};r(v),localStorage.setItem("admin",JSON.stringify(v))}};return i.jsx(O0.Provider,{value:p,children:t})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const s=b.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:o="",children:c,...u},d)=>b.createElement("svg",{ref:d,...BN,width:r,height:r,stroke:n,strokeWidth:a?Number(l)*24/Number(r):l,className:["lucide",`lucide-${FN(t)}`,o].join(" "),...u},[...e.map(([h,f])=>b.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=G("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=G("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=G("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=G("CandlestickChart",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=G("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=G("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=G("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=G("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=G("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=G("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),HN=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState({username:"",email:"",password:""}),[r,l]=b.useState(!1),[a,o]=b.useState(""),[c,u]=b.useState(!1),{loginAdmin:d,setupAdmin:h}=fe(),f=Gs(),y=async p=>{var m,v;p.preventDefault(),o(""),u(!0);try{t?await h(s.username,s.email,s.password):await d(s.email,s.password),f("/admin/users")}catch(g){o(((v=(m=g.response)==null?void 0:m.data)==null?void 0:v.message)||"Something went wrong")}finally{u(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex",children:[i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/20 to-blue-600/20"}),i.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-500/30 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative z-10 text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:i.jsx("div",{className:"p-4 bg-purple-600 rounded-2xl",children:i.jsx(Hr,{className:"w-12 h-12 text-white"})})}),i.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Admin Control Center"}),i.jsx("p",{className:"text-xl text-gray-300 mb-12",children:"Manage your trading platform with ease"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-md",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[i.jsx(zl,{className:"w-8 h-8 text-purple-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"User Management"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Create, modify & manage all users"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[i.jsx(Ur,{className:"w-8 h-8 text-blue-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Wallet Control"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Deposit & withdraw user funds"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[i.jsx(xs,{className:"w-8 h-8 text-green-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Full Control"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Complete platform settings"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-left",children:[i.jsx(VN,{className:"w-8 h-8 text-yellow-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Secure Access"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Protected admin dashboard"})]})]})]})]}),i.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsx("div",{className:"text-center mb-8 lg:hidden",children:i.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-purple-600 rounded-xl",children:i.jsx(Hr,{className:"w-8 h-8 text-white"})}),i.jsx("span",{className:"text-2xl font-bold text-white",children:"Admin Panel"})]})}),i.jsxs("div",{className:"bg-dark-800/80 backdrop-blur-xl p-8 rounded-2xl border border-purple-500/20 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Create Admin Account":"Admin Login"}),i.jsx("p",{className:"text-gray-400 mt-2",children:t?"Set up your admin credentials":"Access the control panel"})]}),a&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6",children:a}),i.jsxs("form",{onSubmit:y,children:[t&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Username"}),i.jsx("input",{type:"text",value:s.username,onChange:p=>n({...s,username:p.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"Enter username",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:s.email,onChange:p=>n({...s,email:p.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition",placeholder:"admin@example.com",required:!0})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:r?"text":"password",value:s.password,onChange:p=>n({...s,password:p.target.value}),className:"w-full bg-dark-700 border border-purple-500/30 rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-purple-500 transition",placeholder:"Enter password",required:!0}),i.jsx("button",{type:"button",onClick:()=>l(!r),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:r?i.jsx(Un,{size:20}):i.jsx(Zs,{size:20})})]})]}),i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 py-3 rounded-lg font-semibold transition disabled:opacity-50 shadow-lg shadow-purple-500/25",children:c?"Please wait...":t?"Create Admin Account":"Sign In"}),i.jsx("button",{type:"button",onClick:()=>e(!t),className:"w-full mt-4 text-sm text-purple-400 hover:text-purple-300 transition",children:t?"Already have an account? Sign In":"First time? Create Admin Account"})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700 text-center",children:i.jsx(Me,{to:"/login",className:"text-sm text-gray-400 hover:text-white transition",children:"User Login "})})]})]})})]})},qN=()=>{var y;const{admin:t,logoutAdmin:e,updateAdmin:s}=fe(),n=Gs(),r=Js(),[l,a]=b.useState(!1),[o,c]=b.useState(((y=t==null?void 0:t.wallet)==null?void 0:y.balance)||0),u=(t==null?void 0:t.role)==="SUPER_ADMIN";b.useEffect(()=>{!u&&(t!=null&&t.token)&&d()},[]);const d=async()=>{try{const{data:p}=await z.get("/api/admin/me",{headers:{Authorization:`Bearer ${t.token}`}});p.wallet&&(c(p.wallet.balance||0),s({wallet:p.wallet,stats:p.stats}))}catch(p){console.error("Error refreshing admin data:",p)}},h=()=>{e(),n("/admin/login")},f=u?[{path:"/admin/dashboard",icon:Ur,label:"Dashboard"},{path:"/admin/admins",icon:Hr,label:"Admin Management"},{path:"/admin/all-users",icon:zl,label:"All Users"},{path:"/admin/instruments",icon:ct,label:"Instruments"},{path:"/admin/lot-settings",icon:xs,label:"Lot Management"},{path:"/admin/fund-requests",icon:zs,label:"Fund Requests"},{path:"/admin/charges",icon:zs,label:"Charge Management"},{path:"/admin/market-control",icon:ct,label:"Market Control"},{path:"/admin/bank-management",icon:Vr,label:"Bank Settings"},{path:"/admin/profile",icon:xs,label:"Profile"}]:[{path:"/admin/dashboard",icon:Ur,label:"Dashboard"},{path:"/admin/users",icon:zl,label:"User Management"},{path:"/admin/trades",icon:gc,label:"Trade Management"},{path:"/admin/charges",icon:zs,label:"Charge Management"},{path:"/admin/fund-requests",icon:zs,label:"Fund Requests"},{path:"/admin/bank-accounts",icon:Vr,label:"Bank Accounts"},{path:"/admin/ledger",icon:gc,label:"Transactions"},{path:"/admin/profile",icon:xs,label:"Profile"}];return i.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[i.jsxs("header",{className:"md:hidden bg-dark-800 border-b border-dark-600 px-4 py-3 flex items-center justify-between",children:[i.jsxs(Me,{to:"/",className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-7 h-7 text-green-500"}),i.jsx("span",{className:"text-lg font-bold",children:"NTrader"}),i.jsx("span",{className:`text-xs ml-1 ${u?"text-yellow-400":"text-purple-400"}`,children:u?"Super Admin":"Admin"})]}),i.jsx("button",{onClick:()=>a(!l),className:"text-gray-400 hover:text-white",children:i.jsx(D0,{size:24})})]}),l&&i.jsxs("div",{className:"md:hidden bg-dark-800 border-b border-dark-600 p-4",children:[f.map(p=>i.jsxs(Me,{to:p.path,onClick:()=>a(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg mb-2 ${r.pathname===p.path||p.path!=="/admin/dashboard"&&r.pathname.startsWith(p.path)?(u?"bg-yellow-600":"bg-purple-600")+" text-white":"text-gray-400"}`,children:[i.jsx(p.icon,{size:20}),p.label]},p.path)),i.jsxs("div",{className:"border-t border-dark-600 pt-3 mt-3",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1 px-4",children:(t==null?void 0:t.name)||(t==null?void 0:t.username)}),(t==null?void 0:t.adminCode)&&i.jsxs("div",{className:"text-xs text-purple-400 mb-2 px-4",children:["Code: ",t.adminCode]}),i.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-red-400 hover:text-red-300 px-4 py-2",children:[i.jsx(Wr,{size:18}),"Logout"]})]})]}),i.jsxs("aside",{className:"hidden md:flex w-64 bg-dark-800 border-r border-dark-600 flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-dark-600",children:[i.jsxs(Me,{to:"/",className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-8 h-8 text-green-500"}),i.jsx("span",{className:"text-xl font-bold",children:"NTrader"})]}),i.jsx("p",{className:`text-xs mt-1 ${u?"text-yellow-400":"text-purple-400"}`,children:u?"Super Admin Panel":"Admin Panel"})]}),!u&&(t==null?void 0:t.adminCode)&&i.jsxs("div",{className:"px-4 py-3 border-b border-dark-600 bg-dark-700/50",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Your Admin Code"}),i.jsx("div",{className:"text-lg font-mono font-bold text-purple-400",children:t.adminCode}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Wallet: ",o.toLocaleString()]})]}),i.jsx("nav",{className:"flex-1 p-4 space-y-1",children:f.map(p=>i.jsxs(Me,{to:p.path,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition ${r.pathname===p.path||p.path!=="/admin/dashboard"&&r.pathname.startsWith(p.path)?(u?"bg-yellow-600":"bg-purple-600")+" text-white":"text-gray-400 hover:bg-dark-700"}`,children:[i.jsx(p.icon,{size:20}),p.label]},p.path))}),i.jsxs("div",{className:"p-4 border-t border-dark-600",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:(t==null?void 0:t.name)||(t==null?void 0:t.username)}),i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:t==null?void 0:t.email}),i.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-red-400 hover:text-red-300 transition",children:[i.jsx(Wr,{size:18}),"Logout"]})]})]}),i.jsx("main",{className:"flex-1 overflow-auto",children:i.jsxs(d0,{children:[i.jsx(pe,{path:"dashboard",element:u?i.jsx($h,{}):i.jsx(Bh,{})}),u&&i.jsx(pe,{path:"admins/*",element:i.jsx(KN,{})}),u&&i.jsx(pe,{path:"all-users",element:i.jsx(fw,{})}),u&&i.jsx(pe,{path:"instruments",element:i.jsx(iw,{})}),u&&i.jsx(pe,{path:"lot-settings",element:i.jsx(cw,{})}),u&&i.jsx(pe,{path:"fund-requests",element:i.jsx(ZN,{})}),u&&i.jsx(pe,{path:"market-control",element:i.jsx(lw,{})}),u&&i.jsx(pe,{path:"bank-management",element:i.jsx(rw,{})}),!u&&i.jsx(pe,{path:"users/*",element:i.jsx(pw,{})}),!u&&i.jsx(pe,{path:"trades",element:i.jsx(aw,{})}),!u&&i.jsx(pe,{path:"fund-requests",element:i.jsx(ew,{})}),!u&&i.jsx(pe,{path:"bank-accounts",element:i.jsx(tw,{})}),!u&&i.jsx(pe,{path:"ledger",element:i.jsx(nw,{})}),i.jsx(pe,{path:"charges",element:i.jsx(uw,{})}),i.jsx(pe,{path:"profile",element:i.jsx(hw,{})}),i.jsx(pe,{path:"*",element:u?i.jsx($h,{}):i.jsx(Bh,{})})]})})]})},$h=()=>{const{admin:t}=fe(),[e,s]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:a}=await z.get("/api/admin/manage/dashboard-stats",{headers:{Authorization:`Bearer ${t.token}`}});s(a)}catch(a){console.error("Error fetching stats:",a)}finally{r(!1)}};return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(he,{className:"animate-spin text-gray-400",size:32})}):i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Super Admin Dashboard"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsx(ls,{title:"Total Admins",value:(e==null?void 0:e.totalAdmins)||0,subtitle:`${(e==null?void 0:e.activeAdmins)||0} active`,color:"yellow"}),i.jsx(ls,{title:"Total Users",value:(e==null?void 0:e.totalUsers)||0,subtitle:`${(e==null?void 0:e.activeUsers)||0} active`,color:"purple"}),i.jsx(ls,{title:"Admin Wallets",value:`${((e==null?void 0:e.totalAdminBalance)||0).toLocaleString()}`,subtitle:"Total balance",color:"green"}),i.jsx(ls,{title:"User Wallets",value:`${((e==null?void 0:e.totalUserBalance)||0).toLocaleString()}`,subtitle:"Total balance",color:"blue"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(Me,{to:"/admin/admins",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(Hr,{className:"text-yellow-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Manage Admins"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Create, edit, fund admins"})]})]}),i.jsxs(Me,{to:"/admin/instruments",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(ct,{className:"text-green-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Instruments"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Manage trading instruments"})]})]}),i.jsxs(Me,{to:"/admin/market-control",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(Ur,{className:"text-blue-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Market Control"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Open/Close market trading"})]})]})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"System Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Platform"}),i.jsx("span",{children:"NTrader v1.0"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Your Role"}),i.jsx("span",{className:"text-yellow-400",children:"SUPER_ADMIN"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Status"}),i.jsx("span",{className:"text-green-400",children:"Active"})]})]})]})]})]})},Bh=()=>{var d;const{admin:t,updateAdmin:e}=fe(),[s,n]=b.useState({users:0,pendingRequests:0}),[r,l]=b.useState(!0),[a,o]=b.useState(((d=t==null?void 0:t.wallet)==null?void 0:d.balance)||0);b.useEffect(()=>{u(),c()},[]);const c=async()=>{try{const{data:h}=await z.get("/api/admin/me",{headers:{Authorization:`Bearer ${t.token}`}});h.wallet&&(o(h.wallet.balance||0),e({wallet:h.wallet,stats:h.stats}))}catch(h){console.error("Error refreshing admin data:",h)}},u=async()=>{try{const[h,f]=await Promise.all([z.get("/api/admin/manage/users",{headers:{Authorization:`Bearer ${t.token}`}}),z.get("/api/admin/manage/fund-requests?status=PENDING",{headers:{Authorization:`Bearer ${t.token}`}})]);n({users:h.data.length,pendingRequests:f.data.length})}catch(h){console.error("Error:",h)}finally{l(!1)}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsx(ls,{title:"Your Wallet",value:`${a.toLocaleString()}`,subtitle:"Available balance",color:"green"}),i.jsx(ls,{title:"Total Users",value:s.users,subtitle:"Under your code",color:"purple"}),i.jsx(ls,{title:"Pending Requests",value:s.pendingRequests,subtitle:"Fund requests",color:"yellow"}),i.jsx(ls,{title:"Admin Code",value:(t==null?void 0:t.adminCode)||"N/A",subtitle:"Share with users",color:"blue"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(Me,{to:"/admin/users",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(zl,{className:"text-purple-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Manage Users"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Create, edit, fund users"})]})]}),i.jsxs(Me,{to:"/admin/trades",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(gc,{className:"text-green-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Trade Management"}),i.jsx("div",{className:"text-sm text-gray-400",children:"View and manage user trades"})]})]}),i.jsxs(Me,{to:"/admin/fund-requests",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(zs,{className:"text-yellow-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Fund Requests"}),i.jsxs("div",{className:"text-sm text-gray-400",children:[s.pendingRequests," pending"]})]})]}),i.jsxs(Me,{to:"/admin/bank-accounts",className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg hover:bg-dark-600 transition",children:[i.jsx(Vr,{className:"text-blue-400",size:24}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Bank Accounts"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Manage payment methods"})]})]})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Name"}),i.jsx("span",{children:(t==null?void 0:t.name)||(t==null?void 0:t.username)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Email"}),i.jsx("span",{children:t==null?void 0:t.email})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Admin Code"}),i.jsx("span",{className:"text-purple-400 font-mono",children:t==null?void 0:t.adminCode})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Status"}),i.jsx("span",{className:"text-green-400",children:(t==null?void 0:t.status)||"ACTIVE"})]})]}),(t==null?void 0:t.referralCode)&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"User Registration Link"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/login?ref=${t.referralCode}`,className:"flex-1 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-xs font-mono text-green-400"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/login?ref=${t.referralCode}`),alert("Link copied!")},className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Copy"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with users to register under your account."})]})]})]})]})},ls=({title:t,value:e,subtitle:s,color:n})=>{const r={green:"text-green-400",purple:"text-purple-400",yellow:"text-yellow-400",blue:"text-blue-400",red:"text-red-400"};return i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:t}),i.jsx("div",{className:`text-2xl font-bold ${r[n]||"text-white"}`,children:e}),i.jsx("div",{className:"text-xs text-gray-500",children:s})]})},KN=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[h,f]=b.useState(!1),[y,p]=b.useState(!1),[m,v]=b.useState(null),[g,x]=b.useState("");b.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:C}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});s(C)}catch(C){console.error("Error:",C)}finally{r(!1)}},j=async(C,w)=>{var S,T;try{await z.put(`/api/admin/manage/admins/${C}/status`,{status:w},{headers:{Authorization:`Bearer ${t.token}`}}),N()}catch(L){alert(((T=(S=L.response)==null?void 0:S.data)==null?void 0:T.message)||"Error updating status")}},k=e.filter(C=>{var w,S,T,L;return((w=C.name)==null?void 0:w.toLowerCase().includes(g.toLowerCase()))||((S=C.username)==null?void 0:S.toLowerCase().includes(g.toLowerCase()))||((T=C.email)==null?void 0:T.toLowerCase().includes(g.toLowerCase()))||((L=C.adminCode)==null?void 0:L.toLowerCase().includes(g.toLowerCase()))});return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Admin Management"}),i.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg",children:[i.jsx(Kt,{size:20}),"Create Admin"]})]}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Search admins by name, email, or code...",value:g,onChange:C=>x(C.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:border-yellow-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Admins"}),i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Active"}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(C=>C.status==="ACTIVE").length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Users"}),i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.reduce((C,w)=>{var S;return C+(((S=w.stats)==null?void 0:S.totalUsers)||0)},0)})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Admin Wallet"}),i.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["",e.reduce((C,w)=>{var S;return C+(((S=w.wallet)==null?void 0:S.balance)||0)},0).toLocaleString()]})]})]}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):k.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No admins found"}):i.jsx("div",{className:"space-y-4",children:k.map(C=>{var w,S,T;return i.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-bold text-lg",children:C.name||C.username}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C.status==="ACTIVE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:C.status})]}),i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[C.email,"  ",C.phone||"No phone"]}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 flex-wrap",children:[i.jsx("span",{className:"text-sm font-mono bg-purple-500/20 text-purple-400 px-2 py-1 rounded",children:C.adminCode}),i.jsxs("span",{className:"text-xs text-gray-500",children:["Created: ",new Date(C.createdAt).toLocaleDateString()]}),C.referralCode&&i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/login?ref=${C.referralCode}`),alert("Registration link copied!")},className:"text-xs bg-green-600/20 text-green-400 px-2 py-1 rounded hover:bg-green-600/30",children:"Copy User Link"})]})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Wallet"}),i.jsxs("div",{className:"text-lg font-bold text-green-400",children:["",(((w=C.wallet)==null?void 0:w.balance)||0).toLocaleString()]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Users"}),i.jsx("div",{className:"text-lg font-bold",children:((S=C.stats)==null?void 0:S.totalUsers)||C.userCount||0})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((T=C.charges)==null?void 0:T.brokerage)||20]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>{v(C),d(!0)},className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm flex items-center gap-1",children:[i.jsx(Zs,{size:16})," View"]}),i.jsxs("button",{onClick:()=>{v(C),c(!0)},className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm flex items-center gap-1",children:[i.jsx(Ut,{size:16})," Fund"]}),i.jsxs("button",{onClick:()=>{v(C),p(!0)},className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm flex items-center gap-1",children:[i.jsx(xs,{size:16})," Charges"]}),i.jsxs("button",{onClick:()=>{v(C),f(!0)},className:"px-3 py-2 bg-yellow-600 hover:bg-yellow-700 rounded text-sm flex items-center gap-1",children:[i.jsx(yc,{size:16})," Password"]}),C.status==="ACTIVE"?i.jsx("button",{onClick:()=>j(C._id,"SUSPENDED"),className:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Suspend"}):i.jsx("button",{onClick:()=>j(C._id,"ACTIVE"),className:"px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Activate"})]})]})},C._id)})}),l&&i.jsx(YN,{token:t.token,onClose:()=>a(!1),onSuccess:()=>{a(!1),N()}}),o&&m&&i.jsx(XN,{admin:m,token:t.token,onClose:()=>{c(!1),v(null)},onSuccess:()=>{N()}}),u&&m&&i.jsx(QN,{admin:m,token:t.token,onClose:()=>{d(!1),v(null)}}),h&&m&&i.jsx(JN,{admin:m,token:t.token,onClose:()=>{f(!1),v(null)}}),y&&m&&i.jsx(GN,{admin:m,token:t.token,onClose:()=>{p(!1),v(null)},onSuccess:()=>{N()}})]})},YN=({token:t,onClose:e,onSuccess:s})=>{const[n,r]=b.useState({username:"",name:"",email:"",phone:"",password:"",pin:""}),[l,a]=b.useState(!1),[o,c]=b.useState(""),u=async d=>{var h,f;d.preventDefault(),a(!0),c("");try{await z.post("/api/admin/manage/admins",n,{headers:{Authorization:`Bearer ${t}`}}),s()}catch(y){c(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error creating admin")}finally{a(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Create New Admin"}),i.jsx("button",{onClick:e,children:i.jsx(ye,{size:24})})]}),o&&i.jsx("div",{className:"bg-red-500/20 text-red-400 p-2 rounded mb-4",children:o}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Username *",value:n.username,onChange:d=>r({...n,username:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("input",{type:"text",placeholder:"Full Name",value:n.name,onChange:d=>r({...n,name:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"}),i.jsx("input",{type:"email",placeholder:"Email *",value:n.email,onChange:d=>r({...n,email:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("input",{type:"text",placeholder:"Phone",value:n.phone,onChange:d=>r({...n,phone:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"}),i.jsx("input",{type:"password",placeholder:"Password *",value:n.password,onChange:d=>r({...n,password:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("input",{type:"text",inputMode:"numeric",placeholder:"4-6 digit PIN *",value:n.pin,onChange:d=>r({...n,pin:d.target.value.replace(/\D/g,"")}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,pattern:"[0-9]{4,6}"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l,className:"flex-1 bg-yellow-600 py-2 rounded",children:l?"Creating...":"Create Admin"})]})]})]})})},XN=({admin:t,token:e,onClose:s,onSuccess:n})=>{var y,p;const[r,l]=b.useState(""),[a,o]=b.useState(""),[c,u]=b.useState(!1),[d,h]=b.useState(""),f=async m=>{var v,g;if(!r||Number(r)<=0)return h("Enter valid amount");u(!0),h("");try{await z.post(`/api/admin/manage/admins/${t._id}/${m}-funds`,{amount:Number(r),description:a},{headers:{Authorization:`Bearer ${e}`}}),l(""),o(""),n(),s()}catch(x){h(((g=(v=x.response)==null?void 0:v.data)==null?void 0:g.message)||"Error")}finally{u(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Manage Admin Wallet"}),i.jsx("button",{onClick:s,children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-4 mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:t.name||t.username}),i.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode}),i.jsxs("div",{className:"text-2xl font-bold text-green-400 mt-2",children:["",((p=(y=t.wallet)==null?void 0:y.balance)==null?void 0:p.toLocaleString())||"0"]})]}),d&&i.jsx("div",{className:"bg-red-500/20 text-red-400 p-2 rounded mb-4",children:d}),i.jsx("input",{type:"number",placeholder:"Amount ()",value:r,onChange:m=>l(m.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-3"}),i.jsx("input",{type:"text",placeholder:"Description (optional)",value:a,onChange:m=>o(m.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-4"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>f("add"),disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded flex items-center justify-center gap-2",children:[i.jsx(Ll,{size:18})," Deposit"]}),i.jsxs("button",{onClick:()=>f("deduct"),disabled:c,className:"flex-1 bg-red-600 hover:bg-red-700 py-2 rounded flex items-center justify-center gap-2",children:[i.jsx(Ml,{size:18})," Withdraw"]})]})]})})},QN=({admin:t,token:e,onClose:s})=>{var f,y,p,m,v,g,x,N,j,k,C;const[n,r]=b.useState("users"),[l,a]=b.useState([]),[o,c]=b.useState([]),[u,d]=b.useState(!0);b.useEffect(()=>{h()},[]);const h=async()=>{try{const[w,S]=await Promise.all([z.get(`/api/admin/manage/admins/${t._id}/users`,{headers:{Authorization:`Bearer ${e}`}}),z.get(`/api/admin/manage/admins/${t._id}/ledger`,{headers:{Authorization:`Bearer ${e}`}})]);a(w.data.users||[]),c(S.data||[])}catch(w){console.error("Error:",w)}finally{d(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-dark-600",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold",children:t.name||t.username}),i.jsx("div",{className:"text-sm text-gray-400",children:t.email}),i.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[i.jsx("span",{className:"font-mono bg-purple-500/20 text-purple-400 px-2 py-1 rounded text-sm",children:t.adminCode}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="ACTIVE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:t.status})]})]}),i.jsx("button",{onClick:s,children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-b border-dark-600",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Wallet Balance"}),i.jsxs("div",{className:"text-lg font-bold text-green-400",children:["",(((f=t.wallet)==null?void 0:f.balance)||0).toLocaleString()]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Total Users"}),i.jsx("div",{className:"text-lg font-bold",children:l.length})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((y=t.charges)==null?void 0:y.brokerage)||20]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Leverage"}),i.jsxs("div",{className:"text-lg font-bold",children:[((p=t.charges)==null?void 0:p.intradayLeverage)||5,"x"]})]})]}),i.jsxs("div",{className:"flex border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>r("users"),className:`flex-1 py-3 ${n==="users"?"bg-purple-600":"bg-dark-700"}`,children:["Users (",l.length,")"]}),i.jsxs("button",{onClick:()=>r("ledger"),className:`flex-1 py-3 ${n==="ledger"?"bg-purple-600":"bg-dark-700"}`,children:["Ledger (",o.length,")"]}),i.jsx("button",{onClick:()=>r("charges"),className:`flex-1 py-3 ${n==="charges"?"bg-purple-600":"bg-dark-700"}`,children:"Charges"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):n==="users"?l.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No users under this admin"}):i.jsx("div",{className:"space-y-2",children:l.map(w=>{var S;return i.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:w.fullName||w.username}),i.jsxs("div",{className:"text-xs text-gray-400",children:[w.email,"  ",w.userId]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-green-400 font-bold",children:["",(((S=w.wallet)==null?void 0:S.cashBalance)||0).toLocaleString()]}),i.jsx("div",{className:`text-xs ${w.isActive?"text-green-400":"text-red-400"}`,children:w.isActive?"Active":"Inactive"})]})]},w._id)})}):n==="ledger"?o.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No transactions"}):i.jsx("div",{className:"space-y-2",children:o.map(w=>{var S,T;return i.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm",children:w.reason}),i.jsx("div",{className:"text-xs text-gray-400",children:new Date(w.createdAt).toLocaleString()})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:w.type==="CREDIT"?"text-green-400":"text-red-400",children:[w.type==="CREDIT"?"+":"-","",(S=w.amount)==null?void 0:S.toLocaleString()]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Bal: ",(T=w.balanceAfter)==null?void 0:T.toLocaleString()]})]})]},w._id)})}):i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((m=t.charges)==null?void 0:m.brokerage)||20]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Intraday Leverage"}),i.jsxs("div",{className:"text-lg font-bold",children:[((v=t.charges)==null?void 0:v.intradayLeverage)||5,"x"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Delivery Leverage"}),i.jsxs("div",{className:"text-lg font-bold",children:[((g=t.charges)==null?void 0:g.deliveryLeverage)||1,"x"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Option Buy Leverage"}),i.jsxs("div",{className:"text-lg font-bold",children:[((x=t.charges)==null?void 0:x.optionBuyLeverage)||1,"x"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Withdrawal Fee"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((N=t.charges)==null?void 0:N.withdrawalFee)||0]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Profit Share"}),i.jsxs("div",{className:"text-lg font-bold",children:[((j=t.charges)==null?void 0:j.profitShare)||0,"%"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Min Withdrawal"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((k=t.charges)==null?void 0:k.minWithdrawal)||100]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Max Withdrawal"}),i.jsxs("div",{className:"text-lg font-bold",children:["",((C=t.charges)==null?void 0:C.maxWithdrawal)||1e5]})]})]})}),i.jsx("div",{className:"p-4 border-t border-dark-600",children:i.jsx("button",{onClick:s,className:"w-full bg-dark-600 hover:bg-dark-500 py-2 rounded",children:"Close"})})]})})},JN=({admin:t,token:e,onClose:s})=>{const[n,r]=b.useState(""),[l,a]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState({type:"",text:""}),h=async f=>{var y,p;if(f.preventDefault(),n.length<6){d({type:"error",text:"Password must be at least 6 characters"});return}c(!0),d({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${t._id}/reset-password`,{newPassword:n},{headers:{Authorization:`Bearer ${e}`}}),d({type:"success",text:"Password reset successfully"}),setTimeout(s,1500)}catch(m){d({type:"error",text:((p=(y=m.response)==null?void 0:y.data)==null?void 0:p.message)||"Error resetting password"})}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Reset Admin Password"}),i.jsx("button",{onClick:s,children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-4 mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Resetting password for:"}),i.jsx("div",{className:"font-bold",children:t.name||t.username}),i.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode})]}),u.text&&i.jsx("div",{className:`p-3 rounded mb-4 ${u.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.text}),i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"relative mb-4",children:[i.jsx("input",{type:l?"text":"password",placeholder:"New Password (min 6 characters)",value:n,onChange:f=>r(f.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?i.jsx(Un,{size:18}):i.jsx(Zs,{size:18})})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 py-2 rounded",children:o?"Resetting...":"Reset Password"})]})]})]})})},GN=({admin:t,token:e,onClose:s,onSuccess:n})=>{var h,f,y,p,m,v,g,x,N,j;const[r,l]=b.useState({brokerage:((h=t.charges)==null?void 0:h.brokerage)||20,intradayLeverage:((f=t.charges)==null?void 0:f.intradayLeverage)||5,deliveryLeverage:((y=t.charges)==null?void 0:y.deliveryLeverage)||1,optionBuyLeverage:((p=t.charges)==null?void 0:p.optionBuyLeverage)||1,optionSellLeverage:((m=t.charges)==null?void 0:m.optionSellLeverage)||1,futuresLeverage:((v=t.charges)==null?void 0:v.futuresLeverage)||1,withdrawalFee:((g=t.charges)==null?void 0:g.withdrawalFee)||0,profitShare:((x=t.charges)==null?void 0:x.profitShare)||0,minWithdrawal:((N=t.charges)==null?void 0:N.minWithdrawal)||100,maxWithdrawal:((j=t.charges)==null?void 0:j.maxWithdrawal)||1e5}),[a,o]=b.useState(!1),[c,u]=b.useState({type:"",text:""}),d=async k=>{var C,w;k.preventDefault(),o(!0),u({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${t._id}/charges`,{charges:r},{headers:{Authorization:`Bearer ${e}`}}),u({type:"success",text:"Charges updated successfully"}),n(),setTimeout(s,1500)}catch(S){u({type:"error",text:((w=(C=S.response)==null?void 0:C.data)==null?void 0:w.message)||"Error updating charges"})}finally{o(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Edit Admin Charges"}),i.jsx("button",{onClick:s,children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-3 mb-4",children:[i.jsx("div",{className:"font-bold",children:t.name||t.username}),i.jsx("div",{className:"text-xs text-purple-400 font-mono",children:t.adminCode})]}),c.text&&i.jsx("div",{className:`p-3 rounded mb-4 ${c.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:c.text}),i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Brokerage ()"}),i.jsx("input",{type:"number",value:r.brokerage,onChange:k=>l({...r,brokerage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Intraday Leverage"}),i.jsx("input",{type:"number",value:r.intradayLeverage,onChange:k=>l({...r,intradayLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Delivery Leverage"}),i.jsx("input",{type:"number",value:r.deliveryLeverage,onChange:k=>l({...r,deliveryLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Option Buy Leverage"}),i.jsx("input",{type:"number",value:r.optionBuyLeverage,onChange:k=>l({...r,optionBuyLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Option Sell Leverage"}),i.jsx("input",{type:"number",value:r.optionSellLeverage,onChange:k=>l({...r,optionSellLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Futures Leverage"}),i.jsx("input",{type:"number",value:r.futuresLeverage,onChange:k=>l({...r,futuresLeverage:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Withdrawal Fee ()"}),i.jsx("input",{type:"number",value:r.withdrawalFee,onChange:k=>l({...r,withdrawalFee:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Profit Share (%)"}),i.jsx("input",{type:"number",value:r.profitShare,onChange:k=>l({...r,profitShare:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Min Withdrawal ()"}),i.jsx("input",{type:"number",value:r.minWithdrawal,onChange:k=>l({...r,minWithdrawal:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Max Withdrawal ()"}),i.jsx("input",{type:"number",value:r.maxWithdrawal,onChange:k=>l({...r,maxWithdrawal:Number(k.target.value)}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-dark-600 py-2 rounded",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-purple-600 hover:bg-purple-700 py-2 rounded",children:a?"Saving...":"Save Charges"})]})]})]})})},ZN=()=>{var y,p;const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState("PENDING"),[o,c]=b.useState("ALL"),[u,d]=b.useState({pending:0,approved:0,rejected:0,totalDeposits:0,totalWithdrawals:0});b.useEffect(()=>{h()},[l,o]);const h=async()=>{try{r(!0);const{data:m}=await z.get("/api/admin/manage/all-fund-requests",{params:{status:l,type:o!=="ALL"?o:void 0},headers:{Authorization:`Bearer ${t.token}`}});s(m.requests||[]),d(m.stats||u)}catch(m){console.error("Error:",m)}finally{r(!1)}},f=async(m,v)=>{var g,x;try{await z.post(`/api/admin/manage/fund-requests/${m}/${v}`,{},{headers:{Authorization:`Bearer ${t.token}`}}),h()}catch(N){alert(((x=(g=N.response)==null?void 0:g.data)==null?void 0:x.message)||"Error")}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Fund Requests"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Manage deposit and withdrawal requests from all users"})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Pending"}),i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u.pending})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Approved"}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:u.approved})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Rejected"}),i.jsx("div",{className:"text-2xl font-bold text-red-400",children:u.rejected})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Deposits"}),i.jsxs("div",{className:"text-xl font-bold text-green-400",children:["",((y=u.totalDeposits)==null?void 0:y.toLocaleString())||0]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Withdrawals"}),i.jsxs("div",{className:"text-xl font-bold text-red-400",children:["",((p=u.totalWithdrawals)==null?void 0:p.toLocaleString())||0]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[i.jsx("div",{className:"flex gap-2",children:["PENDING","APPROVED","REJECTED","ALL"].map(m=>i.jsx("button",{onClick:()=>a(m),className:`px-4 py-2 rounded text-sm ${l===m?"bg-purple-600":"bg-dark-700 hover:bg-dark-600"}`,children:m},m))}),i.jsx("div",{className:"flex gap-2",children:["ALL","DEPOSIT","WITHDRAWAL"].map(m=>i.jsx("button",{onClick:()=>c(m),className:`px-4 py-2 rounded text-sm ${o===m?"bg-blue-600":"bg-dark-700 hover:bg-dark-600"}`,children:m==="ALL"?"All Types":m},m))})]}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:["No ",l.toLowerCase()," requests found"]}):i.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"User"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Admin"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Amount"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Reference"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Date"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Action"})]})}),i.jsx("tbody",{children:e.map(m=>{var v,g,x,N,j,k;return i.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700/50",children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium",children:((v=m.user)==null?void 0:v.fullName)||((g=m.user)==null?void 0:g.username)}),i.jsx("div",{className:"text-xs text-gray-500",children:(x=m.user)==null?void 0:x.userId})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm",children:((N=m.admin)==null?void 0:N.username)||"Super Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:((j=m.admin)==null?void 0:j.adminCode)||"-"})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${m.type==="DEPOSIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.type})}),i.jsxs("td",{className:"px-4 py-3 text-right font-mono font-bold",children:["",(k=m.amount)==null?void 0:k.toLocaleString()]}),i.jsx("td",{className:"px-4 py-3 text-gray-400 text-xs",children:m.referenceId||"-"}),i.jsx("td",{className:"px-4 py-3 text-gray-400 text-xs",children:new Date(m.createdAt).toLocaleString()}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${m.status==="PENDING"?"bg-yellow-500/20 text-yellow-400":m.status==="APPROVED"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.status})}),i.jsx("td",{className:"px-4 py-3 text-center",children:m.status==="PENDING"&&i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{onClick:()=>f(m._id,"approve"),className:"px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),i.jsx("button",{onClick:()=>f(m._id,"reject"),className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},m._id)})})]})})]})},ew=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState("PENDING");b.useEffect(()=>{o()},[l]);const o=async()=>{try{const{data:u}=await z.get(`/api/admin/manage/fund-requests?status=${l}`,{headers:{Authorization:`Bearer ${t.token}`}});s(u)}catch(u){console.error("Error:",u)}finally{r(!1)}},c=async(u,d)=>{var h,f;try{await z.post(`/api/admin/manage/fund-requests/${u}/${d}`,{},{headers:{Authorization:`Bearer ${t.token}`}}),o()}catch(y){alert(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error")}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Fund Requests"}),i.jsx("div",{className:"flex gap-2 mb-6",children:["PENDING","APPROVED","REJECTED"].map(u=>i.jsx("button",{onClick:()=>a(u),className:`px-4 py-2 rounded ${l===u?"bg-purple-600":"bg-dark-700"}`,children:u},u))}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:["No ",l.toLowerCase()," requests"]}):i.jsx("div",{className:"space-y-4",children:e.map(u=>{var d,h;return i.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.type==="DEPOSIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:u.type}),i.jsxs("span",{className:"font-bold",children:["",u.amount.toLocaleString()]})]}),i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["User: ",((d=u.user)==null?void 0:d.fullName)||((h=u.user)==null?void 0:h.username)," (",u.userId,")"]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(u.createdAt).toLocaleString()}),u.referenceId&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Ref: ",u.referenceId]})]}),u.status==="PENDING"&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>c(u._id,"approve"),className:"px-4 py-2 bg-green-600 rounded text-sm",children:"Approve"}),i.jsx("button",{onClick:()=>c(u._id,"reject"),className:"px-4 py-2 bg-red-600 rounded text-sm",children:"Reject"})]})]})},u._id)})})]})},tw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState(!1);b.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:u}=await z.get("/api/admin/manage/bank-accounts",{headers:{Authorization:`Bearer ${t.token}`}});s(u)}catch(u){console.error("Error:",u)}finally{r(!1)}},c=async u=>{if(confirm("Delete this account?"))try{await z.delete(`/api/admin/manage/bank-accounts/${u}`,{headers:{Authorization:`Bearer ${t.token}`}}),o()}catch{alert("Error deleting")}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex justify-between mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Bank Accounts"}),i.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-purple-600 px-4 py-2 rounded",children:[i.jsx(Kt,{size:20})," Add Account"]})]}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No bank accounts added"}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(u=>i.jsx("div",{className:"bg-dark-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.type==="BANK"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:u.type}),i.jsx("div",{className:"font-bold mt-2",children:u.holderName}),u.type==="BANK"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-sm text-gray-400",children:u.bankName}),i.jsx("div",{className:"text-sm font-mono",children:u.accountNumber}),i.jsxs("div",{className:"text-xs text-gray-500",children:["IFSC: ",u.ifsc]})]}):i.jsx("div",{className:"text-sm font-mono text-purple-400",children:u.upiId})]}),i.jsx("button",{onClick:()=>c(u._id),className:"text-red-400 hover:text-red-300",children:i.jsx(Pl,{size:18})})]})},u._id))}),l&&i.jsx(sw,{token:t.token,onClose:()=>a(!1),onSuccess:()=>{a(!1),o()}})]})},sw=({token:t,onClose:e,onSuccess:s})=>{const[n,r]=b.useState("BANK"),[l,a]=b.useState({holderName:"",bankName:"",accountNumber:"",ifsc:"",upiId:""}),[o,c]=b.useState(!1),u=async d=>{var h,f;d.preventDefault(),c(!0);try{await z.post("/api/admin/manage/bank-accounts",{type:n,...l},{headers:{Authorization:`Bearer ${t}`}}),s()}catch(y){alert(((f=(h=y.response)==null?void 0:h.data)==null?void 0:f.message)||"Error")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Add Payment Method"}),i.jsx("button",{onClick:e,children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{onClick:()=>r("BANK"),className:`flex-1 py-2 rounded ${n==="BANK"?"bg-blue-600":"bg-dark-700"}`,children:"Bank"}),i.jsx("button",{onClick:()=>r("UPI"),className:`flex-1 py-2 rounded ${n==="UPI"?"bg-purple-600":"bg-dark-700"}`,children:"UPI"})]}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Account Holder Name *",value:l.holderName,onChange:d=>a({...l,holderName:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),n==="BANK"?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Bank Name *",value:l.bankName,onChange:d=>a({...l,bankName:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("input",{type:"text",placeholder:"Account Number *",value:l.accountNumber,onChange:d=>a({...l,accountNumber:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("input",{type:"text",placeholder:"IFSC Code *",value:l.ifsc,onChange:d=>a({...l,ifsc:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}):i.jsx("input",{type:"text",placeholder:"UPI ID *",value:l.upiId,onChange:d=>a({...l,upiId:d.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0}),i.jsx("button",{type:"submit",disabled:o,className:"w-full bg-green-600 py-2 rounded",children:o?"Adding...":"Add Account"})]})]})})},nw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0);b.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:a}=await z.get("/api/admin/manage/my-ledger",{headers:{Authorization:`Bearer ${t.token}`}});s(a)}catch(a){console.error("Error:",a)}finally{r(!1)}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Wallet Ledger"}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No transactions yet"}):i.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Date"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Reason"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Amount"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Balance"})]})}),i.jsx("tbody",{children:e.map(a=>i.jsxs("tr",{className:"border-t border-dark-600",children:[i.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(a.createdAt).toLocaleString()}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${a.type==="CREDIT"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:a.type})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:a.reason}),i.jsxs("td",{className:`px-4 py-3 text-right ${a.type==="CREDIT"?"text-green-400":"text-red-400"}`,children:[a.type==="CREDIT"?"+":"-","",a.amount.toLocaleString()]}),i.jsxs("td",{className:"px-4 py-3 text-right",children:["",a.balanceAfter.toLocaleString()]})]},a._id))})]})})]})},rw=()=>{var S,T,L,$;const{admin:t}=fe(),[e,s]=b.useState(null),[n,r]=b.useState(!0),[l,a]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(null),[h,f]=b.useState(null),[y,p]=b.useState({});b.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:M}=await z.get("/api/admin/bank-settings",{headers:{Authorization:`Bearer ${t.token}`}});s(M)}catch(M){console.error("Error fetching bank settings:",M)}finally{r(!1)}},v=async M=>{var E,P;M.preventDefault();try{const{data:F}=await z.post("/api/admin/bank-settings/bank-account",y,{headers:{Authorization:`Bearer ${t.token}`}});s(F),a(!1),p({})}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error adding bank account")}},g=async M=>{var E,P;if(confirm("Are you sure you want to delete this bank account?"))try{const{data:F}=await z.delete(`/api/admin/bank-settings/bank-account/${M}`,{headers:{Authorization:`Bearer ${t.token}`}});s(F)}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error deleting bank account")}},x=async M=>{var E,P;M.preventDefault();try{const{data:F}=await z.post("/api/admin/bank-settings/upi-account",y,{headers:{Authorization:`Bearer ${t.token}`}});s(F),c(!1),p({})}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error adding UPI account")}},N=async M=>{var E,P;if(confirm("Are you sure you want to delete this UPI account?"))try{const{data:F}=await z.delete(`/api/admin/bank-settings/upi-account/${M}`,{headers:{Authorization:`Bearer ${t.token}`}});s(F)}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error deleting UPI account")}},j=async(M,E)=>{var P,F;try{const{data:W}=await z.put(`/api/admin/bank-settings/bank-account/${M}`,{isActive:!E},{headers:{Authorization:`Bearer ${t.token}`}});s(W)}catch(W){alert(((F=(P=W.response)==null?void 0:P.data)==null?void 0:F.message)||"Error updating bank status")}},k=async(M,E)=>{var P,F;try{const{data:W}=await z.put(`/api/admin/bank-settings/upi-account/${M}`,{isActive:!E},{headers:{Authorization:`Bearer ${t.token}`}});s(W)}catch(W){alert(((F=(P=W.response)==null?void 0:P.data)==null?void 0:F.message)||"Error updating UPI status")}},C=async M=>{var E,P;try{const{data:F}=await z.put(`/api/admin/bank-settings/bank-account/${M}`,{isPrimary:!0},{headers:{Authorization:`Bearer ${t.token}`}});s(F)}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error setting primary bank")}},w=async M=>{var E,P;try{const{data:F}=await z.put(`/api/admin/bank-settings/upi-account/${M}`,{isPrimary:!0},{headers:{Authorization:`Bearer ${t.token}`}});s(F)}catch(F){alert(((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Error setting primary UPI")}};return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(he,{className:"animate-spin",size:32})}):i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Bank Management"}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(Vr,{size:24}),"Bank Accounts"]}),i.jsxs("button",{onClick:()=>{a(!0),p({})},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2",children:[i.jsx(Kt,{size:18})," Add Bank"]})]}),((S=e==null?void 0:e.bankAccounts)==null?void 0:S.length)===0?i.jsx("p",{className:"text-gray-400 text-center py-8",children:"No bank accounts configured"}):i.jsx("div",{className:"space-y-4",children:(T=e==null?void 0:e.bankAccounts)==null?void 0:T.map(M=>i.jsx("div",{className:`bg-dark-700 rounded-lg p-4 border-l-4 ${M.isPrimary?"border-green-500":"border-dark-600"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold text-lg",children:M.bankName}),M.isPrimary&&i.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded",children:"PRIMARY"}),!M.isActive&&i.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded",children:"INACTIVE"})]}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.accountName}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Account Number:"}),i.jsx("span",{className:"ml-2 font-mono",children:M.accountNumber})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"IFSC:"}),i.jsx("span",{className:"ml-2 font-mono",children:M.ifscCode})]}),M.branch&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-gray-500",children:"Branch:"}),i.jsx("span",{className:"ml-2",children:M.branch})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!M.isPrimary&&i.jsx("button",{onClick:()=>C(M._id),className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded",children:"Set Primary"}),i.jsx("button",{onClick:()=>j(M._id,M.isActive),className:`px-3 py-1 text-xs rounded ${M.isActive?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:M.isActive?"Disable":"Enable"}),i.jsx("button",{onClick:()=>{d(M._id),p(M)},className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-700 rounded",children:"Edit"}),i.jsx("button",{onClick:()=>g(M._id),className:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 rounded",children:"Delete"})]})]})},M._id))})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[i.jsx(zs,{size:24}),"UPI Accounts"]}),i.jsxs("button",{onClick:()=>{c(!0),p({})},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-2",children:[i.jsx(Kt,{size:18})," Add UPI"]})]}),((L=e==null?void 0:e.upiAccounts)==null?void 0:L.length)===0?i.jsx("p",{className:"text-gray-400 text-center py-8",children:"No UPI accounts configured"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:($=e==null?void 0:e.upiAccounts)==null?void 0:$.map(M=>i.jsxs("div",{className:`bg-dark-700 rounded-lg p-4 border-l-4 ${M.isPrimary?"border-green-500":"border-dark-600"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold",children:M.name}),M.isPrimary&&i.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded",children:"PRIMARY"})]}),!M.isActive&&i.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded",children:"INACTIVE"})]}),i.jsx("p",{className:"font-mono text-lg text-green-400",children:M.upiId}),i.jsx("p",{className:"text-xs text-gray-500 capitalize mt-1",children:M.provider}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[!M.isPrimary&&i.jsx("button",{onClick:()=>w(M._id),className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded",children:"Primary"}),i.jsx("button",{onClick:()=>k(M._id,M.isActive),className:`px-2 py-1 text-xs rounded ${M.isActive?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:M.isActive?"Disable":"Enable"}),i.jsx("button",{onClick:()=>N(M._id),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 rounded",children:"Delete"})]})]},M._id))})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add Bank Account"}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Bank Name *"}),i.jsx("input",{type:"text",value:y.bankName||"",onChange:M=>p({...y,bankName:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Name *"}),i.jsx("input",{type:"text",value:y.accountName||"",onChange:M=>p({...y,accountName:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Account Number *"}),i.jsx("input",{type:"text",value:y.accountNumber||"",onChange:M=>p({...y,accountNumber:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"IFSC Code *"}),i.jsx("input",{type:"text",value:y.ifscCode||"",onChange:M=>p({...y,ifscCode:M.target.value.toUpperCase()}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Branch"}),i.jsx("input",{type:"text",value:y.branch||"",onChange:M=>p({...y,branch:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"isPrimary",checked:y.isPrimary||!1,onChange:M=>p({...y,isPrimary:M.target.checked})}),i.jsx("label",{htmlFor:"isPrimary",className:"text-sm",children:"Set as primary account"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 py-2 bg-green-600 hover:bg-green-700 rounded font-medium",children:"Add Bank"}),i.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-700 rounded font-medium",children:"Cancel"})]})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add UPI Account"}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"UPI ID *"}),i.jsx("input",{type:"text",value:y.upiId||"",onChange:M=>p({...y,upiId:M.target.value}),placeholder:"example@upi",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Display Name *"}),i.jsx("input",{type:"text",value:y.name||"",onChange:M=>p({...y,name:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Provider"}),i.jsxs("select",{value:y.provider||"other",onChange:M=>p({...y,provider:M.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"gpay",children:"Google Pay"}),i.jsx("option",{value:"phonepe",children:"PhonePe"}),i.jsx("option",{value:"paytm",children:"Paytm"}),i.jsx("option",{value:"bhim",children:"BHIM"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"isPrimaryUpi",checked:y.isPrimary||!1,onChange:M=>p({...y,isPrimary:M.target.checked})}),i.jsx("label",{htmlFor:"isPrimaryUpi",className:"text-sm",children:"Set as primary UPI"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 py-2 bg-green-600 hover:bg-green-700 rounded font-medium",children:"Add UPI"}),i.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-2 bg-gray-600 hover:bg-gray-700 rounded font-medium",children:"Cancel"})]})]})]})})]})},iw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState(""),[o,c]=b.useState({segment:"",category:"",enabled:"",optionType:""}),[u,d]=b.useState(!1),[h,f]=b.useState({}),[y,p]=b.useState({connected:!1});b.useEffect(()=>{g(),m(),v();const w=setInterval(v,2e3);return()=>clearInterval(w)},[o]);const m=async()=>{try{const{data:w}=await z.get("/api/zerodha/status");p(w)}catch(w){console.error("Error fetching Zerodha status:",w)}},v=async()=>{try{const{data:w}=await z.get("/api/zerodha/market-data");w&&Object.keys(w).length>0&&f(w)}catch{}},g=async()=>{try{let w="/api/instruments/admin?";o.segment&&(w+=`segment=${o.segment}&`),o.category&&(w+=`category=${o.category}&`),o.enabled&&(w+=`enabled=${o.enabled}&`),l&&(w+=`search=${l}&`);const{data:S}=await z.get(w,{headers:{Authorization:`Bearer ${t.token}`}});s(S)}catch(w){console.error("Error:",w)}finally{r(!1)}},x=async w=>{var S,T;try{await z.put(`/api/instruments/admin/${w}/toggle`,{},{headers:{Authorization:`Bearer ${t.token}`}}),g()}catch(L){alert(((T=(S=L.response)==null?void 0:S.data)==null?void 0:T.message)||"Error toggling instrument")}},N=async w=>{var T,L;const S=e.filter($=>$.isEnabled!==w).map($=>$._id);if(S.length!==0)try{await z.put("/api/instruments/admin/bulk-toggle",{ids:S,isEnabled:w},{headers:{Authorization:`Bearer ${t.token}`}}),g()}catch($){alert(((L=(T=$.response)==null?void 0:T.data)==null?void 0:L.message)||"Error")}},j=async()=>{var w,S;d(!0);try{const{data:T}=await z.post("/api/instruments/admin/seed-defaults",{},{headers:{Authorization:`Bearer ${t.token}`}});alert(T.message),g()}catch(T){alert(((S=(w=T.response)==null?void 0:w.data)==null?void 0:S.message)||"Error seeding instruments")}finally{d(!1)}},k=w=>{w.preventDefault(),g()},C=["NIFTY","BANKNIFTY","FINNIFTY","MIDCPNIFTY","STOCKS","INDICES","COMMODITY","CURRENCY","OTHER"];return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Instrument Management"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:`w-2 h-2 rounded-full ${y.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),i.jsxs("span",{className:"text-sm text-gray-400",children:["Zerodha: ",y.connected?`Connected (${y.userId})`:"Not Connected"]}),Object.keys(h).length>0&&i.jsxs("span",{className:"text-sm text-green-400 ml-2",children:[" ",Object.keys(h).length," live prices"]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{onClick:j,disabled:u,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm",children:u?"Seeding...":"Seed Default Instruments"})})]}),i.jsx("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsx("form",{onSubmit:k,className:"md:col-span-2",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search symbol or name...",value:l,onChange:w=>a(w.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded pl-10 pr-4 py-2"})]})}),i.jsxs("select",{value:o.segment,onChange:w=>c({...o,segment:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"",children:"All Segments"}),i.jsx("option",{value:"EQUITY",children:"Equity"}),i.jsx("option",{value:"FNO",children:"F&O"}),i.jsx("option",{value:"COMMODITY",children:"Commodity"}),i.jsx("option",{value:"CURRENCY",children:"Currency"})]}),i.jsxs("select",{value:o.category,onChange:w=>c({...o,category:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"",children:"All Categories"}),C.map(w=>i.jsx("option",{value:w,children:w},w))]}),i.jsxs("select",{value:o.enabled,onChange:w=>c({...o,enabled:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"",children:"All Status"}),i.jsx("option",{value:"true",children:"Enabled"}),i.jsx("option",{value:"false",children:"Disabled"})]}),i.jsxs("select",{value:o.optionType,onChange:w=>c({...o,optionType:w.target.value}),className:"bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"",children:"All Types"}),i.jsx("option",{value:"CE",children:"Calls (CE)"}),i.jsx("option",{value:"PE",children:"Puts (PE)"}),i.jsx("option",{value:"FUT",children:"Futures"})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total"}),i.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Enabled"}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(w=>w.isEnabled).length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Disabled"}),i.jsx("div",{className:"text-2xl font-bold text-red-400",children:e.filter(w=>!w.isEnabled).length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Featured"}),i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.filter(w=>w.isFeatured).length})]})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{onClick:()=>N(!0),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Enable All Visible"}),i.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Disable All Visible"}),i.jsxs("button",{onClick:g,className:"px-3 py-1 bg-dark-600 hover:bg-dark-500 rounded text-sm flex items-center gap-1",children:[i.jsx(he,{size:14})," Refresh"]})]}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:'No instruments found. Click "Seed Default Instruments" to add popular stocks and indices.'}):i.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Symbol"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Type"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Category"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Strike"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"LTP"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Change"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Live"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"})]})}),i.jsx("tbody",{children:e.map(w=>{const S=h[w.token]||{},T=S.ltp||w.ltp||0,L=S.change||w.change||0,$=S.changePercent||w.changePercent||0,M=!!S.ltp;return i.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700/50",children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium",children:w.symbol}),i.jsxs("div",{className:"text-xs text-gray-500",children:[w.exchange,"  ",w.expiry||"Spot"]})]}),i.jsx("td",{className:"px-4 py-3",children:w.optionType?i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${w.optionType==="CE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:w.optionType}):w.instrumentType==="FUTURES"?i.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-xs",children:"FUT"}):i.jsx("span",{className:"px-2 py-0.5 bg-gray-500/20 text-gray-400 rounded text-xs",children:w.instrumentType})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 rounded text-xs",children:w.category})}),i.jsx("td",{className:"px-4 py-3 text-right font-mono text-gray-400",children:w.strike?`${w.strike.toLocaleString()}`:"-"}),i.jsx("td",{className:"px-4 py-3 text-right font-mono",children:T>0?`${T.toLocaleString()}`:"-"}),i.jsx("td",{className:`px-4 py-3 text-right font-mono ${L>=0?"text-green-400":"text-red-400"}`,children:$?`${L>=0?"+":""}${parseFloat($).toFixed(2)}%`:"-"}),i.jsx("td",{className:"px-4 py-3 text-center",children:M?i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full inline-block animate-pulse"}):i.jsx("span",{className:"w-2 h-2 bg-gray-600 rounded-full inline-block"})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{onClick:()=>x(w._id),className:`relative w-12 h-6 rounded-full transition ${w.isEnabled?"bg-green-600":"bg-dark-600"}`,children:i.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition ${w.isEnabled?"left-7":"left-1"}`})})})]},w._id)})})]})})]})},lw=()=>{const{admin:t}=fe(),[e,s]=b.useState(null),[n,r]=b.useState(!0),[l,a]=b.useState(!1),[o,c]=b.useState(null);b.useEffect(()=>{d(),u();const p=new URLSearchParams(window.location.search),m=p.get("zerodha");m==="success"?(alert("Zerodha connected successfully!"),window.history.replaceState({},"",window.location.pathname),u()):m==="error"?(alert("Zerodha connection failed: "+(p.get("message")||"Unknown error")),window.history.replaceState({},"",window.location.pathname)):m==="cancelled"&&(alert("Zerodha login was cancelled"),window.history.replaceState({},"",window.location.pathname))},[]);const u=async()=>{try{const{data:p}=await z.get("/api/zerodha/status");c(p)}catch(p){console.error("Error fetching broker status:",p)}},d=async()=>{try{const{data:p}=await z.get("/api/trade/market-state");s(p)}catch(p){console.error("Error:",p)}finally{r(!1)}},h=async()=>{var p,m;a(!0);try{const{data:v}=await z.put("/api/trade/market-state",{isMarketOpen:!e.isMarketOpen},{headers:{Authorization:`Bearer ${t.token}`}});s(v)}catch(v){alert(((m=(p=v.response)==null?void 0:p.data)==null?void 0:m.message)||"Error updating market state")}finally{a(!1)}},f=async()=>{var p,m;try{const{data:v}=await z.get("/api/zerodha/login-url",{headers:{Authorization:`Bearer ${t.token}`}});window.location.href=v.loginUrl}catch(v){alert(((m=(p=v.response)==null?void 0:p.data)==null?void 0:m.message)||"Error getting Zerodha login URL")}},y=async()=>{var p,m;try{await z.post("/api/zerodha/logout",{},{headers:{Authorization:`Bearer ${t.token}`}}),u(),alert("Zerodha disconnected")}catch(v){alert(((m=(p=v.response)==null?void 0:p.data)==null?void 0:m.message)||"Error disconnecting Zerodha")}};return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(he,{className:"animate-spin",size:32})}):i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Market Control"}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Zerodha Kite Connect"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Connect to Zerodha Kite API for live market data feed"}),i.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-dark-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:i.jsx(ct,{className:"text-blue-400",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Zerodha Kite"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Kite Connect API"})]})]}),i.jsx("div",{className:`px-2 py-1 rounded text-xs ${o!=null&&o.connected?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:o!=null&&o.connected?"Connected":"Disconnected"})]}),o!=null&&o.connected?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-xs text-gray-400 mb-3",children:["User ID: ",o.userId]}),i.jsx("button",{onClick:y,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm",children:"Disconnect"})]}):i.jsx("button",{onClick:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded text-sm",children:"Connect to Kite"})]})}),i.jsxs("div",{className:"mt-4 p-3 bg-dark-700 rounded-lg border border-dark-600",children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Kite Connect Redirect URL"}),i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Add this URL in your Kite Connect app settings:"}),i.jsxs("code",{className:"block bg-dark-900 p-2 rounded text-xs text-green-400 break-all",children:[window.location.origin.replace(":3000",":5001"),"/api/zerodha/callback"]})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Global Market Status"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:e!=null&&e.isMarketOpen?"Market is OPEN - Trading is allowed":"Market is CLOSED - Trading is disabled"})]}),i.jsx("button",{onClick:h,disabled:l,className:`px-8 py-4 rounded-lg text-lg font-bold transition ${e!=null&&e.isMarketOpen?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:l?"Updating...":e!=null&&e.isMarketOpen?"CLOSE MARKET":"OPEN MARKET"})]}),i.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${e!=null&&e.isMarketOpen?"bg-green-500 animate-pulse":"bg-red-500"}`}),i.jsx("span",{className:`text-lg font-bold ${e!=null&&e.isMarketOpen?"text-green-400":"text-red-400"}`,children:e!=null&&e.isMarketOpen?"MARKET OPEN":"MARKET CLOSED"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-400",children:"When Market is OPEN"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[i.jsx("li",{children:" Users can place new orders"}),i.jsx("li",{children:" Users can modify orders"}),i.jsx("li",{children:" New positions can be opened"}),i.jsx("li",{children:" Square-off allowed"}),i.jsx("li",{children:" RMS actions active"})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-400",children:"When Market is CLOSED"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[i.jsx("li",{children:" No new orders allowed"}),i.jsx("li",{children:" No modifications allowed"}),i.jsx("li",{children:" No new positions"}),i.jsx("li",{children:" Square-off still allowed"}),i.jsx("li",{children:" RMS actions still work"}),i.jsx("li",{children:" Admin settlement allowed"})]})]})]}),(e==null?void 0:e.lastUpdatedAt)&&i.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:["Last updated: ",new Date(e.lastUpdatedAt).toLocaleString()]})]})},aw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState(""),[o,c]=b.useState(!1);b.useEffect(()=>{u()},[l]);const u=async()=>{try{const h=l?`/api/trade/admin/trades?status=${l}`:"/api/trade/admin/trades",{data:f}=await z.get(h,{headers:{Authorization:`Bearer ${t.token}`}});s(f)}catch(h){console.error("Error:",h)}finally{r(!1)}},d=async(h,f)=>{var p,m;const y=prompt("Enter exit price:",f);if(y)try{await z.post(`/api/trade/admin/trade/${h}/close`,{exitPrice:Number(y)},{headers:{Authorization:`Bearer ${t.token}`}}),u()}catch(v){alert(((m=(p=v.response)==null?void 0:p.data)==null?void 0:m.message)||"Error closing trade")}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Trade Management"}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition",children:[i.jsx(Kt,{size:20}),i.jsx("span",{children:"Create Trade"})]})]}),i.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[i.jsx("button",{onClick:()=>a(""),className:`px-4 py-2 rounded ${l?"bg-dark-700":"bg-purple-600"}`,children:"All"}),i.jsx("button",{onClick:()=>a("OPEN"),className:`px-4 py-2 rounded ${l==="OPEN"?"bg-green-600":"bg-dark-700"}`,children:"Open"}),i.jsx("button",{onClick:()=>a("CLOSED"),className:`px-4 py-2 rounded ${l==="CLOSED"?"bg-red-600":"bg-dark-700"}`,children:"Closed"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Trades"}),i.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Open"}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.filter(h=>h.status==="OPEN").length})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total P&L"}),i.jsxs("div",{className:`text-2xl font-bold ${e.reduce((h,f)=>h+(f.netPnL||f.unrealizedPnL||0),0)>=0?"text-green-400":"text-red-400"}`,children:["",e.reduce((h,f)=>h+(f.netPnL||f.unrealizedPnL||0),0).toLocaleString()]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Total Brokerage"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:["",e.reduce((h,f)=>{var y;return h+(((y=f.charges)==null?void 0:y.brokerage)||0)},0).toLocaleString()]})]})]}),n?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):e.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No trades found"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-4",children:e.map(h=>{var f,y;return i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold",children:h.symbol}),i.jsxs("div",{className:"text-xs text-gray-400",children:[h.segment,"  ",h.productType]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:h.status})]}),i.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["User: ",((f=h.user)==null?void 0:f.fullName)||((y=h.user)==null?void 0:y.username)]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.side==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:h.side}),i.jsxs("span",{className:"ml-2 text-sm",children:["Qty: ",h.quantity]})]}),i.jsxs("div",{className:`font-bold ${(h.netPnL||h.unrealizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(h.netPnL||h.unrealizedPnL||0)>=0?"+":"","",(h.netPnL||h.unrealizedPnL||0).toFixed(2)]})]}),h.status==="OPEN"&&i.jsx("button",{onClick:()=>d(h._id,h.currentPrice||h.entryPrice),className:"w-full mt-3 px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Force Close"})]},h._id)})}),i.jsx("div",{className:"hidden md:block bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Trade ID"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"User"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Symbol"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400",children:"Side"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Qty"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Entry"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"Exit/LTP"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400",children:"P&L"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Status"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400",children:"Action"})]})}),i.jsx("tbody",{children:e.map(h=>{var f,y,p,m;return i.jsxs("tr",{className:"border-t border-dark-600",children:[i.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:h.tradeId}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{children:((f=h.user)==null?void 0:f.fullName)||((y=h.user)==null?void 0:y.username)})}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium",children:h.symbol}),i.jsxs("div",{className:"text-xs text-gray-500",children:[h.segment,"  ",h.productType]})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.side==="BUY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:h.side})}),i.jsx("td",{className:"px-4 py-3 text-right",children:h.quantity}),i.jsxs("td",{className:"px-4 py-3 text-right",children:["",(p=h.entryPrice)==null?void 0:p.toFixed(2)]}),i.jsxs("td",{className:"px-4 py-3 text-right",children:["",(m=h.exitPrice||h.currentPrice||h.entryPrice)==null?void 0:m.toFixed(2)]}),i.jsxs("td",{className:`px-4 py-3 text-right font-bold ${(h.netPnL||h.unrealizedPnL||0)>=0?"text-green-400":"text-red-400"}`,children:[(h.netPnL||h.unrealizedPnL||0)>=0?"+":"","",(h.netPnL||h.unrealizedPnL||0).toFixed(2)]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:h.status})}),i.jsx("td",{className:"px-4 py-3 text-center",children:h.status==="OPEN"&&i.jsx("button",{onClick:()=>d(h._id,h.currentPrice||h.entryPrice),className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Close"})})]},h._id)})})]})})]}),o&&i.jsx(ow,{token:t.token,onClose:()=>c(!1),onSuccess:()=>{c(!1),u()}})]})},ow=({token:t,onClose:e,onSuccess:s})=>{const[n,r]=b.useState([]),[l,a]=b.useState([]),[o,c]=b.useState(!1),[u,d]=b.useState(""),[h,f]=b.useState(""),[y,p]=b.useState(""),[m,v]=b.useState({userId:"",userName:"",symbol:"",instrumentToken:"",segment:"NSE",side:"BUY",productType:"INTRADAY",quantity:1,entryPrice:"",tradeDate:new Date().toISOString().split("T")[0],tradeTime:new Date().toTimeString().slice(0,5)});b.useEffect(()=>{g(),x()},[]);const g=async()=>{try{const{data:C}=await z.get("/api/admin/manage/users",{headers:{Authorization:`Bearer ${t}`}});r(C)}catch(C){console.error("Error fetching users:",C)}},x=async()=>{try{const{data:C}=await z.get("/api/instruments?status=ACTIVE&limit=500",{headers:{Authorization:`Bearer ${t}`}});a(C.instruments||C||[])}catch(C){console.error("Error fetching instruments:",C)}},N=n.filter(C=>{var w,S,T;return((w=C.fullName)==null?void 0:w.toLowerCase().includes(h.toLowerCase()))||((S=C.username)==null?void 0:S.toLowerCase().includes(h.toLowerCase()))||((T=C.userId)==null?void 0:T.toLowerCase().includes(h.toLowerCase()))}).slice(0,10),j=l.filter(C=>{var w,S;return((w=C.tradingsymbol)==null?void 0:w.toLowerCase().includes(y.toLowerCase()))||((S=C.name)==null?void 0:S.toLowerCase().includes(y.toLowerCase()))}).slice(0,10),k=async C=>{var w,S;if(C.preventDefault(),!m.userId)return d("Please select a user");if(!m.symbol)return d("Please select an instrument");if(!m.entryPrice||Number(m.entryPrice)<=0)return d("Please enter valid entry price");if(!m.quantity||Number(m.quantity)<=0)return d("Please enter valid quantity");c(!0),d("");try{await z.post("/api/trade/admin/create-trade",{userId:m.userId,symbol:m.symbol,instrumentToken:m.instrumentToken,segment:m.segment,side:m.side,productType:m.productType,quantity:Number(m.quantity),entryPrice:Number(m.entryPrice),tradeDate:m.tradeDate,tradeTime:m.tradeTime},{headers:{Authorization:`Bearer ${t}`}}),s()}catch(T){d(((S=(w=T.response)==null?void 0:w.data)==null?void 0:S.message)||"Error creating trade")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-dark-800 p-4 border-b border-dark-600 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Create Trade"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),i.jsxs("form",{onSubmit:k,className:"p-4 space-y-4",children:[u&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded",children:u}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select User *"}),i.jsx("input",{type:"text",placeholder:"Search by name or ID...",value:h,onChange:C=>f(C.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-2"}),h&&N.length>0&&!m.userId&&i.jsx("div",{className:"bg-dark-700 border border-dark-600 rounded max-h-40 overflow-y-auto",children:N.map(C=>i.jsxs("div",{onClick:()=>{v({...m,userId:C._id,userName:C.fullName||C.username}),f(C.fullName||C.username)},className:"px-3 py-2 hover:bg-dark-600 cursor-pointer",children:[i.jsx("div",{className:"font-medium",children:C.fullName||C.username}),i.jsxs("div",{className:"text-xs text-gray-400",children:["@",C.username,"  ",C.userId]})]},C._id))}),m.userId&&i.jsxs("div",{className:"flex items-center justify-between bg-green-500/10 border border-green-500/30 rounded px-3 py-2",children:[i.jsx("span",{className:"text-green-400",children:m.userName}),i.jsx("button",{type:"button",onClick:()=>{v({...m,userId:"",userName:""}),f("")},className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:16})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select Instrument *"}),i.jsx("input",{type:"text",placeholder:"Search instruments...",value:y,onChange:C=>p(C.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-2"}),y&&j.length>0&&!m.symbol&&i.jsx("div",{className:"bg-dark-700 border border-dark-600 rounded max-h-40 overflow-y-auto",children:j.map(C=>i.jsxs("div",{onClick:()=>{v({...m,symbol:C.tradingsymbol,instrumentToken:C.instrument_token,segment:C.segment||C.exchange||"NSE"}),p(C.tradingsymbol)},className:"px-3 py-2 hover:bg-dark-600 cursor-pointer",children:[i.jsx("div",{className:"font-medium",children:C.tradingsymbol}),i.jsxs("div",{className:"text-xs text-gray-400",children:[C.name,"  ",C.segment||C.exchange]})]},C._id||C.instrument_token))}),m.symbol&&i.jsxs("div",{className:"flex items-center justify-between bg-blue-500/10 border border-blue-500/30 rounded px-3 py-2",children:[i.jsxs("span",{className:"text-blue-400",children:[m.symbol," (",m.segment,")"]}),i.jsx("button",{type:"button",onClick:()=>{v({...m,symbol:"",instrumentToken:""}),p("")},className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:16})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Side *"}),i.jsxs("select",{value:m.side,onChange:C=>v({...m,side:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"BUY",children:"BUY"}),i.jsx("option",{value:"SELL",children:"SELL"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Product Type *"}),i.jsxs("select",{value:m.productType,onChange:C=>v({...m,productType:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",children:[i.jsx("option",{value:"INTRADAY",children:"INTRADAY"}),i.jsx("option",{value:"DELIVERY",children:"DELIVERY"}),i.jsx("option",{value:"CARRYFORWARD",children:"CARRYFORWARD"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Quantity *"}),i.jsx("input",{type:"number",value:m.quantity,onChange:C=>v({...m,quantity:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",min:"1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Entry Price *"}),i.jsx("input",{type:"number",step:"0.01",value:m.entryPrice,onChange:C=>v({...m,entryPrice:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",placeholder:"0.00",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Trade Date"}),i.jsx("input",{type:"date",value:m.tradeDate,onChange:C=>v({...m,tradeDate:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Trade Time"}),i.jsx("input",{type:"time",value:m.tradeTime,onChange:C=>v({...m,tradeTime:C.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded disabled:opacity-50",children:o?"Creating...":"Create Trade"})]})]})]})})},cw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(null),[l,a]=b.useState({niftyMaxLotIntraday:100,niftyMaxLotCarryForward:50,niftyLotSize:25,bankniftyMaxLotIntraday:100,bankniftyMaxLotCarryForward:50,bankniftyLotSize:15,finniftyMaxLotIntraday:100,finniftyMaxLotCarryForward:50,finniftyLotSize:25,midcpniftyMaxLotIntraday:100,midcpniftyMaxLotCarryForward:50,midcpniftyLotSize:50,equityMaxQtyIntraday:1e4,equityMaxQtyDelivery:5e3,maxOpenPositions:20,maxDailyTrades:100}),[o,c]=b.useState(!0),[u,d]=b.useState(!1),[h,f]=b.useState({type:"",text:""});b.useEffect(()=>{y()},[]),b.useEffect(()=>{n&&p(n)},[n]);const y=async()=>{try{const{data:x}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});s(x),x.length>0&&r(x[0]._id)}catch(x){console.error("Error fetching admins:",x)}finally{c(!1)}},p=async x=>{try{const{data:N}=await z.get(`/api/admin/manage/admins/${x}`,{headers:{Authorization:`Bearer ${t.token}`}});N.lotSettings&&a(N.lotSettings)}catch(N){console.error("Error fetching lot settings:",N)}},m=async()=>{var x,N;d(!0),f({type:"",text:""});try{await z.put(`/api/admin/manage/admins/${n}/lot-settings`,{lotSettings:l,enabledLeverages:l.enabledLeverages,allowTradingOutsideMarketHours:l.allowTradingOutsideMarketHours,marginCallPercentage:l.marginCallPercentage},{headers:{Authorization:`Bearer ${t.token}`}}),f({type:"success",text:"All settings saved successfully!"})}catch(j){f({type:"error",text:((N=(x=j.response)==null?void 0:x.data)==null?void 0:N.message)||"Error saving settings"})}finally{d(!1)}},v=(x,N)=>{a(j=>({...j,[x]:parseInt(N)||0}))},g=[{name:"NIFTY",color:"blue",fields:[{key:"niftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"niftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"niftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"BANKNIFTY",color:"purple",fields:[{key:"bankniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"bankniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"bankniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"FINNIFTY",color:"green",fields:[{key:"finniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"finniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"finniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]},{name:"MIDCPNIFTY",color:"yellow",fields:[{key:"midcpniftyLotSize",label:"Lot Size",desc:"Qty per lot"},{key:"midcpniftyMaxLotIntraday",label:"Max Lot (Intraday)",desc:"MIS orders"},{key:"midcpniftyMaxLotCarryForward",label:"Max Lot (Carry Forward)",desc:"NRML orders"}]}];return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(he,{className:"animate-spin",size:32})}):i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Lot Management"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Configure max lot limits for each admin's users"})]}),i.jsx("button",{onClick:m,disabled:u,className:"px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-medium disabled:opacity-50",children:u?"Saving...":"Save Settings"})]}),h.text&&i.jsx("div",{className:`mb-4 p-3 rounded-lg ${h.type==="success"?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:h.text}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Select Admin"}),i.jsx("select",{value:n||"",onChange:x=>r(x.target.value),className:"w-full md:w-64 bg-dark-700 border border-dark-600 rounded px-3 py-2",children:e.map(x=>i.jsxs("option",{value:x._id,children:[x.username," (",x.adminCode,")"]},x._id))})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:g.map(x=>i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("h3",{className:`text-lg font-semibold mb-4 text-${x.color}-400`,children:x.name}),i.jsx("div",{className:"space-y-4",children:x.fields.map(N=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:N.label}),i.jsx("div",{className:"text-xs text-gray-500",children:N.desc})]}),i.jsx("input",{type:"number",value:l[N.key],onChange:j=>v(N.key,j.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]},N.key))})]},x.name))}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-400",children:"Equity"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Max Qty (Intraday)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"MIS orders"})]}),i.jsx("input",{type:"number",value:l.equityMaxQtyIntraday,onChange:x=>v("equityMaxQtyIntraday",x.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Max Qty (Delivery)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"CNC orders"})]}),i.jsx("input",{type:"number",value:l.equityMaxQtyDelivery,onChange:x=>v("equityMaxQtyDelivery",x.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-400",children:"Global Limits"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Max Open Positions"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Per user"})]}),i.jsx("input",{type:"number",value:l.maxOpenPositions,onChange:x=>v("maxOpenPositions",x.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Max Daily Trades"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Per user"})]}),i.jsx("input",{type:"number",value:l.maxDailyTrades,onChange:x=>v("maxDailyTrades",x.target.value),className:"w-24 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]})]}),i.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-400",children:"Leverage Settings"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select which leverage options to enable for users. Higher leverage = higher risk."}),i.jsx("div",{className:"flex flex-wrap gap-3",children:[1,2,5,10,20,50,100,200,500,800,1e3,1500,2e3].map(x=>{var j;const N=(j=l.enabledLeverages)==null?void 0:j.includes(x);return i.jsxs("button",{onClick:()=>{const k=l.enabledLeverages||[1,2,5,10],C=N?k.filter(w=>w!==x):[...k,x].sort((w,S)=>w-S);a(w=>({...w,enabledLeverages:C}))},className:`px-4 py-2 rounded-lg font-medium transition ${N?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[x,"x"]},x)})}),i.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Enabled: ",(l.enabledLeverages||[1,2,5,10]).join("x, "),"x"]})]}),i.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-cyan-400",children:"Trading Settings"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Allow Trading Outside Market Hours"}),i.jsx("div",{className:"text-xs text-gray-500",children:"For LIMIT orders only"})]}),i.jsx("button",{onClick:()=>a(x=>({...x,allowTradingOutsideMarketHours:!x.allowTradingOutsideMarketHours})),className:`w-12 h-6 rounded-full transition ${l.allowTradingOutsideMarketHours?"bg-green-600":"bg-dark-600"}`,children:i.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition transform ${l.allowTradingOutsideMarketHours?"translate-x-6":"translate-x-0.5"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:"Margin Call %"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Auto-close when loss reaches this %"})]}),i.jsx("input",{type:"number",value:l.marginCallPercentage||100,onChange:x=>a(N=>({...N,marginCallPercentage:parseInt(x.target.value)||100})),className:"w-20 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-right"})]})]})]}),i.jsxs("div",{className:"mt-6 bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"How Settings Work"}),i.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Leverage"}),": Higher leverage = more buying power but higher risk"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Margin Call"}),": Trades auto-close when loss reaches wallet balance"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Intraday (MIS)"}),": Orders that must be squared off same day"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"Carry Forward (NRML)"}),": Orders that can be held till expiry"]})]})]})]})},uw=()=>{const{admin:t}=fe(),e=(t==null?void 0:t.role)==="SUPER_ADMIN",[s,n]=b.useState([]),[r,l]=b.useState([]),[a,o]=b.useState([]),[c,u]=b.useState(!0),[d,h]=b.useState("default"),[f,y]=b.useState(!1),[p,m]=b.useState(null),[v,g]=b.useState({type:"",text:""});b.useEffect(()=>{x(),N(),j()},[]);const x=async()=>{try{const{data:E}=await z.get("/api/trade/admin/charges",{headers:{Authorization:`Bearer ${t.token}`}});n(E)}catch(E){console.error("Error fetching charges:",E)}finally{u(!1)}},N=async()=>{try{const{data:E}=await z.get("/api/admin/manage/users",{headers:{Authorization:`Bearer ${t.token}`}});l(E)}catch(E){console.error("Error fetching users:",E)}},j=async()=>{try{const{data:E}=await z.get("/api/instruments/public");o(E)}catch(E){console.error("Error fetching instruments:",E)}},k=async E=>{var P,F;try{await z.post("/api/trade/admin/charges",E,{headers:{Authorization:`Bearer ${t.token}`}}),g({type:"success",text:"Charge configuration saved!"}),x(),y(!1),m(null)}catch(W){g({type:"error",text:((F=(P=W.response)==null?void 0:P.data)==null?void 0:F.message)||"Error saving charge"})}},C=async E=>{var P,F;if(confirm("Delete this charge configuration?"))try{await z.delete(`/api/trade/admin/charges/${E}`,{headers:{Authorization:`Bearer ${t.token}`}}),g({type:"success",text:"Charge deleted!"}),x()}catch(W){g({type:"error",text:((F=(P=W.response)==null?void 0:P.data)==null?void 0:F.message)||"Error deleting charge"})}},w=s.filter(E=>E.scope==="GLOBAL"),S=s.filter(E=>E.scope==="ADMIN"),T=s.filter(E=>E.scope==="SEGMENT"),L=s.filter(E=>E.scope==="INSTRUMENT"),$=s.filter(E=>E.scope==="USER"),M=E=>{switch(E){case"GLOBAL":return"bg-yellow-500/20 text-yellow-400";case"ADMIN":return"bg-purple-500/20 text-purple-400";case"SEGMENT":return"bg-blue-500/20 text-blue-400";case"INSTRUMENT":return"bg-green-500/20 text-green-400";case"USER":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Charge Management"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Configure brokerage, leverage, and margins"})]}),i.jsxs("button",{onClick:()=>{m(null),y(!0)},className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition",children:[i.jsx(Kt,{size:20}),i.jsx("span",{children:"Add Charge Rule"})]})]}),v.text&&i.jsx("div",{className:`mb-4 px-4 py-2 rounded ${v.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:v.text}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-medium mb-2",children:"Charge Priority (Highest to Lowest)"}),i.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[i.jsx("span",{className:"px-2 py-1 rounded bg-orange-500/20 text-orange-400",children:"1. User-specific"}),i.jsx("span",{className:"px-2 py-1 rounded bg-green-500/20 text-green-400",children:"2. Instrument"}),i.jsx("span",{className:"px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:"3. Segment"}),i.jsx("span",{className:"px-2 py-1 rounded bg-purple-500/20 text-purple-400",children:"4. Admin Default"}),e&&i.jsx("span",{className:"px-2 py-1 rounded bg-yellow-500/20 text-yellow-400",children:"5. Global"})]})]}),i.jsxs("div",{className:"flex gap-2 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:()=>h("default"),className:`px-4 py-2 rounded ${d==="default"?"bg-purple-600":"bg-dark-700"}`,children:["Default Charges (",S.length+w.length,")"]}),i.jsxs("button",{onClick:()=>h("segment"),className:`px-4 py-2 rounded ${d==="segment"?"bg-blue-600":"bg-dark-700"}`,children:["By Segment (",T.length+L.length,")"]}),i.jsxs("button",{onClick:()=>h("user"),className:`px-4 py-2 rounded ${d==="user"?"bg-orange-600":"bg-dark-700"}`,children:["By User (",$.length,")"]})]}),c?i.jsx("div",{className:"text-center py-8",children:i.jsx(he,{className:"animate-spin inline"})}):i.jsxs(i.Fragment,{children:[d==="default"&&i.jsxs("div",{className:"space-y-4",children:[e&&w.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Global Default"}),w.map(E=>i.jsx(er,{charge:E,onEdit:()=>{m(E),y(!0)},onDelete:()=>C(E._id),getScopeColor:M},E._id))]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-purple-400 mb-2",children:"Admin Default"}),S.length===0?i.jsx("div",{className:"bg-dark-800 rounded-lg p-4 text-center text-gray-400",children:'No admin default charges set. Click "Add Charge Rule" to create one.'}):S.map(E=>i.jsx(er,{charge:E,onEdit:()=>{m(E),y(!0)},onDelete:()=>C(E._id),getScopeColor:M},E._id))]})]}),d==="segment"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-blue-400 mb-2",children:"Segment-wise Charges"}),T.length===0?i.jsx("div",{className:"bg-dark-800 rounded-lg p-4 text-center text-gray-400 mb-4",children:"No segment-specific charges. These override default charges for specific segments (EQUITY, FNO)."}):T.map(E=>i.jsx(er,{charge:E,onEdit:()=>{m(E),y(!0)},onDelete:()=>C(E._id),getScopeColor:M},E._id))]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-green-400 mb-2",children:"Instrument-wise Charges"}),L.length===0?i.jsx("div",{className:"bg-dark-800 rounded-lg p-4 text-center text-gray-400",children:"No instrument-specific charges. These override segment charges for specific instrument types (STOCK, FUTURES, OPTIONS)."}):L.map(E=>i.jsx(er,{charge:E,onEdit:()=>{m(E),y(!0)},onDelete:()=>C(E._id),getScopeColor:M},E._id))]})]}),d==="user"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-orange-400 mb-2",children:"User-specific Charges"}),$.length===0?i.jsx("div",{className:"bg-dark-800 rounded-lg p-4 text-center text-gray-400",children:"No user-specific charges. These have highest priority and override all other charges for specific users."}):$.map(E=>i.jsx(er,{charge:E,users:r,onEdit:()=>{m(E),y(!0)},onDelete:()=>C(E._id),getScopeColor:M},E._id))]})]}),f&&i.jsx(dw,{charge:p,users:r,isSuperAdmin:e,onSave:k,onClose:()=>{y(!1),m(null)}})]})},er=({charge:t,users:e,onEdit:s,onDelete:n,getScopeColor:r})=>{var a,o,c,u,d;const l=h=>{const f=e==null?void 0:e.find(y=>y._id===h);return f?f.fullName||f.username:"Unknown User"};return i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-3",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs ${r(t.scope)}`,children:t.scope}),t.segment&&i.jsx("span",{className:"px-2 py-1 rounded text-xs bg-dark-600",children:t.segment}),t.instrumentType&&i.jsx("span",{className:"px-2 py-1 rounded text-xs bg-dark-600",children:t.instrumentType}),t.userId&&i.jsx("span",{className:"px-2 py-1 rounded text-xs bg-orange-500/20 text-orange-400",children:l(t.userId)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:s,className:"p-1 text-blue-400 hover:text-blue-300",children:i.jsx(vc,{size:16})}),i.jsx("button",{onClick:n,className:"p-1 text-red-400 hover:text-red-300",children:i.jsx(Pl,{size:16})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[i.jsxs("div",{className:"bg-dark-700 rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Brokerage"}),i.jsx("div",{className:"font-medium",children:((a=t.brokerage)==null?void 0:a.type)==="PERCENTAGE"?`${(o=t.brokerage)==null?void 0:o.value}%`:((c=t.brokerage)==null?void 0:c.type)==="PER_LOT"?`${(u=t.brokerage)==null?void 0:u.value}/lot`:`${(d=t.brokerage)==null?void 0:d.value} flat`})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Exchange Charges"}),i.jsxs("div",{className:"font-medium",children:[t.exchangeCharges||0,"%"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"GST"}),i.jsxs("div",{className:"font-medium",children:[t.gst||18,"%"]})]}),i.jsxs("div",{className:"bg-dark-700 rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Stamp Duty"}),i.jsxs("div",{className:"font-medium",children:[t.stampDuty||0,"%"]})]})]})]})},dw=({charge:t,users:e,isSuperAdmin:s,onSave:n,onClose:r})=>{var y,p,m,v,g,x,N,j;const[l,a]=b.useState({scope:(t==null?void 0:t.scope)||"ADMIN",segment:(t==null?void 0:t.segment)||"",instrumentType:(t==null?void 0:t.instrumentType)||"",userId:(t==null?void 0:t.userId)||"",brokerage:{type:((y=t==null?void 0:t.brokerage)==null?void 0:y.type)||"PER_LOT",value:((p=t==null?void 0:t.brokerage)==null?void 0:p.value)||20},exchangeCharges:(t==null?void 0:t.exchangeCharges)||.00325,gst:(t==null?void 0:t.gst)||18,sebiCharges:(t==null?void 0:t.sebiCharges)||10,stampDuty:(t==null?void 0:t.stampDuty)||.015,stt:{equity:{delivery:((v=(m=t==null?void 0:t.stt)==null?void 0:m.equity)==null?void 0:v.delivery)||.1,intraday:((x=(g=t==null?void 0:t.stt)==null?void 0:g.equity)==null?void 0:x.intraday)||.025},futures:((N=t==null?void 0:t.stt)==null?void 0:N.futures)||.0125,options:((j=t==null?void 0:t.stt)==null?void 0:j.options)||.0625}}),[o,c]=b.useState(!1),[u,d]=b.useState(""),h=e.filter(k=>{var C,w;return((C=k.fullName)==null?void 0:C.toLowerCase().includes(u.toLowerCase()))||((w=k.username)==null?void 0:w.toLowerCase().includes(u.toLowerCase()))}).slice(0,5),f=k=>{k.preventDefault(),c(!0),n(l),c(!1)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-dark-800 p-4 border-b border-dark-600 flex justify-between items-center",children:[i.jsx("h2",{className:"text-xl font-bold",children:t?"Edit Charge Rule":"Add Charge Rule"}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),i.jsxs("form",{onSubmit:f,className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Charge Scope *"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[s&&i.jsx("button",{type:"button",onClick:()=>a({...l,scope:"GLOBAL",segment:"",instrumentType:"",userId:""}),className:`px-3 py-2 rounded text-sm ${l.scope==="GLOBAL"?"bg-yellow-600":"bg-dark-700"}`,children:"Global"}),i.jsx("button",{type:"button",onClick:()=>a({...l,scope:"ADMIN",segment:"",instrumentType:"",userId:""}),className:`px-3 py-2 rounded text-sm ${l.scope==="ADMIN"?"bg-purple-600":"bg-dark-700"}`,children:"Admin Default"}),i.jsx("button",{type:"button",onClick:()=>a({...l,scope:"SEGMENT",instrumentType:"",userId:""}),className:`px-3 py-2 rounded text-sm ${l.scope==="SEGMENT"?"bg-blue-600":"bg-dark-700"}`,children:"Segment"}),i.jsx("button",{type:"button",onClick:()=>a({...l,scope:"INSTRUMENT",userId:""}),className:`px-3 py-2 rounded text-sm ${l.scope==="INSTRUMENT"?"bg-green-600":"bg-dark-700"}`,children:"Instrument"}),i.jsx("button",{type:"button",onClick:()=>a({...l,scope:"USER",segment:"",instrumentType:""}),className:`px-3 py-2 rounded text-sm ${l.scope==="USER"?"bg-orange-600":"bg-dark-700"}`,children:"User"})]})]}),(l.scope==="SEGMENT"||l.scope==="INSTRUMENT")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Segment *"}),i.jsxs("select",{value:l.segment,onChange:k=>a({...l,segment:k.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,children:[i.jsx("option",{value:"",children:"Select Segment"}),i.jsx("option",{value:"EQUITY",children:"EQUITY (Cash)"}),i.jsx("option",{value:"FNO",children:"FNO (Futures & Options)"})]})]}),l.scope==="INSTRUMENT"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Instrument Type *"}),i.jsxs("select",{value:l.instrumentType,onChange:k=>a({...l,instrumentType:k.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,children:[i.jsx("option",{value:"",children:"Select Type"}),i.jsx("option",{value:"STOCK",children:"STOCK"}),i.jsx("option",{value:"FUTURES",children:"FUTURES"}),i.jsx("option",{value:"OPTIONS",children:"OPTIONS"})]})]}),l.scope==="USER"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Select User *"}),i.jsx("input",{type:"text",placeholder:"Search user...",value:u,onChange:k=>d(k.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 mb-2"}),u&&h.length>0&&!l.userId&&i.jsx("div",{className:"bg-dark-700 border border-dark-600 rounded max-h-32 overflow-y-auto",children:h.map(k=>i.jsxs("div",{onClick:()=>{a({...l,userId:k._id}),d(k.fullName||k.username)},className:"px-3 py-2 hover:bg-dark-600 cursor-pointer text-sm",children:[k.fullName||k.username," ",i.jsxs("span",{className:"text-gray-400",children:["@",k.username]})]},k._id))}),l.userId&&i.jsxs("div",{className:"flex items-center justify-between bg-orange-500/10 border border-orange-500/30 rounded px-3 py-2",children:[i.jsx("span",{className:"text-orange-400",children:u}),i.jsx("button",{type:"button",onClick:()=>{a({...l,userId:""}),d("")},children:i.jsx(ye,{size:16})})]})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Brokerage"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),i.jsxs("select",{value:l.brokerage.type,onChange:k=>a({...l,brokerage:{...l.brokerage,type:k.target.value}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2",children:[i.jsx("option",{value:"PER_LOT",children:"Per Lot"}),i.jsx("option",{value:"PERCENTAGE",children:"Percentage"}),i.jsx("option",{value:"FLAT",children:"Flat per Trade"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Value ",l.brokerage.type==="PERCENTAGE"?"(%)":"()"]}),i.jsx("input",{type:"number",step:"0.01",value:l.brokerage.value,onChange:k=>a({...l,brokerage:{...l.brokerage,value:Number(k.target.value)}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]})]})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Other Charges"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Exchange Charges (%)"}),i.jsx("input",{type:"number",step:"0.0001",value:l.exchangeCharges,onChange:k=>a({...l,exchangeCharges:Number(k.target.value)}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"GST (%)"}),i.jsx("input",{type:"number",step:"0.01",value:l.gst,onChange:k=>a({...l,gst:Number(k.target.value)}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"SEBI (/Cr)"}),i.jsx("input",{type:"number",step:"0.01",value:l.sebiCharges,onChange:k=>a({...l,sebiCharges:Number(k.target.value)}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Stamp Duty (%)"}),i.jsx("input",{type:"number",step:"0.001",value:l.stampDuty,onChange:k=>a({...l,stampDuty:Number(k.target.value)}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]})]})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium mb-3",children:"STT (Securities Transaction Tax) %"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Equity Delivery"}),i.jsx("input",{type:"number",step:"0.001",value:l.stt.equity.delivery,onChange:k=>a({...l,stt:{...l.stt,equity:{...l.stt.equity,delivery:Number(k.target.value)}}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Equity Intraday"}),i.jsx("input",{type:"number",step:"0.001",value:l.stt.equity.intraday,onChange:k=>a({...l,stt:{...l.stt,equity:{...l.stt.equity,intraday:Number(k.target.value)}}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Futures"}),i.jsx("input",{type:"number",step:"0.001",value:l.stt.futures,onChange:k=>a({...l,stt:{...l.stt,futures:Number(k.target.value)}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Options"}),i.jsx("input",{type:"number",step:"0.001",value:l.stt.options,onChange:k=>a({...l,stt:{...l.stt,options:Number(k.target.value)}}),className:"w-full bg-dark-600 border border-dark-500 rounded px-3 py-2"})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded disabled:opacity-50",children:o?"Saving...":"Save Charge Rule"})]})]})]})})},hw=()=>{const{admin:t,setAdmin:e}=fe(),[s,n]=b.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""}),[r,l]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,o]=b.useState(!1),[c,u]=b.useState({type:"",text:""}),[d,h]=b.useState(!1),f=async p=>{var m,v;p.preventDefault(),o(!0),u({type:"",text:""});try{const{data:g}=await z.put("/api/admin/manage/update-profile",s,{headers:{Authorization:`Bearer ${t.token}`}});e({...t,...g}),u({type:"success",text:"Profile updated successfully"})}catch(g){u({type:"error",text:((v=(m=g.response)==null?void 0:m.data)==null?void 0:v.message)||"Error updating profile"})}finally{o(!1)}},y=async p=>{var m,v;if(p.preventDefault(),r.newPassword!==r.confirmPassword){u({type:"error",text:"New passwords do not match"});return}if(r.newPassword.length<6){u({type:"error",text:"Password must be at least 6 characters"});return}o(!0),u({type:"",text:""});try{await z.put("/api/admin/manage/change-password",{currentPassword:r.currentPassword,newPassword:r.newPassword},{headers:{Authorization:`Bearer ${t.token}`}}),l({currentPassword:"",newPassword:"",confirmPassword:""}),u({type:"success",text:"Password changed successfully"})}catch(g){u({type:"error",text:((v=(m=g.response)==null?void 0:m.data)==null?void 0:v.message)||"Error changing password"})}finally{o(!1)}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Profile & Password"}),c.text&&i.jsx("div",{className:`mb-6 p-4 rounded ${c.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:c.text}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Update Profile"}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:s.name,onChange:p=>n({...s,name:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:s.email,onChange:p=>n({...s,email:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),i.jsx("input",{type:"text",value:s.phone,onChange:p=>n({...s,phone:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2"})]}),i.jsx("button",{type:"submit",disabled:a,className:"w-full bg-green-600 hover:bg-green-700 py-2 rounded",children:a?"Saving...":"Update Profile"})]})]}),i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Change Password"}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:d?"text":"password",value:r.currentPassword,onChange:p=>l({...r,currentPassword:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10",required:!0}),i.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:d?i.jsx(Un,{size:18}):i.jsx(Zs,{size:18})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),i.jsx("input",{type:d?"text":"password",value:r.newPassword,onChange:p=>l({...r,newPassword:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm New Password"}),i.jsx("input",{type:d?"text":"password",value:r.confirmPassword,onChange:p=>l({...r,confirmPassword:p.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:a,className:"w-full bg-yellow-600 hover:bg-yellow-700 py-2 rounded",children:a?"Changing...":"Change Password"})]})]})]}),i.jsxs("div",{className:"mt-6 bg-dark-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Information"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Role"}),i.jsx("div",{className:(t==null?void 0:t.role)==="SUPER_ADMIN"?"text-yellow-400 font-bold":"text-purple-400 font-bold",children:t==null?void 0:t.role})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Username"}),i.jsx("div",{children:t==null?void 0:t.username})]}),(t==null?void 0:t.adminCode)&&i.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Admin Code"}),i.jsx("div",{className:"font-mono text-purple-400",children:t==null?void 0:t.adminCode})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded",children:[i.jsx("div",{className:"text-gray-400",children:"Status"}),i.jsx("div",{className:"text-green-400",children:(t==null?void 0:t.status)||"ACTIVE"})]})]})]})]})},fw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState([]),[l,a]=b.useState(!0),[o,c]=b.useState(""),[u,d]=b.useState(null),[h,f]=b.useState(!1),[y,p]=b.useState(""),[m,v]=b.useState(!1);b.useEffect(()=>{g(),x()},[]);const g=async()=>{try{const{data:k}=await z.get("/api/admin/manage/all-users",{headers:{Authorization:`Bearer ${t.token}`}});s(k)}catch(k){console.error("Error fetching users:",k)}finally{a(!1)}},x=async()=>{try{const{data:k}=await z.get("/api/admin/manage/admins",{headers:{Authorization:`Bearer ${t.token}`}});r(k)}catch(k){console.error("Error fetching admins:",k)}},N=async()=>{var k,C;if(!(!u||!y)){v(!0);try{await z.post(`/api/admin/manage/users/${u._id}/transfer`,{targetAdminId:y},{headers:{Authorization:`Bearer ${t.token}`}}),alert("User transferred successfully!"),f(!1),d(null),p(""),g()}catch(w){alert(((C=(k=w.response)==null?void 0:k.data)==null?void 0:C.message)||"Error transferring user")}finally{v(!1)}}},j=e.filter(k=>{var C,w,S,T;return((C=k.username)==null?void 0:C.toLowerCase().includes(o.toLowerCase()))||((w=k.email)==null?void 0:w.toLowerCase().includes(o.toLowerCase()))||((S=k.fullName)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((T=k.adminCode)==null?void 0:T.toLowerCase().includes(o.toLowerCase()))});return l?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(he,{className:"animate-spin",size:32})}):i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"All Users"}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Total: ",e.length," users"]})]}),i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"text",placeholder:"Search by username, email, name, or admin code...",value:o,onChange:k=>c(k.target.value),className:"w-full md:w-96 bg-dark-700 border border-dark-600 rounded-lg px-4 py-2 text-white"})}),i.jsx("div",{className:"bg-dark-800 rounded-lg overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Admin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Wallet"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Status"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Joined"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-dark-700",children:j.map(k=>{var C,w;return i.jsxs("tr",{className:"hover:bg-dark-700/50",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:k.fullName||k.username}),i.jsx("div",{className:"text-sm text-gray-400",children:k.email})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium",children:((C=k.admin)==null?void 0:C.name)||"N/A"}),i.jsx("div",{className:"text-gray-400",children:k.adminCode})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("span",{className:"text-green-400",children:["",(((w=k.wallet)==null?void 0:w.balance)||0).toLocaleString()]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:k.isActive?"Active":"Inactive"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:new Date(k.createdAt).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{onClick:()=>{d(k),f(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Transfer"})})]},k._id)})})]})})}),h&&u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 w-full max-w-md mx-4",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Transfer User"}),i.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"User"}),i.jsx("div",{className:"font-medium",children:u.fullName||u.username}),i.jsx("div",{className:"text-sm text-gray-400",children:u.email}),i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["Current Admin: ",u.adminCode]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Transfer to Admin"}),i.jsxs("select",{value:y,onChange:k=>p(k.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-2 text-white",children:[i.jsx("option",{value:"",children:"Select Admin"}),n.filter(k=>k.adminCode!==u.adminCode).map(k=>{var C;return i.jsxs("option",{value:k._id,children:[k.name," (",k.adminCode,") - ",((C=k.stats)==null?void 0:C.totalUsers)||0," users"]},k._id)}),i.jsxs("option",{value:t._id,children:["Super Admin (",t.adminCode,")"]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{f(!1),d(null),p("")},className:"flex-1 bg-dark-600 hover:bg-dark-500 text-white py-2 rounded-lg",children:"Cancel"}),i.jsx("button",{onClick:N,disabled:!y||m,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white py-2 rounded-lg",children:m?"Transferring...":"Transfer"})]})]})})]})},pw=()=>{const{admin:t}=fe(),[e,s]=b.useState([]),[n,r]=b.useState(!0),[l,a]=b.useState(""),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[h,f]=b.useState(!1),[y,p]=b.useState(!1),[m,v]=b.useState(null),g=async()=>{try{const{data:j}=await z.get("/api/admin/users",{headers:{Authorization:`Bearer ${t.token}`}});s(j)}catch(j){console.error("Error fetching users:",j)}finally{r(!1)}};b.useEffect(()=>{g()},[]);const x=e.filter(j=>{var k;return j.username.toLowerCase().includes(l.toLowerCase())||j.email.toLowerCase().includes(l.toLowerCase())||((k=j.fullName)==null?void 0:k.toLowerCase().includes(l.toLowerCase()))}),N=async j=>{var k,C;if(confirm("Are you sure you want to delete this user?"))try{await z.delete(`/api/admin/users/${j}`,{headers:{Authorization:`Bearer ${t.token}`}}),g()}catch(w){alert(((C=(k=w.response)==null?void 0:k.data)==null?void 0:C.message)||"Error deleting user")}};return i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[i.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"User Management"}),i.jsxs("button",{onClick:()=>c(!0),className:"flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition",children:[i.jsx(Kt,{size:20}),i.jsx("span",{children:"Create User"})]})]}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:j=>a(j.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:border-purple-500"})]}),i.jsx("div",{className:"md:hidden space-y-4",children:n?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(he,{className:"animate-spin inline mr-2",size:20}),"Loading..."]}):x.length===0?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"No users found"}):x.map(j=>{var k,C;return i.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:j.fullName||j.username}),i.jsxs("div",{className:"text-sm text-gray-400",children:["@",j.username]})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:j.isActive?"Active":"Inactive"})]}),i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:j.email}),i.jsx("div",{className:"text-sm text-gray-400 mb-3",children:j.phone||"No phone"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-green-400 font-bold",children:["",((C=(k=j.wallet)==null?void 0:k.balance)==null?void 0:C.toLocaleString())||"0"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{v(j),d(!0)},className:"p-2 bg-dark-700 rounded text-blue-400",children:i.jsx(vc,{size:16})}),i.jsx("button",{onClick:()=>{v(j),f(!0)},className:"p-2 bg-dark-700 rounded text-yellow-400",children:i.jsx(yc,{size:16})}),i.jsx("button",{onClick:()=>{v(j),p(!0)},className:"p-2 bg-dark-700 rounded text-green-400",children:i.jsx(Ut,{size:16})}),i.jsx("button",{onClick:()=>N(j._id),className:"p-2 bg-dark-700 rounded text-red-400",children:i.jsx(Pl,{size:16})})]})]})]},j._id)})}),i.jsx("div",{className:"hidden md:block bg-dark-800 rounded-lg overflow-hidden overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-dark-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"User"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"Email"}),i.jsx("th",{className:"text-left px-4 py-3 text-gray-400 font-medium",children:"Phone"}),i.jsx("th",{className:"text-right px-4 py-3 text-gray-400 font-medium",children:"Balance"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400 font-medium",children:"Status"}),i.jsx("th",{className:"text-center px-4 py-3 text-gray-400 font-medium",children:"Actions"})]})}),i.jsx("tbody",{children:n?i.jsx("tr",{children:i.jsxs("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:[i.jsx(he,{className:"animate-spin inline mr-2",size:20}),"Loading..."]})}):x.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"No users found"})}):x.map(j=>{var k,C;return i.jsxs("tr",{className:"border-t border-dark-600 hover:bg-dark-700",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:j.fullName||j.username}),i.jsxs("div",{className:"text-sm text-gray-400",children:["@",j.username]})]})}),i.jsx("td",{className:"px-4 py-3 text-gray-300",children:j.email}),i.jsx("td",{className:"px-4 py-3 text-gray-300",children:j.phone||"-"}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("span",{className:"text-green-400 font-medium",children:["",((C=(k=j.wallet)==null?void 0:k.balance)==null?void 0:C.toLocaleString())||"0"]})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:j.isActive?"Active":"Inactive"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>{v(j),d(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-blue-400",title:"Edit User",children:i.jsx(vc,{size:16})}),i.jsx("button",{onClick:()=>{v(j),f(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-yellow-400",title:"Change Password",children:i.jsx(yc,{size:16})}),i.jsx("button",{onClick:()=>{v(j),p(!0)},className:"p-2 hover:bg-dark-600 rounded transition text-green-400",title:"Manage Wallet",children:i.jsx(Ut,{size:16})}),i.jsx("button",{onClick:()=>N(j._id),className:"p-2 hover:bg-dark-600 rounded transition text-red-400",title:"Delete User",children:i.jsx(Pl,{size:16})})]})})]},j._id)})})]})}),o&&i.jsx(mw,{onClose:()=>c(!1),onSuccess:()=>{c(!1),g()},token:t.token}),u&&m&&i.jsx(xw,{user:m,onClose:()=>{d(!1),v(null)},onSuccess:()=>{d(!1),v(null),g()},token:t.token}),h&&m&&i.jsx(gw,{user:m,onClose:()=>{f(!1),v(null)},token:t.token}),y&&m&&i.jsx(yw,{user:m,onClose:()=>{p(!1),v(null)},onSuccess:()=>{g()},token:t.token})]})},mw=({onClose:t,onSuccess:e,token:s})=>{const[n,r]=b.useState({username:"",email:"",password:"",fullName:"",phone:""}),[l,a]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(""),h=async f=>{var y,p;f.preventDefault(),c(!0),d("");try{await z.post("/api/admin/users",n,{headers:{Authorization:`Bearer ${s}`}}),e()}catch(m){d(((p=(y=m.response)==null?void 0:y.data)==null?void 0:p.message)||"Error creating user")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Create New User"}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),u&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:u}),i.jsxs("form",{onSubmit:h,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Username *"}),i.jsx("input",{type:"text",value:n.username,onChange:f=>r({...n,username:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email *"}),i.jsx("input",{type:"email",value:n.email,onChange:f=>r({...n,email:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:l?"text":"password",value:n.password,onChange:f=>r({...n,password:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10 focus:outline-none focus:border-green-500",required:!0}),i.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?i.jsx(Un,{size:18}):i.jsx(Zs,{size:18})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",value:n.fullName,onChange:f=>r({...n,fullName:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),i.jsx("input",{type:"text",value:n.phone,onChange:f=>r({...n,phone:f.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:o?"Creating...":"Create User"})]})]})]})})},xw=({user:t,onClose:e,onSuccess:s,token:n})=>{const[r,l]=b.useState({username:t.username,email:t.email,fullName:t.fullName||"",phone:t.phone||"",isActive:t.isActive}),[a,o]=b.useState(!1),[c,u]=b.useState(""),d=async h=>{var f,y;h.preventDefault(),o(!0),u("");try{await z.put(`/api/admin/users/${t._id}`,r,{headers:{Authorization:`Bearer ${n}`}}),s()}catch(p){u(((y=(f=p.response)==null?void 0:f.data)==null?void 0:y.message)||"Error updating user")}finally{o(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Edit User"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),c&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:c}),i.jsxs("form",{onSubmit:d,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Username"}),i.jsx("input",{type:"text",value:r.username,onChange:h=>l({...r,username:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:r.email,onChange:h=>l({...r,email:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",value:r.fullName,onChange:h=>l({...r,fullName:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Phone"}),i.jsx("input",{type:"text",value:r.phone,onChange:h=>l({...r,phone:h.target.value}),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"isActive",checked:r.isActive,onChange:h=>l({...r,isActive:h.target.checked}),className:"w-4 h-4"}),i.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-400",children:"Active Account"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})]})})},gw=({user:t,onClose:e,token:s})=>{const[n,r]=b.useState(""),[l,a]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(""),[h,f]=b.useState(!1),y=async p=>{var m,v;p.preventDefault(),c(!0),d("");try{await z.put(`/api/admin/users/${t._id}/password`,{newPassword:n},{headers:{Authorization:`Bearer ${s}`}}),f(!0),setTimeout(e,1500)}catch(g){d(((v=(m=g.response)==null?void 0:m.data)==null?void 0:v.message)||"Error changing password")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-md p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Change Password"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),i.jsxs("p",{className:"text-gray-400 mb-4",children:["Changing password for: ",i.jsx("span",{className:"text-white",children:t.username})]}),u&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:u}),h&&i.jsx("div",{className:"bg-green-500/20 border border-green-500 text-green-400 px-4 py-2 rounded mb-4",children:"Password changed successfully!"}),i.jsxs("form",{onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:l?"text":"password",value:n,onChange:p=>r(p.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 pr-10 focus:outline-none focus:border-green-500",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>a(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:l?i.jsx(Un,{size:18}):i.jsx(Zs,{size:18})})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:o||h,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 py-2 rounded transition disabled:opacity-50",children:o?"Changing...":"Change Password"})]})]})]})})},yw=({user:t,onClose:e,onSuccess:s,token:n})=>{var j,k,C,w,S,T;const{admin:r,updateAdmin:l}=fe(),[a,o]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(!1),[f,y]=b.useState(""),[p,m]=b.useState(null),[v,g]=b.useState(((j=r==null?void 0:r.wallet)==null?void 0:j.balance)||0);b.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:L}=await z.get(`/api/admin/manage/users/${t._id}`,{headers:{Authorization:`Bearer ${n}`}});m(L)}catch(L){console.error("Error fetching wallet:",L)}},N=async L=>{var $,M;if(!a||Number(a)<=0){y("Please enter a valid amount");return}h(!0),y("");try{const E=L==="deposit"?`/api/admin/manage/users/${t._id}/add-funds`:`/api/admin/manage/users/${t._id}/deduct-funds`,{data:P}=await z.post(E,{amount:Number(a),description:c},{headers:{Authorization:`Bearer ${n}`}});o(""),u(""),x(),s(),P.adminWallet&&(g(P.adminWallet.balance),l({wallet:P.adminWallet}))}catch(E){y(((M=($=E.response)==null?void 0:$.data)==null?void 0:M.message)||`Error ${L}ing funds`)}finally{h(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 rounded-lg w-full max-w-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Manage Wallet"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:24})})]}),(r==null?void 0:r.role)==="ADMIN"&&i.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-3 mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-purple-400",children:"Your Wallet Balance"}),i.jsxs("span",{className:"text-lg font-bold text-purple-400",children:["",v.toLocaleString()]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Funds will be deducted from your wallet when depositing to user"})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 mb-4",children:[i.jsxs("p",{className:"text-gray-400 text-sm",children:["User: ",t.fullName||t.username]}),i.jsxs("p",{className:"text-2xl font-bold text-green-400 mt-1",children:["",(((k=p==null?void 0:p.wallet)==null?void 0:k.cashBalance)||((C=p==null?void 0:p.wallet)==null?void 0:C.balance)||0).toLocaleString()]}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Cash Balance: ",(((w=p==null?void 0:p.wallet)==null?void 0:w.cashBalance)||0).toLocaleString()]})]}),f&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-2 rounded mb-4",children:f}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Amount ()"}),i.jsx("input",{type:"number",value:a,onChange:L=>o(L.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Enter amount",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Description (Optional)"}),i.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500",placeholder:"Transaction note"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsxs("button",{onClick:()=>N("deposit"),disabled:d,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 py-2 rounded transition disabled:opacity-50",children:[i.jsx(Ll,{size:18}),"Deposit"]}),i.jsxs("button",{onClick:()=>N("withdraw"),disabled:d,className:"flex-1 flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 py-2 rounded transition disabled:opacity-50",children:[i.jsx(Ml,{size:18}),"Withdraw"]})]}),((T=(S=p==null?void 0:p.wallet)==null?void 0:S.transactions)==null?void 0:T.length)>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Recent Transactions"}),i.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:p.wallet.transactions.slice(-5).reverse().map((L,$)=>i.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded px-3 py-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:L.type==="deposit"||L.type==="credit"?"text-green-400":"text-red-400",children:L.type.toUpperCase()}),i.jsx("span",{className:"text-gray-400 ml-2",children:L.description})]}),i.jsxs("span",{className:L.type==="deposit"||L.type==="credit"?"text-green-400":"text-red-400",children:[L.type==="deposit"||L.type==="credit"?"+":"-","",L.amount]})]},$))})]}),i.jsx("button",{onClick:e,className:"w-full mt-4 bg-dark-600 hover:bg-dark-500 py-2 rounded transition",children:"Close"})]})})},vw=()=>{const[t]=ob(),e=t.get("ref")||"",[s,n]=b.useState(t.get("register")==="true"||!!e),[r,l]=b.useState({username:"",email:"",password:"",fullName:"",phone:"",adminCode:"",referralCode:e}),[a,o]=b.useState(!1),[c,u]=b.useState(""),[d,h]=b.useState(!1),{loginUser:f,registerUser:y}=fe(),p=Gs(),m=async g=>{var x,N;g.preventDefault(),u(""),h(!0);try{s?await y(r):await f(r.email,r.password),p("/dashboard")}catch(j){u(((N=(x=j.response)==null?void 0:x.data)==null?void 0:N.message)||"Something went wrong")}finally{h(!1)}},v=()=>{n(!s),u(""),l({username:"",email:"",password:"",fullName:"",phone:"",adminCode:"",referralCode:e})};return i.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[i.jsxs("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900/20 to-dark-900"}),i.jsxs("div",{className:"w-full max-w-md relative z-10",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-green-600 rounded-xl",children:i.jsx(ct,{className:"w-8 h-8 text-white"})}),i.jsx("span",{className:"text-3xl font-bold text-white",children:"NTrader"})]}),i.jsx("p",{className:"text-gray-400",children:"Welcome back, trader!"})]}),i.jsxs("div",{className:"bg-dark-800/90 backdrop-blur-xl p-8 rounded-2xl border border-green-500/20 shadow-2xl",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:s?"Create Account":"Sign In"}),i.jsx("p",{className:"text-gray-400 mt-2",children:s?"Start your trading journey":"Access your trading dashboard"})]}),c&&i.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6",children:c}),i.jsxs("form",{onSubmit:m,children:[s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",value:r.fullName,onChange:g=>l({...r,fullName:g.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"John Doe",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Username"}),i.jsx("input",{type:"text",value:r.username,onChange:g=>l({...r,username:g.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"johndoe",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",value:r.phone,onChange:g=>l({...r,phone:g.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"+91 9876543210"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Email Address"}),i.jsx("input",{type:"email",value:r.email,onChange:g=>l({...r,email:g.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500 transition",placeholder:"trader@example.com",required:!0})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:a?"text":"password",value:r.password,onChange:g=>l({...r,password:g.target.value}),className:"w-full bg-dark-700 border border-green-500/30 rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-green-500 transition",placeholder:s?"Create password":"Enter password",required:!0,minLength:s?6:void 0}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:a?i.jsx(Un,{size:20}):i.jsx(Zs,{size:20})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 py-3 rounded-lg font-semibold transition disabled:opacity-50 shadow-lg shadow-green-500/25",children:d?"Please wait...":s?"Create Account":"Start Trading"}),i.jsx("button",{type:"button",onClick:v,className:"w-full mt-4 text-sm text-green-400 hover:text-green-300 transition",children:s?"Already have an account? Sign In":"Don't have an account? Create one"})]})]})]})]}),i.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center items-center p-12 relative overflow-hidden bg-gradient-to-br from-dark-800 to-dark-900",children:[i.jsx("div",{className:"absolute top-10 right-10 w-96 h-96 bg-green-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-10 left-10 w-72 h-72 bg-emerald-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute inset-0 opacity-10",children:i.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 600",children:[i.jsx("path",{d:"M0,300 Q100,250 200,280 T400,260 T600,300 T800,250",fill:"none",stroke:"#22c55e",strokeWidth:"2"}),i.jsx("path",{d:"M0,350 Q150,300 300,330 T500,310 T700,350 T800,300",fill:"none",stroke:"#10b981",strokeWidth:"2"})]})}),i.jsxs("div",{className:"relative z-10 text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:i.jsx(I0,{className:"w-16 h-16 text-green-500"})}),i.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Trade Smarter"}),i.jsx("p",{className:"text-xl text-gray-400 mb-12",children:"NSE  BSE  MCX  F&O"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 max-w-md",children:[i.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[i.jsx(B0,{className:"w-8 h-8 text-green-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Live Charts"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Real-time TradingView charts"})]}),i.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[i.jsx(U0,{className:"w-8 h-8 text-yellow-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Fast Execution"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Lightning fast orders"})]}),i.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[i.jsx(Au,{className:"w-8 h-8 text-blue-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"All Segments"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Equity, F&O, Commodities"})]}),i.jsxs("div",{className:"bg-dark-700/50 backdrop-blur-sm rounded-xl p-6 text-left border border-green-500/10",children:[i.jsx(Ut,{className:"w-8 h-8 text-purple-400 mb-3"}),i.jsx("h3",{className:"font-semibold text-white mb-1",children:"Secure Wallet"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Safe fund management"})]})]}),i.jsxs("div",{className:"mt-12 flex items-center justify-center gap-8 text-sm",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-500",children:"NIFTY 50"}),i.jsx("div",{className:"text-green-400 font-mono",children:"--"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-500",children:"BANKNIFTY"}),i.jsx("div",{className:"text-green-400 font-mono",children:"--"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-500",children:"SENSEX"}),i.jsx("div",{className:"text-red-400 font-mono",children:"--"})]})]})]})]})]})};function le(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function Is(t,e){return t.width===e.width&&t.height===e.height}var bw=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(r){return r!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Nw(t){return new bw(t)}var ww=function(){function t(e,s,n){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=le({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(l){return l},this._allowResizeObserver=(r=n==null?void 0:n.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return le({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=le(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;Is(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=le(this._transformBitmapSize(e,this._canvasElementClientSize)),r=Is(this.bitmapSize,n)?null:n;s===null&&r===null||s!==null&&r!==null&&Is(s,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(s,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}kw().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=Fh(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Nw(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=Fh(this._canvasElement);if(n!==null){var r=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,l=this._canvasElement.getClientRects(),a=l[0]!==void 0?Sw(l[0],r):le({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(a){return a.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var r=n.devicePixelContentBoxSize[0],l=le({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function jw(t,e){return new ww(t,e.transform,e.options)}function Fh(t){return t.ownerDocument.defaultView}function kw(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Sw(t,e){return le({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Cw=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Hs(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new Cw(r,s,n)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Ew={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},_w={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Tw={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Mw={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Lw={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Pw={color:"#26a69a",base:0},V0={color:"#2196f3"},W0={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Dh,Uh;function qs(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function H0(t,e,s,n){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(s,e+r),t.lineTo(n,e+r),t.stroke()}function bs(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Fe(t){if(t===void 0)throw new Error("Value is undefined");return t}function A(t){if(t===null)throw new Error("Value is null");return t}function xn(t){return A(Fe(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Dh||(Dh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Uh||(Uh={}));const Vh={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function rt(t){return t<0?0:t>255?255:Math.round(t)||0}function q0(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const zw=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Rw=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Aw=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Ow=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function qr(t){(t=t.toLowerCase())in Vh&&(t=Vh[t]);{const e=Ow.exec(t)||Aw.exec(t);if(e)return[rt(parseInt(e[1],10)),rt(parseInt(e[2],10)),rt(parseInt(e[3],10)),q0(e.length<5?1:parseFloat(e[4]))]}{const e=Rw.exec(t);if(e)return[rt(parseInt(e[1],16)),rt(parseInt(e[2],16)),rt(parseInt(e[3],16)),1]}{const e=zw.exec(t);if(e)return[rt(17*parseInt(e[1],16)),rt(17*parseInt(e[2],16)),rt(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function K0(t){return .199*t[0]+.687*t[1]+.114*t[2]}function ia(t){const e=qr(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:K0(e)>160?"black":"white"}}class ve{constructor(){this.h=[]}l(e,s,n){const r={o:e,_:s,u:n===!0};this.h.push(r)}v(e){const s=this.h.findIndex(n=>e===n.o);s>-1&&this.h.splice(s,1)}p(e){this.h=this.h.filter(s=>s._!==e)}m(e,s,n){const r=[...this.h];this.h=this.h.filter(l=>!l.u),r.forEach(l=>l.o(e,s,n))}M(){return this.h.length>0}S(){this.h=[]}}function wt(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:wt(t[n],s[n]));return t}function Mt(t){return typeof t=="number"&&isFinite(t)}function Kr(t){return typeof t=="number"&&t%1==0}function li(t){return typeof t=="string"}function Ci(t){return typeof t=="boolean"}function Bt(t){const e=t;if(!e||typeof e!="object")return e;let s,n,r;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(r=e[n],s[n]=r&&typeof r=="object"?Bt(r):r);return s}function Iw(t){return t!==null}function Yr(t){return t===null?void 0:t}const Ou="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function zn(t,e,s){return e===void 0&&(e=Ou),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class $w{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,s=this.j(),n=this.H();return e.P===s&&e.D===n||(e.P=s,e.D=n,e.R=zn(s,n),e.L=2.5/12*s,e.B=e.L,e.A=s/12*e.T,e.I=s/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Iu{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,s,n){this.Y.forEach(r=>{r.X(e,s,n)})}}class kt{X(e,s,n){e.useBitmapCoordinateSpace(r=>this.K(r,s,n))}}class Bw extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const r=this.G.tt,l=this.G,a=Math.max(1,Math.floor(s))%2/2,o=c=>{e.beginPath();for(let u=r.to-1;u>=r.from;--u){const d=l.it[u],h=Math.round(d.nt*s)+a,f=d.st*n,y=c*n+a;e.moveTo(h,f),e.arc(h,f,y,0,2*Math.PI)}e.fill()};l.et>0&&(e.fillStyle=l.rt,o(l.ht+l.et)),e.fillStyle=l.lt,o(l.ht)}}function Fw(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Dw={from:0,to:1};class Uw{constructor(e,s){this.ut=new Iu,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=s,this.ut.Z(this.ct)}bt(e){const s=this.F.wt();s.length!==this.ct.length&&(this.dt=s.map(Fw),this.ct=this.dt.map(n=>{const r=new Bw;return r.J(n),r}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,s=this.F.wt(),n=this.vt.xt(),r=this.F.St();s.forEach((l,a)=>{var o;const c=this.dt[a],u=l.kt(n);if(e||u===null||!l.yt())return void(c.tt=null);const d=A(l.Ct());c.lt=u.Tt,c.ht=u.ht,c.et=u.Pt,c.it[0]._t=u._t,c.it[0].st=l.Dt().Rt(u._t,d.Vt),c.rt=(o=u.Ot)!==null&&o!==void 0?o:this.F.Bt(c.it[0].st/l.Dt().At()),c.it[0].ot=n,c.it[0].nt=r.It(n),c.tt=Dw})}}class Vw extends kt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null)return;const l=this.zt.Lt.yt,a=this.zt.Et.yt;if(!l&&!a)return;const o=Math.round(this.zt.nt*n),c=Math.round(this.zt.st*r);e.lineCap="butt",l&&o>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,qs(e,this.zt.Lt.Nt),function(u,d,h,f){u.beginPath();const y=u.lineWidth%2?.5:0;u.moveTo(d+y,h),u.lineTo(d+y,f),u.stroke()}(e,o,0,s.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*r),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,qs(e,this.zt.Et.Nt),H0(e,c,0,s.width))}}class Ww{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new Vw(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),s=A(this.jt.Ht()),n=s.$t().W().crosshair,r=this.Ft;if(n.mode===2)return r.Et.yt=!1,void(r.Lt.yt=!1);r.Et.yt=e&&this.jt.Ut(s),r.Lt.yt=e&&this.jt.qt(),r.Et.et=n.horzLine.width,r.Et.Nt=n.horzLine.style,r.Et.V=n.horzLine.color,r.Lt.et=n.vertLine.width,r.Lt.Nt=n.vertLine.style,r.Lt.V=n.vertLine.color,r.nt=this.jt.Yt(),r.st=this.jt.Zt()}}function Hw(t,e,s,n,r,l){t.fillRect(e+l,s,n-2*l,l),t.fillRect(e+l,s+r-l,n-2*l,l),t.fillRect(e,s,l,r),t.fillRect(e+n-l,s,l,r)}function la(t,e,s,n,r,l){t.save(),t.globalCompositeOperation="copy",t.fillStyle=l,t.fillRect(e,s,n,r),t.restore()}function Wh(t,e,s,n,r,l){t.beginPath(),t.roundRect?t.roundRect(e,s,n,r,l):(t.lineTo(e+n-l[1],s),l[1]!==0&&t.arcTo(e+n,s,e+n,s+l[1],l[1]),t.lineTo(e+n,s+r-l[2]),l[2]!==0&&t.arcTo(e+n,s+r,e+n-l[2],s+r,l[2]),t.lineTo(e+l[3],s+r),l[3]!==0&&t.arcTo(e,s+r,e,s+r-l[3],l[3]),t.lineTo(e,s+l[0]),l[0]!==0&&t.arcTo(e,s,e+l[0],s,l[0]))}function Hh(t,e,s,n,r,l,a=0,o=[0,0,0,0],c=""){if(t.save(),!a||!c||c===l)return Wh(t,e,s,n,r,o),t.fillStyle=l,t.fill(),void t.restore();const u=a/2;var d;Wh(t,e+u,s+u,n-a,r-a,(d=-u,o.map(h=>h===0?h:h+d))),l!=="transparent"&&(t.fillStyle=l,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function Y0(t,e,s,n,r,l,a){t.save(),t.globalCompositeOperation="copy";const o=t.createLinearGradient(0,0,0,r);o.addColorStop(0,l),o.addColorStop(1,a),t.fillStyle=o,t.fillRect(e,s,n,r),t.restore()}class qh{constructor(e,s){this.J(e,s)}J(e,s){this.zt=e,this.Xt=s}At(e,s){return this.zt.yt?e.P+e.L+e.B:0}X(e,s,n,r){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,a=this.Xt.t,o=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.R;const d=this.Gt(c,s,n,r),h=d.Jt;return d.Qt?Hh(u,h.ti,h.ii,h.ni,h.si,a,h.ei,[h.ht,0,0,h.ht],a):Hh(u,h.ri,h.ii,h.ni,h.si,a,h.ei,[0,h.ht,h.ht,0],a),this.zt.hi&&(u.fillStyle=l,u.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(u.fillStyle=s.O,u.fillRect(d.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),d});e.useMediaCoordinateSpace(({context:c})=>{const u=o.di;c.font=s.R,c.textAlign=o.Qt?"right":"left",c.textBaseline="middle",c.fillStyle=l,c.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,s,n,r){var l;const{context:a,bitmapSize:o,mediaSize:c,horizontalPixelRatio:u,verticalPixelRatio:d}=e,h=this.zt.hi||!this.zt.mi?s.T:0,f=this.zt.bi?s.C:0,y=s.L+this.Xt.wi,p=s.B+this.Xt.gi,m=s.A,v=s.I,g=this.zt.Kt,x=s.P,N=n.Mi(a,g),j=Math.ceil(n.xi(a,g)),k=x+y+p,C=s.C+m+v+j+h,w=Math.max(1,Math.floor(d));let S=Math.round(k*d);S%2!=w%2&&(S+=1);const T=f>0?Math.max(1,Math.floor(f*u)):0,L=Math.round(C*u),$=Math.round(h*u),M=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,E=Math.round(M*d)-Math.floor(.5*d),P=Math.floor(E+w/2-S/2),F=P+S,W=r==="right",be=W?c.width-f:f,I=W?o.width-T:T;let U,V,K;return W?(U=I-L,V=I-$,K=be-h-m-f):(U=I+L,V=I+$,K=be+h+m),{Qt:W,Jt:{ii:P,li:E,ci:F,ni:L,si:S,ht:2*u,ei:T,ti:U,ri:I,ai:V,oi:w,ui:o.width},di:{ii:P/d,ci:F/d,fi:K,pi:N}}}}class aa{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||qh)(this.Ci,this.yi),this.Ri=new(e||qh)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,s=!1){return Math.max(this.Pi.At(e,s),this.Ri.At(e,s))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class qw extends aa{constructor(e,s,n){super(),this.jt=e,this.Li=s,this.Ei=n}zi(e,s,n){if(e.yt=!1,this.jt.W().mode===2)return;const r=this.jt.W().horzLine;if(!r.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const a=ia(r.labelBackgroundColor);n.t=a.t,e.V=a.i;const o=2/12*this.Li.P();n.wi=o,n.gi=o;const c=this.Ei(this.Li);n.ki=c.ki,e.Kt=this.Li.Fi(c._t,l),e.yt=!0}}const Kw=/[1-9]/g;class X0{constructor(){this.zt=null}J(e){this.zt=e}X(e,s){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=s.R,Math.round(s.Wi.xi(f,A(this.zt).Kt,Kw))));if(n<=0)return;const r=s.ji,l=n+2*r,a=l/2,o=this.zt.Hi;let c=this.zt.ki,u=Math.floor(c-a)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-a)+.5):u+l>o&&(c-=Math.abs(o-(u+l)),u=Math.floor(c-a)+.5);const d=u+l,h=Math.ceil(0+s.C+s.T+s.L+s.P+s.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:y,verticalPixelRatio:p})=>{const m=A(this.zt);f.fillStyle=m.t;const v=Math.round(u*y),g=Math.round(0*p),x=Math.round(d*y),N=Math.round(h*p),j=Math.round(2*y);if(f.beginPath(),f.moveTo(v,g),f.lineTo(v,N-j),f.arcTo(v,N,v+j,N,j),f.lineTo(x-j,N),f.arcTo(x,N,x,N-j,j),f.lineTo(x,g),f.fill(),m.hi){const k=Math.round(m.ki*y),C=g,w=Math.round((C+s.T)*p);f.fillStyle=m.V;const S=Math.max(1,Math.floor(y)),T=Math.floor(.5*y);f.fillRect(k-T,C,S,w-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const y=A(this.zt),p=0+s.C+s.T+s.L+s.P/2;f.font=s.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=y.V;const m=s.Wi.Mi(f,"Apr0");f.translate(u+r,p+m),f.fillText(y.Kt,0,0)})}}class Yw{constructor(e,s,n){this.ft=!0,this.Wt=new X0,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=s,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const s=this.vt.W().vertLine;if(!s.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const r=this.Ei();if(r===null)return;e.ki=r.ki;const l=n.Ui(this.vt.xt());e.Kt=n.qi(A(l)),e.yt=!0;const a=ia(s.labelBackgroundColor);e.t=a.t,e.V=a.i,e.hi=n.W().ticksVisible}}class $u{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Kh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Kh||(Kh={}));class Xw extends $u{constructor(e,s){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=s,this.dn=new Uw(e,this),this.fn=((r,l)=>a=>{const o=l(),c=r();if(a===A(this.tn).vn())return{_t:c,ki:o};{const u=A(a.Ct());return{_t:a.pn(o,u),ki:o}}})(()=>this.nn,()=>this.an);const n=((r,l)=>()=>{const a=this.$i.St().mn(r()),o=l();return a&&Number.isFinite(o)?{ot:a,ki:o}:null})(()=>this.sn,()=>this.Yt());this.bn=new Yw(this,e,n),this.wn=new Ww(this)}W(){return this.cn}gn(e,s){this._n=e,this.un=s}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,s,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,s,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,s){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,s,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,s,n){this.Bn(e,s,n)&&this.Vn()}Bn(e,s,n){const r=this.ln,l=this.an,a=this.nn,o=this.sn,c=this.tn,u=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const d=u!==null?u.Ct():null;return u!==null&&d!==null?(this.nn=s,this.an=u.Rt(s,d)):(this.nn=NaN,this.an=NaN),r!==this.ln||l!==this.an||o!==this.sn||a!==this.nn||c!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(Iw),s=e.length===0?null:Math.max(...e);this.sn=s!==null?s:NaN}Dn(e,s,n){let r=e.get(s);return r===void 0&&(r=new qw(this,s,n),e.set(s,r)),r}}function oa(t){return t==="left"||t==="right"}class Te{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,s){const n=function(r,l){return r===void 0?l:{Fn:Math.max(r.Fn,l.Fn),Wn:r.Wn||l.Wn}}(this.zn.get(e),s);this.zn.set(e,n)}jn(){return this.En}Hn(e){const s=this.zn.get(e);return s===void 0?{Fn:this.En}:{Fn:Math.max(this.En,s.Fn),Wn:s.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const s of e.Ln)this.ns(s);this.En=Math.max(this.En,e.En),e.zn.forEach((s,n)=>{this.Nn(n,s)})}static ss(){return new Te(2)}static es(){return new Te(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(s=>s.qn===5);e!==-1&&this.Ln.splice(e,1)}}const Yh=".";function Ft(t,e){if(!Mt(t))return"n/a";if(!Kr(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class ca{constructor(e,s){if(s||(s=1),Mt(e)&&Kr(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=s,this.hs()}format(e){const s=e<0?"":"";return e=Math.abs(e),s+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const s=this.Li/this.rs;let n=Math.floor(e),r="";const l=this._s!==void 0?this._s:NaN;if(s>1){let a=+(Math.round(e*s)-n*s).toFixed(this._s);a>=s&&(a-=s,n+=1),r=Yh+Ft(+a.toFixed(this._s)*this.rs,l)}else n=Math.round(n*s)/s,l>0&&(r=Yh+Ft(0,l));return n.toFixed(0)+r}}class Q0 extends ca{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Qw{constructor(e){this.us=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.cs(e):e<999995?s+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.cs(e/1e9)+"B")}cs(e){let s;const n=Math.pow(10,this.us);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(r,l)=>l)}}function J0(t,e,s,n,r,l,a){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:o,horizontalPixelRatio:c,verticalPixelRatio:u}=t,d=e[n.from];let h=l(t,d),f=d;if(n.to-n.from<2){const y=r/2;o.beginPath();const p={nt:d.nt-y,st:d.st},m={nt:d.nt+y,st:d.st};o.moveTo(p.nt*c,p.st*u),o.lineTo(m.nt*c,m.st*u),a(t,h,p,m)}else{const y=(m,v)=>{a(t,h,f,v),o.beginPath(),h=m,f=v};let p=f;o.beginPath(),o.moveTo(d.nt*c,d.st*u);for(let m=n.from+1;m<n.to;++m){p=e[m];const v=l(t,p);switch(s){case 0:o.lineTo(p.nt*c,p.st*u);break;case 1:o.lineTo(p.nt*c,e[m-1].st*u),v!==h&&(y(v,p),o.lineTo(p.nt*c,e[m-1].st*u)),o.lineTo(p.nt*c,p.st*u);break;case 2:{const[g,x]=Jw(e,m-1,m);o.bezierCurveTo(g.nt*c,g.st*u,x.nt*c,x.st*u,p.nt*c,p.st*u);break}}s!==1&&v!==h&&(y(v,p),o.moveTo(p.nt*c,p.st*u))}(f!==p||f===p&&s===1)&&a(t,h,f,p)}}const Xh=6;function Ha(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Qh(t,e){return{nt:t.nt/e,st:t.st/e}}function Jw(t,e,s){const n=Math.max(0,e-1),r=Math.min(t.length-1,s+1);var l,a;return[(l=t[e],a=Qh(Ha(t[s],t[n]),Xh),{nt:l.nt+a.nt,st:l.st+a.st}),Ha(t[s],Qh(Ha(t[r],t[e]),Xh))]}function Gw(t,e,s,n,r){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:o}=e;l.lineTo(r.nt*a,t*o),l.lineTo(n.nt*a,t*o),l.closePath(),l.fillStyle=s,l.fill()}class G0 extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var s;if(this.G===null)return;const{it:n,tt:r,ds:l,et:a,Nt:o,fs:c}=this.G,u=(s=this.G.vs)!==null&&s!==void 0?s:this.G.ps?0:e.mediaSize.height;if(r===null)return;const d=e.context;d.lineCap="butt",d.lineJoin="round",d.lineWidth=a,qs(d,o),d.lineWidth=1,J0(e,n,c,r,l,this.bs.bind(this),Gw.bind(null,u))}}function bc(t,e,s){return Math.min(Math.max(t,e),s)}function Ei(t,e,s){return e-t<=s}function Z0(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Bu{ws(e,s){const n=this.gs,{Ms:r,xs:l,Ss:a,ks:o,ys:c,vs:u}=s;if(this.Cs===void 0||n===void 0||n.Ms!==r||n.xs!==l||n.Ss!==a||n.ks!==o||n.vs!==u||n.ys!==c){const d=e.context.createLinearGradient(0,0,0,c);if(d.addColorStop(0,r),u!=null){const h=bc(u*e.verticalPixelRatio/c,0,1);d.addColorStop(h,l),d.addColorStop(h,a)}d.addColorStop(1,o),this.Cs=d,this.gs=s}return this.Cs}}class Zw extends G0{constructor(){super(...arguments),this.Ts=new Bu}bs(e,s){return this.Ts.ws(e,{Ms:s.Ps,xs:"",Ss:"",ks:s.Rs,ys:e.bitmapSize.height})}}function ej(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class ex extends kt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:s,tt:n,ds:r,fs:l,et:a,Nt:o,Ds:c}=this.G;if(n===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=a*e.verticalPixelRatio,qs(u,o),u.lineJoin="round";const d=this.Vs.bind(this);l!==void 0&&J0(e,s,l,n,r,d,ej),c&&function(h,f,y,p,m){const{horizontalPixelRatio:v,verticalPixelRatio:g,context:x}=h;let N=null;const j=Math.max(1,Math.floor(v))%2/2,k=y*g+j;for(let C=p.to-1;C>=p.from;--C){const w=f[C];if(w){const S=m(h,w);S!==N&&(x.beginPath(),N!==null&&x.fill(),x.fillStyle=S,N=S);const T=Math.round(w.nt*v)+j,L=w.st*g;x.moveTo(T,L),x.arc(T,L,k,0,2*Math.PI)}}x.fill()}(e,s,c,n,d)}}class tx extends ex{Vs(e,s){return s.lt}}function sx(t,e,s,n,r=0,l=e.length){let a=l-r;for(;0<a;){const o=a>>1,c=r+o;n(e[c],s)===t?(r=c+1,a-=o+1):a=o}return r}const ai=sx.bind(null,!0),nx=sx.bind(null,!1);function tj(t,e){return t.ot<e}function sj(t,e){return e<t.ot}function rx(t,e,s){const n=e.Os(),r=e.ui(),l=ai(t,n,tj),a=nx(t,r,sj);if(!s)return{from:l,to:a};let o=l,c=a;return l>0&&l<t.length&&t[l].ot>=n&&(o=l-1),a>0&&a<t.length&&t[a-1].ot<=r&&(c=a+1),{from:o,to:c}}class Fu{constructor(e,s,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=s,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),s=this.Ns.St();if(this.qs(),s.Ni()||e.Ni())return;const n=s.Xs();if(n===null||this.Es.In().Ks()===0)return;const r=this.Es.Ct();r!==null&&(this.Ls=rx(this.zs,n,this.Fs),this.Gs(e,s,r.Vt),this.Js())}}class ua extends Fu{constructor(e,s){super(e,s,!0)}Gs(e,s,n){s.Qs(this.zs,Yr(this.Ls)),e.te(this.zs,n,Yr(this.Ls))}ie(e,s){return{ot:e,_t:s,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>{const n=s.Vt[3];return this.se(s.ee,n,e)})}}class nj extends ua{constructor(e,s){super(e,s),this.js=new Iu,this.re=new Zw,this.he=new tx,this.js.Z([this.re,this.he])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class rj extends kt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(s),this.ae>=2&&Math.max(1,Math.floor(s))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(s)):this.ae;let r=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*s);for(let a=this.zt.tt.from;a<this.zt.tt.to;++a){const o=this.zt.In[a];r!==o.ce&&(e.fillStyle=o.ce,r=o.ce);const c=Math.floor(.5*this.oe),u=Math.round(o.nt*s),d=u-c,h=this.oe,f=d+h-1,y=Math.min(o.de,o.fe),p=Math.max(o.de,o.fe),m=Math.round(y*n)-c,v=Math.round(p*n)+c,g=Math.max(v-m,this.oe);e.fillRect(d,m,h,g);const x=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const C=u-x;let w=Math.max(m,Math.round(o.pe*n)-c),S=w+h-1;S>m+g-1&&(S=m+g-1,w=S-h+1),e.fillRect(C,w,d-C,S-w+1)}const N=u+x;let j=Math.max(m,Math.round(o.me*n)-c),k=j+h-1;k>m+g-1&&(k=m+g-1,j=k-h+1),e.fillRect(f+1,j,N-f,k-j+1)}}}_e(e){const s=Math.floor(e);return Math.max(s,Math.floor(function(n,r){return Math.floor(.3*n*r)}(A(this.zt).le,e)))}}class ix extends Fu{constructor(e,s){super(e,s,!1)}Gs(e,s,n){s.Qs(this.zs,Yr(this.Ls)),e.be(this.zs,n,Yr(this.Ls))}we(e,s,n){return{ot:e,ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>this.se(s.ee,s,e))}}class ij extends ix{constructor(){super(...arguments),this.js=new rj}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class lj extends G0{constructor(){super(...arguments),this.Ts=new Bu}bs(e,s){const n=this.G;return this.Ts.ws(e,{Ms:s.ke,xs:s.ye,Ss:s.Ce,ks:s.Te,ys:e.bitmapSize.height,vs:n.vs})}}class aj extends ex{constructor(){super(...arguments),this.Pe=new Bu}Vs(e,s){const n=this.G;return this.Pe.ws(e,{Ms:s.Re,xs:s.Re,Ss:s.De,ks:s.De,ys:e.bitmapSize.height,vs:n.vs})}}class oj extends ua{constructor(e,s){super(e,s),this.js=new Iu,this.Ve=new lj,this.Oe=new aj,this.js.Z([this.Ve,this.Oe])}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const s=this.Es.W(),n=this.Es.Dt().Rt(s.baseValue.price,e.Vt),r=this.Ns.St().le();this.Ve.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineType,vs:n,ps:!1,tt:this.Ls,ds:r}),this.Oe.J({it:this.zs,et:s.lineWidth,Nt:s.lineStyle,fs:s.lineVisible?s.lineType:void 0,Ds:s.pointMarkersVisible?s.pointMarkersRadius||s.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:r})}}class cj extends kt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:s}=e;this.ae=function(l,a){if(l>=2.5&&l<=4)return Math.floor(3*a);const o=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),c=Math.floor(l*o*a),u=Math.floor(l*a),d=Math.min(c,u);return Math.max(Math.floor(a),d)}(this.zt.le,s),this.ae>=2&&Math.floor(s)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const r=this.ze(s);(!this.zt._i||this.ae>2*r)&&this.Le(e,n,this.zt.tt)}Ae(e,s,n){if(this.zt===null)return;const{context:r,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="",c=Math.min(Math.floor(l),Math.floor(this.zt.le*l));c=Math.max(Math.floor(l),Math.min(c,this.ae));const u=Math.floor(.5*c);let d=null;for(let h=n.from;h<n.to;h++){const f=s[h];f.Ee!==o&&(r.fillStyle=f.Ee,o=f.Ee);const y=Math.round(Math.min(f.pe,f.me)*a),p=Math.round(Math.max(f.pe,f.me)*a),m=Math.round(f.de*a),v=Math.round(f.fe*a);let g=Math.round(l*f.nt)-u;const x=g+c-1;d!==null&&(g=Math.max(d+1,g),g=Math.min(g,x));const N=x-g+1;r.fillRect(g,m,N,y-m),r.fillRect(g,p+1,N,v-p),d=x}}ze(e){let s=Math.floor(1*e);this.ae<=2*s&&(s=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),s);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,s,n){if(this.zt===null)return;const{context:r,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);let u=null;for(let d=n.from;d<n.to;d++){const h=s[d];h.Ne!==o&&(r.fillStyle=h.Ne,o=h.Ne);let f=Math.round(h.nt*l)-Math.floor(.5*this.ae);const y=f+this.ae-1,p=Math.round(Math.min(h.pe,h.me)*a),m=Math.round(Math.max(h.pe,h.me)*a);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,y)),this.zt.le*l>2*c)Hw(r,f,p,y-f+1,m-p+1,c);else{const v=y-f+1;r.fillRect(f,p,v,m-p+1)}u=y}}Le(e,s,n){if(this.zt===null)return;const{context:r,horizontalPixelRatio:l,verticalPixelRatio:a}=e;let o="";const c=this.ze(l);for(let u=n.from;u<n.to;u++){const d=s[u];let h=Math.round(Math.min(d.pe,d.me)*a),f=Math.round(Math.max(d.pe,d.me)*a),y=Math.round(d.nt*l)-Math.floor(.5*this.ae),p=y+this.ae-1;if(d.ce!==o){const m=d.ce;r.fillStyle=m,o=m}this.zt._i&&(y+=c,h+=c,p-=c,f-=c),h>f||r.fillRect(y,h,p-y+1,f-h+1)}}}class uj extends ix{constructor(){super(...arguments),this.js=new cj}se(e,s,n){return Object.assign(Object.assign({},this.we(e,s,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class dj{constructor(e,s){this.Fe=e,this.Li=s}X(e,s,n){this.Fe.draw(e,this.Li,s,n)}}class qa extends Fu{constructor(e,s,n){super(e,s,!1),this.wn=n,this.js=new dj(this.wn.renderer(),r=>{const l=e.Ct();return l===null?null:e.Dt().Rt(r,l.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(s=>Object.assign(Object.assign({ot:s.ee,nt:NaN},e.$s(s.ee)),{He:s.$e}))}Gs(e,s){s.Qs(this.zs,Yr(this.Ls))}Js(){this.wn.update({bars:this.zs.map(hj),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function hj(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class fj extends kt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(s);const r=Math.max(1,Math.floor(n)),l=Math.round(this.zt.Ye*n)-Math.floor(r/2),a=l+r;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const c=this.zt.it[o],u=this.Ue[o-this.zt.tt.from],d=Math.round(c.st*n);let h,f;e.fillStyle=c.ce,d<=l?(h=d,f=a):(h=l,f=d-Math.floor(r/2)+r),e.fillRect(u.Os,h,u.ui-u.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const s=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-s;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.zt.it[l],o=Math.round(a.nt*e);let c,u;if(n%2){const d=(n-1)/2;c=o-d,u=o+d}else{const d=n/2;c=o-d,u=o+d-1}this.Ue[l-this.zt.tt.from]={Os:c,ui:u,Ze:o,Xe:a.nt*e,ot:a.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from],o=this.Ue[l-this.zt.tt.from-1];a.ot===o.ot+1&&a.Os-o.ui!==s+1&&(o.Ze>o.Xe?o.ui=a.Os-s-1:a.Os=o.ui+s+1)}let r=Math.ceil(this.zt.le*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui<a.Os&&(a.ui=a.Os);const o=a.ui-a.Os+1;r=Math.min(o,r)}if(s>0&&r<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.Ue[l-this.zt.tt.from];a.ui-a.Os+1>r&&(a.Ze>a.Xe?a.ui-=1:a.Os+=1)}}}class pj extends ua{constructor(){super(...arguments),this.js=new fj}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,A(this.Es.Ct()).Vt)};this.js.J(e)}}class mj extends ua{constructor(){super(...arguments),this.js=new tx}se(e,s,n){return Object.assign(Object.assign({},this.ie(e,s)),n.$s(e))}Js(){const e=this.Es.W(),s={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(s)}}const xj=/[2-9]/g;class Xr{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,s,n){return this.sr(e,s,n).width}Mi(e,s,n){const r=this.sr(e,s,n);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}sr(e,s,n){const r=n||xj,l=String(s).replace(r,"0");if(this.tr.has(l))return Fe(this.tr.get(l)).er;if(this.Ke===this.ir){const o=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(o),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const a=e.measureText(l);return e.restore(),a.width===0&&s.length||(this.tr.set(l,{er:a,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),a}}class gj{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,s,n){this.hr=e,this.k=s,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class lx{constructor(e,s,n){this.ur=e,this.ar=new Xr(50),this.cr=s,this.F=n,this.j=-1,this.Wt=new gj(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const s=e.vr(this.cr)?e.pr():this.cr.Dt();if(s===null)return null;const n=e.mr(s);if(n==="overlay")return null;const r=this.F.br();return r.P!==this.j&&(this.j=r.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),r,n),this.Wt}}class yj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,s){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:r,et:l,gr:a}=this.zt;return s>=r-l-7&&s<=r+l+7?{Mr:this.zt,gr:a}:null}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*r);l<0||l>s.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),qs(e,this.zt.Nt),H0(e,l,0,s.width))}}class Du{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new yj,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class vj extends Du{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),s=e.Cr().Cr;if(s!==2&&s!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const r=this.Es.Ct();r!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(r.Vt,r.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class bj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const r=this.zt;if(r===null)return;const l=Math.max(1,Math.floor(s)),a=l%2/2,o=Math.round(r.Xe.x*s)+a,c=r.Xe.y*n;e.fillStyle=r.Tr,e.beginPath();const u=Math.max(2,1.5*r.Pr)*s;e.arc(o,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.Rr,e.beginPath(),e.arc(o,c,r.ht*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=l,e.strokeStyle=r.Dr,e.beginPath(),e.arc(o,c,r.ht*s+l/2,0,2*Math.PI,!1),e.stroke()}}const Nj=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Jh(t,e,s,n){return function(r,l){if(r==="transparent")return r;const a=qr(r),o=a[3];return`rgba(${a[0]}, ${a[1]}, ${a[2]}, ${l*o})`}(t,s+(n-s)*e)}function Gh(t,e){const s=t%2600/2600;let n;for(const c of Nj)if(s>=c.Vr&&s<=c.Or){n=c;break}bs(n!==void 0,"Last price animation internal logic error");const r=(s-n.Vr)/(n.Or-n.Vr);return{Rr:Jh(e,r,n.Ir,n.zr),Dr:Jh(e,r,n.Lr,n.Er),ht:(l=r,a=n.Br,o=n.Ar,a+(o-a)*l)};var l,a,o}class wj{constructor(e){this.Wt=new bj,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),s=this.Wr-e;if(s>0)return void(s<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),s=e.Xs(),n=this.jr.Ct();if(s===null||n===null)return;const r=this.jr.Zr(!0);if(r.Xr||!s.Kr(r.ee))return;const l={x:e.It(r.ee),y:this.jr.Dt().Rt(r._t,n.Vt)},a=r.V,o=this.jr.W().lineWidth,c=Gh(this.Gr(),a);this.Wt.J({Tr:a,Pr:o,Rr:c.Rr,Dr:c.Dr,ht:c.ht,Xe:l})}Yr(){const e=this.Wt.$e();if(e!==null){const s=Gh(this.Gr(),e.Tr);e.Rr=s.Rr,e.Dr=s.Dr,e.ht=s.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function vr(t,e){return Z0(Math.min(Math.max(t,12),30)*e)}function Qr(t,e){switch(t){case"arrowDown":case"arrowUp":return vr(e,1);case"circle":return vr(e,.8);case"square":return vr(e,.7)}}function ax(t){return function(e){const s=Math.ceil(e);return s%2!=0?s-1:s}(vr(t,1))}function Zh(t){return Math.max(vr(t,.1),3)}function ef(t,e,s){return e?t:s?Math.ceil(t/2):0}function ox(t,e,s,n,r){const l=Qr("square",s),a=(l-1)/2,o=t-a,c=e-a;return n>=o&&n<=o+l&&r>=c&&r<=c+l}function tf(t,e,s,n){const r=(Qr("arrowUp",n)-1)/2*s.Jr,l=(Z0(n/2)-1)/2*s.Jr;e.beginPath(),t?(e.moveTo(s.nt-r,s.st),e.lineTo(s.nt,s.st-r),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st+r),e.lineTo(s.nt-l,s.st+r),e.lineTo(s.nt-l,s.st)):(e.moveTo(s.nt-r,s.st),e.lineTo(s.nt,s.st+r),e.lineTo(s.nt+r,s.st),e.lineTo(s.nt+l,s.st),e.lineTo(s.nt+l,s.st-r),e.lineTo(s.nt-l,s.st-r),e.lineTo(s.nt-l,s.st)),e.fill()}function jj(t,e,s,n,r,l){return ox(e,s,n,r,l)}class kj extends kt{constructor(){super(...arguments),this.zt=null,this.ar=new Xr,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,s){this.j===e&&this.H===s||(this.j=e,this.H=s,this.Qr=zn(e,s),this.ar.nr())}wr(e,s){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const r=this.zt.it[n];if(Cj(r,e,s))return{Mr:r.th,gr:r.gr}}return null}K({context:e,horizontalPixelRatio:s,verticalPixelRatio:n},r,l){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const o=this.zt.it[a];o.Kt!==void 0&&(o.Kt.Hi=this.ar.xi(e,o.Kt.ih),o.Kt.At=this.j,o.Kt.nt=o.nt-o.Kt.Hi/2),Sj(o,e,s,n)}}}}function Sj(t,e,s,n){e.fillStyle=t.V,t.Kt!==void 0&&function(r,l,a,o,c,u){r.save(),r.scale(c,u),r.fillText(l,a,o),r.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,s,n),function(r,l,a){if(r.Ks!==0){switch(r.nh){case"arrowDown":return void tf(!1,l,a,r.Ks);case"arrowUp":return void tf(!0,l,a,r.Ks);case"circle":return void function(o,c,u){const d=(Qr("circle",u)-1)/2;o.beginPath(),o.arc(c.nt,c.st,d*c.Jr,0,2*Math.PI,!1),o.fill()}(l,a,r.Ks);case"square":return void function(o,c,u){const d=Qr("square",u),h=(d-1)*c.Jr/2,f=c.nt-h,y=c.st-h;o.fillRect(f,y,d*c.Jr,d*c.Jr)}(l,a,r.Ks)}r.nh}}(t,e,function(r,l,a){const o=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(r.nt*l)+o,st:r.st*a,Jr:l}}(t,s,n))}function Cj(t,e,s){return!(t.Kt===void 0||!function(n,r,l,a,o,c){const u=a/2;return o>=n&&o<=n+l&&c>=r-u&&c<=r+u}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,s))||function(n,r,l){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return jj(0,n.nt,n.st,n.Ks,r,l);case"circle":return function(a,o,c,u,d){const h=2+Qr("circle",c)/2,f=a-u,y=o-d;return Math.sqrt(f*f+y*y)<=h}(n.nt,n.st,n.Ks,r,l);case"square":return ox(n.nt,n.st,n.Ks,r,l)}}(t,e,s)}function Ej(t,e,s,n,r,l,a,o,c){const u=Mt(s)?s:s.Se,d=Mt(s)?s:s.Me,h=Mt(s)?s:s.xe,f=Mt(e.size)?Math.max(e.size,0):1,y=ax(o.le())*f,p=y/2;switch(t.Ks=y,e.position){case"inBar":return t.st=a.Rt(u,c),void(t.Kt!==void 0&&(t.Kt.st=t.st+p+l+.6*r));case"aboveBar":return t.st=a.Rt(d,c)-p-n.sh,t.Kt!==void 0&&(t.Kt.st=t.st-p-.6*r,n.sh+=1.2*r),void(n.sh+=y+l);case"belowBar":return t.st=a.Rt(h,c)+p+n.eh,t.Kt!==void 0&&(t.Kt.st=t.st+p+l+.6*r,n.eh+=1.2*r),void(n.eh+=y+l)}e.position}class _j{constructor(e,s){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new kj,this.jr=e,this.$i=s,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const s=this.$i.W().layout;return this.Wt._r(s.fontSize,s.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),s=Zh(e),n=1.5*ax(e)+2*s,r=this.fh();this.ah={above:ef(n,r.aboveBar,r.inBar),below:ef(n,r.belowBar,r.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,s)=>(e[s.position]||(e[s.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),s=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(d=>({ot:d.time,nt:0,st:0,Ks:0,nh:d.shape,V:d.color,th:d.th,gr:d.id,Kt:void 0})),this.rh=!1);const r=this.$i.W().layout;this.zt.tt=null;const l=s.Xs();if(l===null)return;const a=this.jr.Ct();if(a===null||this.zt.it.length===0)return;let o=NaN;const c=Zh(s.le()),u={sh:c,eh:c};this.zt.tt=rx(this.zt.it,l,!0);for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const h=n[d];h.time!==o&&(u.sh=c,u.eh=c,o=h.time);const f=this.zt.it[d];f.nt=s.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const y=this.jr.ph(h.time);y!==null&&Ej(f,h,y,u,r.fontSize,c,e,s,a.Vt)}this.ft=!1}}class Tj extends Du{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const s=this.Es.W();if(!s.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(s.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=s.priceLineWidth,e.Nt=s.priceLineStyle)}}class Mj extends aa{constructor(e){super(),this.jt=e}zi(e,s,n){e.yt=!1,s.yt=!1;const r=this.jt;if(!r.yt())return;const l=r.W(),a=l.lastValueVisible,o=r.bh()!=="",c=l.seriesLastValueMode===0,u=r.Zr(!1);if(u.Xr)return;a&&(e.Kt=this.wh(u,a,c),e.yt=e.Kt.length!==0),(o||c)&&(s.Kt=this.gh(u,a,o,c),s.yt=s.Kt.length>0);const d=r.mh(u.V),h=ia(d);n.t=h.t,n.ki=u.ki,s.Ot=r.$t().Bt(u.ki/r.Dt().At()),e.Ot=d,e.V=h.i,s.V=h.i}gh(e,s,n,r){let l="";const a=this.jt.bh();return n&&a.length!==0&&(l+=`${a} `),s&&r&&(l+=this.jt.Dt().Mh()?e.xh:e.Sh),l.trim()}wh(e,s,n){return s?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function sf(t,e,s,n){const r=Number.isFinite(e),l=Number.isFinite(s);return r&&l?t(e,s):r||l?r?e:s:n}class Qe{constructor(e,s){this.kh=e,this.yh=s}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Qe(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Qe(sf(Math.min,this.Ph(),e.Ph(),-1/0),sf(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Mt(e)||this.yh-this.kh===0)return;const s=.5*(this.yh+this.kh);let n=this.yh-s,r=this.kh-s;n*=e,r*=e,this.yh=s+n,this.kh=s+r}Oh(e){Mt(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Qe(e.minValue,e.maxValue)}}class Rl{constructor(e,s){this.Ih=e,this.zh=s||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Rl(Qe.Ah(e.priceRange),e.margins)}}class Lj extends Du{constructor(e,s){super(e),this.Nh=s}yr(){const e=this.Sr;e.yt=!1;const s=this.Nh.W();if(!this.Es.yt()||!s.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=s.color,e.et=s.lineWidth,e.Nt=s.lineStyle,e.gr=this.Nh.W().id)}}class Pj extends aa{constructor(e,s){super(),this.jr=e,this.Nh=s}zi(e,s,n){e.yt=!1,s.yt=!1;const r=this.Nh.W(),l=r.axisLabelVisible,a=r.title!=="",o=this.jr;if(!l||!o.yt())return;const c=this.Nh.Fh();if(c===null)return;a&&(s.Kt=r.title,s.yt=!0),s.Ot=o.$t().Bt(c/o.Dt().At()),e.Kt=this.Wh(r.price),e.yt=!0;const u=ia(r.axisLabelColor||r.color);n.t=u.t;const d=r.axisLabelTextColor||u.i;e.V=d,s.V=d,n.ki=c}Wh(e){const s=this.jr.Ct();return s===null?"":this.jr.Dt().Fi(e,s.Vt)}}class zj{constructor(e,s){this.jr=e,this.cn=s,this.jh=new Lj(e,this),this.ur=new Pj(e,this),this.Hh=new lx(this.ur,e,e.$t())}$h(e){wt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,s=e.Dt();if(e.$t().St().Ni()||s.Ni())return null;const n=e.Ct();return n===null?null:s.Rt(this.cn.price,n.Vt)}}class Rj extends $u{constructor(e){super(),this.$i=e}$t(){return this.$i}}const Aj={Bar:(t,e,s,n)=>{var r;const l=e.upColor,a=e.downColor,o=A(t(s,n)),c=xn(o.Vt[0])<=xn(o.Vt[3]);return{ce:(r=o.V)!==null&&r!==void 0?r:c?l:a}},Candlestick:(t,e,s,n)=>{var r,l,a;const o=e.upColor,c=e.downColor,u=e.borderUpColor,d=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,y=A(t(s,n)),p=xn(y.Vt[0])<=xn(y.Vt[3]);return{ce:(r=y.V)!==null&&r!==void 0?r:p?o:c,Ne:(l=y.Ot)!==null&&l!==void 0?l:p?u:d,Ee:(a=y.Xh)!==null&&a!==void 0?a:p?h:f}},Custom:(t,e,s,n)=>{var r;return{ce:(r=A(t(s,n)).V)!==null&&r!==void 0?r:e.color}},Area:(t,e,s,n)=>{var r,l,a,o;const c=A(t(s,n));return{ce:(r=c.lt)!==null&&r!==void 0?r:e.lineColor,lt:(l=c.lt)!==null&&l!==void 0?l:e.lineColor,Ps:(a=c.Ps)!==null&&a!==void 0?a:e.topColor,Rs:(o=c.Rs)!==null&&o!==void 0?o:e.bottomColor}},Baseline:(t,e,s,n)=>{var r,l,a,o,c,u;const d=A(t(s,n));return{ce:d.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(r=d.Re)!==null&&r!==void 0?r:e.topLineColor,De:(l=d.De)!==null&&l!==void 0?l:e.bottomLineColor,ke:(a=d.ke)!==null&&a!==void 0?a:e.topFillColor1,ye:(o=d.ye)!==null&&o!==void 0?o:e.topFillColor2,Ce:(c=d.Ce)!==null&&c!==void 0?c:e.bottomFillColor1,Te:(u=d.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(t,e,s,n)=>{var r,l;const a=A(t(s,n));return{ce:(r=a.V)!==null&&r!==void 0?r:e.color,lt:(l=a.V)!==null&&l!==void 0?l:e.color}},Histogram:(t,e,s,n)=>{var r;return{ce:(r=A(t(s,n)).V)!==null&&r!==void 0?r:e.color}}};class Oj{constructor(e){this.Kh=(s,n)=>n!==void 0?n.Vt:this.jr.In().Gh(s),this.jr=e,this.Jh=Aj[e.Qh()]}$s(e,s){return this.Jh(this.Kh,this.jr.W(),e,s)}}var nf;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(nf||(nf={}));const Gt=30;class Ij{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,s=0){const n=this.hl(e,s);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,s,n){if(this.Ni())return null;let r=null;for(const l of n)r=_i(r,this._l(e,s,l));return r}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,s){const n=this.ul(e);if(n===null&&s!==0)switch(s){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let s=this.fl(e);return s>0&&(s-=1),s!==this.tl.length&&this.rl(s)<e?s:null}dl(e){const s=this.vl(e);return s!==this.tl.length&&e<this.rl(s)?s:null}ul(e){const s=this.fl(e);return s===this.tl.length||e<this.tl[s].ee?null:s}fl(e){return ai(this.tl,e,(s,n)=>s.ee<n)}vl(e){return nx(this.tl,e,(s,n)=>s.ee>n)}pl(e,s,n){let r=null;for(let l=e;l<s;l++){const a=this.tl[l].Vt[n];Number.isNaN(a)||(r===null?r={ml:a,bl:a}:(a<r.ml&&(r.ml=a),a>r.bl&&(r.bl=a)))}return r}_l(e,s,n){if(this.Ni())return null;let r=null;const l=A(this.el()),a=A(this.An()),o=Math.max(e,l),c=Math.min(s,a),u=Math.ceil(o/Gt)*Gt,d=Math.max(u,Math.floor(c/Gt)*Gt);{const f=this.fl(o),y=this.vl(Math.min(c,u,s));r=_i(r,this.pl(f,y,n))}let h=this.il.get(n);h===void 0&&(h=new Map,this.il.set(n,h));for(let f=Math.max(u+1,o);f<d;f+=Gt){const y=Math.floor(f/Gt);let p=h.get(y);if(p===void 0){const m=this.fl(y*Gt),v=this.vl((y+1)*Gt-1);p=this.pl(m,v,n),h.set(y,p)}r=_i(r,p)}{const f=this.fl(d),y=this.vl(c);r=_i(r,this.pl(f,y,n))}return r}}function _i(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class $j{constructor(e){this.wl=e}X(e,s,n){this.wl.draw(e)}gl(e,s,n){var r,l;(l=(r=this.wl).drawBackground)===null||l===void 0||l.call(r,e)}}class Ka{constructor(e){this.tr=null,this.wn=e}gt(){var e;const s=this.wn.renderer();if(s===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===s)return this.tr.xl;const n=new $j(s);return this.tr={Ml:s,xl:n},n}Sl(){var e,s,n;return(n=(s=(e=this.wn).zOrder)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:"normal"}}function cx(t){var e,s,n,r,l;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(n=(s=t.visible)===null||s===void 0?void 0:s.call(t))===null||n===void 0||n,hi:(l=(r=t.tickVisible)===null||r===void 0?void 0:r.call(t))===null||l===void 0||l}}class Bj{constructor(e,s){this.Wt=new X0,this.kl=e,this.yl=s}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},cx(this.kl))),this.Wt}}class Fj extends aa{constructor(e,s){super(),this.kl=e,this.Li=s}zi(e,s,n){const r=cx(this.kl);n.t=r.t,e.V=r.V;const l=2/12*this.Li.P();n.wi=l,n.gi=l,n.ki=r.ki,n.Si=r.Si,e.Kt=r.Kt,e.yt=r.yt,e.hi=r.hi}}class Dj{constructor(e,s){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=s}Ol(){return this.Vl}Vn(){var e,s;(s=(e=this.Vl).updateAllViews)===null||s===void 0||s.call(e)}Pn(){var e,s,n,r;const l=(n=(s=(e=this.Vl).paneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((r=this.Cl)===null||r===void 0?void 0:r.Ml)===l)return this.Cl.xl;const a=l.map(o=>new Ka(o));return this.Cl={Ml:l,xl:a},a}Qi(){var e,s,n,r;const l=(n=(s=(e=this.Vl).timeAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((r=this.Tl)===null||r===void 0?void 0:r.Ml)===l)return this.Tl.xl;const a=this.jr.$t().St(),o=l.map(c=>new Bj(c,a));return this.Tl={Ml:l,xl:o},o}Rn(){var e,s,n,r;const l=(n=(s=(e=this.Vl).priceAxisViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((r=this.Pl)===null||r===void 0?void 0:r.Ml)===l)return this.Pl.xl;const a=this.jr.Dt(),o=l.map(c=>new Fj(c,a));return this.Pl={Ml:l,xl:o},o}Bl(){var e,s,n,r;const l=(n=(s=(e=this.Vl).priceAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((r=this.Rl)===null||r===void 0?void 0:r.Ml)===l)return this.Rl.xl;const a=l.map(o=>new Ka(o));return this.Rl={Ml:l,xl:a},a}Al(){var e,s,n,r;const l=(n=(s=(e=this.Vl).timeAxisPaneViews)===null||s===void 0?void 0:s.call(e))!==null&&n!==void 0?n:[];if(((r=this.Dl)===null||r===void 0?void 0:r.Ml)===l)return this.Dl.xl;const a=l.map(o=>new Ka(o));return this.Dl={Ml:l,xl:a},a}Il(e,s){var n,r,l;return(l=(r=(n=this.Vl).autoscaleInfo)===null||r===void 0?void 0:r.call(n,e,s))!==null&&l!==void 0?l:null}wr(e,s){var n,r,l;return(l=(r=(n=this.Vl).hitTest)===null||r===void 0?void 0:r.call(n,e,s))!==null&&l!==void 0?l:null}}function Ya(t,e,s,n){t.forEach(r=>{e(r).forEach(l=>{l.Sl()===s&&n.push(l)})})}function Xa(t){return t.Pn()}function Uj(t){return t.Bl()}function Vj(t){return t.Al()}class Uu extends Rj{constructor(e,s,n,r,l){super(e),this.zt=new Ij,this.jh=new Tj(this),this.zl=[],this.Ll=new vj(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=s,this.$l=n;const a=new Mj(this);this.rn=[a],this.Hh=new lx(a,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new wj(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;const r=this.$t().St().Xs(),l=this.Ct();if(r===null||l===null)return s;let a,o;if(e){const h=this.zt.sl();if(h===null)return s;a=h,o=h.ee}else{const h=this.zt.ll(r.ui(),-1);if(h===null||(a=this.zt.Gh(h.ee),a===null))return s;o=h.ee}const c=a.Vt[3],u=this.Us().$s(o,{Vt:a}),d=n.Rt(c,l.Vt);return{Xr:!1,_t:c,Kt:n.Fi(c,l.Vt),xh:n.Yl(c),Sh:n.Zl(c,l.Vt),V:u.ce,ki:d,ee:o}}Us(){return this.Nl!==null||(this.Nl=new Oj(this)),this.Nl}W(){return this.cn}$h(e){const s=e.priceScaleId;s!==void 0&&s!==this.cn.priceScaleId&&this.$t().Xl(this,s),wt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,s){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(s&&s.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const s=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const s=new zj(this,e);return this.zl.push(s),this.$t().Gl(this),s}ra(e){const s=this.zl.indexOf(e);s!==-1&&this.zl.splice(s,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const s=e.Os();return this.zt.ll(s,1)}In(){return this.zt}ph(e){const s=this.zt.Gh(e);return s===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:s.Vt[0],Me:s.Vt[1],xe:s.Vt[2],Se:s.Vt[3]}:s.Vt[3]}aa(e){const s=[];Ya(this.Hl,Xa,"top",s);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),s.unshift(n)),s}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const s=this.zl.map(n=>n.qh());return e.push(...s),Ya(this.Hl,Xa,"normal",e),e}ua(){return this.ca(Xa,"bottom")}da(e){return this.ca(Uj,e)}fa(e){return this.ca(Vj,e)}va(e,s){return this.Hl.map(n=>n.wr(e,s)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(s=>s.Yh())]}Rn(e,s){if(s!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const r of this.zl)n.push(r.Zh());return this.Hl.forEach(r=>{n.push(...r.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(s=>{e.push(...s.Qi())}),e}Il(e,s){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const r=this.pa(e,s);return r===null?null:r.Bh()});return Rl.Ah(n)}return this.pa(e,s)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const s of this.rn)s.bt();for(const s of this.zl)s.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(s=>s.Vn())}Dt(){return A(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const s=this.zt.Gh(e);return s===null?null:{_t:s.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new Dj(e,this))}ya(e){this.Hl=this.Hl.filter(s=>s.Ol()!==e)}Ca(){if(this.wn instanceof qa)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof qa)return e=>this.wn.je(e)}_a(){return!oa(this.Dt().Pa())}pa(e,s){if(!Kr(e)||!Kr(s)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],r=this.zt.ol(e,s,n);let l=r!==null?new Qe(r.ml,r.bl):null;if(this.Qh()==="Histogram"){const o=this.cn.base,c=new Qe(o,o);l=l!==null?l.ts(c):c}let a=this.dn.uh();return this.Hl.forEach(o=>{const c=o.Il(e,s);if(c!=null&&c.priceRange){const y=new Qe(c.priceRange.minValue,c.priceRange.maxValue);l=l!==null?l.ts(y):y}var u,d,h,f;c!=null&&c.margins&&(u=a,d=c.margins,a={above:Math.max((h=u==null?void 0:u.above)!==null&&h!==void 0?h:0,d.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,d.below)})}),new Rl(l,a)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const s=this.cn.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new Qw(this.cn.priceFormat.precision);break;case"percent":this.wa=new Q0(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new ca(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const s=A(this.zt.el());this.Wl=this.Fl.map((n,r)=>{const l=A(e.Va(n.time,!0)),a=l<s?1:-1;return{time:A(this.zt.ll(l,a)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:r,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new _j(this,this.$t()),this.$l){case"Bar":this.wn=new ij(this,this.$t());break;case"Candlestick":this.wn=new uj(this,this.$t());break;case"Line":this.wn=new mj(this,this.$t());break;case"Custom":this.wn=new qa(this,this.$t(),Fe(e));break;case"Area":this.wn=new nj(this,this.$t());break;case"Baseline":this.wn=new oj(this,this.$t());break;case"Histogram":this.wn=new pj(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,s){const n=[];return Ya(this.Hl,e,s,n),n}}class Wj{constructor(e){this.cn=e}Oa(e,s,n){let r=e;if(this.cn.mode===0)return r;const l=n.vn(),a=l.Ct();if(a===null)return r;const o=l.Rt(e,a),c=n.Ba().filter(d=>d instanceof Uu).reduce((d,h)=>{if(n.vr(h)||!h.yt())return d;const f=h.Dt(),y=h.In();if(f.Ni()||!y.Kr(s))return d;const p=y.Gh(s);if(p===null)return d;const m=xn(h.Ct());return d.concat([f.Rt(p.Vt[3],m.Vt)])},[]);if(c.length===0)return r;c.sort((d,h)=>Math.abs(d-o)-Math.abs(h-o));const u=c[0];return r=l.pn(u,a),r}}class Hj extends kt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null)return;const l=Math.max(1,Math.floor(n));e.lineWidth=l,function(a,o){a.save(),a.lineWidth%2&&a.translate(.5,.5),o(),a.restore()}(e,()=>{const a=A(this.zt);if(a.Aa){e.strokeStyle=a.Ia,qs(e,a.za),e.beginPath();for(const o of a.La){const c=Math.round(o.Ea*n);e.moveTo(c,-l),e.lineTo(c,s.height+l)}e.stroke()}if(a.Na){e.strokeStyle=a.Fa,qs(e,a.Wa),e.beginPath();for(const o of a.ja){const c=Math.round(o.Ea*r);e.moveTo(-l,c),e.lineTo(s.width+l,c)}e.stroke()}})}}class qj{constructor(e){this.Wt=new Hj,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,s={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(s),this.ft=!1}return this.Wt}}class Kj{constructor(e){this.wn=new qj(e)}qh(){return this.wn}}const Qa={$a:4,Ua:1e-4};function gn(t,e){const s=100*(t-e)/e;return e<0?-s:s}function Yj(t,e){const s=gn(t.Ph(),e),n=gn(t.Rh(),e);return new Qe(s,n)}function br(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function Xj(t,e){const s=br(t.Ph(),e),n=br(t.Rh(),e);return new Qe(s,n)}function Al(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ua)+e.$a;return t<0?-n:n}function Nr(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.$a)-e.Ua;return t<0?-n:n}function tr(t,e){if(t===null)return null;const s=Al(t.Ph(),e),n=Al(t.Rh(),e);return new Qe(s,n)}function Ti(t,e){if(t===null)return null;const s=Nr(t.Ph(),e),n=Nr(t.Rh(),e);return new Qe(s,n)}function Ja(t){if(t===null)return Qa;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Qa;const s=Math.ceil(Math.abs(Math.log10(e))),n=Qa.$a+s;return{$a:n,Ua:1/Math.pow(10,n)}}class Ga{constructor(e,s){if(this.qa=e,this.Ya=s,function(n){if(n<0)return!1;for(let r=n;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,s,n){const r=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),a=0,o=this.Ya[0];for(;;){const h=Ei(l,r,1e-14)&&l>r+1e-14,f=Ei(l,n*o,1e-14),y=Ei(l,1,1e-14);if(!(h&&f&&y))break;l/=o,o=this.Ya[++a%this.Ya.length]}if(l<=r+1e-14&&(l=r),l=Math.max(1,l),this.Za.length>0&&(c=l,u=1,d=1e-14,Math.abs(c-u)<d))for(a=0,o=this.Za[0];Ei(l,n*o,1e-14)&&l>r+1e-14;)l/=o,o=this.Za[++a%this.Za.length];var c,u,d;return l}}class rf{constructor(e,s,n,r){this.Ka=[],this.Li=e,this.qa=s,this.Ga=n,this.Ja=r}Xa(e,s){if(e<s)throw new Error("high < low");const n=this.Li.At(),r=(e-s)*this.Qa()/n,l=new Ga(this.qa,[2,2.5,2]),a=new Ga(this.qa,[2,2,2.5]),o=new Ga(this.qa,[2.5,2,2]),c=[];return c.push(l.Xa(e,s,r),a.Xa(e,s,r),o.Xa(e,s,r)),function(u){if(u.length<1)throw Error("array is empty");let d=u[0];for(let h=1;h<u.length;++h)u[h]<d&&(d=u[h]);return d}(c)}io(){const e=this.Li,s=e.Ct();if(s===null)return void(this.Ka=[]);const n=e.At(),r=this.Ga(n-1,s),l=this.Ga(0,s),a=this.Li.W().entireTextOnly?this.no()/2:0,o=a,c=n-1-a,u=Math.max(r,l),d=Math.min(r,l);if(u===d)return void(this.Ka=[]);let h=this.Xa(u,d),f=u%h;f+=f<0?h:0;const y=u>=d?1:-1;let p=null,m=0;for(let v=u-f;v>d;v-=h){const g=this.Ja(v,s,!0);p!==null&&Math.abs(g-p)<this.Qa()||g<o||g>c||(m<this.Ka.length?(this.Ka[m].Ea=g,this.Ka[m].so=e.eo(v)):this.Ka.push({Ea:g,so:e.eo(v)}),m++,p=g,e.ro()&&(h=this.Xa(v*y,d)))}this.Ka.length=m}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function ux(t){return t.slice().sort((e,s)=>A(e.Xi())-A(s.Xi()))}var lf;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(lf||(lf={}));const af=new Q0,of=new ca(100,1);class Qj{constructor(e,s,n,r){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ve,this.vo=new ve,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=of,this.xo=Ja(null),this.So=e,this.cn=s,this.ko=n,this.yo=r,this.Co=new rf(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(wt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const s=Fe(e.scaleMargins.top),n=Fe(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const s=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),s.Cr===1&&e.Cr!==s.Cr&&(function(l,a){if(l===null)return!1;const o=Nr(l.Ph(),a),c=Nr(l.Rh(),a);return isFinite(o)&&isFinite(c)}(this.Ih,this.xo)?(n=Ti(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==s.Cr&&(n=tr(this.Ih,this.xo),n!==null&&this.Ao(n));const r=s.Cr!==this.cn.mode;r&&(s.Cr===2||this.Mh())&&this.Ra(),r&&(s.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&s.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(s,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,s){const n=this.Ih;(s||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,s){return this.Mh()?e=gn(e,s):this.Oo()&&(e=br(e,s)),this.Po(e,s)}te(e,s,n){this.Wo();const r=this.Fo(),l=A(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(o-a),h=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.Ho();for(let p=h;p<f;p++){const m=e[p],v=m._t;if(isNaN(v))continue;let g=v;y!==null&&(g=y(m._t,s));const x=r+d*(g-a),N=u?x:this.ho-1-x;m.st=N}}be(e,s,n){this.Wo();const r=this.Fo(),l=A(this.Lh()),a=l.Ph(),o=l.Rh(),c=this.Eo()-1,u=this.Bo(),d=c/(o-a),h=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.Ho();for(let p=h;p<f;p++){const m=e[p];let v=m.ge,g=m.Me,x=m.xe,N=m.Se;y!==null&&(v=y(m.ge,s),g=y(m.Me,s),x=y(m.xe,s),N=y(m.Se,s));let j=r+d*(v-a),k=u?j:this.ho-1-j;m.pe=k,j=r+d*(g-a),k=u?j:this.ho-1-j,m.de=k,j=r+d*(x-a),k=u?j:this.ho-1-j,m.fe=k,j=r+d*(N-a),k=u?j:this.ho-1-j,m.me=k}}pn(e,s){const n=this.To(e,s);return this.$o(n,s)}$o(e,s){let n=e;return this.Mh()?n=function(r,l){return l<0&&(r=-r),r/100*l+l}(n,s):this.Oo()&&(n=function(r,l){return r-=100,l<0&&(r=-r),r/100*l+l}(n,s)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let s=0;s<this.po.length;s++){const n=this.po[s];n.Xi()===null&&n.Ki(s+1),e.push(n)}return e=ux(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const s=this.po.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.po.splice(s,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const s of this.po){const n=s.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const s=this.Co.Ha();return this.bo={Ha:s,Xo:e},this.fo.m(),s}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=A(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let s=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=A(this.ao).Th();s=Math.max(s,.1),n.Vh(s),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=A(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const s=A(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const r=n*s,l=A(this.ao).Th();l.Oh(r),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,s){switch(this.cn.mode){case 2:return this.s_(gn(e,s));case 3:return this.ba().format(br(e,s));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,A(this.e_()).ba())}Zl(e,s){return e=gn(e,s),this.s_(e,af)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let s=100;e!==null&&(s=Math.round(1/e.ma())),this.wa=of,this.Mh()?(this.wa=af,s=100):this.Oo()?(this.wa=new ca(100,1),s=100):e!==null&&(this.wa=e.ba()),this.Co=new rf(this,s,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,s){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Al(e,this.xo):e;const n=A(this.Lh()),r=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(r)}To(e,s){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),r=A(this.Lh()),l=r.Ph()+r.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?Nr(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let s=null;const n=this.r_();let r=0,l=0;for(const c of n){if(!c.yt())continue;const u=c.Ct();if(u===null)continue;const d=c.Il(e.Os(),e.ui());let h=d&&d.Lh();if(h!==null){switch(this.cn.mode){case 1:h=tr(h,this.xo);break;case 2:h=Yj(h,u.Vt);break;case 3:h=Xj(h,u.Vt)}if(s=s===null?h:s.ts(A(h)),d!==null){const f=d.Eh();f!==null&&(r=Math.max(r,f.above),l=Math.max(l,f.below))}}}if(r===this.co&&l===this.do||(this.co=r,this.do=l,this.bo=null,this.Do()),s!==null){if(s.Ph()===s.Rh()){const c=this.e_(),u=5*(c===null||this.Mh()||this.Oo()?1:c.ma());this.ro()&&(s=Ti(s,this.xo)),s=new Qe(s.Ph()-u,s.Rh()+u),this.ro()&&(s=tr(s,this.xo))}if(this.ro()){const c=Ti(s,this.xo),u=Ja(c);if(a=u,o=this.xo,a.$a!==o.$a||a.Ua!==o.Ua){const d=this.ao!==null?Ti(this.ao,this.xo):null;this.xo=u,s=tr(c,u),d!==null&&(this.ao=tr(d,u))}}this.Ao(s)}else this.Ih===null&&(this.Ao(new Qe(-.5,.5)),this.xo=Ja(null));var a,o;this.oo._o=!0}Ho(){return this.Mh()?gn:this.Oo()?br:this.ro()?e=>Al(e,this.xo):null}a_(e,s,n){return s===void 0?(n===void 0&&(n=this.ba()),n.format(e)):s(e)}Wh(e,s){return this.a_(e,this.yo.priceFormatter,s)}s_(e,s){return this.a_(e,this.yo.percentageFormatter,s)}}class Jj{constructor(e,s){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ve,this.yl=e,this.$i=s,this.d_=new Kj(this);const n=s.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const s=Array.from(this.o_.values());for(const n of s){const r=A(n[0].Dt());r.$h(e.overlayPriceScales),e.localization&&r.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Fe(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(s=>{if(this.vr(s)){const n=s.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const s=e.Dt();return s===null||this.f_!==s&&this.p_!==s}qo(e,s,n){const r=n!==void 0?n:this.C_().y_+1;this.T_(e,s,r)}Zo(e){const s=this.po.indexOf(e);bs(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1);const n=A(e.Dt()).Pa();if(this.o_.has(n)){const l=Fe(this.o_.get(n)),a=l.indexOf(e);a!==-1&&(l.splice(a,1),l.length===0&&this.o_.delete(n))}const r=e.Dt();r&&r.Ba().indexOf(e)>=0&&r.Zo(e),r!==null&&(r.Yo(),this.P_(r)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,s){e.Go(s)}O_(e,s){e.Jo(s),this.k_()}B_(e){e.Qo()}A_(e,s){e.t_(s)}I_(e,s){e.i_(s),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const s=this.yl.Xs();e.Ro({Wn:!0}),s!==null&&e.h_(s),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=ux(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const s=e.r_();if(s&&s.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let s=0,n=0;for(let r=0;r<e.length;r++){const l=e[r].Xi();l!==null&&(l<s&&(s=l),l>n&&(n=l))}return{H_:s,y_:n}}T_(e,s,n){let r=this.w_(s);if(r===null&&(r=this.v_(s,this.$i.W().overlayPriceScales)),this.po.push(e),!oa(s)){const l=this.o_.get(s)||[];l.push(e),this.o_.set(s,l)}r.qo(e),e.Gi(r),e.Ki(n),this.P_(r),this.mo=null}m_(e,s,n){s.Cr!==n.Cr&&this.L_(e)}v_(e,s){const n=Object.assign({visible:!0,autoScale:!0},Bt(s)),r=new Qj(e,n,this.$i.W().layout,this.$i.W().localization);return r.Lo(this.At()),r}}class Gj{constructor(e,s,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=s,this.ir=n}Y_(e){const s=e.time,n=this.q_.cacheKey(s),r=this.tr.get(n);if(r!==void 0)return r.Z_;if(this.Ke===this.ir){const a=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Fe(a)),this.Je++,this.Ke--}const l=this.U_(e);return this.tr.set(n,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,l}}class wr{constructor(e,s){bs(e<=s,"right should be >= left"),this.X_=e,this.K_=s}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function cf(t,e){return t===null||e===null?t===e:t.Ch(e)}class Zj{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,s){this.nu(s),this.tr=null;for(let n=s;n<e.length;++n){const r=e[n];let l=this.J_.get(r.timeWeight);l===void 0&&(l=[],this.J_.set(r.timeWeight,l)),l.push({index:n,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}su(e,s){const n=Math.ceil(s/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const s=[];this.J_.forEach((n,r)=>{e<=n[0].index?s.push(r):n.splice(ai(n,e,l=>l.index<e),1/0)});for(const n of s)this.J_.delete(n)}ru(e){let s=[];for(const n of Array.from(this.J_.keys()).sort((r,l)=>l-r)){if(!this.J_.get(n))continue;const r=s;s=[];const l=r.length;let a=0;const o=Fe(this.J_.get(n)),c=o.length;let u=1/0,d=-1/0;for(let h=0;h<c;h++){const f=o[h],y=f.index;for(;a<l;){const p=r[a],m=p.index;if(!(m<y)){u=m;break}a++,s.push(p),d=m,u=1/0}if(u-y>=e&&y-d>=e)s.push(f),d=y;else if(this.Q_)return r}for(;a<l;a++)s.push(r[a])}return s}}class kn{constructor(e){this.hu=e}lu(){return this.hu===null?null:new wr(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new kn(null)}}function e1(t,e){return t.weight>e.weight?t:e}class t1{constructor(e,s,n,r){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new Zj,this.du=new Map,this.fu=kn.ou(),this.vu=!0,this.pu=new ve,this.mu=new ve,this.bu=new ve,this.wu=null,this.gu=null,this.Mu=[],this.cn=s,this.yo=n,this.xu=s.rightOffset,this.Su=s.barSpacing,this.$i=e,this.q_=r,this.ku(),this.cu.tu(s.uniformDistribution)}W(){return this.cn}yu(e){wt(this.yo,e),this.Cu(),this.ku()}$h(e,s){var n;wt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var s,n;return(n=(s=this.uu[e])===null||s===void 0?void 0:s.time)!==null&&n!==void 0?n:null}Ui(e){var s;return(s=this.uu[e])!==null&&s!==void 0?s:null}Va(e,s){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return s?this.uu.length-1:null;const n=ai(this.uu,this.q_.key(e),(r,l)=>this.q_.key(r.time)<l);return this.q_.key(e)<this.q_.key(this.uu[n].time)?s?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const s={from:e.Os(),to:e.ui()};return this.Ou(s)}Ou(e){const s=Math.round(e.from),n=Math.round(e.to),r=A(this.Bu()),l=A(this.Au());return{from:A(this.Ui(Math.max(r,s))),to:A(this.Ui(Math.min(l,n)))}}Iu(e){return{from:A(this.Va(e.from,!0)),to:A(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const s=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const r=this.Su*e/n;this.Su=r}if(this.cn.fixLeftEdge&&s!==null&&s.Os()<=0){const r=n-e;this.xu-=Math.round(r/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Kr(e))return 0;const s=this.Eu()+this.xu-e;return this.__-(s+.5)*this.Su-1}Qs(e,s){const n=this.Eu(),r=s===void 0?0:s.from,l=s===void 0?e.length:s.to;for(let a=r;a<l;a++){const o=e[a].ot,c=n+this.xu-o,u=this.__-(c+.5)*this.Su-1;e[a].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,s=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(s/e),r=A(this.Xs()),l=Math.max(r.Os(),r.Os()-n),a=Math.max(r.ui(),r.ui()-n),o=this.cu.su(e,s),c=this.Bu()+n,u=this.Au()-n,d=this.$u(),h=this.cn.fixLeftEdge||d,f=this.cn.fixRightEdge||d;let y=0;for(const p of o){if(!(l<=p.index&&p.index<=a))continue;let m;y<this.Mu.length?(m=this.Mu[y],m.coord=this.It(p.index),m.label=this.Uu(p),m.weight=p.weight):(m={needAlignCoordinate:!1,coord:this.It(p.index),label:this.Uu(p),weight:p.weight},this.Mu.push(m)),this.Su>s/2&&!d?m.needAlignCoordinate=!1:m.needAlignCoordinate=h&&p.index<=c||f&&p.index>=u,y++}return this.Mu.length=y,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,s){const n=this.Fu(e),r=this.le(),l=r+s*(r/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const s=bc(this.__-e,0,this.__),n=bc(this.__-A(this.wo),0,this.__);s!==0&&n!==0&&this.Gn(this.wu.le*s/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const s=(this.Mo-e)/this.le();this.xu=A(this.wu).Hu+s,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,r=performance.now();this.$i.Zn({Qu:l=>(l-r)/s>=1,tc:l=>{const a=(l-r)/s;return a>=1?e:n+(e-n)*a}})}bt(e,s){this.vu=!0,this.uu=e,this.cu.iu(e,s),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const s=e.G_();this.ju(this.__/s),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),s=this.Au();e!==null&&s!==null&&this.rc(new wr(e,s+this.cn.rightOffset))}lc(e){const s=new wr(e.from,e.to);this.rc(s)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:s}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const s=this.ac(e),n=this.Eu()+this.xu-s;return Math.round(1e6*n)/1e6}ju(e){const s=this.Su;this.Su=e,this.zu(),s!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(kn.ou());const e=this.Eu(),s=this.__/this.Su,n=this.xu+e,r=new wr(n-s+1,n);this._c(new kn(r))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const s=.5*this.__;this.Su>s&&(this.Su=s,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const s=this.dc();this.xu>s&&(this.xu=s,this.vu=!0)}cc(){const e=this.Bu(),s=this._u;return e===null||s===null?null:e-s-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let s=this.du.get(e.weight);return s===void 0&&(s=new Gj(n=>this.fc(n),this.q_),this.du.set(e.weight,s)),s.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const s=this.fu;this.fu=e,cf(s.lu(),this.fu.lu())||this.pu.m(),cf(s.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const s=this.Xs();if(s===null)return;const n=s.Os()-e;if(n<0){const r=this.xu-n-1;this.Jn(r)}this.zu()}Pu(){this.Lu(),this.zu()}}class s1{X(e,s,n){e.useMediaCoordinateSpace(r=>this.K(r,s,n))}gl(e,s,n){e.useMediaCoordinateSpace(r=>this.vc(r,s,n))}vc(e,s,n){}}class n1 extends s1{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:s,mediaSize:n}=e;let r=0;for(const a of this.zt.bc){if(a.Kt.length===0)continue;s.font=a.R;const o=this.wc(s,a.Kt);o>n.width?a.Zu=n.width/o:a.Zu=1,r+=a.gc*a.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((n.height-r)/2,0);break;case"bottom":l=Math.max(n.height-r,0)}s.fillStyle=this.zt.V;for(const a of this.zt.bc){s.save();let o=0;switch(this.zt.xc){case"left":s.textAlign="left",o=a.gc/2;break;case"center":s.textAlign="center",o=n.width/2;break;case"right":s.textAlign="right",o=n.width-1-a.gc/2}s.translate(o,l),s.textBaseline="top",s.font=a.R,s.scale(a.Zu,a.Zu),s.fillText(a.Kt,0,a.Sc),s.restore(),l+=a.gc*a.Zu}}wc(e,s){const n=this.kc(e.font);let r=n.get(s);return r===void 0&&(r=e.measureText(s).width,n.set(s,r)),r}kc(e){let s=this.mc.get(e);return s===void 0&&(s=new Map,this.mc.set(e,s)),s}}class r1{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new n1(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),s=this.Ft;s.yt=e.visible,s.yt&&(s.V=e.color,s.xc=e.horzAlign,s.Mc=e.vertAlign,s.bc=[{Kt:e.text,R:zn(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class i1 extends $u{constructor(e,s){super(),this.cn=s,this.wn=new r1(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var uf,df,hf,ff,pf;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(uf||(uf={}));class l1{constructor(e,s,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ve,this.Rc=new ve,this.Dc=null,this.Vc=e,this.cn=s,this.q_=n,this.Oc=new $w(this),this.yl=new t1(this,s.timeScale,this.cn.localization,n),this.vt=new Xw(this,s.crosshair),this.Bc=new Wj(s.crosshair),this.Ac=new i1(this,s.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Te.es())}Uh(){this.Nc(Te.ss())}oa(){this.Nc(new Te(1))}Gl(e){const s=this.Fc(e);this.Nc(s)}Wc(){return this.Tc}jc(e){const s=this.Tc;this.Tc=e,s!==null&&this.Gl(s.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){wt(this.cn,e),this.yc.forEach(s=>s.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,s){if(e==="left")return void this.$h({leftPriceScale:s});if(e==="right")return void this.$h({rightPriceScale:s});const n=this.Uc(e);n!==null&&(n.Dt.$h(s),this.Pc.m())}Uc(e){for(const s of this.yc){const n=s.w_(e);if(n!==null)return{Ht:s,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,s){e.Lo(s),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(s=>s.S_(e)),this.Wu()}Ic(e){const s=new Jj(this.yl,this);e!==void 0?this.yc.splice(e,0,s):this.yc.push(s);const n=e===void 0?this.yc.length-1:e,r=Te.es();return r.Nn(n,{Fn:0,Wn:!0}),this.Nc(r),s}V_(e,s,n){e.V_(s,n)}O_(e,s,n){e.O_(s,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,s){e.B_(s),this.Nc(this.Gc(e,2))}A_(e,s,n){s.Vo()||e.A_(s,n)}I_(e,s,n){s.Vo()||(e.I_(s,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,s){s.Vo()||(e.z_(s),this.Nc(this.Gc(e,2)))}E_(e,s){e.E_(s),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,s){const n=this.St();if(n.Ni()||s===0)return;const r=n.Hi();e=Math.max(1,Math.min(e,r)),n.Zu(e,s),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,s,n,r,l){this.vt.gn(e,s);let a=NaN,o=this.yl.Nu(e);const c=this.yl.Xs();c!==null&&(o=Math.min(Math.max(c.Os(),o),c.ui()));const u=r.vn(),d=u.Ct();d!==null&&(a=u.pn(s,d)),a=this.Bc.Oa(a,o,r),this.vt.kn(o,a,r),this.oa(),l||this.Rc.m(this.vt.xt(),{x:e,y:s},n)}ad(e,s,n){const r=n.vn(),l=r.Ct(),a=r.Rt(e,A(l)),o=this.yl.Va(s,!0),c=this.yl.It(A(o));this.ld(c,a,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const s=this.vt.xn(),n=this.vt.Sn();this.ld(s,n,null,e)}this.vt.Vn()}_d(e,s,n){const r=this.yl.mn(0);s!==void 0&&n!==void 0&&this.yl.bt(s,n);const l=this.yl.mn(0),a=this.yl.Eu(),o=this.yl.Xs();if(o!==null&&r!==null&&l!==null){const c=o.Kr(a),u=this.q_.key(r)>this.q_.key(l),d=e!==null&&e>a&&!u,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(n!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(d&&!f){const y=e-a;this.yl.Jn(this.yl.Hu()-y)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const s=this.yc.find(n=>n.Uo().includes(e));return s===void 0?null:s}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,s,n){const r=this.yc[0],l=this.fd(s,e,r,n);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(e){const s=this.dr(e),n=this.Cc.indexOf(e);bs(n!==-1,"Series not found"),this.Cc.splice(n,1),A(s).Zo(e),e.S&&e.S()}Xl(e,s){const n=A(this.dr(e));n.Zo(e);const r=this.Uc(s);if(r===null){const l=e.Xi();n.qo(e,s,l)}else{const l=r.Ht===n?e.Xi():void 0;r.Ht.qo(e,s,l)}}hc(){const e=Te.ss();e.$n(),this.Nc(e)}pd(e){const s=Te.ss();s.Yn(e),this.Nc(s)}Kn(){const e=Te.ss();e.Kn(),this.Nc(e)}Gn(e){const s=Te.ss();s.Gn(e),this.Nc(s)}Jn(e){const s=Te.ss();s.Jn(e),this.Nc(s)}Zn(e){const s=Te.ss();s.Zn(e),this.Nc(s)}Un(){const e=Te.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const s=this.Ec,n=this.zc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==s)this.Dc={Ps:n,Rs:s,wd:new Map};else{const l=this.Dc.wd.get(e);if(l!==void 0)return l}const r=function(l,a,o){const[c,u,d,h]=qr(l),[f,y,p,m]=qr(a),v=[rt(c+o*(f-c)),rt(u+o*(y-u)),rt(d+o*(p-d)),q0(h+o*(m-h))];return`rgba(${v[0]}, ${v[1]}, ${v[2]}, ${v[3]})`}(n,s,e/100);return this.Dc.wd.set(e,r),r}Gc(e,s){const n=new Te(s);if(e!==null){const r=this.yc.indexOf(e);n.Nn(r,{Fn:s})}return n}Fc(e,s){return s===void 0&&(s=2),this.Gc(this.dr(e),s)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(s=>s.j_().qh().bt())}fd(e,s,n,r){const l=new Uu(this,e,s,n,r),a=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(l,a),oa(a)||l.$h(e),l}Lc(e){const s=this.cn.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}}function Nc(t){return!Mt(t)&&!li(t)}function dx(t){return Mt(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(df||(df={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(hf||(hf={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(ff||(ff={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(pf||(pf={}));const mf=t=>t.getUTCFullYear();function a1(t,e,s){return e.replace(/yyyy/g,(n=>Ft(mf(n),4))(t)).replace(/yy/g,(n=>Ft(mf(n)%100,2))(t)).replace(/MMMM/g,((n,r)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,s)).replace(/MMM/g,((n,r)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,s)).replace(/MM/g,(n=>Ft((r=>r.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>Ft((r=>r.getUTCDate())(n),2))(t))}class hx{constructor(e="yyyy-MM-dd",s="default"){this.gd=e,this.Md=s}Y_(e){return a1(e,this.gd,this.Md)}}class o1{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Ft(e.getUTCHours(),2)).replace("%m",Ft(e.getUTCMinutes(),2)).replace("%s",Ft(e.getUTCSeconds(),2))}}const c1={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class u1{constructor(e={}){const s=Object.assign(Object.assign({},c1),e);this.Td=new hx(s.Sd,s.Cd),this.Pd=new o1(s.kd),this.Rd=s.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function Mi(t){return 60*t*60*1e3}function Za(t){return 60*t*1e3}const Li=[{Dd:(xf=1,1e3*xf),Vd:10},{Dd:Za(1),Vd:20},{Dd:Za(5),Vd:21},{Dd:Za(30),Vd:22},{Dd:Mi(1),Vd:30},{Dd:Mi(3),Vd:31},{Dd:Mi(6),Vd:32},{Dd:Mi(12),Vd:33}];var xf;function gf(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=Li.length-1;s>=0;--s)if(Math.floor(e.getTime()/Li[s].Dd)!==Math.floor(t.getTime()/Li[s].Dd))return Li[s].Vd;return 0}function eo(t){let e=t;if(li(t)&&(e=Vu(t)),!Nc(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(s.getTime()/1e3),Bd:e}}function yf(t){if(!dx(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function Vu(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function vf(t){li(t.time)&&(t.time=Vu(t.time))}class bf{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(vf)}(e):vf(e)}createConverterToInternalObj(e){return A(function(s){return s.length===0?null:Nc(s[0].time)||li(s[0].time)?eo:yf}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.Bd===void 0?new Date(1e3*s.Od).getTime():new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day)).getTime()}convertHorzItemToInternal(e){return dx(s=e)?yf(s):Nc(s)?eo(s):eo(Vu(s));var s}updateFormatter(e){if(!this.cn)return;const s=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new u1({Sd:s,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new hx(s,e.locale)}formatHorzItem(e){const s=e;return this.Ad.Y_(new Date(1e3*s.Od))}formatTickmark(e,s){const n=function(l,a,o){switch(l){case 0:case 10:return a?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),r=this.cn.timeScale;if(r.tickMarkFormatter!==void 0){const l=r.tickMarkFormatter(e.originalTime,n,s.locale);if(l!==null)return l}return function(l,a,o){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(o,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(e1,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,r=0){if(n.length===0)return;let l=r===0?null:n[r-1].time.Od,a=l!==null?new Date(1e3*l):null,o=0;for(let c=r;c<n.length;++c){const u=n[c],d=new Date(1e3*u.time.Od);a!==null&&(u.timeWeight=gf(d,a)),o+=u.time.Od-(l||u.time.Od),l=u.time.Od,a=d}if(r===0&&n.length>1){const c=Math.ceil(o/(n.length-1)),u=new Date(1e3*(n[0].time.Od-c));n[0].timeWeight=gf(new Date(1e3*n[0].time.Od),u)}})(e,s)}static Id(e){return wt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Rn=typeof window<"u";function Nf(){return!!Rn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function to(){return!!Rn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function wc(t){return t+t%2}function so(t,e){return t.zd-e.zd}function no(t,e,s){const n=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),s)}class d1{constructor(e,s,n,r){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=s,this.qd=n,this.rs=r}Yd(e,s){if(this.Ld!==null){if(this.Ld.ot===s)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:s,zd:e}}Vr(e,s){if(this.Ld===null||this.Ed===null||s-this.Ld.ot>50)return;let n=0;const r=no(this.Ld,this.Ed,this.Ud),l=so(this.Ld,this.Ed),a=[r],o=[l];if(n+=l,this.Nd!==null){const u=no(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(r)){const d=so(this.Ed,this.Nd);if(a.push(u),o.push(d),n+=d,this.Fd!==null){const h=no(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(r)){const f=so(this.Nd,this.Fd);a.push(h),o.push(f),n+=f}}}}let c=0;for(let u=0;u<a.length;++u)c+=o[u]/n*a[u];Math.abs(c)<this.$d||(this.Wd={zd:e,ot:s},this.Hd=c,this.jd=function(u,d){const h=Math.log(d);return Math.log(1*h/-u)/h}(Math.abs(c),this.qd))}tc(e){const s=A(this.Wd),n=e-s.ot;return s.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const s=e-A(this.Wd).ot;return Math.min(s,this.jd)}}class h1{constructor(e,s){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=s,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return K0(qr(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Ks(t,e){const s=A(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=jw(s,{options:{allowResizeObserver:!1},transform:(r,l)=>({width:Math.max(r.width,l.width),height:Math.max(r.height,l.height)})});return n.resizeCanvasElement(e),n}function Ys(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function jc(t,e,s,n){t.gl&&t.gl(e,s,n)}function Zi(t,e,s,n){t.X(e,s,n)}function kc(t,e,s,n){const r=t(s,n);for(const l of r){const a=l.gt();a!==null&&e(a)}}function f1(t){Rn&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Wu{constructor(e,s,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!to(),this.Af=r=>{this.If(r)},this.zf=r=>{if(this.Lf(r)){const l=this.Ef(r);if(++this._f,this.uf&&this._f>1){const{Nf:a}=this.Ff(Et(r),this.cf);a<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(r);if(++this.hf,this.lf&&this.hf>1){const{Nf:a}=this.Ff(Et(r),this.af);a<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=s,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const s=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",s)},this.Zf.addEventListener("mousemove",s),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.tv),this.Bf=!0}iv(e){const s=ro(e.changedTouches,A(this.Of));if(s===null||(this.Vf=Pi(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(Et(s),A(this.pf)),{nv:r,sv:l,Nf:a}=n;if(this.mf||!(a<5)){if(!this.mf){const o=.5*r,c=l>=o&&!this.cn.ev(),u=o>l&&!this.cn.rv();c||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const o=this.Ef(e,s);this.Wf(o,this.Hf.hv),tn(e)}}}lv(e){if(e.button!==0)return;const s=this.Ff(Et(e),A(this.vf)),{Nf:n}=s;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const r=this.Ef(e);this.Uf(r,this.Hf.av)}}Ff(e,s){const n=Math.abs(s.nt-e.nt),r=Math.abs(s.st-e.st);return{nv:n,sv:r,Nf:n+r}}ov(e){let s=ro(e.changedTouches,A(this.Of));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Of=null,this.Vf=Pi(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,s);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:r}=this.Ff(Et(s),this.cf);r<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&tn(e));this._f===0&&tn(e),e.touches.length===0&&this.ff&&(this.ff=!1,tn(e))}If(e){if(e.button!==0)return;const s=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),Nf()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(s,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(Et(e),this.af);n<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}else this.bf||this.Uf(s,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const s=e.changedTouches[0];this.Of=s.identifier,this.Vf=Pi(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Et(s),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),a=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",l),n.removeEventListener("touchend",a)},n.addEventListener("touchmove",l,{passive:!1}),n.addEventListener("touchend",a,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const r=this.Ef(e,s);this.Wf(r,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Et(s))}mv(e){if(e.button!==0)return;const s=this.Zf.ownerDocument.documentElement;Nf()&&s.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Et(e),this.kf&&(this.kf(),this.kf=null);{const r=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{s.removeEventListener("mousemove",r),s.removeEventListener("mouseup",l)},s.addEventListener("mousemove",r),s.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Et(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,s=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",s)},this.gf=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}to()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),f1(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const s=wf(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,s),tn(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const s=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,st:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Tf=wf(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const s=this.Ef(e);this.Uf(s,this.Hf.Pv),this.Bf=!to()}vv(e){const s=ro(e.touches,A(this.Of));if(s===null)return;const n=this.Ef(e,s);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Pi(e)<this.Vf+500}Wf(e,s){s&&s.call(this.Hf,e)}Uf(e,s){s&&s.call(this.Hf,e)}Ef(e,s){const n=s||e,r=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-r.left,localY:n.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&tn(e)}}}}function wf(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function tn(t){t.cancelable&&t.preventDefault()}function Et(t){return{nt:t.pageX,st:t.pageY}}function Pi(t){return t.timeStamp||performance.now()}function ro(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}function zi(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function p1(t,e,s){for(const n of t){const r=n.gt();if(r!==null&&r.wr){const l=r.wr(e,s);if(l!==null)return{Bv:n,Iv:l}}}return null}function io(t,e){return s=>{var n,r,l,a;return((r=(n=s.Dt())===null||n===void 0?void 0:n.Pa())!==null&&r!==void 0?r:"")!==e?[]:(a=(l=s.da)===null||l===void 0?void 0:l.call(s,t))!==null&&a!==void 0?a:[]}}function jf(t,e,s,n){if(!t.length)return;let r=0;const l=s/2,a=t[0].At(n,!0);let o=e===1?l-(t[0].Vi()-a/2):t[0].Vi()-a/2-l;o=Math.max(0,o);for(let c=1;c<t.length;c++){const u=t[c],d=t[c-1],h=d.At(n,!1),f=u.Vi(),y=d.Vi();if(e===1?f>y-h:f<y+h){const p=y-h*e;u.Oi(p);const m=p-e*h/2;if((e===1?m<0:m>s)&&o>0){const v=e===1?-1-m:m-s,g=Math.min(v,o);for(let x=r;x<t.length;x++)t[x].Oi(t[x].Vi()+e*g);o-=g}}else r=c,o=e===1?y-h-f:f-(y+h)}}class kf{constructor(e,s,n,r){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Xr(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=s,this.ko=s.layout,this.Oc=n,this.qv=r==="left",this.Yv=io("normal",r),this.Zv=io("top",r),this.Xv=io("bottom",r),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Ks(this.Kv,le({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=Ks(this.Kv,le({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const o={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Wu(this.Jv.canvasElement,o,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ys(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ys(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const s=this.ap(),n=A(this.Gv.canvasElement.getContext("2d"));n.save();const r=this.Li.Ha();n.font=this._p(),r.length>0&&(e=Math.max(this.Fv.xi(n,r[0].so),this.Fv.xi(n,r[r.length-1].so)));const l=this.up();for(let u=l.length;u--;){const d=this.Fv.xi(n,l[u].Kt());d>e&&(e=d)}const a=this.Li.Ct();if(a!==null&&this.Ev!==null&&(o=this.cn.crosshair).mode!==2&&o.horzLine.visible&&o.horzLine.labelVisible){const u=this.Li.pn(1,a),d=this.Li.pn(this.Ev.height-2,a);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(u,d))+.11111111111111,a)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(u,d))-.11111111111111,a)))}var o;n.restore();const c=e||34;return wc(Math.ceil(s.C+s.T+s.A+s.I+5+c))}cp(e){this.Ev!==null&&Is(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return A(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,A(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=Hs(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const s=Hs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.Mp(s),this.tn.bp(s,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,s.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;s.O_(n,r,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),s=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(s,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const s=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,s.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],s=this.Li===null?void 0:this.Li;return(n=>{for(let r=0;r<n.length;++r){const l=n[r].Rn(this.tn.fp(),s);for(let a=0;a<l.length;a++)e.push(l[a])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:s}){const{width:n,height:r}=s,l=this.tn.fp().$t(),a=l.q(),o=l.bd();a===o?la(e,0,0,n,r,a):Y0(e,0,0,n,r,a,o)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const r=Math.max(1,Math.floor(this.ap().C*n));let l;l=this.qv?s.width-r:0,e.fillRect(l,0,r,s.height)}wp(e){if(this.Ev===null||this.Li===null)return;const s=this.Li.Ha(),n=this.Li.W(),r=this.ap(),l=this.qv?this.Ev.width-r.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:o,verticalPixelRatio:c})=>{a.fillStyle=n.borderColor;const u=Math.max(1,Math.floor(c)),d=Math.floor(.5*c),h=Math.round(r.T*o);a.beginPath();for(const f of s)a.rect(Math.floor(l*o),Math.round(f.Ea*c)-d,h,u);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{var o;a.font=this._p(),a.fillStyle=(o=n.textColor)!==null&&o!==void 0?o:this.ko.textColor,a.textAlign=this.qv?"right":"left",a.textBaseline="middle";const c=this.qv?Math.round(l-r.A):Math.round(l+r.T+r.A),u=s.map(d=>this.Fv.Mi(a,d.so));for(let d=s.length;d--;){const h=s[d];a.fillText(h.so,c,h.Ea+u[d])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],s=this.Li.Uo().slice(),n=this.tn.fp(),r=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(a=>{n.vr(a)&&s.push(a)});const l=this.Li;s.forEach(a=>{a.Rn(n,l).forEach(o=>{o.Oi(null),o.Bi()&&e.push(o)})}),e.forEach(a=>a.Oi(a.ki())),this.Li.W().alignLabels&&this.yp(e,r)}yp(e,s){if(this.Ev===null)return;const n=this.Ev.height/2,r=e.filter(a=>a.ki()<=n),l=e.filter(a=>a.ki()>n);r.sort((a,o)=>o.ki()-a.ki()),l.sort((a,o)=>a.ki()-o.ki());for(const a of e){const o=Math.floor(a.At(s)/2),c=a.ki();c>-o&&c<o&&a.Oi(o),c>this.Ev.height-o&&c<this.Ev.height+o&&a.Oi(this.Ev.height-o)}jf(r,1,this.Ev.height,s),jf(l,-1,this.Ev.height,s)}gp(e){if(this.Ev===null)return;const s=this.up(),n=this.ap(),r=this.qv?"right":"left";s.forEach(l=>{l.Ai()&&l.gt(A(this.Li)).X(e,n,this.Fv,r)})}Mp(e){if(this.Ev===null||this.Li===null)return;const s=this.tn.$v().$t(),n=[],r=this.tn.fp(),l=s.Zc().Rn(r,this.Li);l.length&&n.push(l);const a=this.ap(),o=this.qv?"right":"left";n.forEach(c=>{c.forEach(u=>{u.gt(A(this.Li)).X(e,a,this.Fv,o)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return zn(this.ko.fontSize,this.ko.fontFamily)}}function m1(t,e){var s,n;return(n=(s=t.ua)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function Ri(t,e){var s,n;return(n=(s=t.Pn)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function x1(t,e){var s,n;return(n=(s=t.Ji)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}function g1(t,e){var s,n;return(n=(s=t.aa)===null||s===void 0?void 0:s.call(t,e))!==null&&n!==void 0?n:[]}class Hu{constructor(e,s){this.Ev=le({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ve,this.Op=new ve,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=s,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=Ks(n,le({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=Ks(n,le({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Wu(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ys(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ys(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return A(this.Np)}qp(e){var s,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Hu.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(s=this.Pp)!==null&&s!==void 0?s:new h1(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(A(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(A(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const s=e.localX,n=e.localY;this.Gp(s,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var s;if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e);const l=this.wr(n,r);this.Qd.Qp((s=l==null?void 0:l.Lv)!==null&&s!==void 0?s:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const s={x:e.localX,y:e.localY};this.rm(s,s,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,s){if(!this.Qd.W().handleScale.pinch)return;const n=5*(s-this.Bp);this.Bp=s,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const s=this.$i().Zc();this.Ip!==null&&s.yt()&&(this.Lp={x:s.Yt(),y:s.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const s=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const r=A(this.Lp),l=r.x+(s-this.Ip.x),a=r.y+(n-this.Ip.y);this.Gp(l,a,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,s){const n=this.Np;return n===null?null:function(r,l,a){const o=r.Uo(),c=function(u,d,h){var f,y;let p,m;for(const x of u){const N=(y=(f=x.va)===null||f===void 0?void 0:f.call(x,d,h))!==null&&y!==void 0?y:[];for(const j of N)v=j.zOrder,(!(g=p==null?void 0:p.zOrder)||v==="top"&&g!=="top"||v==="normal"&&g==="bottom")&&(p=j,m=x)}var v,g;return p&&m?{zv:p,Hc:m}:null}(o,l,a);if((c==null?void 0:c.zv.zOrder)==="top")return zi(c);for(const u of o){if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&!c.zv.isBackground)return zi(c);const d=p1(u.Pn(r),l,a);if(d!==null)return{Hc:u,Bv:d.Bv,Iv:d.Iv};if(c&&c.Hc===u&&c.zv.zOrder!=="bottom"&&c.zv.isBackground)return zi(c)}return c!=null&&c.zv?zi(c):null}(n,e,s)}_m(e,s){A(s==="left"?this.Cp:this.Tp).cp(le({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Is(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=A(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const s of e.Ba())if(e.vr(s)){const n=s.Dt();n!==null&&e.P_(n),s.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=Hs(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.mp(r)}),this.Np&&(this.fm(n,m1),this.vm(n),this.pm(n),this.fm(n,Ri),this.fm(n,x1)))}this.Jv.applySuggestedBitmapSize();const s=Hs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.bm(s),this.fm(s,g1))}wm(){return this.Cp}gm(){return this.Tp}bp(e,s){this.fm(e,s)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,s){const n=s.localX,r=s.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:r},s)}mp({context:e,bitmapSize:s}){const{width:n,height:r}=s,l=this.$i(),a=l.q(),o=l.bd();a===o?la(e,0,0,n,r,o):Y0(e,0,0,n,r,a,o)}vm(e){const s=A(this.Np).j_().qh().gt();s!==null&&s.X(e,!1)}pm(e){const s=this.$i().Yc();this.Mm(e,Ri,jc,s),this.Mm(e,Ri,Zi,s)}bm(e){this.Mm(e,Ri,Zi,this.$i().Zc())}fm(e,s){const n=A(this.Np).Uo();for(const r of n)this.Mm(e,s,jc,r);for(const r of n)this.Mm(e,s,Zi,r)}Mm(e,s,n,r){const l=A(this.Np),a=l.$t().Wc(),o=a!==null&&a.Hc===r,c=a!==null&&o&&a.Iv!==void 0?a.Iv.Mr:void 0;kc(s,u=>n(u,e,o,c),r,l)}Zp(){if(this.Np===null)return;const e=this.Qd,s=this.Np.R_().W().visible,n=this.Np.D_().W().visible;s||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const r=e.$t().ud();s&&this.Cp===null&&(this.Cp=new kf(this,e.W(),r,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new kf(this,e.W(),r,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,s,n){this.$i().ld(this.Sm(e),this.km(s),n,A(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,s,n){this.Ip=e,this.zp=!1,this.Gp(s.x,s.y,n);const r=this.$i().Zc();this.Lp={x:r.Yt(),y:r.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const s=this.$i(),n=this.fp();if(s.z_(n,n.vn()),this.Rp=null,this.Dp=!1,s.ed(),this.Ep!==null){const r=performance.now(),l=s.St();this.Ep.Vr(l.Hu(),r),this.Ep.Qu(r)||s.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)A(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const s=this.$i(),n=s.St();if(n.Ni())return;const r=this.Qd.W(),l=r.handleScroll,a=r.kineticScroll;if((!l.pressedMouseMove||e.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!e.Dv))return;const o=this.Np.vn(),c=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:c,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&a.touch||!e.Dv&&a.mouse){const u=n.le();this.Ep=new d1(.2/u,7/u,.997,15/u),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;o.Ni()||s.A_(this.Np,o,e.localY),s.nd(e.localX),this.Dp=!0}this.Dp&&(o.Ni()||s.I_(this.Np,o,e.localY),s.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),c))}}class Sf{constructor(e,s,n,r,l){this.ft=!0,this.Ev=le({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=s,this.Tm=r,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Ks(this.Kv,le({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ys(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Is(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const s=Hs(this.Gv);s!==null&&s.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}Ie({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:r}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*n),a=Math.floor(this.Oc.W().C*r),o=this.qv?s.width-l:0;e.fillRect(o,0,l,a)}mp({context:e,bitmapSize:s}){la(e,0,0,s.width,s.height,this.Pm())}}function qu(t){return e=>{var s,n;return(n=(s=e.fa)===null||s===void 0?void 0:s.call(e,t))!==null&&n!==void 0?n:[]}}const y1=qu("normal"),v1=qu("top"),b1=qu("bottom");class N1{constructor(e,s){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=le({width:0,height:0}),this.Om=new ve,this.Fv=new Xr(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=s,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Ks(this.Im,le({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=Ks(this.Im,le({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Wu(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ys(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ys(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const s=this.Qd.$t();!s.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&s.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,s,n){Is(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(le({width:s,height:e.height})),this.Dm!==null&&this.Dm.cp(le({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,s,n){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,s,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=Hs(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r),this.$m(n,b1)}),this.wp(n),this.$m(n,y1)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const s=Hs(this.Jv);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],s),this.$m(s,v1))}$m(e,s){const n=this.Qd.$t().wt();for(const r of n)kc(s,l=>jc(l,e,!1,void 0),r,void 0);for(const r of n)kc(s,l=>Zi(l,e,!1,void 0),r,void 0)}mp({context:e,bitmapSize:s}){la(e,0,0,s.width,s.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const r=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,s.width,r)}}wp(e){const s=this.Qd.$t().St(),n=s.Ha();if(!n||n.length===0)return;const r=this.q_.maxTickMarkWeight(n),l=this.jm(),a=s.W();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:c,verticalPixelRatio:u})=>{o.strokeStyle=this.qm(),o.fillStyle=this.qm();const d=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);o.beginPath();const f=Math.round(l.T*u);for(let y=n.length;y--;){const p=Math.round(n[y].coord*c);o.rect(p-h,0,d,f)}o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{const c=l.C+l.T+l.L+l.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this._p();for(const u of n)if(u.weight<r){const d=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,d,c)}this.Qd.W().timeScale.allowBoldLabels&&(o.font=this.Zm());for(const u of n)if(u.weight>=r){const d=u.needAlignCoordinate?this.Ym(o,u.coord,u.label):u.coord;o.fillText(u.label,d,c)}})}Ym(e,s,n){const r=this.Fv.xi(e,n),l=r/2,a=Math.floor(s-l)+.5;return a<0?s+=Math.abs(0-a):a+r>this.Ev.width&&(s-=Math.abs(this.Ev.width-(a+r))),s}Um(e,s){const n=this.jm();for(const r of e)for(const l of r.Qi())l.gt().X(s,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return zn(this.j(),this.cn.fontFamily)}Zm(){return zn(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Xr,Hm:0});const e=this.k,s=this._p();if(e.R!==s){const n=this.j();e.P=n,e.R=s,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),s=e.W();s.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),s.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},r=()=>s.leftPriceScale.borderVisible&&e.St().W().borderVisible,l=()=>e.bd();s.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new Sf("left",s,n,r,l),this.Bm.appendChild(this.Rm.lp())),s.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new Sf("right",s,n,r,l),this.Am.appendChild(this.Dm.lp()))}}const w1=!!Rn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Rn&&(!((lo=navigator==null?void 0:navigator.userAgentData)===null||lo===void 0)&&lo.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var lo;class j1{constructor(e,s,n){var r;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ve,this.Op=new ve,this.Rc=new ve,this.ib=null,this.nb=null,this.Jd=e,this.cn=s,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(r=this.Xd).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ao(this.cn)&&this.hb(!0),this.$i=new l1(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new N1(this,this.q_),this.sb.appendChild(this.ab.lp());const l=s.autoSize&&this.ob();let a=this.cn.width,o=this.cn.height;if(l||a===0||o===0){const c=e.getBoundingClientRect();a=a||c.width,o=o||c.height}this._b(a,o),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],A(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,s,n=!1){if(this.ho===s&&this.__===e)return;const r=function(o){const c=Math.floor(o.width),u=Math.floor(o.height);return le({width:c-c%2,height:u-u%2})}(le({width:e,height:s}));this.ho=r.height,this.__=r.width;const l=this.ho+"px",a=this.__+"px";A(this.Xd).style.height=l,A(this.Xd).style.width=a,this.sb.style.height=l,this.sb.style.width=a,n?this.mb(Te.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Te.es());for(let s=0;s<this.Xm.length;s++)this.Xm[s].vp(e.Hn(s).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const s=ao(this.cn);this.$i.$h(e);const n=ao(this.cn);n!==s&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=A(s.getContext("2d"));return this.gb(n),s}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:A(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Fe(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let s=0,n=0;const r=this.Xm[0],l=(o,c)=>{let u=0;for(let d=0;d<this.Xm.length;d++){const h=this.Xm[d],f=A(o==="left"?h.wm():h.gm()),y=f.xp();e!==null&&f.Sp(e,c,u),u+=y.height}};this.xb()&&(l("left",0),s+=A(r.wm()).xp().width);for(let o=0;o<this.Xm.length;o++){const c=this.Xm[o],u=c.xp();e!==null&&c.Sp(e,s,n),n+=u.height}s+=r.xp().width,this.Sb()&&(l("right",s),s+=A(r.gm()).xp().width);const a=(o,c,u)=>{A(o==="left"?this.ab.Lm():this.ab.Em()).Sp(A(e),c,u)};if(this.cn.timeScale.visible){const o=this.ab.xp();if(e!==null){let c=0;this.xb()&&(a("left",c,n),c=A(r.wm()).xp().width),this.ab.Sp(e,c,n),c+=o.width,this.Sb()&&a("right",c,n)}n+=o.height}return le({width:s,height:n})}Pb(){let e=0,s=0,n=0;for(const p of this.Xm)this.xb()&&(s=Math.max(s,A(p.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,A(p.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=p.M_();s=wc(s),n=wc(n);const r=this.__,l=this.ho,a=Math.max(r-s-n,0),o=this.cn.timeScale.visible;let c=o?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;const d=0+c,h=l<d?0:l-d,f=h/e;let y=0;for(let p=0;p<this.Xm.length;++p){const m=this.Xm[p];m.qp(this.$i.qc()[p]);let v=0,g=0;g=p===this.Xm.length-1?h-y:Math.round(m.M_()*f),v=Math.max(g,2),y+=v,m.cp(le({width:a,height:v})),this.xb()&&m._m(s,"left"),this.Sb()&&m._m(n,"right"),m.fp()&&this.$i.Kc(m.fp(),v)}this.ab.Fm(le({width:o?a:0,height:c}),o?s:0,o?n:0),this.$i.S_(a),this.Gm!==s&&(this.Gm=s),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return w1?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const s=this.Rb(e),n=s*e.deltaX/100,r=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(r)*Math.min(1,Math.abs(r)),a=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(a,l)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,s){var n;const r=e.jn();r===3&&this.Db(),r!==3&&r!==2||(this.Vb(e),this.Ob(e,s),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,s),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,s){for(const n of e.Qn())this.ns(n,s)}Vb(e){const s=this.$i.qc();for(let n=0;n<s.length;n++)e.Hn(n).Wn&&s[n].N_()}ns(e,s){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(s)||n.Jn(e.Vt.tc(s))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(s=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,s);for(const r of n.Qn())if(r.qn===5&&!r.Vt.Qu(s)){this.$t().Zn(r.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),s=e.length,n=this.Xm.length;for(let r=s;r<n;r++){const l=Fe(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let r=n;r<s;r++){const l=new Hu(this,e[r]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let r=0;r<s;r++){const l=e[r],a=this.Xm[r];a.fp()!==l?a.qp(l):a.Up()}this.cb(),this.Pb()}Ib(e,s,n){var r;const l=new Map;e!==null&&this.$i.wt().forEach(d=>{const h=d.In().ll(e);h!==null&&l.set(d,h)});let a;if(e!==null){const d=(r=this.$i.St().Ui(e))===null||r===void 0?void 0:r.originalTime;d!==void 0&&(a=d)}const o=this.$t().Wc(),c=o!==null&&o.Hc instanceof Uu?o.Hc:void 0,u=o!==null&&o.Iv!==void 0?o.Iv.gr:void 0;return{zb:a,ee:e??void 0,Lb:s??void 0,Eb:c,Nb:l,Fb:u,Wb:n??void 0}}Bb(e,s,n){this.Vp.m(()=>this.Ib(e,s,n))}Ab(e,s,n){this.Op.m(()=>this.Ib(e,s,n))}lb(e,s,n){this.Rc.m(()=>this.Ib(e,s,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const s=e.find(n=>n.target===this.Jd);s&&this._b(s.contentRect.width,s.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ao(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function k1(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function fx(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]])}return s}function Cf(t,e,s,n){const r=s.value,l={ee:e,ot:t,Vt:[r,r,r,r],zb:n};return s.color!==void 0&&(l.V=s.color),l}function S1(t,e,s,n){const r=s.value,l={ee:e,ot:t,Vt:[r,r,r,r],zb:n};return s.lineColor!==void 0&&(l.lt=s.lineColor),s.topColor!==void 0&&(l.Ps=s.topColor),s.bottomColor!==void 0&&(l.Rs=s.bottomColor),l}function C1(t,e,s,n){const r=s.value,l={ee:e,ot:t,Vt:[r,r,r,r],zb:n};return s.topLineColor!==void 0&&(l.Re=s.topLineColor),s.bottomLineColor!==void 0&&(l.De=s.bottomLineColor),s.topFillColor1!==void 0&&(l.ke=s.topFillColor1),s.topFillColor2!==void 0&&(l.ye=s.topFillColor2),s.bottomFillColor1!==void 0&&(l.Ce=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(l.Te=s.bottomFillColor2),l}function E1(t,e,s,n){const r={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(r.V=s.color),r}function _1(t,e,s,n){const r={ee:e,ot:t,Vt:[s.open,s.high,s.low,s.close],zb:n};return s.color!==void 0&&(r.V=s.color),s.borderColor!==void 0&&(r.Ot=s.borderColor),s.wickColor!==void 0&&(r.Xh=s.wickColor),r}function T1(t,e,s,n,r){const l=Fe(r)(s),a=Math.max(...l),o=Math.min(...l),c=l[l.length-1],u=[c,a,o,c],d=s,{time:h,color:f}=d;return{ee:e,ot:t,Vt:u,zb:n,$e:fx(d,["time","color"]),V:f}}function Ai(t){return t.Vt!==void 0}function Ef(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Cs(t){return(e,s,n,r,l,a)=>function(o,c){return c?c(o):(u=o).open===void 0&&u.value===void 0;var u}(n,a)?Ef({ot:e,ee:s,zb:r},n):Ef(t(e,s,n,r,l),n)}function _f(t){return{Candlestick:Cs(_1),Bar:Cs(E1),Area:Cs(S1),Baseline:Cs(C1),Histogram:Cs(Cf),Line:Cs(Cf),Custom:Cs(T1)}[t]}function Tf(t){return{ee:0,Hb:new Map,la:t}}function Mf(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function Lf(t){let e;return t.forEach(s=>{e===void 0&&(e=s.zb)}),Fe(e)}class M1{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,s){let n=this.qb.size!==0,r=!1;const l=this.Yb.get(e);if(l!==void 0)if(this.Yb.size===1)n=!1,r=!0,this.qb.clear();else for(const c of this.Xb)c.pointData.Hb.delete(e)&&(r=!0);let a=[];if(s.length!==0){const c=s.map(y=>y.time),u=this.q_.createConverterToInternalObj(s),d=_f(e.Qh()),h=e.Ca(),f=e.Ta();a=s.map((y,p)=>{const m=u(y.time),v=this.q_.key(m);let g=this.qb.get(v);g===void 0&&(g=Tf(m),this.qb.set(v,g),r=!0);const x=d(m,g.ee,y,c[p],h,f);return g.Hb.set(e,x),x})}n&&this.Gb(),this.Jb(e,a);let o=-1;if(r){const c=[];this.qb.forEach(u=>{c.push({timeWeight:0,time:u.la,pointData:u,originalTime:Lf(u.Hb)})}),c.sort((u,d)=>this.q_.key(u.time)-this.q_.key(d.time)),o=this.Qb(c)}return this.tw(e,o,function(c,u,d){const h=Mf(c,d),f=Mf(u,d);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),l,this.q_))}vd(e){return this.Kb(e,[])}iw(e,s){const n=s;(function(m){m.zb===void 0&&(m.zb=m.time)})(n),this.q_.preprocessData(s);const r=this.q_.createConverterToInternalObj([s])(s.time),l=this.Zb.get(e);if(l!==void 0&&this.q_.key(r)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${r}`);let a=this.qb.get(this.q_.key(r));const o=a===void 0;a===void 0&&(a=Tf(r),this.qb.set(this.q_.key(r),a));const c=_f(e.Qh()),u=e.Ca(),d=e.Ta(),h=c(r,a.ee,s,n.zb,u,d);a.Hb.set(e,h),this.nw(e,h);const f={ta:Ai(h)};if(!o)return this.tw(e,-1,f);const y={timeWeight:0,time:a.la,pointData:a,originalTime:Lf(a.Hb)},p=ai(this.Xb,this.q_.key(y.time),(m,v)=>this.q_.key(m.time)<v);this.Xb.splice(p,0,y);for(let m=p;m<this.Xb.length;++m)oo(this.Xb[m].pointData,m);return this.q_.fillWeightsForPoints(this.Xb,p),this.tw(e,p,f)}nw(e,s){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const r=n.length!==0?n[n.length-1]:null;r===null||this.q_.key(s.ot)>this.q_.key(r.ot)?Ai(s)&&n.push(s):Ai(s)?n[n.length-1]=s:n.splice(-1,1),this.Zb.set(e,s.ot)}Jb(e,s){s.length!==0?(this.Yb.set(e,s.filter(Ai)),this.Zb.set(e,s[s.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let s=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const r=this.Xb[n],l=e[n];if(this.q_.key(r.time)!==this.q_.key(l.time)){s=n;break}l.timeWeight=r.timeWeight,oo(l.pointData,n)}if(s===-1&&this.Xb.length!==e.length&&(s=Math.min(this.Xb.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)oo(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,s),this.Xb=e,s}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].ee))}),e}tw(e,s,n){const r={ew:new Map,St:{Eu:this.sw()}};if(s!==-1)this.Yb.forEach((l,a)=>{r.ew.set(a,{$e:l,rw:a===e?n:void 0})}),this.Yb.has(e)||r.ew.set(e,{$e:[],rw:n}),r.St.hw=this.Xb,r.St.lw=s;else{const l=this.Yb.get(e);r.ew.set(e,{$e:l||[],rw:n})}return r}}function oo(t,e){t.ee=e,t.Hb.forEach(s=>{s.ee=e})}function Ku(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function Pf(t){const e=Ku(t);return t.V!==void 0&&(e.color=t.V),e}function L1(t){const e=Ku(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function P1(t){const e=Ku(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function px(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function z1(t){const e=px(t);return t.V!==void 0&&(e.color=t.V),e}function R1(t){const e=px(t),{V:s,Ot:n,Xh:r}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),r!==void 0&&(e.wickColor=r),e}function Sc(t){return{Area:L1,Line:Pf,Baseline:P1,Histogram:Pf,Bar:z1,Candlestick:R1,Custom:A1}[t]}function A1(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const O1={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},I1={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},$1={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ou,attributionLogo:!0},co={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},B1={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},F1={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Ou,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function zf(){return{width:0,height:0,autoSize:!1,layout:$1,crosshair:O1,grid:I1,overlayPriceScales:Object.assign({},co),leftPriceScale:Object.assign(Object.assign({},co),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},co),{visible:!0}),timeScale:B1,watermark:F1,localization:{locale:Rn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class D1{constructor(e,s){this.aw=e,this.ow=s}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return oa(this.ow)?this.aw.Mb(this.ow):0}Li(){return A(this.aw.$t().Uc(this.ow)).Dt}}function Rf(t,e,s){const n=fx(t,["time","originalTime"]),r=Object.assign({time:e},n);return s!==void 0&&(r.originalTime=s),r}const U1={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class V1{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class W1{constructor(e,s,n,r,l){this.uw=new ve,this.Es=e,this.cw=s,this.dw=n,this.q_=l,this.fw=r}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().Rt(e,s.Vt)}coordinateToPrice(e){const s=this.Es.Ct();return s===null?null:this.Es.Dt().pn(e,s.Vt)}barsInLogicalRange(e){if(e===null)return null;const s=new kn(new wr(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const r=n.ll(s.Os(),1),l=n.ll(s.ui(),-1),a=A(n.el()),o=A(n.An());if(r!==null&&l!==null&&r.ee>l.ee)return{barsBefore:e.from-a,barsAfter:o-e.to};const c={barsBefore:r===null||r.ee===a?e.from-a:r.ee-a,barsAfter:l===null||l.ee===o?o-e.to:o-l.ee};return r!==null&&l!==null&&(c.from=r.zb,c.to=l.zb),c}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,s){const n=this.Es.In().ll(e,s);return n===null?null:Sc(this.seriesType())(n)}data(){const e=Sc(this.seriesType());return this.Es.In().ne().map(s=>e(s))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const s=e.map(n=>Rf(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(s)}markers(){return this.Es.sa().map(e=>Rf(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Bt(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const s=wt(Bt(U1),e),n=this.Es.ea(s);return new V1(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class H1{constructor(e,s,n){this.ww=new ve,this.mu=new ve,this.Om=new ve,this.$i=e,this.yl=e.St(),this.ab=s,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,s){s?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(s);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){bs(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const s=this.$i.St();return s.Ni()?null:s.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const s=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(s,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const s=this.$i.St(),n=s.Nu(e),r=s.Ui(n);return r===null?null:r.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Bt(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function q1(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const r=Math.round(s);if(Math.abs(r-s)<1e-8)return n;s*=10}return n}(e.minMove))}function Af(t){return function(e){if(Ci(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:r}=e.handleScale;Ci(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),Ci(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const s=e.handleScroll;Ci(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class K1{constructor(e,s,n){this.Sw=new Map,this.kw=new Map,this.yw=new ve,this.Cw=new ve,this.Tw=new ve,this.Pw=new M1(s);const r=n===void 0?Bt(zf()):wt(Bt(zf()),Af(n));this.q_=s,this.aw=new j1(e,r,s),this.aw.lm().l(a=>{this.yw.M()&&this.yw.m(this.Rw(a()))},this),this.aw.am().l(a=>{this.Cw.M()&&this.Cw.m(this.Rw(a()))},this),this.aw.Xc().l(a=>{this.Tw.M()&&this.Tw.m(this.Rw(a()))},this);const l=this.aw.$t();this.Dw=new H1(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,s,n){this.autoSizeActive()||this.aw._b(e,s,n)}addCustomSeries(e,s){const n=xn(e),r=Object.assign(Object.assign({},V0),n.defaultOptions());return this.Vw("Custom",r,s,n)}addAreaSeries(e){return this.Vw("Area",Mw,e)}addBaselineSeries(e){return this.Vw("Baseline",Lw,e)}addBarSeries(e){return this.Vw("Bar",_w,e)}addCandlestickSeries(e={}){return function(s){s.borderColor!==void 0&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),s.wickColor!==void 0&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor)}(e),this.Vw("Candlestick",Ew,e)}addHistogramSeries(e){return this.Vw("Histogram",Pw,e)}addLineSeries(e){return this.Vw("Line",Tw,e)}removeSeries(e){const s=Fe(this.Sw.get(e)),n=this.Pw.vd(s);this.aw.$t().vd(s),this.Ow(n),this.Sw.delete(e),this.kw.delete(s)}pw(e,s){this.Ow(this.Pw.Kb(e,s))}bw(e,s){this.Ow(this.Pw.iw(e,s))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new D1(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(Af(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,s,n){const r=this.Sw.get(n);if(r===void 0)return;const l=this.aw.$t().dr(r);l!==null&&this.aw.$t().ad(e,s,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,s,n={},r){q1(n.priceFormat);const l=wt(Bt(W0),Bt(s),n),a=this.aw.$t().dd(e,l,r),o=new W1(a,this,this,this,this.q_);return this.Sw.set(o,a),this.kw.set(a,o),o}Ow(e){const s=this.aw.$t();s._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,r)=>r.J(n.$e,n.rw)),s.Wu()}Bw(e){return Fe(this.kw.get(e))}Rw(e){const s=new Map;e.Nb.forEach((r,l)=>{const a=l.Qh(),o=Sc(a)(r);if(a!=="Custom")bs(k1(o));else{const c=l.Ta();bs(!c||c(o)===!1)}s.set(this.Bw(l),o)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:s,sourceEvent:e.Wb}}}function Y1(t,e,s){let n;if(li(t)){const l=document.getElementById(t);bs(l!==null,`Cannot find element in DOM with id=${t}`),n=l}else n=t;const r=new K1(n,e,s);return e.setOptions(r.options()),r}function mx(t,e){return Y1(t,new bf,bf.Id(e))}Object.assign(Object.assign({},W0),V0);const Rt=Object.create(null);Rt.open="0";Rt.close="1";Rt.ping="2";Rt.pong="3";Rt.message="4";Rt.upgrade="5";Rt.noop="6";const el=Object.create(null);Object.keys(Rt).forEach(t=>{el[Rt[t]]=t});const Cc={type:"error",data:"parser error"},xx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",gx=typeof ArrayBuffer=="function",yx=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Yu=({type:t,data:e},s,n)=>xx&&e instanceof Blob?s?n(e):Of(e,n):gx&&(e instanceof ArrayBuffer||yx(e))?s?n(e):Of(new Blob([e]),n):n(Rt[t]+(e||"")),Of=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function If(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let uo;function X1(t,e){if(xx&&t.data instanceof Blob)return t.data.arrayBuffer().then(If).then(e);if(gx&&(t.data instanceof ArrayBuffer||yx(t.data)))return e(If(t.data));Yu(t,!1,s=>{uo||(uo=new TextEncoder),e(uo.encode(s))})}const $f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<$f.length;t++)cr[$f.charCodeAt(t)]=t;const Q1=t=>{let e=t.length*.75,s=t.length,n,r=0,l,a,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(n=0;n<s;n+=4)l=cr[t.charCodeAt(n)],a=cr[t.charCodeAt(n+1)],o=cr[t.charCodeAt(n+2)],c=cr[t.charCodeAt(n+3)],d[r++]=l<<2|a>>4,d[r++]=(a&15)<<4|o>>2,d[r++]=(o&3)<<6|c&63;return u},J1=typeof ArrayBuffer=="function",Xu=(t,e)=>{if(typeof t!="string")return{type:"message",data:vx(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:G1(t.substring(1),e)}:el[s]?t.length>1?{type:el[s],data:t.substring(1)}:{type:el[s]}:Cc},G1=(t,e)=>{if(J1){const s=Q1(t);return vx(s,e)}else return{base64:!0,data:t}},vx=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},bx="",Z1=(t,e)=>{const s=t.length,n=new Array(s);let r=0;t.forEach((l,a)=>{Yu(l,!1,o=>{n[a]=o,++r===s&&e(n.join(bx))})})},ek=(t,e)=>{const s=t.split(bx),n=[];for(let r=0;r<s.length;r++){const l=Xu(s[r],e);if(n.push(l),l.type==="error")break}return n};function tk(){return new TransformStream({transform(t,e){X1(t,s=>{const n=s.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const l=new DataView(r.buffer);l.setUint8(0,126),l.setUint16(1,n)}else{r=new Uint8Array(9);const l=new DataView(r.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(s)})}})}let ho;function Oi(t){return t.reduce((e,s)=>e+s.length,0)}function Ii(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)s[r]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function sk(t,e){ho||(ho=new TextDecoder);const s=[];let n=0,r=-1,l=!1;return new TransformStream({transform(a,o){for(s.push(a);;){if(n===0){if(Oi(s)<1)break;const c=Ii(s,1);l=(c[0]&128)===128,r=c[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(Oi(s)<2)break;const c=Ii(s,2);r=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Oi(s)<8)break;const c=Ii(s,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){o.enqueue(Cc);break}r=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(Oi(s)<r)break;const c=Ii(s,r);o.enqueue(Xu(l?c:ho.decode(c),e)),n=0}if(r===0||r>t){o.enqueue(Cc);break}}}})}const Nx=4;function je(t){if(t)return nk(t)}function nk(t){for(var e in je.prototype)t[e]=je.prototype[e];return t}je.prototype.on=je.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};je.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};je.prototype.off=je.prototype.removeListener=je.prototype.removeAllListeners=je.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,r=0;r<s.length;r++)if(n=s[r],n===e||n.fn===e){s.splice(r,1);break}return s.length===0&&delete this._callbacks["$"+t],this};je.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,r=s.length;n<r;++n)s[n].apply(this,e)}return this};je.prototype.emitReserved=je.prototype.emit;je.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};je.prototype.hasListeners=function(t){return!!this.listeners(t).length};const da=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),at=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),rk="arraybuffer";function wx(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const ik=at.setTimeout,lk=at.clearTimeout;function ha(t,e){e.useNativeTimers?(t.setTimeoutFn=ik.bind(at),t.clearTimeoutFn=lk.bind(at)):(t.setTimeoutFn=at.setTimeout.bind(at),t.clearTimeoutFn=at.clearTimeout.bind(at))}const ak=1.33;function ok(t){return typeof t=="string"?ck(t):Math.ceil((t.byteLength||t.size)*ak)}function ck(t){let e=0,s=0;for(let n=0,r=t.length;n<r;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function jx(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function uk(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function dk(t){let e={},s=t.split("&");for(let n=0,r=s.length;n<r;n++){let l=s[n].split("=");e[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return e}class hk extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class Qu extends je{constructor(e){super(),this.writable=!1,ha(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new hk(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=Xu(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=uk(e);return s.length?"?"+s:""}}class fk extends Qu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ek(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Z1(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=jx()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let kx=!1;try{kx=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const pk=kx;function mk(){}class xk extends fk{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(r,l)=>{this.onError("xhr post error",r,l)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class zt extends je{constructor(e,s,n){super(),this.createRequest=e,ha(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=wx(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=zt.requestsCount++,zt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mk,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete zt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}zt.requestsCount=0;zt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Bf);else if(typeof addEventListener=="function"){const t="onpagehide"in at?"pagehide":"unload";addEventListener(t,Bf,!1)}}function Bf(){for(let t in zt.requests)zt.requests.hasOwnProperty(t)&&zt.requests[t].abort()}const gk=function(){const t=Sx({xdomain:!1});return t&&t.responseType!==null}();class yk extends xk{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=gk&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new zt(Sx,this.uri(),e)}}function Sx(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||pk))return new XMLHttpRequest}catch{}if(!e)try{return new at[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Cx=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vk extends Qu{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=Cx?{}:wx(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],r=s===e.length-1;Yu(n,this.supportsBinary,l=>{try{this.doWrite(n,l)}catch{}r&&da(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=jx()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const fo=at.WebSocket||at.MozWebSocket;class bk extends vk{createSocket(e,s,n){return Cx?new fo(e,s,n):s?new fo(e,s):new fo(e)}doWrite(e,s){this.ws.send(s)}}class Nk extends Qu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=sk(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),r=tk();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const l=()=>{n.read().then(({done:o,value:c})=>{o||(this.onPacket(c),l())}).catch(o=>{})};l();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],r=s===e.length-1;this._writer.write(n).then(()=>{r&&da(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const wk={websocket:bk,webtransport:Nk,polling:yk},jk=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ec(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let r=jk.exec(t||""),l={},a=14;for(;a--;)l[kk[a]]=r[a]||"";return s!=-1&&n!=-1&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Sk(l,l.path),l.queryKey=Ck(l,l.query),l}function Sk(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Ck(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,l){r&&(s[r]=l)}),s}const _c=typeof addEventListener=="function"&&typeof removeEventListener=="function",tl=[];_c&&addEventListener("offline",()=>{tl.forEach(t=>t())},!1);class gs extends je{constructor(e,s){if(super(),this.binaryType=rk,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Ec(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Ec(s.host).host);ha(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=dk(this.opts.query)),_c&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=Nx,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&gs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",gs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(s+=ok(r)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,da(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,r){if(typeof s=="function"&&(r=s,s=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const l={type:e,data:s,options:n};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(gs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),_c&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=tl.indexOf(this._offlineEventListener);n!==-1&&tl.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}gs.protocol=Nx;class Ek extends gs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;gs.priorWebsocketSuccess=!1;const r=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;gs.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function l(){n||(n=!0,d(),s.close(),s=null)}const a=h=>{const f=new Error("probe error: "+h);f.transport=s.name,l(),this.emitReserved("upgradeError",f)};function o(){a("transport closed")}function c(){a("socket closed")}function u(h){s&&h.name!==s.name&&l()}const d=()=>{s.removeListener("open",r),s.removeListener("error",a),s.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};s.once("open",r),s.once("error",a),s.once("close",o),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let _k=class extends Ek{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>wk[r]).filter(r=>!!r)),super(e,n)}};function Tk(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Ec(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const l=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+l+":"+n.port+e,n.href=n.protocol+"://"+l+(s&&s.port===n.port?"":":"+n.port),n}const Mk=typeof ArrayBuffer=="function",Lk=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Ex=Object.prototype.toString,Pk=typeof Blob=="function"||typeof Blob<"u"&&Ex.call(Blob)==="[object BlobConstructor]",zk=typeof File=="function"||typeof File<"u"&&Ex.call(File)==="[object FileConstructor]";function Ju(t){return Mk&&(t instanceof ArrayBuffer||Lk(t))||Pk&&t instanceof Blob||zk&&t instanceof File}function sl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(sl(t[s]))return!0;return!1}if(Ju(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return sl(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&sl(t[s]))return!0;return!1}function Rk(t){const e=[],s=t.data,n=t;return n.data=Tc(s,e),n.attachments=e.length,{packet:n,buffers:e}}function Tc(t,e){if(!t)return t;if(Ju(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=Tc(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=Tc(t[n],e));return s}return t}function Ak(t,e){return t.data=Mc(t.data,e),delete t.attachments,t}function Mc(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Mc(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Mc(t[s],e));return t}const _x=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ok=5;var X;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(X||(X={}));class Ik{constructor(e){this.replacer=e}encode(e){return(e.type===X.EVENT||e.type===X.ACK)&&sl(e)?this.encodeAsBinary({type:e.type===X.EVENT?X.BINARY_EVENT:X.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===X.BINARY_EVENT||e.type===X.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=Rk(e),n=this.encodeAsString(s.packet),r=s.buffers;return r.unshift(n),r}}class Gu extends je{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===X.BINARY_EVENT;n||s.type===X.BINARY_ACK?(s.type=n?X.EVENT:X.ACK,this.reconstructor=new $k(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Ju(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(X[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===X.BINARY_EVENT||n.type===X.BINARY_ACK){const l=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const a=e.substring(l,s);if(a!=Number(a)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(s+1)==="/"){const l=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(l,s)}else n.nsp="/";const r=e.charAt(s+1);if(r!==""&&Number(r)==r){const l=s+1;for(;++s;){const a=e.charAt(s);if(a==null||Number(a)!=a){--s;break}if(s===e.length)break}n.id=Number(e.substring(l,s+1))}if(e.charAt(++s)){const l=this.tryParse(e.substr(s));if(Gu.isPayloadValid(n.type,l))n.data=l;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case X.CONNECT:return Ol(s);case X.DISCONNECT:return s===void 0;case X.CONNECT_ERROR:return typeof s=="string"||Ol(s);case X.EVENT:case X.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&_x.indexOf(s[0])===-1);case X.ACK:case X.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $k{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=Ak(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Bk(t){return typeof t=="string"}const Fk=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function Dk(t){return t===void 0||Fk(t)}function Ol(t){return Object.prototype.toString.call(t)==="[object Object]"}function Uk(t,e){switch(t){case X.CONNECT:return e===void 0||Ol(e);case X.DISCONNECT:return e===void 0;case X.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&_x.indexOf(e[0])===-1);case X.ACK:return Array.isArray(e);case X.CONNECT_ERROR:return typeof e=="string"||Ol(e);default:return!1}}function Vk(t){return Bk(t.nsp)&&Dk(t.id)&&Uk(t.type,t.data)}const Wk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gu,Encoder:Ik,get PacketType(){return X},isPacketValid:Vk,protocol:Ok},Symbol.toStringTag,{value:"Module"}));function gt(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Hk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Tx extends je{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[gt(e,"open",this.onopen.bind(this)),gt(e,"packet",this.onpacket.bind(this)),gt(e,"error",this.onerror.bind(this)),gt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,r,l;if(Hk.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:X.EVENT,data:s};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const d=this.ids++,h=s.pop();this._registerAckCallback(d,h),a.id=d}const o=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,c=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,s){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=s;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);s.call(this,new Error("operation has timed out"))},r),a=(...o)=>{this.io.clearTimeoutFn(l),s.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...s){return new Promise((n,r)=>{const l=(a,o)=>a?r(a):n(o);l.withError=!0,s.push(l),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...l)=>(this._queue[0],r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(r)):(this._queue.shift(),s&&s(null,...l)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:X.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case X.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case X.EVENT:case X.BINARY_EVENT:this.onevent(e);break;case X.ACK:case X.BINARY_ACK:this.onack(e);break;case X.DISCONNECT:this.ondisconnect();break;case X.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...r){n||(n=!0,s.packet({type:X.ACK,id:e,data:r}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:X.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function Vn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Vn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+s:t-s}return Math.min(t,this.max)|0};Vn.prototype.reset=function(){this.attempts=0};Vn.prototype.setMin=function(t){this.ms=t};Vn.prototype.setMax=function(t){this.max=t};Vn.prototype.setJitter=function(t){this.jitter=t};class Lc extends je{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ha(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Vn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const r=s.parser||Wk;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new _k(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=gt(s,"open",function(){n.onopen(),e&&e()}),l=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=gt(s,"error",l);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{r(),l(new Error("timeout")),s.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(gt(e,"ping",this.onping.bind(this)),gt(e,"data",this.ondata.bind(this)),gt(e,"error",this.onerror.bind(this)),gt(e,"close",this.onclose.bind(this)),gt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){da(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Tx(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const sr={};function nl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=Tk(t,e.path||"/socket.io"),n=s.source,r=s.id,l=s.path,a=sr[r]&&l in sr[r].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new Lc(n,e):(sr[r]||(sr[r]=new Lc(n,e)),c=sr[r]),s.query&&!e.query&&(e.query=s.queryKey),c.socket(s.path,e)}Object.assign(nl,{Manager:Lc,Socket:Tx,io:nl,connect:nl});const qk={"Demo Stocks":{stocks:[{symbol:"DEMO-STOCK1",name:"Demo Stock One",exchange:"DEMO",isDemo:!0,mockPrice:1250.5,mockChange:2.5},{symbol:"DEMO-STOCK2",name:"Demo Stock Two",exchange:"DEMO",isDemo:!0,mockPrice:875.25,mockChange:-1.8},{symbol:"DEMO-STOCK3",name:"Demo Stock Three",exchange:"DEMO",isDemo:!0,mockPrice:2340,mockChange:.75}]},"Demo F&O":{futures:[{symbol:"DEMO-FUT1",name:"Demo Future Jan",exchange:"DEMO",type:"FUT",isDemo:!0,mockPrice:24500,mockChange:1.2},{symbol:"DEMO-FUT2",name:"Demo Future Feb",exchange:"DEMO",type:"FUT",isDemo:!0,mockPrice:24650,mockChange:-.5}],calls:[{symbol:"DEMO-24500CE",name:"Demo 24500 CE",exchange:"DEMO",type:"CE",strike:24500,isDemo:!0,mockPrice:250,mockChange:15.5},{symbol:"DEMO-24600CE",name:"Demo 24600 CE",exchange:"DEMO",type:"CE",strike:24600,isDemo:!0,mockPrice:180,mockChange:12.3},{symbol:"DEMO-24700CE",name:"Demo 24700 CE",exchange:"DEMO",type:"CE",strike:24700,isDemo:!0,mockPrice:120,mockChange:-8.2}],puts:[{symbol:"DEMO-24500PE",name:"Demo 24500 PE",exchange:"DEMO",type:"PE",strike:24500,isDemo:!0,mockPrice:180,mockChange:-5.5},{symbol:"DEMO-24400PE",name:"Demo 24400 PE",exchange:"DEMO",type:"PE",strike:24400,isDemo:!0,mockPrice:220,mockChange:8.7},{symbol:"DEMO-24300PE",name:"Demo 24300 PE",exchange:"DEMO",type:"PE",strike:24300,isDemo:!0,mockPrice:280,mockChange:10.2}]},"Demo Crypto":{stocks:[{symbol:"DEMO-BTC",name:"Demo Bitcoin",exchange:"DEMO",isDemo:!0,isCrypto:!0,mockPrice:85e3,mockChange:-2.1},{symbol:"DEMO-ETH",name:"Demo Ethereum",exchange:"DEMO",isDemo:!0,isCrypto:!0,mockPrice:2950,mockChange:1.5}]}},Kk={...qk,Indices:{stocks:[{symbol:"NIFTY 50",name:"Nifty 50 Index",exchange:"NSE",token:"99926000"},{symbol:"BANKNIFTY",name:"Bank Nifty Index",exchange:"NSE",token:"99926009"},{symbol:"FINNIFTY",name:"Fin Nifty Index",exchange:"NSE",token:"99926037"}]},"NSE Equity":{stocks:[{symbol:"RELIANCE",name:"Reliance Industries",exchange:"NSE",token:"2885"},{symbol:"SBIN",name:"State Bank of India",exchange:"NSE",token:"3045"},{symbol:"HDFCBANK",name:"HDFC Bank",exchange:"NSE",token:"1333"},{symbol:"TCS",name:"Tata Consultancy Services",exchange:"NSE",token:"11536"},{symbol:"INFY",name:"Infosys Limited",exchange:"NSE",token:"1594"},{symbol:"ICICIBANK",name:"ICICI Bank",exchange:"NSE",token:"4963"},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",exchange:"NSE",token:"1922"},{symbol:"ITC",name:"ITC Limited",exchange:"NSE",token:"1660"},{symbol:"AXISBANK",name:"Axis Bank",exchange:"NSE",token:"5900"},{symbol:"BHARTIARTL",name:"Bharti Airtel",exchange:"NSE",token:"17818"},{symbol:"MARUTI",name:"Maruti Suzuki",exchange:"NSE",token:"10999"},{symbol:"WIPRO",name:"Wipro Limited",exchange:"NSE",token:"3787"},{symbol:"BAJFINANCE",name:"Bajaj Finance",exchange:"NSE",token:"20374"},{symbol:"HINDUNILVR",name:"Hindustan Unilever",exchange:"NSE",token:"1394"},{symbol:"TATASTEEL",name:"Tata Steel",exchange:"NSE",token:"3426"},{symbol:"SUNPHARMA",name:"Sun Pharma",exchange:"NSE",token:"17388"},{symbol:"TITAN",name:"Titan Company",exchange:"NSE",token:"3506"},{symbol:"ASIANPAINT",name:"Asian Paints",exchange:"NSE",token:"467"},{symbol:"NTPC",name:"NTPC Limited",exchange:"NSE",token:"11630"},{symbol:"POWERGRID",name:"Power Grid Corp",exchange:"NSE",token:"11532"},{symbol:"M&M",name:"Mahindra & Mahindra",exchange:"NSE",token:"2181"},{symbol:"ONGC",name:"ONGC",exchange:"NSE",token:"2475"},{symbol:"COALINDIA",name:"Coal India",exchange:"NSE",token:"1232"},{symbol:"HCLTECH",name:"HCL Technologies",exchange:"NSE",token:"7229"},{symbol:"TECHM",name:"Tech Mahindra",exchange:"NSE",token:"3432"}]},"NSE F&O":{futures:[{symbol:"NIFTY25JANFUT",name:"NIFTY JAN FUT",exchange:"NFO",type:"FUT",token:"35001"},{symbol:"BANKNIFTY25JANFUT",name:"BANKNIFTY JAN FUT",exchange:"NFO",type:"FUT",token:"35009"},{symbol:"FINNIFTY25JANFUT",name:"FINNIFTY JAN FUT",exchange:"NFO",type:"FUT",token:"35037"}],calls:[{symbol:"NIFTY26000CE",name:"NIFTY 26000 CE",exchange:"NFO",type:"CE",strike:26e3,token:"43650"},{symbol:"NIFTY26100CE",name:"NIFTY 26100 CE",exchange:"NFO",type:"CE",strike:26100,token:"43652"},{symbol:"NIFTY26200CE",name:"NIFTY 26200 CE",exchange:"NFO",type:"CE",strike:26200,token:"43654"},{symbol:"BANKNIFTY59500CE",name:"BANKNIFTY 59500 CE",exchange:"NFO",type:"CE",strike:59500,token:"43750"},{symbol:"BANKNIFTY59700CE",name:"BANKNIFTY 59700 CE",exchange:"NFO",type:"CE",strike:59700,token:"43752"}],puts:[{symbol:"NIFTY26000PE",name:"NIFTY 26000 PE",exchange:"NFO",type:"PE",strike:26e3,token:"43651"},{symbol:"NIFTY25900PE",name:"NIFTY 25900 PE",exchange:"NFO",type:"PE",strike:25900,token:"43649"},{symbol:"NIFTY25800PE",name:"NIFTY 25800 PE",exchange:"NFO",type:"PE",strike:25800,token:"43647"},{symbol:"BANKNIFTY59500PE",name:"BANKNIFTY 59500 PE",exchange:"NFO",type:"PE",strike:59500,token:"43751"},{symbol:"BANKNIFTY59300PE",name:"BANKNIFTY 59300 PE",exchange:"NFO",type:"PE",strike:59300,token:"43749"}]},MCX:{futures:[{symbol:"GOLDM",name:"Gold Mini",exchange:"MCX",type:"FUT",token:"220822"},{symbol:"SILVERM",name:"Silver Mini",exchange:"MCX",type:"FUT",token:"220823"},{symbol:"CRUDEOIL",name:"Crude Oil",exchange:"MCX",type:"FUT",token:"224570"},{symbol:"NATURALGAS",name:"Natural Gas",exchange:"MCX",type:"FUT",token:"226745"},{symbol:"COPPER",name:"Copper",exchange:"MCX",type:"FUT",token:"220824"}]},Crypto:{stocks:[{symbol:"BTC",name:"Bitcoin",exchange:"BINANCE",pair:"BTCUSDT",isCrypto:!0},{symbol:"ETH",name:"Ethereum",exchange:"BINANCE",pair:"ETHUSDT",isCrypto:!0},{symbol:"BNB",name:"Binance Coin",exchange:"BINANCE",pair:"BNBUSDT",isCrypto:!0},{symbol:"XRP",name:"Ripple",exchange:"BINANCE",pair:"XRPUSDT",isCrypto:!0},{symbol:"ADA",name:"Cardano",exchange:"BINANCE",pair:"ADAUSDT",isCrypto:!0},{symbol:"DOGE",name:"Dogecoin",exchange:"BINANCE",pair:"DOGEUSDT",isCrypto:!0},{symbol:"SOL",name:"Solana",exchange:"BINANCE",pair:"SOLUSDT",isCrypto:!0},{symbol:"DOT",name:"Polkadot",exchange:"BINANCE",pair:"DOTUSDT",isCrypto:!0},{symbol:"MATIC",name:"Polygon",exchange:"BINANCE",pair:"MATICUSDT",isCrypto:!0},{symbol:"LTC",name:"Litecoin",exchange:"BINANCE",pair:"LTCUSDT",isCrypto:!0},{symbol:"AVAX",name:"Avalanche",exchange:"BINANCE",pair:"AVAXUSDT",isCrypto:!0},{symbol:"LINK",name:"Chainlink",exchange:"BINANCE",pair:"LINKUSDT",isCrypto:!0},{symbol:"ATOM",name:"Cosmos",exchange:"BINANCE",pair:"ATOMUSDT",isCrypto:!0},{symbol:"UNI",name:"Uniswap",exchange:"BINANCE",pair:"UNIUSDT",isCrypto:!0},{symbol:"XLM",name:"Stellar",exchange:"BINANCE",pair:"XLMUSDT",isCrypto:!0}]}},Yk=()=>{var W,be,I,U,V,K,Z;const{user:t,logoutUser:e}=fe(),s=Gs(),[n,r]=b.useState(null),[l,a]=b.useState(null),[o,c]=b.useState("positions"),[u,d]=b.useState(!1),[h,f]=b.useState("quotes"),[y,p]=b.useState(!1),[m,v]=b.useState("buy"),[g,x]=b.useState(!1),[N,j]=b.useState(null),[k,C]=b.useState(!1),[w,S]=b.useState({}),[T,L]=b.useState({});b.useEffect(()=>{const Q=nl("http://localhost:5001");return Q.on("connect",()=>{console.log("Socket.IO connected for real-time ticks")}),Q.on("market_tick",se=>{L(H=>({...H,...se}));const Ne=Object.values(se).find(H=>H.symbol==="NIFTY 50"||H.symbol==="NIFTY"),R=Object.values(se).find(H=>H.symbol==="NIFTY BANK"||H.symbol==="BANKNIFTY"),B=Object.values(se).find(H=>H.symbol==="NIFTY FIN SERVICE"||H.symbol==="FINNIFTY");(Ne||R||B)&&S(H=>({nifty:Ne||H.nifty,banknifty:R||H.banknifty,finnifty:B||H.finnifty}))}),()=>Q.disconnect()},[]),b.useEffect(()=>{M(),$()},[]);const $=async()=>{try{const{data:Q}=await z.get("/api/zerodha/market-data");if(Q){const se=Object.values(Q).find(B=>B.symbol==="NIFTY 50"||B.symbol==="NIFTY"),Ne=Object.values(Q).find(B=>B.symbol==="NIFTY BANK"||B.symbol==="BANKNIFTY"),R=Object.values(Q).find(B=>B.symbol==="NIFTY FIN SERVICE"||B.symbol==="FINNIFTY");S({nifty:se||null,banknifty:Ne||null,finnifty:R||null})}}catch{}},M=async()=>{try{const{data:Q}=await z.get("/api/user/wallet",{headers:{Authorization:`Bearer ${t.token}`}});a(Q)}catch(Q){console.error("Error fetching wallet:",Q)}},E=()=>{e(),s("/login")},P=(Q,se=null)=>{se&&r(se),v(Q),p(!0)},F=(Q,se)=>{j(se),v(Q)};return i.jsxs("div",{className:"h-screen bg-dark-900 flex flex-col overflow-hidden",children:[i.jsxs("header",{className:"bg-dark-800 border-b border-dark-600 px-4 py-2 hidden md:flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-7 h-7 text-green-500"}),i.jsx("span",{className:"text-lg font-bold",children:"NTrader"})]}),i.jsxs("div",{className:"hidden lg:flex items-center gap-6 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"NIFTY"}),w.nifty?i.jsxs("span",{className:`ml-2 ${w.nifty.change>=0?"text-green-400":"text-red-400"}`,children:[(W=w.nifty.ltp)==null?void 0:W.toLocaleString(),i.jsxs("span",{className:"text-xs ml-1",children:["(",w.nifty.change>=0?"+":"",w.nifty.changePercent,"%)"]})]}):i.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"BANKNIFTY"}),w.banknifty?i.jsxs("span",{className:`ml-2 ${w.banknifty.change>=0?"text-green-400":"text-red-400"}`,children:[(be=w.banknifty.ltp)==null?void 0:be.toLocaleString(),i.jsxs("span",{className:"text-xs ml-1",children:["(",w.banknifty.change>=0?"+":"",w.banknifty.changePercent,"%)"]})]}):i.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"FINNIFTY"}),w.finnifty?i.jsxs("span",{className:`ml-2 ${w.finnifty.change>=0?"text-green-400":"text-red-400"}`,children:[(I=w.finnifty.ltp)==null?void 0:I.toLocaleString(),i.jsxs("span",{className:"text-xs ml-1",children:["(",w.finnifty.change>=0?"+":"",w.finnifty.changePercent,"%)"]})]}):i.jsx("span",{className:"ml-2 text-gray-500",children:"--"})]})]})]}),i.jsx("div",{className:"flex-1 max-w-md mx-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search Instruments",className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-4 py-1.5 text-sm focus:outline-none focus:border-green-500"})]})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-dark-700 hover:bg-dark-600 px-3 py-1.5 rounded-lg transition-colors",children:[i.jsx(Ut,{size:18,className:"text-green-400"}),i.jsxs("span",{className:"text-green-400 font-medium",children:["",((V=(U=l==null?void 0:l.wallet)==null?void 0:U.balance)==null?void 0:V.toLocaleString())||"0"]}),i.jsx(Kt,{size:14,className:"text-gray-400"})]}),i.jsx("button",{className:"text-gray-400 hover:text-white",children:i.jsx(xc,{size:20})}),i.jsx("button",{className:"text-gray-400 hover:text-white",children:i.jsx(xs,{size:20})}),i.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm",children:[i.jsx(WN,{size:18,className:"text-gray-400"}),i.jsx("span",{children:t==null?void 0:t.username})]}),i.jsx("button",{onClick:E,className:"text-red-400 hover:text-red-300",children:i.jsx(Wr,{size:20})})]})]}),i.jsxs("header",{className:"bg-dark-800 border-b border-dark-600 px-4 py-3 flex md:hidden items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-6 h-6 text-green-500"}),i.jsx("span",{className:"text-lg font-bold",children:"NTrader"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{className:"text-gray-400 hover:text-white",children:i.jsx(Ws,{size:20})}),i.jsx("button",{className:"text-gray-400 hover:text-white",children:i.jsx(xc,{size:20})}),i.jsx("button",{onClick:()=>x(!g),className:"text-gray-400 hover:text-white",children:i.jsx(D0,{size:20})})]})]}),g&&i.jsxs("div",{className:"md:hidden absolute top-14 right-2 bg-dark-700 rounded-lg shadow-xl z-50 py-2 min-w-[200px]",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-dark-600",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Logged in as"}),i.jsx("p",{className:"font-medium",children:t==null?void 0:t.username})]}),i.jsxs("div",{className:"px-4 py-2 border-b border-dark-600",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Balance"}),i.jsxs("p",{className:"font-medium text-green-400",children:["",((Z=(K=l==null?void 0:l.wallet)==null?void 0:K.balance)==null?void 0:Z.toLocaleString())||"0"]})]}),i.jsxs("button",{onClick:()=>{C(!0),x(!1)},className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2 text-green-400",children:[i.jsx(Ut,{size:18})," Add Funds"]}),i.jsxs("button",{className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2",children:[i.jsx(xs,{size:18})," Settings"]}),i.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left hover:bg-dark-600 flex items-center gap-2 text-red-400",children:[i.jsx(Wr,{size:18})," Logout"]})]}),i.jsxs("div",{className:"flex-1 hidden md:flex overflow-hidden",children:[i.jsx(Xk,{selectedInstrument:n,onSelectInstrument:r,onBuySell:u?F:P,quickMode:u,user:t,marketData:T}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx(Qk,{selectedInstrument:n,marketData:T}),i.jsx(Jk,{activeTab:o,setActiveTab:c,quickMode:u,setQuickMode:d,walletData:l})]}),u&&N?i.jsx(Zk,{instrument:N,orderType:m,setOrderType:v,walletData:l,onClose:()=>j(null),user:t}):i.jsx(Gk,{walletData:l,onOpenWallet:()=>C(!0)})]}),i.jsxs("div",{className:"flex-1 flex flex-col md:hidden overflow-hidden",children:[h==="quotes"&&i.jsx(eS,{selectedInstrument:n,onSelectInstrument:Q=>{r(Q),f("chart")},onBuySell:P,user:t,marketData:T}),h==="chart"&&i.jsx(tS,{selectedInstrument:n,onBuySell:P,onBack:()=>f("quotes"),marketData:T}),h==="positions"&&i.jsx(Ff,{activeTab:"positions"}),h==="history"&&i.jsx(Ff,{activeTab:"history"}),h==="profile"&&i.jsx(sS,{user:t,walletData:l,onLogout:E})]}),i.jsxs("nav",{className:"md:hidden bg-dark-800 border-t border-dark-600 flex items-center justify-around py-2 safe-area-bottom",children:[i.jsxs("button",{onClick:()=>f("quotes"),className:`flex flex-col items-center p-2 ${h==="quotes"?"text-green-400":"text-gray-400"}`,children:[i.jsx(F0,{size:20}),i.jsx("span",{className:"text-xs mt-1",children:"Quotes"})]}),i.jsxs("button",{onClick:()=>f("chart"),className:`flex flex-col items-center p-2 ${h==="chart"?"text-green-400":"text-gray-400"}`,children:[i.jsx(Au,{size:20}),i.jsx("span",{className:"text-xs mt-1",children:"Chart"})]}),i.jsxs("button",{onClick:()=>P("buy"),className:"flex flex-col items-center p-2 bg-green-600 rounded-full -mt-4 px-4",children:[i.jsx(ct,{size:24}),i.jsx("span",{className:"text-xs mt-1",children:"Trade"})]}),i.jsxs("button",{onClick:()=>f("positions"),className:`flex flex-col items-center p-2 ${h==="positions"?"text-green-400":"text-gray-400"}`,children:[i.jsx(Ut,{size:20}),i.jsx("span",{className:"text-xs mt-1",children:"Positions"})]}),i.jsxs("button",{onClick:()=>f("profile"),className:`flex flex-col items-center p-2 ${h==="profile"?"text-green-400":"text-gray-400"}`,children:[i.jsx($0,{size:20}),i.jsx("span",{className:"text-xs mt-1",children:"Profile"})]})]}),y&&i.jsx(rS,{instrument:n,orderType:m,setOrderType:v,onClose:()=>p(!1),walletData:l}),k&&i.jsx(nS,{onClose:()=>C(!1),walletData:l,user:t,onRefresh:M})]})},Xk=({selectedInstrument:t,onSelectInstrument:e,onBuySell:s,quickMode:n,user:r,marketData:l={}})=>{const[a,o]=b.useState(["INDICES","STOCKS"]),[c,u]=b.useState({}),[d,h]=b.useState(""),[f,y]=b.useState(""),[p,m]=b.useState("watchlist"),[v,g]=b.useState(()=>{const R=localStorage.getItem("ntrader_watchlist");return R?JSON.parse(R):["NIFTY","BANKNIFTY","SBIN","RELIANCE"]}),[x,N]=b.useState({}),[j,k]=b.useState([]),[C,w]=b.useState(!0),[S,T]=b.useState([]),[L,$]=b.useState(!1),M=b.useRef(null),E={connected:Object.keys(l).length>0,lastUpdate:Object.keys(l).length>0?new Date:null};b.useEffect(()=>{const R=setTimeout(()=>{y(d)},150);return()=>clearTimeout(R)},[d]),b.useEffect(()=>{if(f.length>=1){$(!0);const R=f.toLowerCase(),B=j.filter(H=>{var te,nt,Xt;return((te=H.symbol)==null?void 0:te.toLowerCase().includes(R))||((nt=H.name)==null?void 0:nt.toLowerCase().includes(R))||((Xt=H.category)==null?void 0:Xt.toLowerCase().includes(R))}).slice(0,50);T(B),$(!1)}else T([])},[f,j]),b.useEffect(()=>{P()},[r==null?void 0:r.token]);const P=async()=>{try{w(!0);const R=r!=null&&r.token?"/api/instruments/user":"/api/instruments/public",B=r!=null&&r.token?{Authorization:`Bearer ${r.token}`}:{},{data:H}=await z.get(R,{headers:B});k(H||[])}catch(R){console.error("Error fetching instruments:",R);try{const{data:B}=await z.get("/api/instruments/public");k(B||[])}catch(B){console.error("Fallback also failed:",B)}}finally{w(!1)}};b.useEffect(()=>{F();const R=setInterval(F,5e3);return()=>clearInterval(R)},[]);const F=async()=>{try{const{data:R}=await z.get("/api/binance/prices");N(R)}catch{}};b.useEffect(()=>{localStorage.setItem("ntrader_watchlist",JSON.stringify(v))},[v]);const W=(R,B,H)=>{if(H!=null&&H.isDemo){const te=(Math.random()-.5)*.02*H.mockPrice;return{ltp:H.mockPrice+te,change:H.mockChange,changePercent:H.mockChange}}return B&&x[B]?x[B]:R&&l[R]?l[R]:{ltp:0,change:0,changePercent:0}},be=R=>{o(B=>B.includes(R)?B.filter(H=>H!==R):[...B,R])},I=R=>{v.includes(R)||g([...v,R])},U=R=>{g(v.filter(B=>B!==R))},V=R=>v.includes(R),K=()=>{if(j.length>0)return j.map(B=>({...B,symbol:B.symbol,name:B.name,exchange:B.exchange,token:B.token,segment:B.segment,instrumentType:B.instrumentType,category:B.category,lotSize:B.lotSize||1}));const R=[];return Object.values(Kk).forEach(B=>{B.stocks&&R.push(...B.stocks.map(H=>({...H,segment:"EQUITY",instrumentType:"STOCK"}))),B.futures&&R.push(...B.futures.map(H=>({...H,segment:"FNO",instrumentType:"FUTURES"}))),B.calls&&R.push(...B.calls.map(H=>({...H,segment:"FNO",instrumentType:"OPTIONS",optionType:"CE"}))),B.puts&&R.push(...B.puts.map(H=>({...H,segment:"FNO",instrumentType:"OPTIONS",optionType:"PE"})))}),R},Z=()=>{const R=K(),B={};return R.forEach(H=>{const te=H.category||H.segment||"OTHER";B[te]||(B[te]=[]),B[te].push(H)}),B},Q=K().filter(R=>v.includes(R.symbol)),se=Z(),Ne=Object.keys(se);return i.jsxs("aside",{className:"w-72 bg-dark-800 border-r border-dark-600 flex flex-col",children:[i.jsxs("div",{className:"px-3 py-2 border-b border-dark-600 flex items-center justify-between text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${E.connected?"bg-green-500 animate-pulse":"bg-red-500"}`}),i.jsx("span",{className:E.connected?"text-green-400":"text-red-400",children:E.connected?"Live":"Offline"})]}),E.connected&&E.lastUpdate&&i.jsx("span",{className:"text-gray-500",children:new Date(E.lastUpdate).toLocaleTimeString()})]}),i.jsxs("div",{className:"flex border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>m("watchlist"),className:`flex-1 px-4 py-2 text-sm ${p==="watchlist"?"bg-dark-700 text-green-400 border-b-2 border-green-500":"text-gray-400 hover:text-white"}`,children:["Watchlist (",v.length,")"]}),i.jsx("button",{onClick:()=>m("all"),className:`flex-1 px-4 py-2 text-sm ${p==="all"?"bg-dark-700 text-green-400 border-b-2 border-green-500":"text-gray-400 hover:text-white"}`,children:"All Instruments"})]}),i.jsxs("div",{className:"p-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{ref:M,type:"text",placeholder:"Search NIFTY, BANKNIFTY, SBIN...",value:d,onChange:R=>h(R.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded pl-9 pr-8 py-1.5 text-sm focus:outline-none focus:border-green-500"}),d&&i.jsx("button",{onClick:()=>{var R;h(""),(R=M.current)==null||R.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:i.jsx(ye,{size:14})})]}),L&&i.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:"Searching..."})]}),d.length>=1&&i.jsx("div",{className:"flex-1 overflow-y-auto",children:S.length===0?i.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:['No instruments found for "',d,'"']}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-3 py-1 text-xs text-gray-500 bg-dark-700 sticky top-0",children:[S.length,' results for "',d,'"']}),S.map(R=>{const B=W(R.token,R.pair,R);return i.jsx(po,{instrument:{...R,ltp:B.ltp,change:B.change,changePercent:B.changePercent},isSelected:(t==null?void 0:t.symbol)===R.symbol,onSelect:()=>{e({...R,ltp:B.ltp}),h("")},quickMode:n,onBuySell:s,inWatchlist:V(R.symbol),onAddToWatchlist:()=>I(R.symbol),onRemoveFromWatchlist:()=>U(R.symbol)},R._id||R.symbol)})]})}),!d&&p==="watchlist"&&i.jsx("div",{className:"flex-1 overflow-y-auto",children:Q.length===0?i.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[i.jsx("p",{children:"No instruments in watchlist"}),i.jsx("p",{className:"mt-2",children:'Go to "All Instruments" to add'})]}):Q.map(R=>{const B=W(R.token,R.pair,R);return i.jsx(po,{instrument:{...R,ltp:B.ltp,change:B.change,changePercent:B.changePercent},isSelected:(t==null?void 0:t.symbol)===R.symbol,onSelect:()=>e({...R,ltp:B.ltp}),quickMode:n,onBuySell:s,inWatchlist:!0,onRemoveFromWatchlist:()=>U(R.symbol),isCrypto:R.isCrypto,isDemo:R.isDemo},R.symbol)})}),!d&&p==="all"&&i.jsx("div",{className:"flex-1 overflow-y-auto",children:C?i.jsxs("div",{className:"p-4 text-center text-gray-400",children:[i.jsx(he,{className:"animate-spin inline mr-2",size:16}),"Loading instruments..."]}):Ne.length===0?i.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[i.jsx("p",{children:"No instruments available"}),i.jsx("p",{className:"mt-2 text-xs",children:"Contact admin to add instruments"})]}):Ne.map(R=>{var B,H;return i.jsxs("div",{className:"border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>be(R),className:"w-full flex items-center justify-between px-3 py-2 hover:bg-dark-700 text-sm font-medium",children:[i.jsxs("span",{children:[R," (",((B=se[R])==null?void 0:B.length)||0,")"]}),a.includes(R)?i.jsx(or,{size:16}):i.jsx(mn,{size:16})]}),a.includes(R)&&i.jsx("div",{className:"bg-dark-900",children:(H=se[R])==null?void 0:H.filter(te=>{var nt,Xt;return((nt=te.symbol)==null?void 0:nt.toLowerCase().includes(d.toLowerCase()))||((Xt=te.name)==null?void 0:Xt.toLowerCase().includes(d.toLowerCase()))}).map(te=>{const nt=W(te.token,te.pair,te);return i.jsx(po,{instrument:{...te,ltp:nt.ltp||te.ltp||0,change:nt.change||te.change||0,changePercent:nt.changePercent||te.changePercent||0},isSelected:(t==null?void 0:t.symbol)===te.symbol,onSelect:()=>e({...te,ltp:nt.ltp||te.ltp||0}),quickMode:n,onBuySell:s,inWatchlist:V(te.symbol),onAddToWatchlist:()=>I(te.symbol),onRemoveFromWatchlist:()=>U(te.symbol),isCrypto:te.isCrypto,isDemo:te.isDemo},te._id||`${te.exchange}-${te.symbol}`)})})]},R)})})]})},po=({instrument:t,isSelected:e,onSelect:s,isCall:n,isPut:r,isFuture:l,isCrypto:a,isDemo:o,quickMode:c,onBuySell:u,inWatchlist:d,onRemoveFromWatchlist:h,onAddToWatchlist:f})=>{const[y,p]=b.useState(!1),m=()=>o?"text-purple-400":a?"text-orange-400":n?"text-green-400":r?"text-red-400":l?"text-yellow-400":"",v=g=>!g||g<=0?"--":a?`$${g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${g.toLocaleString()}`;return i.jsxs("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:`relative flex items-center justify-between px-4 py-2 cursor-pointer text-sm border-l-2 ${e?"bg-dark-700 border-green-500":"border-transparent hover:bg-dark-700"}`,children:[i.jsxs("div",{onClick:s,className:"flex-1 min-w-0",children:[i.jsx("div",{className:`font-medium truncate ${m()}`,children:t.symbol}),i.jsx("div",{className:"text-xs text-gray-500",children:t.exchange})]}),i.jsxs("div",{className:"text-right mr-2",onClick:s,children:[i.jsx("div",{className:`font-mono ${t.change>=0?"text-green-400":"text-red-400"}`,children:v(t.ltp)}),i.jsx("div",{className:`text-xs ${t.change>=0?"text-green-400":"text-red-400"}`,children:t.changePercent?`${t.change>=0?"+":""}${t.changePercent}%`:"--"})]}),y&&i.jsxs("div",{className:"flex items-center gap-1",children:[d?i.jsx("button",{onClick:g=>{g.stopPropagation(),h&&h()},className:"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-700 rounded font-medium",title:"Remove from Watchlist",children:i.jsx(ye,{size:12})}):f&&i.jsx("button",{onClick:g=>{g.stopPropagation(),f()},className:"px-2 py-1 text-xs bg-yellow-600 hover:bg-yellow-700 rounded font-medium",title:"Add to Watchlist",children:i.jsx(Kt,{size:12})}),i.jsx("button",{onClick:g=>{g.stopPropagation(),u("buy",t)},className:"px-2 py-1 text-xs bg-green-600 hover:bg-green-700 rounded font-medium",children:"B"}),i.jsx("button",{onClick:g=>{g.stopPropagation(),u("sell",t)},className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 rounded font-medium",children:"S"})]})]})},Qk=({selectedInstrument:t,marketData:e})=>{var N,j,k,C,w;const s=b.useRef(null),n=b.useRef(null),r=b.useRef(null),l=b.useRef(null),[a,o]=b.useState("FIFTEEN_MINUTE"),[c,u]=b.useState(!1),[d,h]=b.useState(null),f=b.useRef(null);b.useEffect(()=>{if(t!=null&&t.token&&e[t.token]){const S=e[t.token];if(h({ltp:S.ltp,open:S.open,high:S.high,low:S.low,close:S.close,change:S.change,changePercent:S.changePercent}),r.current&&f.current&&S.ltp){const T=Math.floor(Date.now()/1e3),L=y(a),$=Math.floor(T/L)*L;if(f.current.time===$){const M={time:$,open:f.current.open,high:Math.max(f.current.high,S.ltp),low:Math.min(f.current.low,S.ltp),close:S.ltp};f.current=M,r.current.update(M)}else{const M={time:$,open:S.ltp,high:S.ltp,low:S.ltp,close:S.ltp};f.current=M,r.current.update(M)}}}},[t==null?void 0:t.token,e,a]);const y=S=>({ONE_MINUTE:60,FIVE_MINUTE:300,FIFTEEN_MINUTE:900,THIRTY_MINUTE:1800,ONE_HOUR:3600,ONE_DAY:86400})[S]||900,p=S=>({ONE_MINUTE:"1m",FIVE_MINUTE:"5m",FIFTEEN_MINUTE:"15m",THIRTY_MINUTE:"30m",ONE_HOUR:"1h",ONE_DAY:"1d"})[S]||"15m",m=S=>{const T=[],L=Math.floor(Date.now()/1e3);for(let $=500;$>=0;$--){const M=L-$*900,E=S*.02,P=S+(Math.random()-.5)*E,F=P+(Math.random()-.5)*E,W=Math.max(P,F)+Math.random()*E*.5,be=Math.min(P,F)-Math.random()*E*.5;T.push({time:M,open:P,high:W,low:be,close:F,volume:Math.random()*1e5})}return T},v=async(S,T)=>{if(!S)return null;try{if(u(!0),S.isDemo)return m(S.mockPrice||1e3);if(S.isCrypto||S.exchange==="BINANCE"){const $=p(T),{data:M}=await z.get(`/api/binance/candles/${S.pair||S.symbol}`,{params:{interval:$,limit:500}});return M}if(!S.token)return Df();try{const{data:$}=await z.get(`/api/zerodha/historical/${S.token}`,{params:{interval:T}});if($&&$.length>0)return $}catch{console.log("Zerodha historical not available, using sample data")}const L=S.ltp||100;return m(L)}catch(L){return console.error("Failed to fetch candle data:",L),Df()}finally{u(!1)}},g=async()=>{if(t)try{if(t.isDemo){const T=(Math.random()-.5)*.02*t.mockPrice;h({ltp:t.mockPrice+T,open:t.mockPrice*.99,high:t.mockPrice*1.02,low:t.mockPrice*.98,close:t.mockPrice,change:t.mockChange,changePercent:t.mockChange});return}if(t.isCrypto||t.exchange==="BINANCE"){const{data:T}=await z.get(`/api/binance/price/${t.pair||t.symbol}`);h(T);return}if(!t.token)return;const{data:S}=await z.get("/api/zerodha/market-data");S[t.token]&&h(S[t.token])}catch(S){console.error("Failed to fetch live price:",S)}};b.useEffect(()=>{if(!s.current)return;const S=mx(s.current,{layout:{background:{color:"#111111"},textColor:"#d1d5db"},grid:{vertLines:{color:"#1f1f1f"},horzLines:{color:"#1f1f1f"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2a2a2a"},timeScale:{borderColor:"#2a2a2a",timeVisible:!0,secondsVisible:!1}});n.current=S,r.current=S.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#22c55e",wickDownColor:"#ef4444",wickUpColor:"#22c55e"}),l.current=S.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""}),S.priceScale("").applyOptions({scaleMargins:{top:.8,bottom:0}});const T=()=>{s.current&&S.applyOptions({width:s.current.clientWidth,height:s.current.clientHeight})};return window.addEventListener("resize",T),T(),()=>{window.removeEventListener("resize",T),S.remove()}},[]),b.useEffect(()=>{(async()=>{var $;if(!t||!r.current)return;const L=await v(t,a);if(L&&L.length>0){r.current.setData(L);const M=L.map(E=>({time:E.time,value:E.volume||Math.random()*1e6,color:E.close>=E.open?"#22c55e80":"#ef444480"}));l.current.setData(M),($=n.current)==null||$.timeScale().fitContent()}})(),g();const T=setInterval(g,5e3);return()=>clearInterval(T)},[t,a]);const x=[{label:"1m",value:"ONE_MINUTE"},{label:"5m",value:"FIVE_MINUTE"},{label:"15m",value:"FIFTEEN_MINUTE"},{label:"30m",value:"THIRTY_MINUTE"},{label:"1h",value:"ONE_HOUR"},{label:"1D",value:"ONE_DAY"}];return i.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-dark-600",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Chart"}),c&&i.jsx(he,{size:14,className:"animate-spin text-green-400"})]}),t&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:`font-medium ${t.isDemo?"text-purple-400":t.isCrypto?"text-orange-400":"text-green-400"}`,children:[t.symbol,t.isDemo&&i.jsx("span",{className:"ml-1 text-xs bg-purple-600 px-1 rounded",children:"DEMO"})]}),i.jsx("span",{className:"text-gray-400 text-sm",children:t.exchange}),d&&i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:`font-mono font-bold ${d.change>=0?"text-green-400":"text-red-400"}`,children:[t.isCrypto?"$":"",(N=d.ltp)==null?void 0:N.toLocaleString(void 0,t.isCrypto?{minimumFractionDigits:2,maximumFractionDigits:2}:{})]}),i.jsxs("span",{className:`text-sm ${d.change>=0?"text-green-400":"text-red-400"}`,children:[d.change>=0?"+":"",d.changePercent,"%"]})]})]})]}),t&&d&&i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[i.jsxs("span",{children:["O: ",t.isCrypto?"$":"",(j=d.open)==null?void 0:j.toLocaleString()]}),i.jsxs("span",{children:["H: ",t.isCrypto?"$":"",(k=d.high)==null?void 0:k.toLocaleString()]}),i.jsxs("span",{children:["L: ",t.isCrypto?"$":"",(C=d.low)==null?void 0:C.toLocaleString()]}),i.jsxs("span",{children:["C: ",t.isCrypto?"$":"",(w=d.close)==null?void 0:w.toLocaleString()]})]})]}),i.jsx("div",{className:"flex-1 relative",children:t?i.jsx("div",{ref:s,className:"w-full h-full"}):i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[i.jsx(Au,{size:48,className:"mb-4 opacity-30"}),i.jsx("p",{children:"Select an instrument to view chart"})]})}),t&&i.jsx("div",{className:"flex items-center gap-2 px-4 py-2 border-t border-dark-600 text-sm",children:x.map(S=>i.jsx("button",{onClick:()=>o(S.value),className:`px-3 py-1 rounded ${a===S.value?"bg-green-600 text-white":"hover:bg-dark-600 text-gray-400 hover:text-white"}`,children:S.label},S.value))})]})},Jk=({activeTab:t,setActiveTab:e,quickMode:s,setQuickMode:n,walletData:r})=>{const l=[{id:"positions",label:"Positions",count:0},{id:"pending",label:"Pending",count:0},{id:"history",label:"History",count:0}];return i.jsxs("div",{className:"h-48 bg-dark-800 border-t border-dark-600",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 border-b border-dark-600",children:[i.jsx("div",{className:"flex",children:l.map(a=>i.jsxs("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm border-b-2 transition ${t===a.id?"border-green-500 text-green-400":"border-transparent text-gray-400 hover:text-white"}`,children:[a.label," (",a.count,")"]},a.id))}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Quick"}),i.jsx("button",{onClick:()=>n(!s),className:`w-10 h-5 rounded-full transition ${s?"bg-green-500":"bg-dark-600"}`,children:i.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition transform ${s?"translate-x-5":"translate-x-0.5"}`})})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"P/L: "}),i.jsx("span",{className:"text-green-400 font-medium",children:"0.00"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-4 px-4 py-2 text-xs text-gray-400 border-b border-dark-700",children:[i.jsx("div",{children:"Symbol"}),i.jsx("div",{children:"Side"}),i.jsx("div",{className:"text-right",children:"Qty"}),i.jsx("div",{className:"text-right",children:"Entry"}),i.jsx("div",{className:"text-right",children:"LTP"}),i.jsx("div",{className:"text-right",children:"P&L"}),i.jsx("div",{className:"text-center",children:"Action"})]}),i.jsxs("div",{className:"flex items-center justify-center h-20 text-gray-400",children:[t==="positions"&&"No open positions",t==="pending"&&"No pending orders",t==="history"&&"No trade history"]})]})},Gk=({walletData:t,onOpenWallet:e})=>{var r,l,a,o,c,u,d;const[s,n]=b.useState("wallet");return i.jsxs("aside",{className:"w-72 bg-dark-800 border-l border-dark-600 flex flex-col",children:[i.jsx("div",{className:"flex border-b border-dark-600",children:["Wallet","Positions","Orders"].map(h=>i.jsx("button",{onClick:()=>n(h.toLowerCase()),className:`flex-1 px-2 py-2 text-sm ${s===h.toLowerCase()?"bg-green-600 text-white":"text-gray-400 hover:bg-dark-700"}`,children:h},h))}),s==="wallet"&&i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[i.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-900/30 to-dark-800 border-b border-dark-600",children:[i.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Available Margin"}),i.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["",((r=t==null?void 0:t.availableMargin)==null?void 0:r.toLocaleString())||((l=t==null?void 0:t.marginAvailable)==null?void 0:l.toLocaleString())||"0"]}),(t==null?void 0:t.rmsStatus)==="BLOCKED"&&i.jsxs("div",{className:"text-xs text-red-400 mt-1",children:[" Trading Blocked: ",t==null?void 0:t.rmsBlockReason]})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Wallet Breakdown"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Cash Balance"}),i.jsxs("span",{children:["",((a=t==null?void 0:t.cashBalance)==null?void 0:a.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Used Margin"}),i.jsxs("span",{className:"text-yellow-400",children:["",((o=t==null?void 0:t.usedMargin)==null?void 0:o.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Collateral"}),i.jsxs("span",{children:["",((c=t==null?void 0:t.collateralValue)==null?void 0:c.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"border-t border-dark-600 pt-3 mt-3",children:[i.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"P&L"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Unrealized P&L"}),i.jsxs("span",{className:(t==null?void 0:t.unrealizedPnL)>=0?"text-green-400":"text-red-400",children:[(t==null?void 0:t.unrealizedPnL)>=0?"+":"","",((u=t==null?void 0:t.unrealizedPnL)==null?void 0:u.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Realized P&L"}),i.jsxs("span",{className:(t==null?void 0:t.realizedPnL)>=0?"text-green-400":"text-red-400",children:[(t==null?void 0:t.realizedPnL)>=0?"+":"","",((d=t==null?void 0:t.realizedPnL)==null?void 0:d.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"flex justify-between text-sm mt-2 pt-2 border-t border-dark-700",children:[i.jsx("span",{className:"text-gray-400",children:"Today's P&L"}),i.jsxs("span",{className:((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)>=0?"text-green-400":"text-red-400",children:[((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)>=0?"+":"","",(((t==null?void 0:t.todayRealizedPnL)||0)+((t==null?void 0:t.todayUnrealizedPnL)||0)).toLocaleString()]})]})]})]}),i.jsx("div",{className:"p-4 border-t border-dark-600 mt-auto",children:i.jsx("button",{onClick:e,className:"w-full bg-green-600 hover:bg-green-700 py-2 rounded text-sm transition",children:"Add Funds"})})]}),s==="positions"&&i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:[i.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"text-gray-400",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsx("p",{className:"text-gray-400 text-sm",children:"No open positions"}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Enable Quick Trade to start trading"})]}),s==="orders"&&i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:[i.jsx("div",{className:"w-16 h-16 mb-4 opacity-30",children:i.jsx(F0,{size:48,className:"text-gray-400"})}),i.jsx("p",{className:"text-gray-400 text-sm",children:"No pending orders"})]})]})},Zk=({instrument:t,orderType:e,setOrderType:s,walletData:n,onClose:r,user:l})=>{var Xt,Zu,ed;const[a,o]=b.useState("1"),[c,u]=b.useState(""),[d,h]=b.useState(""),[f,y]=b.useState(""),[p,m]=b.useState(""),[v,g]=b.useState("MIS"),[x,N]=b.useState("MARKET"),[j,k]=b.useState(1),[C,w]=b.useState([1,2,5,10]),[S,T]=b.useState(null),[L,$]=b.useState({open:!0}),[M,E]=b.useState(!1),[P,F]=b.useState(""),[W,be]=b.useState("");b.useEffect(()=>{const q=async()=>{try{const[ft,Qt]=await Promise.all([z.get("/api/trading/leverages",{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}}),z.get("/api/trading/market-status",{params:{exchange:(t==null?void 0:t.exchange)||"NSE"}})]);w(ft.data.leverages||[1,2,5,10]),$(Qt.data)}catch(ft){console.error("Error fetching settings:",ft)}};l!=null&&l.token&&q()},[l==null?void 0:l.token,t==null?void 0:t.exchange]),b.useEffect(()=>{t!=null&&t.ltp&&(u(t.ltp.toString()),h(t.ltp.toString()))},[t]);const I=(t==null?void 0:t.segment)==="EQUITY"&&(t==null?void 0:t.instrumentType)==="STOCK";t==null||t.instrumentType;const U=(t==null?void 0:t.instrumentType)==="FUTURES",V=(t==null?void 0:t.instrumentType)==="OPTIONS",K=(t==null?void 0:t.optionType)==="CE",Z=(t==null?void 0:t.optionType)==="PE",Q=U||V,Ne=(()=>{var ft;if(t!=null&&t.lotSize&&t.lotSize>1)return t.lotSize;const q=((ft=t==null?void 0:t.category)==null?void 0:ft.toUpperCase())||"";return q.includes("NIFTY")&&!q.includes("BANK")&&!q.includes("FIN")&&!q.includes("MID")?25:q.includes("BANKNIFTY")?15:q.includes("FINNIFTY")?25:q.includes("MIDCPNIFTY")?50:q.includes("SENSEX")?10:1})(),R=Q?parseInt(a||0)*Ne:parseInt(a||0);b.useEffect(()=>{const ft=setTimeout(async()=>{if(!(!t||!a||!c))try{const{data:Qt}=await z.post("/api/trading/margin-preview",{symbol:t.symbol,exchange:t.exchange,segment:t.segment,instrumentType:t.instrumentType,optionType:t.optionType||null,strikePrice:t.strike||null,category:t.category,productType:v,side:e.toUpperCase(),quantity:R,lots:parseInt(a),lotSize:Ne,price:parseFloat(c),leverage:j},{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}});T(Qt)}catch(Qt){console.error("Margin preview error:",Qt)}},300);return()=>clearTimeout(ft)},[t,a,c,v,e,l,R,Ne,j]);const B=async()=>{var q,ft,Qt,td,sd;if(x==="MARKET"&&!L.open){F(L.reason||"Market is closed");return}if(S&&!S.canPlace){F(`Insufficient funds. Need ${(q=S.shortfall)==null?void 0:q.toLocaleString()} more`);return}E(!0),F(""),be("");try{const Wn={symbol:t.symbol,exchange:t.exchange,segment:t.segment,instrumentType:t.instrumentType,optionType:t.optionType||null,strike:t.strike||null,expiry:t.expiry||null,category:t.category,productType:v,orderType:x,side:e.toUpperCase(),quantity:R,lots:parseInt(a),lotSize:Ne,price:parseFloat(c),leverage:j,stopLoss:f?parseFloat(f):null,target:p?parseFloat(p):null};x==="LIMIT"&&(Wn.limitPrice=parseFloat(d)),(x==="SL"||x==="SL-M")&&(Wn.triggerPrice=parseFloat(d));const{data:nd}=await z.post("/api/trading/order",Wn,{headers:{Authorization:`Bearer ${l==null?void 0:l.token}`}}),Mx=((ft=nd.trade)==null?void 0:ft.status)==="PENDING"?`Order placed! Waiting for price to reach ${d}`:`Order executed! Margin: ${(Qt=nd.marginBlocked)==null?void 0:Qt.toLocaleString()}`;be(Mx),setTimeout(()=>{be(""),r()},2e3)}catch(Wn){F(((sd=(td=Wn.response)==null?void 0:td.data)==null?void 0:sd.message)||"Failed to place order")}finally{E(!1)}},H=()=>I?[{value:"CNC",label:"CNC (Delivery)",desc:"Hold for days/months"},{value:"MIS",label:"MIS (Intraday)",desc:"Square off same day"}]:U||V?[{value:"MIS",label:"MIS (Intraday)",desc:"Square off same day"},{value:"NRML",label:"NRML (Carry Forward)",desc:"Hold till expiry"}]:[{value:"MIS",label:"MIS",desc:"Intraday"}],te=()=>I?"EQUITY":U?"FUTURES":V?K?"CALL OPTION (CE)":"PUT OPTION (PE)":"UNKNOWN",nt=()=>{if(I)return e==="buy"?v==="CNC"?"Buy & hold shares in DEMAT":"Buy intraday, auto square-off at 3:15 PM":v==="MIS"?"Short sell intraday only":"Sell from holdings";if(U)return e==="buy"?"Profit if price goes UP":"Profit if price goes DOWN";if(V){if(K)return e==="buy"?"Bullish: Profit if price goes UP":"Bearish/Neutral: Collect premium";if(Z)return e==="buy"?"Bearish: Profit if price goes DOWN":"Bullish/Neutral: Collect premium"}return""};return i.jsxs("aside",{className:"w-80 bg-dark-800 border-l border-dark-600 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-600",children:[i.jsxs("div",{children:[i.jsx("div",{className:`font-bold ${K?"text-green-400":Z?"text-red-400":U?"text-yellow-400":""}`,children:t==null?void 0:t.symbol}),i.jsxs("div",{className:"text-xs text-gray-400",children:[t==null?void 0:t.exchange,"  ",te()]})]}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:i.jsx(ye,{size:20})})]}),i.jsxs("div",{className:"flex border-b border-dark-600",children:[i.jsx("button",{onClick:()=>s("buy"),className:`flex-1 py-3 font-semibold transition ${e==="buy"?"bg-blue-600 text-white":"bg-dark-700 text-gray-400"}`,children:"BUY"}),i.jsx("button",{onClick:()=>s("sell"),className:`flex-1 py-3 font-semibold transition ${e==="sell"?"bg-red-600 text-white":"bg-dark-700 text-gray-400"}`,children:"SELL"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.jsx("div",{className:`text-xs p-2 rounded ${e==="buy"?"bg-blue-900/30 text-blue-300":"bg-red-900/30 text-red-300"}`,children:nt()}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Product Type"}),i.jsx("div",{className:"space-y-2",children:H().map(q=>i.jsxs("button",{onClick:()=>g(q.value),className:`w-full text-left px-3 py-2 rounded border transition ${v===q.value?"border-green-500 bg-green-500/10":"border-dark-600 hover:border-dark-500"}`,children:[i.jsx("div",{className:"font-medium text-sm",children:q.label}),i.jsx("div",{className:"text-xs text-gray-500",children:q.desc})]},q.value))})]}),!L.open&&x==="MARKET"&&i.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-500 text-yellow-300 px-3 py-2 rounded text-sm",children:[" ",L.reason||"Market is closed",". Use LIMIT order instead."]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Order Type"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["MARKET","LIMIT","SL","SL-M"].map(q=>i.jsx("button",{onClick:()=>N(q),disabled:q==="MARKET"&&!L.open,className:`px-3 py-2 rounded text-sm transition ${x===q?"bg-green-600 text-white":q==="MARKET"&&!L.open?"bg-dark-700 text-gray-600 cursor-not-allowed":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:q},q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Leverage (Buying Power)"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(q=>i.jsxs("button",{onClick:()=>k(q),className:`px-3 py-1.5 rounded text-sm transition ${j===q?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[q,"x"]},q))}),j>1&&i.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:[j,"x leverage = ",j,"x buying power, ",j,"x risk"]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-xs text-gray-400 mb-2",children:[Q?"Lots":"Quantity"," ",Q&&i.jsxs("span",{className:"text-yellow-400",children:["(1 Lot = ",Ne," qty)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>o(Math.max(1,parseInt(a||1)-1).toString()),className:"w-10 h-10 bg-dark-600 hover:bg-dark-500 rounded text-xl font-bold",children:"-"}),i.jsx("input",{type:"number",value:a,onChange:q=>o(q.target.value),className:"flex-1 bg-dark-700 border border-dark-600 rounded px-3 py-2 text-center text-lg font-bold focus:outline-none focus:border-green-500",min:"1"}),i.jsx("button",{onClick:()=>o((parseInt(a||1)+1).toString()),className:"w-10 h-10 bg-dark-600 hover:bg-dark-500 rounded text-xl font-bold",children:"+"})]}),Q&&i.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[i.jsxs("span",{className:"text-gray-500",children:["Total Qty: ",i.jsx("span",{className:"text-white font-medium",children:R})]}),i.jsxs("span",{className:"text-gray-500",children:["Value: ",i.jsxs("span",{className:"text-white",children:["",(R*parseFloat(c||0)).toLocaleString()]})]})]}),Q&&i.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,5,10,20].map(q=>i.jsxs("button",{onClick:()=>o(q.toString()),className:`flex-1 py-1 text-xs rounded ${a===q.toString()?"bg-green-600":"bg-dark-600 hover:bg-dark-500"}`,children:[q,"L"]},q))})]}),(x==="LIMIT"||x==="SL")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:x==="LIMIT"?"Limit Price":"Trigger Price"}),i.jsx("input",{type:"number",value:d,onChange:q=>h(q.target.value),placeholder:x==="LIMIT"?"Enter limit price":"Enter trigger price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 focus:outline-none focus:border-green-500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x==="LIMIT"?`Order executes when price ${e==="buy"?"falls to":"rises to"} ${d||"..."}`:`Order triggers when price ${e==="buy"?"rises to":"falls to"} ${d||"..."}`})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Stop Loss (Optional)"}),i.jsx("input",{type:"number",value:f,onChange:q=>y(q.target.value),placeholder:"SL Price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-red-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Target (Optional)"}),i.jsx("input",{type:"number",value:p,onChange:q=>m(q.target.value),placeholder:"Target Price",className:"w-full bg-dark-700 border border-dark-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-green-500"})]})]}),(f||p)&&i.jsxs("div",{className:"text-xs text-gray-500",children:[f&&i.jsxs("span",{className:"text-red-400",children:["SL: ",f]}),f&&p&&" | ",p&&i.jsxs("span",{className:"text-green-400",children:["Target: ",p]})," - Auto exit when price hits"]}),P&&i.jsx("div",{className:"bg-red-900/30 border border-red-500 text-red-300 px-3 py-2 rounded text-sm",children:P}),W&&i.jsx("div",{className:"bg-green-900/30 border border-green-500 text-green-300 px-3 py-2 rounded text-sm",children:W}),i.jsxs("div",{className:"bg-dark-700 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Available Balance"}),i.jsxs("span",{className:"text-green-400",children:["",((Xt=S==null?void 0:S.availableBalance)==null?void 0:Xt.toLocaleString())||((Zu=n==null?void 0:n.availableMargin)==null?void 0:Zu.toLocaleString())||"0"]})]}),j>1&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Effective Buying Power"}),i.jsxs("span",{className:"text-purple-400",children:["",(((S==null?void 0:S.availableBalance)||0)*j).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Required Margin"}),i.jsxs("span",{className:(S==null?void 0:S.canPlace)===!1?"text-red-400":"",children:["",((ed=S==null?void 0:S.marginRequired)==null?void 0:ed.toLocaleString())||"--"]})]}),S&&!S.canPlace&&i.jsxs("div",{className:"text-xs text-red-400 mt-2",children:[" ",S.reason]}),V&&e==="sell"&&i.jsx("div",{className:"text-xs text-yellow-400 mt-2",children:" Option selling requires higher margin (SPAN + Exposure)"})]})]}),i.jsxs("div",{className:"p-4 border-t border-dark-600",children:[i.jsx("button",{onClick:B,disabled:M||S&&!S.canPlace,className:`w-full py-3 rounded-lg font-semibold transition ${e==="buy"?"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800":"bg-red-600 hover:bg-red-700 disabled:bg-red-800"} disabled:opacity-50 disabled:cursor-not-allowed`,children:M?"Placing Order...":`${e==="buy"?"BUY":"SELL"} ${t==null?void 0:t.symbol}`}),i.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:[v,"  ",x]})]})]})},eS=({selectedInstrument:t,onSelectInstrument:e,onBuySell:s,user:n,marketData:r={}})=>{const[l,a]=b.useState(["INDICES","NIFTY"]),[o,c]=b.useState(""),[u,d]=b.useState(""),[h,f]=b.useState([]),[y,p]=b.useState(!0),[m,v]=b.useState([]),g=b.useRef(null);b.useEffect(()=>{const w=setTimeout(()=>{d(o)},150);return()=>clearTimeout(w)},[o]),b.useEffect(()=>{if(u.length>=1){const w=u.toLowerCase(),S=h.filter(T=>{var L,$,M;return((L=T.symbol)==null?void 0:L.toLowerCase().includes(w))||(($=T.name)==null?void 0:$.toLowerCase().includes(w))||((M=T.category)==null?void 0:M.toLowerCase().includes(w))}).slice(0,50);v(S)}else v([])},[u,h]),b.useEffect(()=>{x()},[n==null?void 0:n.token]);const x=async()=>{try{p(!0);const w=n!=null&&n.token?"/api/instruments/user":"/api/instruments/public",S=n!=null&&n.token?{Authorization:`Bearer ${n.token}`}:{},{data:T}=await z.get(w,{headers:S});f(T||[])}catch{try{const{data:S}=await z.get("/api/instruments/public");f(S||[])}catch(S){console.error("Error fetching instruments:",S)}}finally{p(!1)}},N=w=>{a(S=>S.includes(w)?S.filter(T=>T!==w):[...S,w])},j=h.reduce((w,S)=>{const T=S.category||"OTHER";return w[T]||(w[T]=[]),w[T].push(S),w},{}),k=Object.keys(j).sort(),C=w=>{const S=r[w];return S?{ltp:S.ltp,change:S.change,changePercent:S.changePercent}:{ltp:0,change:0,changePercent:0}};return i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx("div",{className:"p-3 bg-dark-800 border-b border-dark-600",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),i.jsx("input",{ref:g,type:"text",placeholder:"Search NIFTY, BANKNIFTY...",value:o,onChange:w=>c(w.target.value),className:"w-full bg-dark-700 border border-dark-600 rounded-lg pl-10 pr-10 py-2 text-sm focus:outline-none focus:border-green-500"}),o&&i.jsx("button",{onClick:()=>{var w;c(""),(w=g.current)==null||w.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:i.jsx(ye,{size:16})})]})}),o.length>=1&&i.jsx("div",{className:"flex-1 overflow-y-auto",children:m.length===0?i.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:['No instruments found for "',o,'"']}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 bg-dark-700 sticky top-0",children:[m.length," results"]}),m.map(w=>{const S=C(w.token);return i.jsx(nr,{instrument:{...w,...S},isCall:w.optionType==="CE",isPut:w.optionType==="PE",isFuture:w.instrumentType==="FUTURES",onSelect:()=>{e({...w,...S}),c("")},onBuy:()=>s("buy",{...w,...S}),onSell:()=>s("sell",{...w,...S})},w._id)})]})}),!o&&i.jsx("div",{className:"flex-1 overflow-y-auto",children:y?i.jsxs("div",{className:"p-4 text-center text-gray-400",children:[i.jsx(he,{className:"animate-spin inline mr-2",size:16}),"Loading..."]}):k.length===0?i.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No instruments available"}):k.map(w=>{const S=j[w]||[],T=S.filter(E=>E.instrumentType==="FUTURES"),L=S.filter(E=>E.optionType==="CE"),$=S.filter(E=>E.optionType==="PE"),M=S.filter(E=>!E.optionType&&E.instrumentType!=="FUTURES");return i.jsxs("div",{className:"border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>N(w),className:"w-full flex items-center justify-between px-4 py-3 bg-dark-800 text-sm font-medium",children:[i.jsxs("span",{children:[w," (",S.length,")"]}),l.includes(w)?i.jsx(or,{size:18}):i.jsx(mn,{size:18})]}),l.includes(w)&&i.jsxs("div",{className:"bg-dark-900",children:[M.map(E=>{const P=C(E.token);return i.jsx(nr,{instrument:{...E,...P},onSelect:()=>e({...E,...P}),onBuy:()=>s("buy",{...E,...P}),onSell:()=>s("sell",{...E,...P})},E._id)}),T.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>N(`${w}-FUT`),className:"w-full flex items-center gap-2 px-4 py-2 text-xs text-blue-400 bg-dark-800",children:[l.includes(`${w}-FUT`)?i.jsx(or,{size:14}):i.jsx(mn,{size:14}),"Futures (",T.length,")"]}),l.includes(`${w}-FUT`)&&T.filter(E=>{var P;return(P=E.symbol)==null?void 0:P.toLowerCase().includes(o.toLowerCase())}).map(E=>{const P=C(E.token);return i.jsx(nr,{instrument:{...E,...P},isFuture:!0,onSelect:()=>e({...E,...P}),onBuy:()=>s("buy",{...E,...P}),onSell:()=>s("sell",{...E,...P})},E._id)})]}),L.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>N(`${w}-CE`),className:"w-full flex items-center gap-2 px-4 py-2 text-xs text-green-400 bg-dark-800",children:[l.includes(`${w}-CE`)?i.jsx(or,{size:14}):i.jsx(mn,{size:14}),"Calls CE (",L.length,")"]}),l.includes(`${w}-CE`)&&L.filter(E=>{var P;return(P=E.symbol)==null?void 0:P.toLowerCase().includes(o.toLowerCase())}).sort((E,P)=>(E.strike||0)-(P.strike||0)).map(E=>{const P=C(E.token);return i.jsx(nr,{instrument:{...E,...P},isCall:!0,onSelect:()=>e({...E,...P}),onBuy:()=>s("buy",{...E,...P}),onSell:()=>s("sell",{...E,...P})},E._id)})]}),$.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>N(`${w}-PE`),className:"w-full flex items-center gap-2 px-4 py-2 text-xs text-red-400 bg-dark-800",children:[l.includes(`${w}-PE`)?i.jsx(or,{size:14}):i.jsx(mn,{size:14}),"Puts PE (",$.length,")"]}),l.includes(`${w}-PE`)&&$.filter(E=>{var P;return(P=E.symbol)==null?void 0:P.toLowerCase().includes(o.toLowerCase())}).sort((E,P)=>(E.strike||0)-(P.strike||0)).map(E=>{const P=C(E.token);return i.jsx(nr,{instrument:{...E,...P},isPut:!0,onSelect:()=>e({...E,...P}),onBuy:()=>s("buy",{...E,...P}),onSell:()=>s("sell",{...E,...P})},E._id)})]})]})]},w)})})]})},nr=({instrument:t,isCall:e,isPut:s,isFuture:n,onSelect:r,onBuy:l,onSell:a})=>{const o=t.ltp||0,c=t.change||0,u=t.changePercent||0;return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-700",children:[i.jsxs("div",{className:"flex-1",onClick:r,children:[i.jsx("div",{className:`font-medium text-sm ${e?"text-green-400":s?"text-red-400":n?"text-blue-400":""}`,children:t.symbol}),i.jsxs("div",{className:"text-xs text-gray-500",children:[t.exchange," ",t.strike?` ${t.strike}`:""]})]}),i.jsxs("div",{className:"text-right mr-3",onClick:r,children:[i.jsx("div",{className:`font-mono text-sm ${c>=0?"text-green-400":"text-red-400"}`,children:o>0?`${o.toLocaleString()}`:"--"}),i.jsx("div",{className:`text-xs ${c>=0?"text-green-400":"text-red-400"}`,children:u?`${c>=0?"+":""}${parseFloat(u).toFixed(2)}%`:"--"})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:l,className:"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 rounded font-medium",children:"B"}),i.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs bg-red-600 hover:bg-red-700 rounded font-medium",children:"S"})]})]})},tS=({selectedInstrument:t,onBuySell:e,onBack:s,marketData:n={}})=>{var u;const r=b.useRef(null),l=b.useRef(null),a=b.useRef(null),o=b.useRef(null),c=t!=null&&t.token&&n[t.token]?n[t.token]:null;return b.useEffect(()=>{if(!r.current||!t)return;const d=mx(r.current,{layout:{background:{color:"#111111"},textColor:"#d1d5db"},grid:{vertLines:{color:"#1f1f1f"},horzLines:{color:"#1f1f1f"}},rightPriceScale:{borderColor:"#2a2a2a"},timeScale:{borderColor:"#2a2a2a",timeVisible:!0}});l.current=d;const h=d.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#22c55e",wickDownColor:"#ef4444",wickUpColor:"#22c55e"});a.current=h;const f=t.ltp||100,y=[],p=Math.floor(Date.now()/1e3);for(let v=100;v>=0;v--){const g=p-v*900,x=f*.01,N=f+(Math.random()-.5)*x,j=N+(Math.random()-.5)*x,k=Math.max(N,j)+Math.random()*x*.3,C=Math.min(N,j)-Math.random()*x*.3;y.push({time:g,open:N,high:k,low:C,close:j})}h.setData(y),o.current=y[y.length-1];const m=()=>{r.current&&d.applyOptions({width:r.current.clientWidth,height:r.current.clientHeight})};return window.addEventListener("resize",m),m(),()=>{window.removeEventListener("resize",m),d.remove()}},[t]),b.useEffect(()=>{if(a.current&&o.current&&(c!=null&&c.ltp)){const d=Math.floor(Date.now()/1e3),h=Math.floor(d/900)*900;if(o.current.time===h){const f={time:h,open:o.current.open,high:Math.max(o.current.high,c.ltp),low:Math.min(o.current.low,c.ltp),close:c.ltp};o.current=f,a.current.update(f)}else{const f={time:h,open:c.ltp,high:c.ltp,low:c.ltp,close:c.ltp};o.current=f,a.current.update(f)}}},[c]),i.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-600",children:[i.jsx("button",{onClick:s,className:"text-gray-400",children:i.jsx(mn,{size:20,className:"rotate-180"})}),t?i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-medium text-green-400",children:t.symbol}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[i.jsx("span",{className:"text-gray-400",children:t.exchange}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:`font-mono font-bold ${c.change>=0?"text-green-400":"text-red-400"}`,children:["",(u=c.ltp)==null?void 0:u.toLocaleString()]}),i.jsxs("span",{className:`${c.change>=0?"text-green-400":"text-red-400"}`,children:[c.change>=0?"+":"",parseFloat(c.changePercent||0).toFixed(2),"%"]})]})]})]}):i.jsx("span",{className:"text-gray-400",children:"Select Instrument"}),i.jsx("div",{className:"w-5"})]}),i.jsx("div",{className:"flex-1 relative",children:t?i.jsx("div",{ref:r,className:"w-full h-full"}):i.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[i.jsx(he,{size:40,className:"mb-4 opacity-30"}),i.jsx("p",{className:"text-sm",children:"Select an instrument"})]})}),t&&i.jsx("div",{className:"flex items-center justify-center gap-2 px-4 py-2 border-t border-dark-600",children:["1m","5m","15m","1h","1d"].map(d=>i.jsx("button",{className:"px-3 py-1 text-sm text-gray-400 hover:bg-dark-600 rounded",children:d},d))}),t&&i.jsxs("div",{className:"flex gap-3 p-4 border-t border-dark-600",children:[i.jsx("button",{onClick:()=>e("buy",t),className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold",children:"BUY"}),i.jsx("button",{onClick:()=>e("sell",t),className:"flex-1 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold",children:"SELL"})]})]})},Ff=({activeTab:t})=>{const[e,s]=b.useState(t);return i.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[i.jsx("div",{className:"flex border-b border-dark-600",children:["positions","pending","history"].map(n=>i.jsx("button",{onClick:()=>s(n),className:`flex-1 py-3 text-sm capitalize ${e===n?"text-green-400 border-b-2 border-green-500":"text-gray-400"}`,children:n},n))}),i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ut,{size:48,className:"mx-auto mb-4 opacity-30"}),i.jsxs("p",{children:["No ",e==="positions"?"open positions":e==="pending"?"pending orders":"trade history"]})]})})]})},sS=({user:t,walletData:e,onLogout:s})=>{var n,r,l;return i.jsxs("div",{className:"flex-1 flex flex-col bg-dark-800",children:[i.jsxs("div",{className:"p-6 text-center border-b border-dark-600",children:[i.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx($0,{size:48})}),i.jsx("h2",{className:"text-xl font-bold",children:(t==null?void 0:t.fullName)||(t==null?void 0:t.username)}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["@",t==null?void 0:t.username]})]}),i.jsx("div",{className:"p-4 border-b border-dark-600",children:i.jsxs("div",{className:"bg-dark-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Wallet Balance"}),i.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["",((r=(n=e==null?void 0:e.wallet)==null?void 0:n.balance)==null?void 0:r.toLocaleString())||"0.00"]}),i.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Margin: ",((l=e==null?void 0:e.marginAvailable)==null?void 0:l.toLocaleString())||"0.00"]})]})}),i.jsxs("div",{className:"flex-1 p-4",children:[i.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[i.jsx(xs,{size:20,className:"text-gray-400"}),i.jsx("span",{children:"Settings"})]}),i.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[i.jsx(xc,{size:20,className:"text-gray-400"}),i.jsx("span",{children:"Notifications"})]}),i.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-dark-700 rounded-lg text-left",children:[i.jsx(UN,{size:20,className:"text-gray-400"}),i.jsx("span",{children:"Transaction History"})]})]}),i.jsx("div",{className:"p-4 border-t border-dark-600",children:i.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-medium",children:[i.jsx(Wr,{size:20}),"Logout"]})})]})},nS=({onClose:t,walletData:e,user:s,onRefresh:n})=>{var T,L,$,M;const[r,l]=b.useState("deposit"),[a,o]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(""),[f,y]=b.useState(!1),[p,m]=b.useState(null),[v,g]=b.useState(null),[x,N]=b.useState(null);b.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:E}=await z.get("/api/user-funds/admin-bank-accounts",{headers:{Authorization:`Bearer ${s.token}`}}),P=E.find(W=>W.type==="BANK"&&W.isPrimary)||E.find(W=>W.type==="BANK"),F=E.find(W=>W.type==="UPI"&&W.isPrimary)||E.find(W=>W.type==="UPI");N({bankName:(P==null?void 0:P.bankName)||"Not configured",accountName:(P==null?void 0:P.holderName)||"Not configured",accountNumber:(P==null?void 0:P.accountNumber)||"Not configured",ifscCode:(P==null?void 0:P.ifsc)||"Not configured",upiId:(F==null?void 0:F.upiId)||"Not configured",upiName:(F==null?void 0:F.holderName)||"Not configured"})}catch(E){console.error("Error fetching bank details:",E);try{const{data:P}=await z.get("/api/user/bank-details",{headers:{Authorization:`Bearer ${s.token}`}});N(P)}catch{N({bankName:"Not configured",accountName:"Contact your admin",accountNumber:"",ifscCode:"",upiId:""})}}},k=(E,P)=>{navigator.clipboard.writeText(E),g(P),setTimeout(()=>g(null),2e3)},C=async()=>{var E,P;if(!a||parseFloat(a)<=0){m({type:"error",text:"Please enter a valid amount"});return}if(!c){m({type:"error",text:"Please enter UTR/Transaction ID"});return}y(!0);try{await z.post("/api/user/deposit-request",{amount:parseFloat(a),utrNumber:c,paymentMethod:"BANK"},{headers:{Authorization:`Bearer ${s.token}`}}),m({type:"success",text:"Deposit request submitted! It will be verified shortly."}),o(""),u(""),n&&n()}catch(F){m({type:"error",text:((P=(E=F.response)==null?void 0:E.data)==null?void 0:P.message)||"Failed to submit deposit request"})}finally{y(!1)}},w=async()=>{var E,P,F;if(!a||parseFloat(a)<=0){m({type:"error",text:"Please enter a valid amount"});return}if(parseFloat(a)>(((E=e==null?void 0:e.wallet)==null?void 0:E.balance)||0)){m({type:"error",text:"Insufficient balance"});return}y(!0);try{await z.post("/api/user/withdraw-request",{amount:parseFloat(a),accountDetails:d},{headers:{Authorization:`Bearer ${s.token}`}}),m({type:"success",text:"Withdrawal request submitted! It will be processed shortly."}),o(""),h(""),n&&n()}catch(W){m({type:"error",text:((F=(P=W.response)==null?void 0:P.data)==null?void 0:F.message)||"Failed to submit withdrawal request"})}finally{y(!1)}},S=[500,1e3,2e3,5e3,1e4,25e3];return i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-end md:items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 w-full md:w-[480px] md:rounded-xl rounded-t-xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ut,{className:"text-green-400",size:24}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:"Wallet"}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Balance: ",i.jsxs("span",{className:"text-green-400 font-medium",children:["",((L=(T=e==null?void 0:e.wallet)==null?void 0:T.balance)==null?void 0:L.toLocaleString())||"0"]})]})]})]}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white p-1",children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"flex border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>{l("deposit"),m(null)},className:`flex-1 py-3 font-medium flex items-center justify-center gap-2 ${r==="deposit"?"text-green-400 border-b-2 border-green-400":"text-gray-400 hover:text-white"}`,children:[i.jsx(Ml,{size:18}),"Deposit"]}),i.jsxs("button",{onClick:()=>{l("withdraw"),m(null)},className:`flex-1 py-3 font-medium flex items-center justify-center gap-2 ${r==="withdraw"?"text-red-400 border-b-2 border-red-400":"text-gray-400 hover:text-white"}`,children:[i.jsx(Ll,{size:18}),"Withdraw"]})]}),p&&i.jsx("div",{className:`mx-4 mt-4 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-900/50 text-green-400":"bg-red-900/50 text-red-400"}`,children:p.text}),r==="deposit"&&i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx(Vr,{size:16}),"Transfer to Bank Account"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Bank Name"}),i.jsx("span",{className:"font-medium",children:(x==null?void 0:x.bankName)||"--"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Account Name"}),i.jsx("span",{className:"font-medium",children:(x==null?void 0:x.accountName)||"--"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Account Number"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono font-medium",children:(x==null?void 0:x.accountNumber)||"--"}),i.jsx("button",{onClick:()=>k(x==null?void 0:x.accountNumber,"account"),className:"text-gray-400 hover:text-white",children:v==="account"?i.jsx(Va,{size:14,className:"text-green-400"}):i.jsx(Wa,{size:14})})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"IFSC Code"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono font-medium",children:(x==null?void 0:x.ifscCode)||"--"}),i.jsx("button",{onClick:()=>k(x==null?void 0:x.ifscCode,"ifsc"),className:"text-gray-400 hover:text-white",children:v==="ifsc"?i.jsx(Va,{size:14,className:"text-green-400"}):i.jsx(Wa,{size:14})})]})]})]})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx(zs,{size:16}),"Or Pay via UPI"]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-mono text-lg",children:(x==null?void 0:x.upiId)||"--"}),i.jsxs("button",{onClick:()=>k(x==null?void 0:x.upiId,"upi"),className:"px-3 py-1 bg-dark-600 hover:bg-dark-500 rounded text-sm flex items-center gap-1",children:[v==="upi"?i.jsx(Va,{size:14,className:"text-green-400"}):i.jsx(Wa,{size:14}),v==="upi"?"Copied!":"Copy"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Amount ()"}),i.jsx("input",{type:"number",value:a,onChange:E=>o(E.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.map(E=>i.jsxs("button",{onClick:()=>o(E.toString()),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm",children:["",E.toLocaleString()]},E))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"UTR / Transaction ID"}),i.jsx("input",{type:"text",value:c,onChange:E=>u(E.target.value),placeholder:"Enter UTR or Transaction ID after payment",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500"})]}),i.jsxs("button",{onClick:C,disabled:f,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[f?i.jsx(he,{size:18,className:"animate-spin"}):i.jsx(Ml,{size:18}),"Submit Deposit Request"]})]}),r==="withdraw"&&i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Available for Withdrawal"}),i.jsxs("p",{className:"text-3xl font-bold text-green-400 mt-1",children:["",((M=($=e==null?void 0:e.wallet)==null?void 0:$.balance)==null?void 0:M.toLocaleString())||"0"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Withdrawal Amount ()"}),i.jsx("input",{type:"number",value:a,onChange:E=>o(E.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-red-500"}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[S.map(E=>i.jsxs("button",{onClick:()=>o(E.toString()),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm",children:["",E.toLocaleString()]},E)),i.jsx("button",{onClick:()=>{var E;return o((((E=e==null?void 0:e.wallet)==null?void 0:E.balance)||0).toString())},className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 rounded text-sm text-green-400",children:"Max"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Bank Account / UPI ID"}),i.jsx("textarea",{value:d,onChange:E=>h(E.target.value),placeholder:"Enter your bank account details or UPI ID",rows:3,className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500 resize-none"})]}),i.jsxs("button",{onClick:w,disabled:f,className:"w-full py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 rounded-lg font-semibold flex items-center justify-center gap-2",children:[f?i.jsx(he,{size:18,className:"animate-spin"}):i.jsx(Ll,{size:18}),"Submit Withdrawal Request"]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Withdrawals are processed within 24-48 hours"})]})]})})},rS=({instrument:t,orderType:e,setOrderType:s,onClose:n,walletData:r})=>{var m,v;const[l,a]=b.useState("1"),[o,c]=b.useState(""),[u,d]=b.useState("MIS"),[h,f]=b.useState("MARKET"),y=(t==null?void 0:t.segment)==="FNO"||(t==null?void 0:t.instrumentType)==="OPTIONS"||(t==null?void 0:t.instrumentType)==="FUTURES";(t==null?void 0:t.segment)==="EQUITY"||(t==null||t.instrumentType);const p=y?[{value:"MIS",label:"Intraday",desc:"Square off same day"},{value:"NRML",label:"Carry Forward",desc:"Hold overnight"}]:[{value:"MIS",label:"Intraday",desc:"Square off same day"},{value:"CNC",label:"Delivery",desc:"Hold in demat"}];return i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-end md:items-center justify-center z-50",children:i.jsxs("div",{className:"bg-dark-800 w-full md:w-[420px] md:rounded-xl rounded-t-xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:(t==null?void 0:t.symbol)||"Select Instrument"}),i.jsxs("p",{className:"text-xs text-gray-400",children:[t==null?void 0:t.exchange,"  ",(t==null?void 0:t.segment)||"EQUITY",(t==null?void 0:t.instrumentType)==="OPTIONS"&&`  ${t==null?void 0:t.optionType}`]})]}),i.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1",children:i.jsx(ye,{size:24})})]}),i.jsxs("div",{className:"flex p-3 gap-2",children:[i.jsx("button",{onClick:()=>s("buy"),className:`flex-1 py-3 rounded-lg font-bold text-lg transition ${e==="buy"?"bg-green-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"BUY"}),i.jsx("button",{onClick:()=>s("sell"),className:`flex-1 py-3 rounded-lg font-bold text-lg transition ${e==="sell"?"bg-red-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"SELL"})]}),i.jsxs("div",{className:"px-4 pb-3",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Product Type"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(g=>i.jsxs("button",{onClick:()=>d(g.value),className:`p-3 rounded-lg border-2 text-left transition ${u===g.value?"border-green-500 bg-green-500/10":"border-dark-600 bg-dark-700 hover:border-dark-500"}`,children:[i.jsx("div",{className:"font-semibold text-sm",children:g.label}),i.jsx("div",{className:"text-xs text-gray-500",children:g.desc})]},g.value))})]}),i.jsxs("div",{className:"px-4 pb-3",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Order Type"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>f("MARKET"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${h==="MARKET"?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Market"}),i.jsx("button",{onClick:()=>f("LIMIT"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition ${h==="LIMIT"?"bg-purple-600 text-white":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:"Limit"})]})]}),i.jsxs("div",{className:"p-4 pt-0 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Quantity ",(t==null?void 0:t.lotSize)>1&&`(Lot Size: ${t.lotSize})`]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>a(Math.max(1,parseInt(l)-1).toString()),className:"px-4 py-3 bg-dark-700 rounded-lg hover:bg-dark-600 font-bold",children:""}),i.jsx("input",{type:"number",value:l,onChange:g=>a(g.target.value),className:"flex-1 bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 text-center text-lg font-bold focus:outline-none focus:border-green-500",min:"1"}),i.jsx("button",{onClick:()=>a((parseInt(l)+1).toString()),className:"px-4 py-3 bg-dark-700 rounded-lg hover:bg-dark-600 font-bold",children:"+"})]})]}),h==="LIMIT"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Limit Price"}),i.jsx("input",{type:"number",value:o,onChange:g=>c(g.target.value),placeholder:"Enter price",className:"w-full bg-dark-700 border border-dark-600 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500",step:"0.05"})]}),i.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Last Traded Price"}),i.jsxs("span",{className:"text-xl font-bold",children:["",((m=t==null?void 0:t.ltp)==null?void 0:m.toLocaleString())||"--"]})]})}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Available Margin"}),i.jsxs("span",{className:"text-green-400 font-medium",children:["",((v=r==null?void 0:r.marginAvailable)==null?void 0:v.toLocaleString())||"0"]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Required Margin"}),i.jsxs("span",{className:"font-medium",children:["",(((t==null?void 0:t.ltp)||0)*parseInt(l||1)*((t==null?void 0:t.lotSize)||1)/(u==="MIS"?5:1)).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-sm border-t border-dark-600 pt-2",children:[i.jsx("span",{className:"text-gray-400",children:"Order Value"}),i.jsxs("span",{className:"font-medium",children:["",(((t==null?void 0:t.ltp)||0)*parseInt(l||1)*((t==null?void 0:t.lotSize)||1)).toLocaleString()]})]})]}),i.jsxs("button",{className:`w-full py-4 rounded-lg font-bold text-lg transition ${e==="buy"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:[e==="buy"?"BUY":"SELL"," ",t==null?void 0:t.symbol,i.jsxs("span",{className:"ml-2 text-sm opacity-80",children:["(",u==="MIS"?"Intraday":u==="NRML"?"Carry Forward":"Delivery",")"]})]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:u==="MIS"?"Intraday position will be auto squared-off before market close":u==="NRML"?"Position will be carried forward to next trading day":"Shares will be delivered to your demat account (T+1)"})]})]})})};function Df(){const t=[],e=new Date;let s=984;for(let n=100;n>=0;n--){const r=new Date(e.getTime()-n*6e4),l=s+(Math.random()-.5)*2,a=l+(Math.random()-.5)*2,o=Math.max(l,a)+Math.random()*1,c=Math.min(l,a)-Math.random()*1;t.push({time:Math.floor(r.getTime()/1e3),open:l,high:o,low:c,close:a}),s=a}return t}const iS=()=>i.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[i.jsxs("header",{className:"flex items-center justify-between px-8 py-4 border-b border-dark-600 bg-dark-800/50 backdrop-blur-sm fixed w-full z-50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ct,{className:"w-8 h-8 text-green-500"}),i.jsx("span",{className:"text-xl font-bold",children:"NTrader"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(Me,{to:"/login",className:"px-4 py-2 text-gray-300 hover:text-white transition",children:"Login"}),i.jsx(Me,{to:"/login?register=true",className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition",children:"Create Account"})]})]}),i.jsx("main",{className:"flex-1 pt-20",children:i.jsxs("div",{className:"relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0",children:[i.jsx("div",{className:"absolute top-20 left-1/4 w-96 h-96 bg-green-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-20 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center px-8 py-20",children:[i.jsx("div",{className:"flex items-center gap-2 mb-6",children:i.jsx(I0,{className:"w-12 h-12 text-green-500"})}),i.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-center bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent",children:"Professional Trading Platform"}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 text-center max-w-2xl",children:"Trade NSE, BSE, MCX with advanced charting, real-time data, and powerful tools"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-16",children:[i.jsxs(Me,{to:"/login?register=true",className:"flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-xl font-semibold transition shadow-lg shadow-green-500/25",children:[i.jsx(ct,{size:20}),"Create Account",i.jsx(DN,{size:18})]}),i.jsx(Me,{to:"/login",className:"flex items-center justify-center gap-2 px-8 py-4 bg-dark-700 hover:bg-dark-600 border border-dark-500 rounded-xl font-semibold transition",children:"Already have an account? Login"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl w-full",children:[i.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[i.jsx(U0,{className:"w-10 h-10 text-yellow-500 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Fast Execution"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Lightning fast order execution with minimal latency"})]}),i.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[i.jsx(B0,{className:"w-10 h-10 text-green-500 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Advanced Charts"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"TradingView powered charts with all indicators"})]}),i.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[i.jsx(Hr,{className:"w-10 h-10 text-blue-500 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Secure Trading"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Bank-grade security for your funds and data"})]}),i.jsxs("div",{className:"bg-dark-800/50 backdrop-blur-sm border border-dark-600 p-6 rounded-xl hover:border-green-500/50 transition",children:[i.jsx(Ur,{className:"w-10 h-10 text-purple-500 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Segments"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"NSE, BSE, MCX - Equity, F&O, Commodities"})]})]}),i.jsxs("div",{className:"mt-16 text-center",children:[i.jsx("p",{className:"text-gray-500 mb-4",children:"Supported Exchanges"}),i.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:["NSE Equity","BSE Equity","NSE F&O","BSE F&O","MCX"].map(t=>i.jsx("span",{className:"px-4 py-2 bg-dark-700 rounded-lg text-sm text-gray-300",children:t},t))})]})]})]})}),i.jsxs("footer",{className:"text-center py-6 text-gray-500 border-t border-dark-600 bg-dark-800/50",children:[i.jsx("p",{children:" 2024 NTrader. All rights reserved."}),i.jsxs("div",{className:"flex justify-center gap-6 mt-2 text-sm",children:[i.jsx(Me,{to:"/login",className:"hover:text-green-400 transition",children:"Login"}),i.jsx("span",{className:"hover:text-gray-400 transition cursor-default",children:"Terms"}),i.jsx("span",{className:"hover:text-gray-400 transition cursor-default",children:"Privacy"})]})]})]}),lS=({children:t})=>{const{admin:e,loading:s}=fe();return s?i.jsx("div",{className:"flex items-center justify-center h-screen bg-dark-900",children:"Loading..."}):e?t:i.jsx(u0,{to:"/admin/login"})},aS=({children:t})=>{const{user:e,loading:s}=fe();return s?i.jsx("div",{className:"flex items-center justify-center h-screen bg-dark-900",children:"Loading..."}):e?t:i.jsx(u0,{to:"/login"})};function oS(){return i.jsx($N,{children:i.jsx(rb,{children:i.jsxs(d0,{children:[i.jsx(pe,{path:"/",element:i.jsx(iS,{})}),i.jsx(pe,{path:"/login",element:i.jsx(vw,{})}),i.jsx(pe,{path:"/admin/login",element:i.jsx(HN,{})}),i.jsx(pe,{path:"/admin/*",element:i.jsx(lS,{children:i.jsx(qN,{})})}),i.jsx(pe,{path:"/dashboard/*",element:i.jsx(aS,{children:i.jsx(Yk,{})})})]})})})}mo.createRoot(document.getElementById("root")).render(i.jsx(Gf.StrictMode,{children:i.jsx(oS,{})}));
